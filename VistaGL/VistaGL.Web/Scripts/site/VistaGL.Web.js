/// <reference path="../_q/_q.d.ts" />
var _Ext;
(function (_Ext) {
    var GridBase = (function (_super) {
        __extends(GridBase, _super);
        function GridBase(container, options) {
            var _this = _super.call(this, container, options) || this;
            _this.isAutosized = false;
            _this.isChildGrid = false;
            _this.nextRowNumber = 1;
            _this.rowSelection = new Serenity.GridRowSelectionMixin(_this);
            _this.slickContainer.fadeTo(0, 0);
            return _this;
        }
        GridBase.prototype.get_ExtGridOptions = function () { return q.DefaultMainGridOptions; };
        GridBase.prototype.markupReady = function () {
            var _this = this;
            _super.prototype.markupReady.call(this);
            setTimeout(function () {
                if (_this.isAutosized == false) {
                    if (_this.get_ExtGridOptions().AutoColumnSize == true) {
                        _this.resizeAllCulumn();
                    }
                    _this.slickContainer.fadeTo(100, 1);
                }
            }, 100);
        };
        GridBase.prototype.getButtons = function () {
            var _this = this;
            var buttons = _super.prototype.getButtons.call(this);
            var reportRequest = this.getReportRequest();
            if (reportRequest.ListExcelServiceMethodName) {
                buttons.push(_Ext.ExcelExportHelper.createToolButton({
                    grid: this,
                    service: this.getService() + '/' + reportRequest.ListExcelServiceMethodName,
                    onViewSubmit: function () { return _this.onViewSubmit(); },
                    separator: true
                }));
            }
            if (reportRequest.ReportKey) {
                buttons.push({
                    title: 'Export to PDF',
                    icon: 'fa fa-file-pdf-o',
                    onClick: function () {
                        _Ext.ReportHelper.execute({ reportKey: reportRequest.ReportKey, params: { request: _this.getReportRequest() } });
                    }
                });
                buttons.push({
                    title: 'View as Report',
                    icon: 'fa fa-html5',
                    onClick: function () {
                        _Ext.ReportHelper.execute({ reportKey: reportRequest.ReportKey, params: { request: _this.getReportRequest() }, extension: 'html' });
                    }
                });
            }
            else if (reportRequest.ReportServiceMethodName) {
                buttons.push({
                    title: 'View as Report',
                    icon: 'fa fa-eye',
                    onClick: function () {
                        Q.postToService({ service: Q.resolveUrl(_this.getService() + '/' + reportRequest.ReportServiceMethodName), request: _this.getReportRequest(), target: '_blank' });
                    }
                });
            }
            else {
                buttons.push(_Ext.PdfExportHelper.createToolButton({
                    grid: this,
                    tableOptions: { theme: 'grid' },
                    onViewSubmit: function () { return _this.onViewSubmit(); }
                }));
            }
            return buttons;
        };
        GridBase.prototype.getReportRequest = function () {
            var view = this.getView();
            var request = Q.deepClone(view ? view.params : {}); //as _Ext.ReportRequest;
            request.ReportServiceMethodName = null; // if some value found in this property then "view as report" button will appear
            request.ReportKey = null; // if some value found in this property then "export to pdf" button will appear
            request.ListExcelServiceMethodName = null; // if some value found in this property then "export to xls" button will appear
            request.EqualityFilterWithTextValue = {};
            if (view) {
                var quickFilters = this.getQuickFilters();
                for (var _i = 0, quickFilters_1 = quickFilters; _i < quickFilters_1.length; _i++) {
                    var quickFilter = quickFilters_1[_i];
                    var filterValue = request.EqualityFilter[quickFilter.field];
                    if (filterValue && filterValue.length > 0) {
                        if (quickFilter.options.lookupKey) {
                            var lookup = Q.getLookup(quickFilter.options.lookupKey);
                            request.EqualityFilterWithTextValue[quickFilter.title] = lookup.itemById[filterValue][lookup.textField];
                        }
                        else if (quickFilter.options.enumKey) {
                            var enumKey = quickFilter.options.enumKey;
                            var enumValue = Q.toId(filterValue);
                            request.EqualityFilterWithTextValue[quickFilter.title] = Serenity.EnumFormatter.format(Serenity.EnumTypeRegistry.get(enumKey), enumValue);
                        }
                        else {
                            request.EqualityFilterWithTextValue[quickFilter.title] = filterValue;
                        }
                    }
                    else if (quickFilter.type == Serenity.DateEditor) {
                        var qf = this.findQuickFilter(Serenity.DateEditor, quickFilter.field);
                        var dateFrom = qf.element.val();
                        var dateTo = qf.element.siblings('input').val();
                        var filterText = '';
                        if (!Q.isEmptyOrNull(dateFrom))
                            filterText = 'From ' + dateFrom;
                        if (!Q.isEmptyOrNull(dateTo))
                            filterText = filterText + ' To ' + dateTo;
                        if (!Q.isEmptyOrNull(filterText)) {
                            request.EqualityFilterWithTextValue[quickFilter.title] = filterText;
                        }
                        else if (this.get_ExtGridOptions().ShowAnyInEqualityFilterWithTextValue == true) {
                            request.EqualityFilterWithTextValue[quickFilter.title] = 'all';
                        }
                    }
                    else if (this.get_ExtGridOptions().ShowAnyInEqualityFilterWithTextValue == true) {
                        request.EqualityFilterWithTextValue[quickFilter.title] = 'all';
                    }
                }
            }
            return request;
        };
        GridBase.prototype.getColumns = function () {
            var _this = this;
            var columns = _super.prototype.getColumns.call(this);
            var isEditable = this.getSlickOptions().editable;
            var extOptions = this.get_ExtGridOptions();
            columns.forEach(function (c) {
                if (extOptions.AutoColumnSize == true) {
                    c.width = c.minWidth || c.width || 50;
                    c.cssClass = c.cssClass || '';
                    if (c.sourceItem) {
                        if (c.sourceItem.filteringType == "Lookup") {
                            c.cssClass += ' align-left';
                            if (c.sourceItem.editorType == "Lookup" && !c.sourceItem.editorParams.autoComplete) {
                                c.lookup = Q.getLookup(c.sourceItem.editorParams.lookupKey);
                                c.formatter = function (row, cell, value, columnDef, dataContext) {
                                    var item = columnDef.lookup.itemById[value];
                                    if (item)
                                        return item[columnDef.lookup.textField];
                                    else
                                        return '-';
                                };
                            }
                            c.width = c.minWidth > 100 ? c.minWidth : 100;
                        }
                        else if (c.sourceItem.formatterType == "Enum") {
                            //c.cssClass += ' align-center';
                            c.formatter = function (row, cell, value, columnDef, dataContext) {
                                var enumKey = columnDef.sourceItem.editorParams.enumKey;
                                var text = Serenity.EnumFormatter.format(Serenity.EnumTypeRegistry.get(enumKey), Q.toId(value));
                                if (text)
                                    return text;
                                else
                                    return '-';
                            };
                        }
                        else if (c.sourceItem.formatterType == "Date") {
                            c.cssClass += ' align-center';
                            c.width = c.minWidth > 99 ? c.minWidth : 99;
                        }
                        else if (c.sourceItem.formatterType == "DateTime") {
                            c.cssClass += ' align-center';
                            c.width = c.minWidth > 140 ? c.minWidth : 140;
                        }
                        else if (c.sourceItem.formatterType == "Number") {
                            c.cssClass += ' align-right';
                            if (c.sourceItem.editorType == "Decimal") {
                                var formatSrt_1 = '#,##0.00';
                                if (c.sourceItem.editorParams) {
                                    var decimals = c.sourceItem.editorParams['decimals'];
                                    if (decimals) {
                                        formatSrt_1 = '#,##0.';
                                        for (var i = 0; i < decimals; i++) {
                                            formatSrt_1 += '0';
                                        }
                                    }
                                    else if (c.sourceItem.editorParams['minValue']) {
                                        var splitedMinValue = c.sourceItem.editorParams['minValue'].split('.');
                                        if (splitedMinValue.length > 1) {
                                            formatSrt_1 = '#,##0.' + splitedMinValue[1];
                                        }
                                        else {
                                            formatSrt_1 = '#,##0';
                                        }
                                    }
                                }
                                c.format = function (ctx) { return Serenity.NumberFormatter.format(ctx.value, formatSrt_1); };
                            }
                        }
                        else if (c.sourceItem.formatterType == "Checkbox") {
                            c.cssClass += ' align-center';
                        }
                        else {
                            c.cssClass += ' align-left';
                            c.width = c.minWidth > 99 ? c.minWidth : 99;
                        }
                    }
                    else {
                        c.cssClass += ' align-left';
                        c.width = c.minWidth > 99 ? c.minWidth : 99;
                    }
                }
                //editor
                if (isEditable == true && c.sourceItem && c.sourceItem.readOnly != true) {
                    usingSlickGridEditors();
                    if (q.useSerenityInlineEditors) {
                        c.editor = SerenityInlineEditor;
                    }
                    else {
                        if (c.sourceItem.editorType == "Lookup" || c.sourceItem.editorType == "Enum") {
                            c.editor = Slick['Editors']['Select2'];
                            c.width = c.minWidth > 160 ? c.minWidth : 160;
                        }
                        else if (c.sourceItem.editorType == "Date") {
                            c.editor = Slick['Editors']['Date'];
                        }
                        else if (c.sourceItem.editorType == "Boolean") {
                            c.editor = Slick['Editors']['Checkbox'];
                        }
                        else if (c.sourceItem.editorType == "Integer") {
                            c.editor = Slick['Editors']['Integer'];
                        }
                        else if (c.sourceItem.editorType == "Decimal") {
                            c.editor = Slick['Editors']['Float'];
                        }
                        else if (c.sourceItem.editorType == "YesNoSelect") {
                            c.editor = Slick['Editors']['YesNoSelect'];
                        }
                        else if (c.sourceItem.editorType == "PercentComplete") {
                            c.editor = Slick['Editors']['PercentComplete'];
                        }
                        else if (c.sourceItem.editorType == "LongText") {
                            c.editor = Slick['Editors']['LongText'];
                        }
                        else {
                            c.editor = Slick['Editors']['Text'];
                        }
                    }
                }
            });
            columns.unshift({
                field: 'RowNum',
                name: '#',
                cssClass: 'rownum-column',
                headerCssClass: 'align-center',
                width: 40,
                minWidth: 40,
                maxWidth: 40,
                visible: extOptions.ShowRowNumberColumn,
                format: function (ctx) {
                    if (!ctx.item.RowNum) {
                        ctx.item.RowNum = _this.nextRowNumber++;
                    }
                    return String(ctx.item.RowNum);
                }
            });
            if (extOptions.ShowInlineActionsColumn == true) {
                var inlineActionsColumnWidth = 0;
                var inlineActionsColumnContent_1 = '';
                if (extOptions.ShowEditInlineButtun == true) {
                    inlineActionsColumnWidth += 25;
                    inlineActionsColumnContent_1 += '<a class="inline-actions view-details" title="edit/view details" style="padding-right: 10px;"><i class="view-details fa fa-pencil-square-o"></i></a>';
                }
                if (extOptions.ShowDeleteInlineButtun == true) {
                    inlineActionsColumnWidth += 25;
                    inlineActionsColumnContent_1 += '<a class="inline-actions delete-row" title="delete"><i class="delete-row fa fa-trash-o text-red"></i></a>';
                }
                columns.unshift({
                    field: 'inline-actions',
                    name: '',
                    cssClass: 'inline-actions-column',
                    width: inlineActionsColumnWidth,
                    minWidth: inlineActionsColumnWidth,
                    maxWidth: inlineActionsColumnWidth,
                    format: function (ctx) { return inlineActionsColumnContent_1; }
                });
            }
            if (extOptions.ShowRowSelectionCheckboxColumn == true) {
                var rowSelectionCol = Serenity.GridRowSelectionMixin.createSelectColumn(function () { return _this.rowSelection; });
                rowSelectionCol.width = rowSelectionCol.minWidth = rowSelectionCol.maxWidth = 25;
                columns.unshift(rowSelectionCol);
            }
            if (this.element.hasClass('RowSelectionCheckGrid')) {
                var options = this.options;
                if (!options.multiple && !options.gridType) {
                    Q.notifyWarning("Could not determine multiple/single. Probably there is no 'options' parameter in grid's constructor.");
                }
                if (options.multiple == true) {
                    var rowSelectionCol = Serenity.GridRowSelectionMixin.createSelectColumn(function () { return _this.rowSelection; });
                    rowSelectionCol.width = rowSelectionCol.minWidth = rowSelectionCol.maxWidth = 25;
                    columns.unshift(rowSelectionCol);
                }
                else {
                    columns.unshift({
                        field: 'row-selection',
                        name: '',
                        cssClass: 'inline-actions-column',
                        width: 66,
                        minWidth: 66,
                        maxWidth: 66,
                        format: function (ctx) { return '<a class="inline-actions select-row"><i class="select-row fa fa-check"></i> Select</a>'; }
                    });
                }
            }
            return columns;
        };
        GridBase.prototype.createSlickGrid = function () {
            var grid = _super.prototype.createSlickGrid.call(this);
            usingSlickAutoColumnSize();
            if (Slick.AutoColumnSize) {
                this.autoColumnSizePlugin = new Slick.AutoColumnSize();
                grid.registerPlugin(this.autoColumnSizePlugin);
            }
            grid.registerPlugin(new Slick.Data.GroupItemMetadataProvider());
            return grid;
        };
        GridBase.prototype.resetColumns = function (columns) {
            var _this = this;
            this.slickContainer.fadeTo(0, 0);
            this.slickGrid.setColumns(columns);
            setTimeout(function () {
                if (_this.get_ExtGridOptions().AutoColumnSize == true) {
                    _this.resizeAllCulumn();
                }
                _this.slickContainer.fadeTo(100, 1);
            }, 100);
        };
        GridBase.prototype.resizeAllCulumn = function () {
            this.isAutosized = true;
            var gridContainerWidth = this.slickContainer.width();
            if (gridContainerWidth > 0) { }
            else {
                gridContainerWidth = this.element.closest('.s-Dialog').width() - 55;
            }
            if (gridContainerWidth > 0) { }
            else {
                gridContainerWidth = this.element.closest('.s-Panel').width() - 55;
            }
            if (gridContainerWidth > 0) { }
            else {
                gridContainerWidth = $('section.content').width() - 75;
            }
            this.slickGrid.setOptions({ forceFitColumns: false });
            var allVisibleColumns = this.autoColumnSizePlugin.resizeAllColumns().filter(function (f) { return f.visible != false; }); // this.allColumns;
            var allVisibleColumnWidth = 0;
            allVisibleColumns.map(function (m) { return m.width; }).forEach(function (e) { return allVisibleColumnWidth += e; });
            if (allVisibleColumnWidth > gridContainerWidth) {
                this.autoColumnSizePlugin.resizeAllColumns();
            }
            else if (allVisibleColumnWidth < gridContainerWidth) {
                this.autoColumnSizePlugin.resizeAllColumns();
                var fixedSizeColumns_1 = [];
                var resizableColumns_1 = [];
                allVisibleColumns.forEach(function (c) {
                    if (c.minWidth == c.maxWidth) {
                        fixedSizeColumns_1.push(c);
                        c.width = c.maxWidth;
                    }
                    else if (c.sourceItem) {
                        if (c.sourceItem.formatterType == String("Number")) {
                            fixedSizeColumns_1.push(c);
                        }
                        else if (c.sourceItem.filteringType == String("Enum")) {
                            fixedSizeColumns_1.push(c);
                            if (c.width < 80)
                                c.width = 80;
                        }
                        else if (c.sourceItem.formatterType == String("Date")) {
                            fixedSizeColumns_1.push(c);
                            if (c.width < 80)
                                c.width = 80;
                        }
                        else if (c.sourceItem.formatterType == String("DateTime")) {
                            fixedSizeColumns_1.push(c);
                            if (c.width < 140)
                                c.width = 140;
                        }
                        else if (c.sourceItem.formatterType == String("Checkbox")) {
                            fixedSizeColumns_1.push(c);
                        }
                        else {
                            resizableColumns_1.push(c);
                        }
                    }
                    else {
                        resizableColumns_1.push(c);
                    }
                });
                if (resizableColumns_1.length == 0) {
                    fixedSizeColumns_1 = [];
                    resizableColumns_1 = [];
                    allVisibleColumns.forEach(function (c) {
                        if (c.minWidth == c.maxWidth) {
                            fixedSizeColumns_1.push(c);
                            c.width = c.maxWidth;
                        }
                        else {
                            resizableColumns_1.push(c);
                        }
                    });
                }
                var fixedSizeColumnsWidth_1 = 0;
                fixedSizeColumns_1.map(function (m) { return m.width; }).forEach(function (e) { return fixedSizeColumnsWidth_1 += e; });
                var stretchableGridAreaWidth_1 = gridContainerWidth - fixedSizeColumnsWidth_1 - 18;
                var resizableColumnsWidth_1 = 0;
                resizableColumns_1
                    .map(function (m) { return m.width; })
                    .forEach(function (e) { return resizableColumnsWidth_1 += e; });
                resizableColumns_1.forEach(function (c) {
                    c.width = c.width * (stretchableGridAreaWidth_1 / resizableColumnsWidth_1);
                });
                this.slickGrid.setColumns(allVisibleColumns);
                this.slickGrid.onColumnsResized.notify();
            }
            this.setItems(this.getItems());
        };
        GridBase.prototype.getSlickOptions = function () {
            var opt = _super.prototype.getSlickOptions.call(this);
            if (this.get_ExtGridOptions().AutoColumnSize == true) {
                opt.forceFitColumns = true;
            }
            //opt.enableTextSelectionOnCells = true;
            opt.enableCellNavigation = true;
            opt.asyncEditorLoading = false;
            opt.autoEdit = true;
            return opt;
        };
        GridBase.prototype.getViewOptions = function () {
            var opt = _super.prototype.getViewOptions.call(this);
            opt.rowsPerPage = q.DefaultMainGridOptions.RowsPerPage;
            return opt;
        };
        GridBase.prototype.onClick = function (e, row, cell) {
            _super.prototype.onClick.call(this, e, row, cell);
            if (e.isDefaultPrevented())
                return;
            var item = this.itemAt(row);
            var recordId = item[this.getIdProperty()];
            var target = $(e.target);
            // if user clicks "i" element, e.g. icon
            if (target.parent().hasClass('inline-action') || target.parent().hasClass('inline-actions') || target.parent().hasClass('inline-btn'))
                target = target.parent();
            if (target.hasClass('inline-action') || target.hasClass('inline-actions') || target.hasClass('inline-btn')) {
                //e.preventDefault();
                this.onInlineActionClick(target, recordId, item);
            }
        };
        GridBase.prototype.onInlineActionClick = function (target, recordId, item) {
            var _this = this;
            if (target.hasClass('delete-row')) {
                if (this.isReadOnly == true) {
                    Q.notifyWarning('Read only records could not be deleted!');
                }
                else {
                    Q.confirm('Delete record?', function () {
                        var o = _this;
                        if (o.deleteEntity) {
                            o.deleteEntity(recordId);
                        }
                        else {
                            Q.serviceRequest(_this.getService() + '/Delete', { EntityId: recordId }, function (response) {
                                _this.refresh();
                            });
                        }
                    });
                }
            }
            else if (target.hasClass('view-details')) {
                this.editItem(recordId);
            }
            else if (target.hasClass('select-row')) {
                this.rowSelection.setSelectedKeys([recordId]);
                this.pickerDialog.onSuccess(this.selectedItems);
                this.pickerDialog.dialogClose();
            }
        };
        GridBase.prototype.resetRowNumber = function () {
            this.nextRowNumber = 1;
            var items = this.getItems();
            var grouping_fields = this.view.getGrouping();
            if (grouping_fields.length == 0) {
                for (var i = 0; i < items.length; i++) {
                    items[i].RowNum = i + 1;
                }
            }
            else if (grouping_fields.length > 0) {
                var generateRowNumber_1 = function (groups) {
                    for (var gi = 0; gi < groups.length; gi++) {
                        var subGroups = groups[gi].groups;
                        if (subGroups) {
                            generateRowNumber_1(subGroups);
                        }
                        else {
                            var rows = groups[gi].rows;
                            for (var i = 0; i < rows.length; i++) {
                                rows[i].RowNum = i + 1;
                            }
                        }
                    }
                };
                var groups = this.view.getGroups();
                generateRowNumber_1(groups);
            }
            this.setItems(items);
        };
        GridBase.prototype.setGrouping = function (groupInfo) {
            this.view.setGrouping(groupInfo);
            this.resetRowNumber();
        };
        GridBase.prototype.onViewProcessData = function (response) {
            var _this = this;
            var r = _super.prototype.onViewProcessData.call(this, response);
            if (this.get_ExtGridOptions().ShowRowNumberColumn == true) {
                setTimeout(function () { _this.resetRowNumber(); });
            }
            return r;
        };
        GridBase.prototype.initDialog = function (dialog) {
            _super.prototype.initDialog.call(this, dialog);
            dialog.parentGrid = this;
        };
        Object.defineProperty(GridBase.prototype, "selectedItems", {
            get: function () {
                var _this = this;
                return this.rowSelection.getSelectedKeys().map(function (m) {
                    return _this.view.getItemById(m);
                });
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(GridBase.prototype, "selectedKeys", {
            set: function (value) {
                var options = this.options;
                if (options.multiple == true) {
                    this.rowSelection.setSelectedKeys(value);
                }
                else {
                }
            },
            enumerable: true,
            configurable: true
        });
        GridBase = __decorate([
            Serenity.Decorators.filterable()
        ], GridBase);
        return GridBase;
    }(Serenity.EntityGrid));
    _Ext.GridBase = GridBase;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var ReportGridBase = (function (_super) {
        __extends(ReportGridBase, _super);
        function ReportGridBase() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        ReportGridBase.prototype.getButtons = function () {
            var buttons = _super.prototype.getButtons.call(this);
            buttons.splice(0, 1);
            return buttons;
        };
        ReportGridBase.prototype.getColumns = function () {
            var columns = _super.prototype.getColumns.call(this);
            columns.splice(0, 1);
            return columns;
        };
        ReportGridBase = __decorate([
            Serenity.Decorators.filterable()
        ], ReportGridBase);
        return ReportGridBase;
    }(_Ext.GridBase));
    _Ext.ReportGridBase = ReportGridBase;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var ReportPanelBase = (function (_super) {
        __extends(ReportPanelBase, _super);
        function ReportPanelBase(container) {
            var _this = _super.call(this, container) || this;
            _this.byId('PanelTitle').text(_this.getReportTitle());
            _this.byId('SubmitButton').click(function (e) {
                e.preventDefault();
                if (!_this.validateForm()) {
                    return;
                }
                _Ext.ReportHelper.execute({ reportKey: _this.getReportKey(), params: { Request: _this.getReportRequest() }, extension: 'html' });
            });
            _this.byId('DownloadPdfButton').click(function (e) {
                e.preventDefault();
                if (!_this.validateForm()) {
                    return;
                }
                _Ext.ReportHelper.execute({ reportKey: _this.getReportKey(), params: { Request: _this.getReportRequest() }, extension: 'html' });
            });
            return _this;
        }
        ReportPanelBase.prototype.getTemplateName = function () { return 'ReportPanel'; };
        ReportPanelBase.prototype.getReportTitle = function () { return 'Report Title'; };
        ReportPanelBase.prototype.getReportKey = function () { return 'Report.Key'; };
        ReportPanelBase.prototype.getReportRequest = function () { return this.getSaveEntity(); };
        return ReportPanelBase;
    }(Serenity.PropertyPanel));
    _Ext.ReportPanelBase = ReportPanelBase;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var DialogBase = (function (_super) {
        __extends(DialogBase, _super);
        function DialogBase(opt) {
            var _this = _super.call(this, opt) || this;
            _this.isReadOnly = false;
            _this.element.fadeTo(0, 0);
            if (_this.get_ExtDialogOptions().PendingChangesConfirmation == true) {
                _Ext.DialogUtils.pendingChangesConfirmation(_this.element, function () { return _this.getSaveState() != _this.loadedState; });
            }
            return _this;
        }
        DialogBase.prototype.get_ExtDialogOptions = function () { return q.DefaultEntityDialogOptions; };
        DialogBase.prototype.updateInterface = function () {
            _super.prototype.updateInterface.call(this);
            this.setReadOnly(this.isReadOnly);
            if (this.get_ExtDialogOptions().HideCategoyLinksBar == true) {
                this.element.find('.category-links').hide();
            }
        };
        DialogBase.prototype.onDialogOpen = function () {
            var _this = this;
            _super.prototype.onDialogOpen.call(this);
            if (this.get_ExtDialogOptions().AutoFitContentArea == true) {
                this.fullContentArea();
            }
            //temporary fix for set grid editor height
            setTimeout(function () { _this.onAfterSetDialogSize(); }, 200);
            this.element.fadeTo(100, 1);
        };
        DialogBase.prototype.onDialogClose = function () {
            _super.prototype.onDialogClose.call(this);
            this.onAfterDialogClose(this.entity);
        };
        DialogBase.prototype.setReadOnly = function (value) {
            this.isReadOnly = value;
            if (this.isReadOnly == true) {
                this.saveAndCloseButton.toggleClass('disabled', this.isReadOnly);
                this.applyChangesButton.toggleClass('disabled', this.isReadOnly);
                this.deleteButton.toggleClass('disabled', this.isReadOnly);
                this.cloneButton.toggleClass('disabled', this.isReadOnly);
                this.undeleteButton.toggleClass('disabled', this.isReadOnly);
                this.toolbar.findButton('btn-save-and-close').addClass('disabled');
                this.toolbar.findButton('btn-replace-row').addClass('disabled');
                // remove required asterisk (*)
                this.element.find('sup').toggle(this.isReadOnly);
                for (var editor in this.form) {
                    if (this.form[editor].widgetName) {
                        Serenity.EditorUtils.setReadOnly(this.form[editor], this.isReadOnly);
                    }
                }
            }
        };
        DialogBase.prototype.getToolbarButtons = function () {
            var _this = this;
            var buttons = _super.prototype.getToolbarButtons.call(this);
            var extOptions = this.get_ExtDialogOptions();
            if (extOptions.ShowSaveAndNewButtonInToolbar == true)
                buttons.push({
                    title: 'Save & New',
                    icon: 'fa fa-save',
                    cssClass: 'btn-save-and-close',
                    onClick: function () {
                        _this.save(function (response) {
                            _this.loadEntity({});
                        });
                    }
                });
            if (extOptions.ShowCloseButtonInToolbar == true)
                buttons.push({
                    title: 'Close',
                    icon: 'fa fa-close',
                    cssClass: 'btn-close',
                    onClick: function () {
                        _this.dialogClose();
                    }
                });
            if (extOptions.ShowRefreshButtonInToolbar == true)
                buttons.push({
                    title: 'Refresh',
                    icon: 'fa fa-refresh',
                    onClick: function () {
                        _this.onRefreshClick();
                    }
                });
            try {
                if (extOptions.ShowReplaceRowButtonInToolbar == true && Q.Authorization.hasPermission('Administration:ReplaceRow')) {
                    if (Q.isEmptyOrNull(this.getService()) == false) {
                        buttons.push({
                            title: 'Replace',
                            icon: 'fa fa-trash-o',
                            cssClass: 'btn-replace-row',
                            onClick: function () {
                                var idProperty = _this.getIdProperty();
                                var nameProperty = _this.getNameProperty();
                                var entityId = _this.entity[idProperty];
                                var entityName = _this.entity[nameProperty];
                                if (entityId) {
                                    Q.serviceRequest(_this.getService() + '/List', {}, function (response) {
                                        var entityList = response.Entities;
                                        var dlg = new _Ext.ReplaceRowDialog({
                                            FormKey: _this.getFormKey(),
                                            IdProperty: idProperty,
                                            NameProperty: nameProperty,
                                            EntityTypeTitle: _this.getEntitySingular(),
                                            DeletedEntityName: entityName,
                                            DeletedEntityId: entityId,
                                        }, entityList);
                                        dlg.dialogOpen();
                                        _this.dialogClose();
                                    });
                                }
                            }
                        });
                    }
                }
                if (extOptions.ShowChangeLogButtonInToolbar == true && Q.Authorization.hasPermission('Administration:AuditLog')) {
                    buttons.push({
                        title: 'Change Log',
                        icon: 'fa fa-history',
                        onClick: function () {
                            var entityId = _this.entity[_this.getIdProperty()];
                            if (entityId) {
                                var dlg = new _Ext.AuditLogViewerDialog({ FormKey: _this.getFormKey(), EntityId: entityId });
                                dlg.dialogOpen();
                            }
                            else {
                                Q.alert('No change log found for this entity.');
                            }
                        }
                    });
                }
                //clone button click event customization
                var cloneButton = Q.tryFirst(buttons, function (x) { return x.cssClass == 'clone-button'; });
                cloneButton.onClick = function () {
                    if (!_this.isEditMode()) {
                        return;
                    }
                    var cloneEntity = _this.getCloningEntity();
                    Serenity.Widget.create({
                        type: ss.getInstanceType(_this),
                        init: function (dlg) {
                            _this.parentGrid.initDialog(dlg);
                            dlg.loadEntityAndOpenDialog(cloneEntity, null);
                        }
                    });
                    _this.dialogClose();
                };
            }
            catch (e) { }
            return buttons;
        };
        DialogBase.prototype.onRefreshClick = function () {
            this.reloadById();
        };
        DialogBase.prototype.getSaveState = function () {
            try {
                return $.toJSON(this.getSaveEntity());
            }
            catch (e) {
                return null;
            }
        };
        DialogBase.prototype.onSaveSuccess = function (response) {
            _super.prototype.onSaveSuccess.call(this, response);
            isPageRefreshRequired = true;
            //Q.reloadLookup(this.getLookupKey());
        };
        DialogBase.prototype.loadResponse = function (data) {
            _super.prototype.loadResponse.call(this, data);
            if (this.get_ExtDialogOptions().PendingChangesConfirmation == true) {
                this.loadedState = this.getSaveState();
            }
        };
        DialogBase.prototype.maximize = function () {
            var _this = this;
            this.element.closest(".ui-dialog").find(".ui-dialog-titlebar-maximize").click();
            setTimeout(function () {
                var dialogElement = _this.element ? _this.element.closest(".ui-dialog") : $(".ui-dialog");
                var dialogHeight = dialogElement.height();
                var titleBarHeight = dialogElement.find('.ui-dialog-title').height() || 20;
                var toolBarHeight = dialogElement.find('.s-DialogToolbar.s-Toolbar').height() || 0;
                var tabBarHeight = dialogElement.find('.nav.nav-tabs.property-tabs').height() || 0;
                var categoryLinkHeight = dialogElement.find('.category-links').height() || 0;
                _this.element.find('.categories').height(dialogHeight - titleBarHeight - toolBarHeight - tabBarHeight - categoryLinkHeight - 40);
            }, 100);
        };
        DialogBase.prototype.fullContentArea = function () {
            this.setDialogSize();
        };
        // set the dialog size relative to content area (to shrink use negative value)
        DialogBase.prototype.setDialogSize = function (width, height, top, left, $content) {
            var _this = this;
            if (!$content) {
                $content = $('section.content');
            }
            if ($content.length == 0) {
                $content = $('.content-wrapper');
            }
            var dialogElement = this.element ? this.element.closest(".ui-dialog") : $(".ui-dialog");
            if ($content.length > 0 && dialogElement.length > 0) {
                var dialogWidth = $content.width() + 30 + (width || 0);
                var dialogHeight = $content.height() + (height || 30);
                this.element.dialog("option", "width", dialogWidth);
                this.element.dialog("option", "height", dialogHeight);
                var titleBarHeight = dialogElement.find('.ui-dialog-title').height() || 20;
                var toolBarHeight = dialogElement.find('.s-DialogToolbar.s-Toolbar').height() || 0;
                var tabBarHeight = dialogElement.find('.nav.nav-tabs.property-tabs').height() || 0;
                var categoryLinkHeight = dialogElement.find('.category-links').height() || 0;
                this.element.find('.categories').height(dialogHeight - titleBarHeight - toolBarHeight - tabBarHeight - categoryLinkHeight - 40);
                dialogElement.css({
                    left: $content.position().left + (left || 0),
                    top: (top || 50),
                });
            }
            setTimeout(function () {
                _this.onAfterSetDialogSize();
            }, 200);
        };
        DialogBase.prototype.onAfterSetDialogSize = function () { };
        DialogBase.prototype.onAfterDialogClose = function (entity) { };
        DialogBase = __decorate([
            Serenity.Decorators.responsive(),
            Serenity.Decorators.maximizable()
        ], DialogBase);
        return DialogBase;
    }(Serenity.EntityDialog));
    _Ext.DialogBase = DialogBase;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var GridItemPickerDialog = (function (_super) {
        __extends(GridItemPickerDialog, _super);
        function GridItemPickerDialog(options) {
            var _this = _super.call(this, options) || this;
            _this.onSuccess = function (selectedItems) { };
            var gridType = options.gridType;
            if (!gridType.prototype)
                gridType = Q.typeByFullName(options.gridType);
            try {
                _this.checkGrid = new gridType(_this.byId("RowSelectionCheckGrid"), options);
                if (options.preSelectedKeys)
                    _this.checkGrid.selectedKeys = options.preSelectedKeys;
                _this.dialogTitle = "Select " + _this.checkGrid.getTitle();
                _this.checkGrid.setTitle(null);
                _this.checkGrid.pickerDialog = _this;
            }
            catch (ex) {
                Q.notifyError('Could not intialize ' + options.gridType);
            }
            return _this;
        }
        GridItemPickerDialog.prototype.getTemplate = function () {
            return "<div id=\"~_RowSelectionCheckGrid\" \n                class=\"RowSelectionCheckGrid " + (this.options.multiple == true ? 'multi-select' : 'single-select') + "\" \n                style = \"margin: 15px 15px 0 15px;\" >\n            </div>";
        };
        Object.defineProperty(GridItemPickerDialog.prototype, "selectedItems", {
            get: function () { return this.checkGrid.selectedItems; },
            enumerable: true,
            configurable: true
        });
        GridItemPickerDialog.prototype.getDialogOptions = function () {
            var _this = this;
            var opt = _super.prototype.getDialogOptions.call(this);
            opt.buttons = [{
                    text: Q.text("Dialogs.OkButton"),
                    click: function () {
                        var selectedItems = _this.checkGrid.selectedItems;
                        if (!selectedItems.length) {
                            Q.notifyWarning("Please select some items!");
                            return;
                        }
                        _this.onSuccess(selectedItems);
                        _this.dialogClose();
                    }
                }, {
                    text: Q.text("Dialogs.CancelButton"),
                    click: function () {
                        _this.dialogClose();
                    }
                }];
            return opt;
        };
        GridItemPickerDialog = __decorate([
            Serenity.Decorators.registerClass()
        ], GridItemPickerDialog);
        return GridItemPickerDialog;
    }(Serenity.TemplatedDialog));
    _Ext.GridItemPickerDialog = GridItemPickerDialog;
})(_Ext || (_Ext = {}));
/// <reference path="../Bases/DialogBase.ts" />
var _Ext;
(function (_Ext) {
    var EditorDialogBase = (function (_super) {
        __extends(EditorDialogBase, _super);
        function EditorDialogBase() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        EditorDialogBase.prototype.get_ExtDialogOptions = function () { return q.DefaultEditorDialogOptions; };
        EditorDialogBase.prototype.getIdProperty = function () { return "__id"; };
        EditorDialogBase.prototype.destroy = function () {
            this.onSave = null;
            this.onDelete = null;
            _super.prototype.destroy.call(this);
        };
        EditorDialogBase.prototype.updateInterface = function () {
            _super.prototype.updateInterface.call(this);
            this.saveAndCloseButton.find('.button-inner').text(this.isNew() ? (Q.tryGetText('Controls.AddButton') || 'Add') : (Q.tryGetText('Controls.ApplyButton') || 'Apply'));
            // apply changes button doesn't work properly with in-memory grids yet
            if (this.applyChangesButton) {
                this.applyChangesButton.hide();
            }
            if (this.parentEditor.isReadOnly == true) {
                this.saveAndCloseButton.addClass('disabled');
                this.deleteButton.addClass('disabled');
                Serenity.EditorUtils.setReadonly(this.element.find('.editor'), true);
                // remove required asterisk (*)
                this.element.find('sup').hide();
            }
        };
        EditorDialogBase.prototype.saveHandler = function (options, callback) {
            this.onSave && this.onSave(options, callback);
        };
        EditorDialogBase.prototype.deleteHandler = function (options, callback) {
            this.onDelete && this.onDelete(options, callback);
        };
        EditorDialogBase = __decorate([
            Serenity.Decorators.registerClass()
        ], EditorDialogBase);
        return EditorDialogBase;
    }(_Ext.DialogBase));
    _Ext.EditorDialogBase = EditorDialogBase;
})(_Ext || (_Ext = {}));
/// <reference path="../Bases/GridBase.ts" />
var _Ext;
(function (_Ext) {
    var GridEditorBase = (function (_super) {
        __extends(GridEditorBase, _super);
        function GridEditorBase(container) {
            var _this = _super.call(this, container) || this;
            _this.nextId = 1;
            _this.slickGrid.onSort.subscribe(function (e, args) {
                _this.sortGridFunction(args.grid, args.sortCols[0], args.sortCols[0].sortCol.field);
                //(args.grid as Slick.Grid).init();
                args.grid.invalidateAllRows();
                args.grid.invalidate();
                args.grid.render();
                args.grid.resizeCanvas();
            });
            return _this;
        }
        GridEditorBase.prototype.get_ExtGridOptions = function () { return q.DefaultEditorGridOptions; };
        GridEditorBase.prototype.getIdProperty = function () { return "__id"; };
        GridEditorBase.prototype.sortGridFunction = function (grid, column, field) {
            grid.getData().sort(function (a, b) {
                var result = a[field] > b[field] ? 1 :
                    a[field] < b[field] ? -1 :
                        0;
                return column.sortAsc ? result : -result;
            });
        };
        GridEditorBase.prototype.getQuickFilters = function () {
            return [];
        };
        GridEditorBase.prototype.id = function (entity) {
            return entity[this.getIdProperty()];
        };
        GridEditorBase.prototype.save = function (opt, callback) {
            var _this = this;
            var request = opt.request;
            var row = Q.deepClone(request.Entity);
            var id = this.id(row);
            if (id == null) {
                row[this.getIdProperty()] = "`" + this.nextId++;
            }
            if (!this.validateEntity(row, id)) {
                return;
            }
            var items = this.view.getItems().slice();
            if (id == null) {
                items.push(row);
            }
            else {
                var index = Q.indexOf(items, function (x) { return _this.id(x) === id; });
                items[index] = Q.deepClone({}, items[index], row);
            }
            this.value = items;
            callback({});
        };
        GridEditorBase.prototype.deleteEntity = function (id) {
            var _this = this;
            this.view.deleteItem(id);
            setTimeout(function () { _this.onItemsChanged(); });
            return true;
        };
        GridEditorBase.prototype.validateEntity = function (row, id) {
            return true;
        };
        GridEditorBase.prototype.getNewEntity = function () {
            return {};
        };
        GridEditorBase.prototype.getButtons = function () {
            var _this = this;
            return [{
                    title: 'Add ' + this.getItemName(),
                    cssClass: 'add-button',
                    onClick: function () { _this.addButtonClick(); }
                }];
        };
        GridEditorBase.prototype.addButtonClick = function () {
            var _this = this;
            this.createEntityDialog(this.getItemType(), function (dlg) {
                var dialog = dlg;
                dialog.parentEditor = _this;
                dialog.onSave = function (opt, callback) { return _this.save(opt, callback); };
                dialog.loadEntityAndOpenDialog(_this.getNewEntity());
            });
        };
        GridEditorBase.prototype.editItem = function (entityOrId) {
            var _this = this;
            var id = entityOrId;
            var item = this.view.getItemById(id);
            this.createEntityDialog(this.getItemType(), function (dlg) {
                var dialog = dlg;
                dialog.onDelete = function (opt, callback) {
                    if (!_this.deleteEntity(id)) {
                        return;
                    }
                    callback({});
                };
                dialog.parentEditor = _this;
                dialog.onSave = function (opt, callback) { return _this.save(opt, callback); };
                dialog.loadEntityAndOpenDialog(item);
            });
            ;
        };
        GridEditorBase.prototype.getEditValue = function (property, target) {
            target[property.name] = this.value;
        };
        GridEditorBase.prototype.setEditValue = function (source, property) {
            this.value = source[property.name];
        };
        Object.defineProperty(GridEditorBase.prototype, "value", {
            get: function () {
                var p = this.getIdProperty();
                this.slickGrid.getEditController().commitCurrentEdit();
                var items = this.view.getItems();
                this.onBeforeGetValue(items);
                return items.map(function (x) {
                    var y = Q.deepClone(x);
                    var id = y[p];
                    if (id && id.toString().charAt(0) == '`')
                        delete y[p];
                    if (y['RowNum'])
                        delete y['RowNum'];
                    return y;
                });
            },
            set: function (value) {
                var _this = this;
                var id = this.getIdProperty();
                var val = value || [];
                var items = val.map(function (x) {
                    var y = Q.deepClone(x);
                    if (y[id] == null) {
                        y[id] = "`" + _this.nextId++;
                    }
                    return y;
                });
                var r = this.onViewProcessData({ Entities: items });
                this.view.setItems(r.Entities, true);
                setTimeout(function () { _this.onItemsChanged(); });
                this.resetRowNumber(); // to generate serial no.
            },
            enumerable: true,
            configurable: true
        });
        GridEditorBase.prototype.getGridCanLoad = function () {
            return false;
        };
        GridEditorBase.prototype.usePager = function () {
            return false;
        };
        GridEditorBase.prototype.getInitialTitle = function () {
            return null;
        };
        GridEditorBase.prototype.createToolbarExtensions = function () {
            var _this = this;
            //super.createToolbarExtensions();
            Serenity.GridUtils.addQuickSearchInputCustom(this.toolbar.element, function (field, text) {
                _this.searchText = Select2.util.stripDiacritics(Q.trimToNull(text) || '').toLowerCase();
                _this.view.setItems(_this.view.getItems(), true);
            });
        };
        GridEditorBase.prototype.onViewFilter = function (row) {
            if (!_super.prototype.onViewFilter.call(this, row)) {
                return false;
            }
            if (this.searchText) {
                return this.matchContains(row);
            }
            return true;
        };
        GridEditorBase.prototype.matchContains = function (item) {
            var result = false;
            for (var prop in item) {
                result = Select2.util.stripDiacritics(String(item[prop] || '')).toLowerCase().indexOf(this.searchText) >= 0;
                if (result == true) {
                    return result;
                }
            }
            return result;
        };
        GridEditorBase.prototype.enableFiltering = function () { return false; };
        GridEditorBase.prototype.onViewSubmit = function () { return false; };
        GridEditorBase.prototype.get_readOnly = function () {
            return this.isReadOnly;
        };
        GridEditorBase.prototype.set_readOnly = function (value) {
            this.isReadOnly = value;
            if (value == true) {
                this.element.find('.add-button').addClass('disabled');
                var opt = this.slickGrid.getOptions();
                opt.editable = false;
                this.slickGrid.setOptions(opt);
            }
            else {
                this.element.find('.add-button').removeClass('disabled');
            }
        };
        GridEditorBase.prototype.getSlickOptions = function () {
            var opt = _super.prototype.getSlickOptions.call(this);
            opt.forceFitColumns = false;
            //opt.autoHeight = true; // If you need to show footer, you have to do opt.autoHeight = false
            return opt;
        };
        //custom events
        GridEditorBase.prototype.onItemsChanged = function () {
        };
        GridEditorBase.prototype.onBeforeGetValue = function (items) {
        };
        GridEditorBase = __decorate([
            Serenity.Decorators.registerClass([Serenity.IGetEditValue, Serenity.ISetEditValue, Serenity.IReadOnly]),
            Serenity.Decorators.editor(),
            Serenity.Decorators.element("<div/>")
        ], GridEditorBase);
        return GridEditorBase;
    }(_Ext.GridBase));
    _Ext.GridEditorBase = GridEditorBase;
})(_Ext || (_Ext = {}));
/// <reference path="../Scripts/typings/serenity/Serenity.CoreLib.d.ts" />
/// <reference path="../Scripts/typings/jspdf/jspdf.autotable.d.ts" />
/// <reference path="../Scripts/typings/jstree/jstree.d.ts" />
/// <reference path="../Modules/_Ext/Bases/GridBase.ts" />
/// <reference path="../Modules/_Ext/Bases/ReportGridBase.ts" />
/// <reference path="../Modules/_Ext/Bases/ReportPanelBase.ts" />
/// <reference path="../Modules/_Ext/Bases/DialogBase.ts" />
/// <reference path="../Modules/_Ext/Editors/GridItemPicker/GridItemPickerDialog.ts" />
/// <reference path="../Modules/_Ext/Editors/EditorDialogBase.ts" />
/// <reference path="../Modules/_Ext/Editors/GridEditorBase.ts" />
var _Ext;
(function (_Ext) {
    var AuditActionType;
    (function (AuditActionType) {
        AuditActionType[AuditActionType["Insert"] = 1] = "Insert";
        AuditActionType[AuditActionType["Update"] = 2] = "Update";
        AuditActionType[AuditActionType["Delete"] = 3] = "Delete";
    })(AuditActionType = _Ext.AuditActionType || (_Ext.AuditActionType = {}));
    Serenity.Decorators.registerEnumType(AuditActionType, '_Ext.AuditActionType', 'Enum.Audit.AuditActionType');
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var AuditLogForm = (function (_super) {
        __extends(AuditLogForm, _super);
        function AuditLogForm(prefix) {
            var _this = _super.call(this, prefix) || this;
            if (!AuditLogForm.init) {
                AuditLogForm.init = true;
                var s = Serenity;
                var w0 = s.StringEditor;
                var w1 = s.IntegerEditor;
                var w2 = s.LookupEditor;
                var w3 = s.EnumEditor;
                var w4 = s.DateTimeEditor;
                var w5 = _Ext.StaticTextBlock;
                Q.initFormType(AuditLogForm, [
                    'EntityTableName', w0,
                    'VersionNo', w1,
                    'UserId', w2,
                    'ActionType', w3,
                    'ActionDate', w4,
                    'EntityId', w1,
                    'OldEntity', w0,
                    'NewEntity', w0,
                    'Differences', w5,
                    'IpAddress', w0,
                    'SessionId', w0
                ]);
            }
            return _this;
        }
        AuditLogForm.formKey = '_Ext.AuditLog';
        return AuditLogForm;
    }(Serenity.PrefixedContext));
    _Ext.AuditLogForm = AuditLogForm;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var AuditLogRow;
    (function (AuditLogRow) {
        AuditLogRow.idProperty = 'Id';
        AuditLogRow.nameProperty = 'EntityTableName';
        AuditLogRow.localTextPrefix = '_Ext.AuditLog';
    })(AuditLogRow = _Ext.AuditLogRow || (_Ext.AuditLogRow = {}));
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var AuditLogService;
    (function (AuditLogService) {
        AuditLogService.baseUrl = '_Ext/AuditLog';
        [
            'Create',
            'Update',
            'Delete',
            'Retrieve',
            'List'
        ].forEach(function (x) {
            AuditLogService[x] = function (r, s, o) {
                return Q.serviceRequest(AuditLogService.baseUrl + '/' + x, r, s, o);
            };
        });
    })(AuditLogService = _Ext.AuditLogService || (_Ext.AuditLogService = {}));
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var AuditLogViewerService;
    (function (AuditLogViewerService) {
        AuditLogViewerService.baseUrl = 'AuditLogViewer';
        [
            'List'
        ].forEach(function (x) {
            AuditLogViewerService[x] = function (r, s, o) {
                return Q.serviceRequest(AuditLogViewerService.baseUrl + '/' + x, r, s, o);
            };
        });
    })(AuditLogViewerService = _Ext.AuditLogViewerService || (_Ext.AuditLogViewerService = {}));
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var DevTools;
    (function (DevTools) {
        var SergenService;
        (function (SergenService) {
            SergenService.baseUrl = 'DevTools/Sergen';
            [
                'ListConnections',
                'ListTables',
                'Generate'
            ].forEach(function (x) {
                SergenService[x] = function (r, s, o) {
                    return Q.serviceRequest(SergenService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(SergenService = DevTools.SergenService || (DevTools.SergenService = {}));
    })(DevTools = _Ext.DevTools || (_Ext.DevTools = {}));
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var Months;
    (function (Months) {
        Months[Months["January"] = 0] = "January";
        Months[Months["February"] = 1] = "February";
        Months[Months["March"] = 2] = "March";
        Months[Months["April"] = 3] = "April";
        Months[Months["May"] = 4] = "May";
        Months[Months["June"] = 5] = "June";
        Months[Months["July"] = 6] = "July";
        Months[Months["August"] = 7] = "August";
        Months[Months["September"] = 8] = "September";
        Months[Months["October"] = 9] = "October";
        Months[Months["November"] = 10] = "November";
        Months[Months["December"] = 11] = "December";
    })(Months = _Ext.Months || (_Ext.Months = {}));
    Serenity.Decorators.registerEnumType(Months, '_Ext.Months', 'Months');
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var ReplaceRowForm = (function (_super) {
        __extends(ReplaceRowForm, _super);
        function ReplaceRowForm(prefix) {
            var _this = _super.call(this, prefix) || this;
            if (!ReplaceRowForm.init) {
                ReplaceRowForm.init = true;
                var s = Serenity;
                var w0 = s.StringEditor;
                var w1 = _Ext.EmptyLookupEditor;
                Q.initFormType(ReplaceRowForm, [
                    'DeletedEntityName', w0,
                    'ReplaceWithEntityId', w1
                ]);
            }
            return _this;
        }
        ReplaceRowForm.formKey = '_Ext.ReplaceRow';
        return ReplaceRowForm;
    }(Serenity.PrefixedContext));
    _Ext.ReplaceRowForm = ReplaceRowForm;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var ReplaceRowService;
    (function (ReplaceRowService) {
        ReplaceRowService.baseUrl = 'ReplaceRow';
        [
            'Replace'
        ].forEach(function (x) {
            ReplaceRowService[x] = function (r, s, o) {
                return Q.serviceRequest(ReplaceRowService.baseUrl + '/' + x, r, s, o);
            };
        });
    })(ReplaceRowService = _Ext.ReplaceRowService || (_Ext.ReplaceRowService = {}));
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var TimeUoM;
    (function (TimeUoM) {
        TimeUoM[TimeUoM["Hour"] = 1] = "Hour";
        TimeUoM[TimeUoM["Day"] = 2] = "Day";
        TimeUoM[TimeUoM["Week"] = 3] = "Week";
        TimeUoM[TimeUoM["Month"] = 4] = "Month";
        TimeUoM[TimeUoM["CalenderMonth"] = 5] = "CalenderMonth";
        TimeUoM[TimeUoM["Year"] = 6] = "Year";
    })(TimeUoM = _Ext.TimeUoM || (_Ext.TimeUoM = {}));
    Serenity.Decorators.registerEnumType(TimeUoM, '_Ext.TimeUoM', 'TimeUoM');
})(_Ext || (_Ext = {}));
var VistaGL;
(function (VistaGL) {
    var AccHeadTypeMappingEnum;
    (function (AccHeadTypeMappingEnum) {
        AccHeadTypeMappingEnum[AccHeadTypeMappingEnum["SD"] = 1] = "SD";
        AccHeadTypeMappingEnum[AccHeadTypeMappingEnum["IncomeTax"] = 2] = "IncomeTax";
        AccHeadTypeMappingEnum[AccHeadTypeMappingEnum["VAT"] = 3] = "VAT";
        AccHeadTypeMappingEnum[AccHeadTypeMappingEnum["Advance"] = 4] = "Advance";
        AccHeadTypeMappingEnum[AccHeadTypeMappingEnum["WIP"] = 5] = "WIP";
    })(AccHeadTypeMappingEnum = VistaGL.AccHeadTypeMappingEnum || (VistaGL.AccHeadTypeMappingEnum = {}));
    Serenity.Decorators.registerEnumType(AccHeadTypeMappingEnum, 'VistaGL.AccHeadTypeMappingEnum', 'AccType');
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var LanguageForm = (function (_super) {
            __extends(LanguageForm, _super);
            function LanguageForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!LanguageForm.init) {
                    LanguageForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    Q.initFormType(LanguageForm, [
                        'LanguageId', w0,
                        'LanguageName', w0
                    ]);
                }
                return _this;
            }
            LanguageForm.formKey = 'Administration.Language';
            return LanguageForm;
        }(Serenity.PrefixedContext));
        Administration.LanguageForm = LanguageForm;
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var LanguageRow;
        (function (LanguageRow) {
            LanguageRow.idProperty = 'Id';
            LanguageRow.nameProperty = 'LanguageName';
            LanguageRow.localTextPrefix = 'Administration.Language';
            LanguageRow.lookupKey = 'Administration.Language';
            function getLookup() {
                return Q.getLookup('Administration.Language');
            }
            LanguageRow.getLookup = getLookup;
        })(LanguageRow = Administration.LanguageRow || (Administration.LanguageRow = {}));
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var LanguageService;
        (function (LanguageService) {
            LanguageService.baseUrl = 'Administration/Language';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                LanguageService[x] = function (r, s, o) {
                    return Q.serviceRequest(LanguageService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(LanguageService = Administration.LanguageService || (Administration.LanguageService = {}));
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var RoleForm = (function (_super) {
            __extends(RoleForm, _super);
            function RoleForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!RoleForm.init) {
                    RoleForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    Q.initFormType(RoleForm, [
                        'RoleName', w0
                    ]);
                }
                return _this;
            }
            RoleForm.formKey = 'Administration.Role';
            return RoleForm;
        }(Serenity.PrefixedContext));
        Administration.RoleForm = RoleForm;
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var RolePermissionRow;
        (function (RolePermissionRow) {
            RolePermissionRow.idProperty = 'RolePermissionId';
            RolePermissionRow.nameProperty = 'PermissionKey';
            RolePermissionRow.localTextPrefix = 'Administration.RolePermission';
        })(RolePermissionRow = Administration.RolePermissionRow || (Administration.RolePermissionRow = {}));
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var RolePermissionService;
        (function (RolePermissionService) {
            RolePermissionService.baseUrl = 'Administration/RolePermission';
            [
                'Update',
                'List'
            ].forEach(function (x) {
                RolePermissionService[x] = function (r, s, o) {
                    return Q.serviceRequest(RolePermissionService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(RolePermissionService = Administration.RolePermissionService || (Administration.RolePermissionService = {}));
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var RoleRow;
        (function (RoleRow) {
            RoleRow.idProperty = 'RoleId';
            RoleRow.nameProperty = 'RoleName';
            RoleRow.localTextPrefix = 'Administration.Role';
            RoleRow.lookupKey = 'Administration.Role';
            function getLookup() {
                return Q.getLookup('Administration.Role');
            }
            RoleRow.getLookup = getLookup;
        })(RoleRow = Administration.RoleRow || (Administration.RoleRow = {}));
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var RoleService;
        (function (RoleService) {
            RoleService.baseUrl = 'Administration/Role';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                RoleService[x] = function (r, s, o) {
                    return Q.serviceRequest(RoleService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(RoleService = Administration.RoleService || (Administration.RoleService = {}));
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var TranslationService;
        (function (TranslationService) {
            TranslationService.baseUrl = 'Administration/Translation';
            [
                'List',
                'Update'
            ].forEach(function (x) {
                TranslationService[x] = function (r, s, o) {
                    return Q.serviceRequest(TranslationService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(TranslationService = Administration.TranslationService || (Administration.TranslationService = {}));
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var UserForm = (function (_super) {
            __extends(UserForm, _super);
            function UserForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!UserForm.init) {
                    UserForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.EmailEditor;
                    var w2 = s.ImageUploadEditor;
                    var w3 = s.PasswordEditor;
                    Q.initFormType(UserForm, [
                        'Username', w0,
                        'DisplayName', w0,
                        'Email', w1,
                        'UserImage', w2,
                        'Password', w3,
                        'PasswordConfirm', w3,
                        'Source', w0
                    ]);
                }
                return _this;
            }
            UserForm.formKey = 'Administration.User';
            return UserForm;
        }(Serenity.PrefixedContext));
        Administration.UserForm = UserForm;
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var UserPermissionRow;
        (function (UserPermissionRow) {
            UserPermissionRow.idProperty = 'UserPermissionId';
            UserPermissionRow.nameProperty = 'PermissionKey';
            UserPermissionRow.localTextPrefix = 'Administration.UserPermission';
        })(UserPermissionRow = Administration.UserPermissionRow || (Administration.UserPermissionRow = {}));
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var UserPermissionService;
        (function (UserPermissionService) {
            UserPermissionService.baseUrl = 'Administration/UserPermission';
            [
                'Update',
                'List',
                'ListRolePermissions',
                'ListPermissionKeys'
            ].forEach(function (x) {
                UserPermissionService[x] = function (r, s, o) {
                    return Q.serviceRequest(UserPermissionService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(UserPermissionService = Administration.UserPermissionService || (Administration.UserPermissionService = {}));
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var UserRoleRow;
        (function (UserRoleRow) {
            UserRoleRow.idProperty = 'UserRoleId';
            UserRoleRow.localTextPrefix = 'Administration.UserRole';
        })(UserRoleRow = Administration.UserRoleRow || (Administration.UserRoleRow = {}));
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var UserRoleService;
        (function (UserRoleService) {
            UserRoleService.baseUrl = 'Administration/UserRole';
            [
                'Update',
                'List'
            ].forEach(function (x) {
                UserRoleService[x] = function (r, s, o) {
                    return Q.serviceRequest(UserRoleService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(UserRoleService = Administration.UserRoleService || (Administration.UserRoleService = {}));
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var UserRow;
        (function (UserRow) {
            UserRow.idProperty = 'UserId';
            UserRow.isActiveProperty = 'IsActive';
            UserRow.nameProperty = 'Username';
            UserRow.localTextPrefix = 'Administration.User';
        })(UserRow = Administration.UserRow || (Administration.UserRow = {}));
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var UserService;
        (function (UserService) {
            UserService.baseUrl = 'Administration/User';
            [
                'Create',
                'Update',
                'Delete',
                'Undelete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                UserService[x] = function (r, s, o) {
                    return Q.serviceRequest(UserService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(UserService = Administration.UserService || (Administration.UserService = {}));
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var ApprovalStatus;
    (function (ApprovalStatus) {
        ApprovalStatus[ApprovalStatus["Draft"] = 1] = "Draft";
        ApprovalStatus[ApprovalStatus["Cancel"] = 2] = "Cancel";
        ApprovalStatus[ApprovalStatus["Submit"] = 3] = "Submit";
        ApprovalStatus[ApprovalStatus["Regret"] = 4] = "Regret";
        ApprovalStatus[ApprovalStatus["Recommend"] = 5] = "Recommend";
        ApprovalStatus[ApprovalStatus["Approved"] = 6] = "Approved";
    })(ApprovalStatus = VistaGL.ApprovalStatus || (VistaGL.ApprovalStatus = {}));
    Serenity.Decorators.registerEnumType(ApprovalStatus, 'VistaGL.ApprovalStatus', 'ApprovalStatus');
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var ApprovalStepType;
    (function (ApprovalStepType) {
        ApprovalStepType[ApprovalStepType["Approval"] = 1] = "Approval";
        ApprovalStepType[ApprovalStepType["Recommendation"] = 2] = "Recommendation";
        ApprovalStepType[ApprovalStepType["Both"] = 3] = "Both";
    })(ApprovalStepType = VistaGL.ApprovalStepType || (VistaGL.ApprovalStepType = {}));
    Serenity.Decorators.registerEnumType(ApprovalStepType, 'VistaGL.ApprovalStepType', 'ApprovalStepType');
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var BudgetTypeenum;
    (function (BudgetTypeenum) {
        BudgetTypeenum[BudgetTypeenum["Proposed"] = 1] = "Proposed";
        BudgetTypeenum[BudgetTypeenum["Revised"] = 2] = "Revised";
    })(BudgetTypeenum = VistaGL.BudgetTypeenum || (VistaGL.BudgetTypeenum = {}));
    Serenity.Decorators.registerEnumType(BudgetTypeenum, 'VistaGL.BudgetTypeenum', 'BudgetTypeenum');
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var COAMapping;
    (function (COAMapping) {
        COAMapping[COAMapping["Bank"] = 0] = "Bank";
        COAMapping[COAMapping["Cash"] = 1] = "Cash";
        COAMapping[COAMapping["Other"] = 2] = "Other";
    })(COAMapping = VistaGL.COAMapping || (VistaGL.COAMapping = {}));
    Serenity.Decorators.registerEnumType(COAMapping, 'VistaGL.COAMapping', 'COAMapping');
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Common;
    (function (Common) {
        var UserPreferenceRow;
        (function (UserPreferenceRow) {
            UserPreferenceRow.idProperty = 'UserPreferenceId';
            UserPreferenceRow.nameProperty = 'Name';
            UserPreferenceRow.localTextPrefix = 'Common.UserPreference';
        })(UserPreferenceRow = Common.UserPreferenceRow || (Common.UserPreferenceRow = {}));
    })(Common = VistaGL.Common || (VistaGL.Common = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Common;
    (function (Common) {
        var UserPreferenceService;
        (function (UserPreferenceService) {
            UserPreferenceService.baseUrl = 'Common/UserPreference';
            [
                'Update',
                'Retrieve'
            ].forEach(function (x) {
                UserPreferenceService[x] = function (r, s, o) {
                    return Q.serviceRequest(UserPreferenceService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(UserPreferenceService = Common.UserPreferenceService || (Common.UserPreferenceService = {}));
    })(Common = VistaGL.Common || (VistaGL.Common = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccAccountingPeriodInformationForm = (function (_super) {
            __extends(AccAccountingPeriodInformationForm, _super);
            function AccAccountingPeriodInformationForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccAccountingPeriodInformationForm.init) {
                    AccAccountingPeriodInformationForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.DateEditor;
                    var w2 = s.BooleanEditor;
                    Q.initFormType(AccAccountingPeriodInformationForm, [
                        'YearName', w0,
                        'PeriodStartDate', w1,
                        'PeriodEndDate', w1,
                        'IsActive', w2,
                        'IsClosed', w2
                    ]);
                }
                return _this;
            }
            AccAccountingPeriodInformationForm.formKey = 'Configurations.AccAccountingPeriodInformation';
            return AccAccountingPeriodInformationForm;
        }(Serenity.PrefixedContext));
        Configurations.AccAccountingPeriodInformationForm = AccAccountingPeriodInformationForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccAccountingPeriodInformationRow;
        (function (AccAccountingPeriodInformationRow) {
            AccAccountingPeriodInformationRow.idProperty = 'Id';
            AccAccountingPeriodInformationRow.nameProperty = 'YearName';
            AccAccountingPeriodInformationRow.localTextPrefix = 'Configurations.AccAccountingPeriodInformation';
            AccAccountingPeriodInformationRow.lookupKey = 'Configurations.AccAccountingPeriodInformation';
            function getLookup() {
                return Q.getLookup('Configurations.AccAccountingPeriodInformation');
            }
            AccAccountingPeriodInformationRow.getLookup = getLookup;
        })(AccAccountingPeriodInformationRow = Configurations.AccAccountingPeriodInformationRow || (Configurations.AccAccountingPeriodInformationRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccAccountingPeriodInformationService;
        (function (AccAccountingPeriodInformationService) {
            AccAccountingPeriodInformationService.baseUrl = 'Configurations/AccAccountingPeriodInformation';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccAccountingPeriodInformationService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccAccountingPeriodInformationService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccAccountingPeriodInformationService = Configurations.AccAccountingPeriodInformationService || (Configurations.AccAccountingPeriodInformationService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccAdvanceDepositeReportForm = (function (_super) {
            __extends(AccAdvanceDepositeReportForm, _super);
            function AccAdvanceDepositeReportForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccAdvanceDepositeReportForm.init) {
                    AccAdvanceDepositeReportForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.DecimalEditor;
                    Q.initFormType(AccAdvanceDepositeReportForm, [
                        'FinancialId', w0,
                        'SubledgerId', w0,
                        'OpeningBalance', w1,
                        'During', w1
                    ]);
                }
                return _this;
            }
            AccAdvanceDepositeReportForm.formKey = 'Configurations.AccAdvanceDepositeReport';
            return AccAdvanceDepositeReportForm;
        }(Serenity.PrefixedContext));
        Configurations.AccAdvanceDepositeReportForm = AccAdvanceDepositeReportForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccAdvanceDepositeReportRow;
        (function (AccAdvanceDepositeReportRow) {
            AccAdvanceDepositeReportRow.idProperty = 'Id';
            AccAdvanceDepositeReportRow.localTextPrefix = 'Configurations.AccAdvanceDepositeReport';
            AccAdvanceDepositeReportRow.lookupKey = 'Configurations.AccAdvanceDepositeReport';
            function getLookup() {
                return Q.getLookup('Configurations.AccAdvanceDepositeReport');
            }
            AccAdvanceDepositeReportRow.getLookup = getLookup;
        })(AccAdvanceDepositeReportRow = Configurations.AccAdvanceDepositeReportRow || (Configurations.AccAdvanceDepositeReportRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccAdvanceDepositeReportService;
        (function (AccAdvanceDepositeReportService) {
            AccAdvanceDepositeReportService.baseUrl = 'Configurations/AccAdvanceDepositeReport';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccAdvanceDepositeReportService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccAdvanceDepositeReportService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccAdvanceDepositeReportService = Configurations.AccAdvanceDepositeReportService || (Configurations.AccAdvanceDepositeReportService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccArDoubtfulDebtsForm = (function (_super) {
            __extends(AccArDoubtfulDebtsForm, _super);
            function AccArDoubtfulDebtsForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccArDoubtfulDebtsForm.init) {
                    AccArDoubtfulDebtsForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.DecimalEditor;
                    Q.initFormType(AccArDoubtfulDebtsForm, [
                        'FinancialYearId', w0,
                        'DoubtfulDebtsAmount', w1,
                        'Receivable', w1,
                        'Adjusted', w1
                    ]);
                }
                return _this;
            }
            AccArDoubtfulDebtsForm.formKey = 'Configurations.AccArDoubtfulDebts';
            return AccArDoubtfulDebtsForm;
        }(Serenity.PrefixedContext));
        Configurations.AccArDoubtfulDebtsForm = AccArDoubtfulDebtsForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccArDoubtfulDebtsRow;
        (function (AccArDoubtfulDebtsRow) {
            AccArDoubtfulDebtsRow.idProperty = 'Id';
            AccArDoubtfulDebtsRow.localTextPrefix = 'Configurations.AccArDoubtfulDebts';
            AccArDoubtfulDebtsRow.lookupKey = 'Configurations.AccArDoubtfulDebts';
            function getLookup() {
                return Q.getLookup('Configurations.AccArDoubtfulDebts');
            }
            AccArDoubtfulDebtsRow.getLookup = getLookup;
        })(AccArDoubtfulDebtsRow = Configurations.AccArDoubtfulDebtsRow || (Configurations.AccArDoubtfulDebtsRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccArDoubtfulDebtsService;
        (function (AccArDoubtfulDebtsService) {
            AccArDoubtfulDebtsService.baseUrl = 'Configurations/AccArDoubtfulDebts';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccArDoubtfulDebtsService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccArDoubtfulDebtsService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccArDoubtfulDebtsService = Configurations.AccArDoubtfulDebtsService || (Configurations.AccArDoubtfulDebtsService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankAccountInformationForm = (function (_super) {
            __extends(AccBankAccountInformationForm, _super);
            function AccBankAccountInformationForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccBankAccountInformationForm.init) {
                    AccBankAccountInformationForm.init = true;
                    var s = Serenity;
                    var w0 = s.IntegerEditor;
                    var w1 = s.LookupEditor;
                    var w2 = s.StringEditor;
                    var w3 = s.TextAreaEditor;
                    Q.initFormType(AccBankAccountInformationForm, [
                        'Id', w0,
                        'BankId', w1,
                        'BankBranchId', w1,
                        'CoaId', w1,
                        'AccountName', w2,
                        'AccountNumber', w2,
                        'Code', w2,
                        'AccountDescription', w3
                    ]);
                }
                return _this;
            }
            AccBankAccountInformationForm.formKey = 'Configurations.AccBankAccountInformation';
            return AccBankAccountInformationForm;
        }(Serenity.PrefixedContext));
        Configurations.AccBankAccountInformationForm = AccBankAccountInformationForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankAccountInformationRow;
        (function (AccBankAccountInformationRow) {
            AccBankAccountInformationRow.idProperty = 'Id';
            AccBankAccountInformationRow.nameProperty = 'AccountNumber';
            AccBankAccountInformationRow.localTextPrefix = 'Configurations.AccBankAccountInformation';
            AccBankAccountInformationRow.lookupKey = 'Configurations.AccBankAccountInformation';
            function getLookup() {
                return Q.getLookup('Configurations.AccBankAccountInformation');
            }
            AccBankAccountInformationRow.getLookup = getLookup;
        })(AccBankAccountInformationRow = Configurations.AccBankAccountInformationRow || (Configurations.AccBankAccountInformationRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankAccountInformationService;
        (function (AccBankAccountInformationService) {
            AccBankAccountInformationService.baseUrl = 'Configurations/AccBankAccountInformation';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccBankAccountInformationService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccBankAccountInformationService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccBankAccountInformationService = Configurations.AccBankAccountInformationService || (Configurations.AccBankAccountInformationService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankAdviceLetterTemplateForm = (function (_super) {
            __extends(AccBankAdviceLetterTemplateForm, _super);
            function AccBankAdviceLetterTemplateForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccBankAdviceLetterTemplateForm.init) {
                    AccBankAdviceLetterTemplateForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.TextAreaEditor;
                    Q.initFormType(AccBankAdviceLetterTemplateForm, [
                        'Subject', w0,
                        'Body1', w1,
                        'Body2', w1
                    ]);
                }
                return _this;
            }
            AccBankAdviceLetterTemplateForm.formKey = 'Configurations.AccBankAdviceLetterTemplate';
            return AccBankAdviceLetterTemplateForm;
        }(Serenity.PrefixedContext));
        Configurations.AccBankAdviceLetterTemplateForm = AccBankAdviceLetterTemplateForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankAdviceLetterTemplateRow;
        (function (AccBankAdviceLetterTemplateRow) {
            AccBankAdviceLetterTemplateRow.idProperty = 'Id';
            AccBankAdviceLetterTemplateRow.nameProperty = 'Subject';
            AccBankAdviceLetterTemplateRow.localTextPrefix = 'Configurations.AccBankAdviceLetterTemplate';
            AccBankAdviceLetterTemplateRow.lookupKey = 'Configurations.AccBankAdviceLetterTemplate';
            function getLookup() {
                return Q.getLookup('Configurations.AccBankAdviceLetterTemplate');
            }
            AccBankAdviceLetterTemplateRow.getLookup = getLookup;
        })(AccBankAdviceLetterTemplateRow = Configurations.AccBankAdviceLetterTemplateRow || (Configurations.AccBankAdviceLetterTemplateRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankAdviceLetterTemplateService;
        (function (AccBankAdviceLetterTemplateService) {
            AccBankAdviceLetterTemplateService.baseUrl = 'Configurations/AccBankAdviceLetterTemplate';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccBankAdviceLetterTemplateService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccBankAdviceLetterTemplateService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccBankAdviceLetterTemplateService = Configurations.AccBankAdviceLetterTemplateService || (Configurations.AccBankAdviceLetterTemplateService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankBranchInformationForm = (function (_super) {
            __extends(AccBankBranchInformationForm, _super);
            function AccBankBranchInformationForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccBankBranchInformationForm.init) {
                    AccBankBranchInformationForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.TextAreaEditor;
                    Q.initFormType(AccBankBranchInformationForm, [
                        'BranchName', w0,
                        'Address', w1,
                        'Contacts', w0,
                        'Email', w0,
                        'Code', w0
                    ]);
                }
                return _this;
            }
            AccBankBranchInformationForm.formKey = 'Configurations.AccBankBranchInformation';
            return AccBankBranchInformationForm;
        }(Serenity.PrefixedContext));
        Configurations.AccBankBranchInformationForm = AccBankBranchInformationForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankBranchInformationRow;
        (function (AccBankBranchInformationRow) {
            AccBankBranchInformationRow.idProperty = 'Id';
            AccBankBranchInformationRow.nameProperty = 'BranchName';
            AccBankBranchInformationRow.localTextPrefix = 'Configurations.AccBankBranchInformation';
            AccBankBranchInformationRow.lookupKey = 'Configurations.AccBankBranchInformation';
            function getLookup() {
                return Q.getLookup('Configurations.AccBankBranchInformation');
            }
            AccBankBranchInformationRow.getLookup = getLookup;
        })(AccBankBranchInformationRow = Configurations.AccBankBranchInformationRow || (Configurations.AccBankBranchInformationRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankBranchInformationService;
        (function (AccBankBranchInformationService) {
            AccBankBranchInformationService.baseUrl = 'Configurations/AccBankBranchInformation';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccBankBranchInformationService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccBankBranchInformationService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccBankBranchInformationService = Configurations.AccBankBranchInformationService || (Configurations.AccBankBranchInformationService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankInformationForm = (function (_super) {
            __extends(AccBankInformationForm, _super);
            function AccBankInformationForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccBankInformationForm.init) {
                    AccBankInformationForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = Configurations.AccBankBranchInformationEditor;
                    Q.initFormType(AccBankInformationForm, [
                        'BankName', w0,
                        'Code', w0,
                        'BankBranchInformations', w1
                    ]);
                }
                return _this;
            }
            AccBankInformationForm.formKey = 'Configurations.AccBankInformation';
            return AccBankInformationForm;
        }(Serenity.PrefixedContext));
        Configurations.AccBankInformationForm = AccBankInformationForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankInformationRow;
        (function (AccBankInformationRow) {
            AccBankInformationRow.idProperty = 'Id';
            AccBankInformationRow.nameProperty = 'BankName';
            AccBankInformationRow.localTextPrefix = 'Configurations.AccBankInformation';
            AccBankInformationRow.lookupKey = 'Configurations.AccBankInformation';
            function getLookup() {
                return Q.getLookup('Configurations.AccBankInformation');
            }
            AccBankInformationRow.getLookup = getLookup;
        })(AccBankInformationRow = Configurations.AccBankInformationRow || (Configurations.AccBankInformationRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankInformationService;
        (function (AccBankInformationService) {
            AccBankInformationService.baseUrl = 'Configurations/AccBankInformation';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccBankInformationService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccBankInformationService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccBankInformationService = Configurations.AccBankInformationService || (Configurations.AccBankInformationService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBudgetGroupForm = (function (_super) {
            __extends(AccBudgetGroupForm, _super);
            function AccBudgetGroupForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccBudgetGroupForm.init) {
                    AccBudgetGroupForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.StringEditor;
                    var w2 = s.IntegerEditor;
                    var w3 = s.BooleanEditor;
                    var w4 = VistaGL.VoucherTemplateDrCrMappingEditor;
                    Q.initFormType(AccBudgetGroupForm, [
                        'ParentId', w0,
                        'BudgetCode', w1,
                        'GroupName', w1,
                        'SortingOrder', w2,
                        'IsHideChildrenFromThisLevel', w3,
                        'IsActive', w3,
                        'Type', w4
                    ]);
                }
                return _this;
            }
            AccBudgetGroupForm.formKey = 'Configurations.AccBudgetGroup';
            return AccBudgetGroupForm;
        }(Serenity.PrefixedContext));
        Configurations.AccBudgetGroupForm = AccBudgetGroupForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBudgetGroupRow;
        (function (AccBudgetGroupRow) {
            AccBudgetGroupRow.idProperty = 'Id';
            AccBudgetGroupRow.nameProperty = 'GroupName';
            AccBudgetGroupRow.localTextPrefix = 'Configurations.AccBudgetGroup';
            AccBudgetGroupRow.lookupKey = 'Configurations.AccBudgetGroup';
            function getLookup() {
                return Q.getLookup('Configurations.AccBudgetGroup');
            }
            AccBudgetGroupRow.getLookup = getLookup;
        })(AccBudgetGroupRow = Configurations.AccBudgetGroupRow || (Configurations.AccBudgetGroupRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBudgetGroupService;
        (function (AccBudgetGroupService) {
            AccBudgetGroupService.baseUrl = 'Configurations/AccBudgetGroup';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccBudgetGroupService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccBudgetGroupService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccBudgetGroupService = Configurations.AccBudgetGroupService || (Configurations.AccBudgetGroupService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBudgetZoneApproverForm = (function (_super) {
            __extends(AccBudgetZoneApproverForm, _super);
            function AccBudgetZoneApproverForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccBudgetZoneApproverForm.init) {
                    AccBudgetZoneApproverForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.IntegerEditor;
                    Q.initFormType(AccBudgetZoneApproverForm, [
                        'ZoneId', w0,
                        'EmployeeId', w0,
                        'EntityId', w1
                    ]);
                }
                return _this;
            }
            AccBudgetZoneApproverForm.formKey = 'Configurations.AccBudgetZoneApprover';
            return AccBudgetZoneApproverForm;
        }(Serenity.PrefixedContext));
        Configurations.AccBudgetZoneApproverForm = AccBudgetZoneApproverForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBudgetZoneApproverRow;
        (function (AccBudgetZoneApproverRow) {
            AccBudgetZoneApproverRow.idProperty = 'Id';
            AccBudgetZoneApproverRow.localTextPrefix = 'Configurations.AccBudgetZoneApprover';
            AccBudgetZoneApproverRow.lookupKey = 'Configurations.AccBudgetZoneApprover';
            function getLookup() {
                return Q.getLookup('Configurations.AccBudgetZoneApprover');
            }
            AccBudgetZoneApproverRow.getLookup = getLookup;
        })(AccBudgetZoneApproverRow = Configurations.AccBudgetZoneApproverRow || (Configurations.AccBudgetZoneApproverRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBudgetZoneApproverService;
        (function (AccBudgetZoneApproverService) {
            AccBudgetZoneApproverService.baseUrl = 'Configurations/AccBudgetZoneApprover';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccBudgetZoneApproverService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccBudgetZoneApproverService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccBudgetZoneApproverService = Configurations.AccBudgetZoneApproverService || (Configurations.AccBudgetZoneApproverService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCashFlowAdvTaxReportForm = (function (_super) {
            __extends(AccCashFlowAdvTaxReportForm, _super);
            function AccCashFlowAdvTaxReportForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccCashFlowAdvTaxReportForm.init) {
                    AccCashFlowAdvTaxReportForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.DecimalEditor;
                    Q.initFormType(AccCashFlowAdvTaxReportForm, [
                        'FinancialYearId', w0,
                        'AdvTaxAmount', w1,
                        'Opening', w1
                    ]);
                }
                return _this;
            }
            AccCashFlowAdvTaxReportForm.formKey = 'Configurations.AccCashFlowAdvTaxReport';
            return AccCashFlowAdvTaxReportForm;
        }(Serenity.PrefixedContext));
        Configurations.AccCashFlowAdvTaxReportForm = AccCashFlowAdvTaxReportForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCashFlowAdvTaxReportRow;
        (function (AccCashFlowAdvTaxReportRow) {
            AccCashFlowAdvTaxReportRow.idProperty = 'Id';
            AccCashFlowAdvTaxReportRow.localTextPrefix = 'Configurations.AccCashFlowAdvTaxReport';
            AccCashFlowAdvTaxReportRow.lookupKey = 'Configurations.AccCashFlowAdvTaxReport';
            function getLookup() {
                return Q.getLookup('Configurations.AccCashFlowAdvTaxReport');
            }
            AccCashFlowAdvTaxReportRow.getLookup = getLookup;
        })(AccCashFlowAdvTaxReportRow = Configurations.AccCashFlowAdvTaxReportRow || (Configurations.AccCashFlowAdvTaxReportRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCashFlowAdvTaxReportService;
        (function (AccCashFlowAdvTaxReportService) {
            AccCashFlowAdvTaxReportService.baseUrl = 'Configurations/AccCashFlowAdvTaxReport';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccCashFlowAdvTaxReportService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccCashFlowAdvTaxReportService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccCashFlowAdvTaxReportService = Configurations.AccCashFlowAdvTaxReportService || (Configurations.AccCashFlowAdvTaxReportService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccChartofAccountsForm = (function (_super) {
            __extends(AccChartofAccountsForm, _super);
            function AccChartofAccountsForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccChartofAccountsForm.init) {
                    AccChartofAccountsForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.StringEditor;
                    var w2 = s.IntegerEditor;
                    var w3 = s.DecimalEditor;
                    var w4 = s.EnumEditor;
                    var w5 = VistaGL.COAMappingEditor;
                    var w6 = s.BooleanEditor;
                    var w7 = VistaGL.AccHeadTypeMappingEditor;
                    Q.initFormType(AccChartofAccountsForm, [
                        'FundControlId', w0,
                        'AccountName', w1,
                        'UserCode', w1,
                        'ParentAccountId', w0,
                        'AccountCode', w1,
                        'Level', w2,
                        'AccountCodeCount', w2,
                        'AccountGroup', w1,
                        'AccOpeningBalance', w3,
                        'AccOpeningBalanceId', w2,
                        'MultiCurrencyId', w0,
                        'EffectCashFlow', w4,
                        'CoaMapping', w5,
                        'TaxId', w1,
                        'IsCostCenterAllocate', w6,
                        'IsBillRef', w6,
                        'IsControlhead', w6,
                        'NoaAccTypeId', w7,
                        'Remarks', w1,
                        'NoaAccTypeId2', w2,
                        'IsBudgetHead', w6,
                        'BudgetCode', w1,
                        'BudgetGroupId', w0,
                        'SortOrder', w2,
                        'ShowSumInReceiptPaymentReport', w6,
                        'IsHideChildrenFromThisLevel', w6,
                        'IsBalanceSheet', w6,
                        'BalanceSheetNotes', w2,
                        'IsIncomeExpenditure', w6,
                        'IncomeExpenditureNotes', w2
                    ]);
                }
                return _this;
            }
            AccChartofAccountsForm.formKey = 'Configurations.AccChartofAccounts';
            return AccChartofAccountsForm;
        }(Serenity.PrefixedContext));
        Configurations.AccChartofAccountsForm = AccChartofAccountsForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccChartofAccountsRow;
        (function (AccChartofAccountsRow) {
            AccChartofAccountsRow.idProperty = 'Id';
            AccChartofAccountsRow.nameProperty = 'AccountName';
            AccChartofAccountsRow.localTextPrefix = 'Configurations.AccChartofAccounts';
            AccChartofAccountsRow.lookupKey = 'Configurations.AccChartofAccounts';
            function getLookup() {
                return Q.getLookup('Configurations.AccChartofAccounts');
            }
            AccChartofAccountsRow.getLookup = getLookup;
        })(AccChartofAccountsRow = Configurations.AccChartofAccountsRow || (Configurations.AccChartofAccountsRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccChartofAccountsService;
        (function (AccChartofAccountsService) {
            AccChartofAccountsService.baseUrl = 'Configurations/AccChartofAccounts';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List',
                'SaveCoAList'
            ].forEach(function (x) {
                AccChartofAccountsService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccChartofAccountsService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccChartofAccountsService = Configurations.AccChartofAccountsService || (Configurations.AccChartofAccountsService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCoACostCenterOpeningBalanceForm = (function (_super) {
            __extends(AccCoACostCenterOpeningBalanceForm, _super);
            function AccCoACostCenterOpeningBalanceForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccCoACostCenterOpeningBalanceForm.init) {
                    AccCoACostCenterOpeningBalanceForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.DecimalEditor;
                    Q.initFormType(AccCoACostCenterOpeningBalanceForm, [
                        'CoAid', w0,
                        'CostCenterId', w0,
                        'OBDebit', w1,
                        'OBCredit', w1
                    ]);
                }
                return _this;
            }
            AccCoACostCenterOpeningBalanceForm.formKey = 'Configurations.AccCoACostCenterOpeningBalance';
            return AccCoACostCenterOpeningBalanceForm;
        }(Serenity.PrefixedContext));
        Configurations.AccCoACostCenterOpeningBalanceForm = AccCoACostCenterOpeningBalanceForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCoACostCenterOpeningBalanceRow;
        (function (AccCoACostCenterOpeningBalanceRow) {
            AccCoACostCenterOpeningBalanceRow.idProperty = 'Id';
            AccCoACostCenterOpeningBalanceRow.localTextPrefix = 'Configurations.AccCoACostCenterOpeningBalance';
            AccCoACostCenterOpeningBalanceRow.lookupKey = 'Configurations.AccCoACostCenterOpeningBalance';
            function getLookup() {
                return Q.getLookup('Configurations.AccCoACostCenterOpeningBalance');
            }
            AccCoACostCenterOpeningBalanceRow.getLookup = getLookup;
        })(AccCoACostCenterOpeningBalanceRow = Configurations.AccCoACostCenterOpeningBalanceRow || (Configurations.AccCoACostCenterOpeningBalanceRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCoACostCenterOpeningBalanceService;
        (function (AccCoACostCenterOpeningBalanceService) {
            AccCoACostCenterOpeningBalanceService.baseUrl = 'Configurations/AccCoACostCenterOpeningBalance';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccCoACostCenterOpeningBalanceService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccCoACostCenterOpeningBalanceService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccCoACostCenterOpeningBalanceService = Configurations.AccCoACostCenterOpeningBalanceService || (Configurations.AccCoACostCenterOpeningBalanceService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCommonDescriptionForm = (function (_super) {
            __extends(AccCommonDescriptionForm, _super);
            function AccCommonDescriptionForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccCommonDescriptionForm.init) {
                    AccCommonDescriptionForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.TextAreaEditor;
                    Q.initFormType(AccCommonDescriptionForm, [
                        'VoucherTypeId', w0,
                        'TransactionTypeId', w0,
                        'Description', w1
                    ]);
                }
                return _this;
            }
            AccCommonDescriptionForm.formKey = 'Configurations.AccCommonDescription';
            return AccCommonDescriptionForm;
        }(Serenity.PrefixedContext));
        Configurations.AccCommonDescriptionForm = AccCommonDescriptionForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCommonDescriptionRow;
        (function (AccCommonDescriptionRow) {
            AccCommonDescriptionRow.idProperty = 'Id';
            AccCommonDescriptionRow.nameProperty = 'Description';
            AccCommonDescriptionRow.localTextPrefix = 'Configurations.AccCommonDescription';
            AccCommonDescriptionRow.lookupKey = 'Configurations.AccCommonDescription';
            function getLookup() {
                return Q.getLookup('Configurations.AccCommonDescription');
            }
            AccCommonDescriptionRow.getLookup = getLookup;
        })(AccCommonDescriptionRow = Configurations.AccCommonDescriptionRow || (Configurations.AccCommonDescriptionRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCommonDescriptionService;
        (function (AccCommonDescriptionService) {
            AccCommonDescriptionService.baseUrl = 'Configurations/AccCommonDescription';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccCommonDescriptionService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccCommonDescriptionService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccCommonDescriptionService = Configurations.AccCommonDescriptionService || (Configurations.AccCommonDescriptionService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCostCenterTypeForm = (function (_super) {
            __extends(AccCostCenterTypeForm, _super);
            function AccCostCenterTypeForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccCostCenterTypeForm.init) {
                    AccCostCenterTypeForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.IntegerEditor;
                    Q.initFormType(AccCostCenterTypeForm, [
                        'CostCenterType', w0,
                        'SortOrder', w1
                    ]);
                }
                return _this;
            }
            AccCostCenterTypeForm.formKey = 'Configurations.AccCostCenterType';
            return AccCostCenterTypeForm;
        }(Serenity.PrefixedContext));
        Configurations.AccCostCenterTypeForm = AccCostCenterTypeForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCostCenterTypeRow;
        (function (AccCostCenterTypeRow) {
            AccCostCenterTypeRow.idProperty = 'Id';
            AccCostCenterTypeRow.nameProperty = 'CostCenterType';
            AccCostCenterTypeRow.localTextPrefix = 'Configurations.AccCostCenterType';
            AccCostCenterTypeRow.lookupKey = 'Configurations.AccCostCenterType';
            function getLookup() {
                return Q.getLookup('Configurations.AccCostCenterType');
            }
            AccCostCenterTypeRow.getLookup = getLookup;
        })(AccCostCenterTypeRow = Configurations.AccCostCenterTypeRow || (Configurations.AccCostCenterTypeRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCostCenterTypeService;
        (function (AccCostCenterTypeService) {
            AccCostCenterTypeService.baseUrl = 'Configurations/AccCostCenterType';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccCostCenterTypeService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccCostCenterTypeService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccCostCenterTypeService = Configurations.AccCostCenterTypeService || (Configurations.AccCostCenterTypeService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCostCentreDepreciationOpeningBalanceForm = (function (_super) {
            __extends(AccCostCentreDepreciationOpeningBalanceForm, _super);
            function AccCostCentreDepreciationOpeningBalanceForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccCostCentreDepreciationOpeningBalanceForm.init) {
                    AccCostCentreDepreciationOpeningBalanceForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.DecimalEditor;
                    Q.initFormType(AccCostCentreDepreciationOpeningBalanceForm, [
                        'CostCenterId', w0,
                        'OpeningBalanceCost', w1,
                        'OpeningBalanceDepreciation', w1
                    ]);
                }
                return _this;
            }
            AccCostCentreDepreciationOpeningBalanceForm.formKey = 'Configurations.AccCostCentreDepreciationOpeningBalance';
            return AccCostCentreDepreciationOpeningBalanceForm;
        }(Serenity.PrefixedContext));
        Configurations.AccCostCentreDepreciationOpeningBalanceForm = AccCostCentreDepreciationOpeningBalanceForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCostCentreDepreciationOpeningBalanceRow;
        (function (AccCostCentreDepreciationOpeningBalanceRow) {
            AccCostCentreDepreciationOpeningBalanceRow.idProperty = 'Id';
            AccCostCentreDepreciationOpeningBalanceRow.localTextPrefix = 'Configurations.AccCostCentreDepreciationOpeningBalance';
            AccCostCentreDepreciationOpeningBalanceRow.lookupKey = 'Configurations.AccCostCentreDepreciationOpeningBalance';
            function getLookup() {
                return Q.getLookup('Configurations.AccCostCentreDepreciationOpeningBalance');
            }
            AccCostCentreDepreciationOpeningBalanceRow.getLookup = getLookup;
        })(AccCostCentreDepreciationOpeningBalanceRow = Configurations.AccCostCentreDepreciationOpeningBalanceRow || (Configurations.AccCostCentreDepreciationOpeningBalanceRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCostCentreDepreciationOpeningBalanceService;
        (function (AccCostCentreDepreciationOpeningBalanceService) {
            AccCostCentreDepreciationOpeningBalanceService.baseUrl = 'Configurations/AccCostCentreDepreciationOpeningBalance';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccCostCentreDepreciationOpeningBalanceService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccCostCentreDepreciationOpeningBalanceService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccCostCentreDepreciationOpeningBalanceService = Configurations.AccCostCentreDepreciationOpeningBalanceService || (Configurations.AccCostCentreDepreciationOpeningBalanceService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCurrencyConversionForm = (function (_super) {
            __extends(AccCurrencyConversionForm, _super);
            function AccCurrencyConversionForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccCurrencyConversionForm.init) {
                    AccCurrencyConversionForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.TextAreaEditor;
                    Q.initFormType(AccCurrencyConversionForm, [
                        'Currency', w0,
                        'Symbol', w0,
                        'Remarks', w1
                    ]);
                }
                return _this;
            }
            AccCurrencyConversionForm.formKey = 'Configurations.AccCurrencyConversion';
            return AccCurrencyConversionForm;
        }(Serenity.PrefixedContext));
        Configurations.AccCurrencyConversionForm = AccCurrencyConversionForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCurrencyConversionRateForm = (function (_super) {
            __extends(AccCurrencyConversionRateForm, _super);
            function AccCurrencyConversionRateForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccCurrencyConversionRateForm.init) {
                    AccCurrencyConversionRateForm.init = true;
                    var s = Serenity;
                    var w0 = s.DecimalEditor;
                    var w1 = s.LookupEditor;
                    Q.initFormType(AccCurrencyConversionRateForm, [
                        'FirstAmout', w0,
                        'FirstCurrency', w1,
                        'SecondAmout', w0,
                        'SecondCurrency', w1
                    ]);
                }
                return _this;
            }
            AccCurrencyConversionRateForm.formKey = 'Configurations.AccCurrencyConversionRate';
            return AccCurrencyConversionRateForm;
        }(Serenity.PrefixedContext));
        Configurations.AccCurrencyConversionRateForm = AccCurrencyConversionRateForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCurrencyConversionRateRow;
        (function (AccCurrencyConversionRateRow) {
            AccCurrencyConversionRateRow.idProperty = 'Id';
            AccCurrencyConversionRateRow.localTextPrefix = 'Configurations.AccCurrencyConversionRate';
            AccCurrencyConversionRateRow.lookupKey = 'Configurations.AccCurrencyConversionRate';
            function getLookup() {
                return Q.getLookup('Configurations.AccCurrencyConversionRate');
            }
            AccCurrencyConversionRateRow.getLookup = getLookup;
        })(AccCurrencyConversionRateRow = Configurations.AccCurrencyConversionRateRow || (Configurations.AccCurrencyConversionRateRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCurrencyConversionRateService;
        (function (AccCurrencyConversionRateService) {
            AccCurrencyConversionRateService.baseUrl = 'Configurations/AccCurrencyConversionRate';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccCurrencyConversionRateService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccCurrencyConversionRateService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccCurrencyConversionRateService = Configurations.AccCurrencyConversionRateService || (Configurations.AccCurrencyConversionRateService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCurrencyConversionRow;
        (function (AccCurrencyConversionRow) {
            AccCurrencyConversionRow.idProperty = 'Id';
            AccCurrencyConversionRow.nameProperty = 'Currency';
            AccCurrencyConversionRow.localTextPrefix = 'Configurations.AccCurrencyConversion';
            AccCurrencyConversionRow.lookupKey = 'Configurations.AccCurrencyConversion';
            function getLookup() {
                return Q.getLookup('Configurations.AccCurrencyConversion');
            }
            AccCurrencyConversionRow.getLookup = getLookup;
        })(AccCurrencyConversionRow = Configurations.AccCurrencyConversionRow || (Configurations.AccCurrencyConversionRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCurrencyConversionService;
        (function (AccCurrencyConversionService) {
            AccCurrencyConversionService.baseUrl = 'Configurations/AccCurrencyConversion';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccCurrencyConversionService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccCurrencyConversionService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccCurrencyConversionService = Configurations.AccCurrencyConversionService || (Configurations.AccCurrencyConversionService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccFinancialReportsDetailsForm = (function (_super) {
            __extends(AccFinancialReportsDetailsForm, _super);
            function AccFinancialReportsDetailsForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccFinancialReportsDetailsForm.init) {
                    AccFinancialReportsDetailsForm.init = true;
                    var s = Serenity;
                    var w0 = VistaGL.FinancialReportEditor;
                    var w1 = s.LookupEditor;
                    var w2 = s.IntegerEditor;
                    var w3 = s.DecimalEditor;
                    Q.initFormType(AccFinancialReportsDetailsForm, [
                        'ReportType', w0,
                        'ZoneInfoId', w1,
                        'EntityId', w2,
                        'CoaId', w1,
                        'SubledgerId', w1,
                        'Opening', w3
                    ]);
                }
                return _this;
            }
            AccFinancialReportsDetailsForm.formKey = 'Configurations.AccFinancialReportsDetails';
            return AccFinancialReportsDetailsForm;
        }(Serenity.PrefixedContext));
        Configurations.AccFinancialReportsDetailsForm = AccFinancialReportsDetailsForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccFinancialReportsDetailsRow;
        (function (AccFinancialReportsDetailsRow) {
            AccFinancialReportsDetailsRow.idProperty = 'Id';
            AccFinancialReportsDetailsRow.localTextPrefix = 'Configurations.AccFinancialReportsDetails';
            AccFinancialReportsDetailsRow.lookupKey = 'Configurations.AccFinancialReportsDetails';
            function getLookup() {
                return Q.getLookup('Configurations.AccFinancialReportsDetails');
            }
            AccFinancialReportsDetailsRow.getLookup = getLookup;
        })(AccFinancialReportsDetailsRow = Configurations.AccFinancialReportsDetailsRow || (Configurations.AccFinancialReportsDetailsRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccFinancialReportsDetailsService;
        (function (AccFinancialReportsDetailsService) {
            AccFinancialReportsDetailsService.baseUrl = 'Configurations/AccFinancialReportsDetails';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccFinancialReportsDetailsService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccFinancialReportsDetailsService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccFinancialReportsDetailsService = Configurations.AccFinancialReportsDetailsService || (Configurations.AccFinancialReportsDetailsService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccFundControlInformationForm = (function (_super) {
            __extends(AccFundControlInformationForm, _super);
            function AccFundControlInformationForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccFundControlInformationForm.init) {
                    AccFundControlInformationForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.LookupEditor;
                    Q.initFormType(AccFundControlInformationForm, [
                        'FundControlName', w0,
                        'Code', w0,
                        'CurrencyId', w1
                    ]);
                }
                return _this;
            }
            AccFundControlInformationForm.formKey = 'Configurations.AccFundControlInformation';
            return AccFundControlInformationForm;
        }(Serenity.PrefixedContext));
        Configurations.AccFundControlInformationForm = AccFundControlInformationForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccFundControlInformationRow;
        (function (AccFundControlInformationRow) {
            AccFundControlInformationRow.idProperty = 'Id';
            AccFundControlInformationRow.nameProperty = 'FundControlName';
            AccFundControlInformationRow.localTextPrefix = 'Configurations.AccFundControlInformation';
            AccFundControlInformationRow.lookupKey = 'Configurations.AccFundControlInformation';
            function getLookup() {
                return Q.getLookup('Configurations.AccFundControlInformation');
            }
            AccFundControlInformationRow.getLookup = getLookup;
        })(AccFundControlInformationRow = Configurations.AccFundControlInformationRow || (Configurations.AccFundControlInformationRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccFundControlInformationService;
        (function (AccFundControlInformationService) {
            AccFundControlInformationService.baseUrl = 'Configurations/AccFundControlInformation';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List',
                'SetFundControl'
            ].forEach(function (x) {
                AccFundControlInformationService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccFundControlInformationService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccFundControlInformationService = Configurations.AccFundControlInformationService || (Configurations.AccFundControlInformationService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccFundControlZoneWiseApproverForm = (function (_super) {
            __extends(AccFundControlZoneWiseApproverForm, _super);
            function AccFundControlZoneWiseApproverForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccFundControlZoneWiseApproverForm.init) {
                    AccFundControlZoneWiseApproverForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    Q.initFormType(AccFundControlZoneWiseApproverForm, [
                        'FundControlId', w0,
                        'ZoneInfoId', w0,
                        'ApproverId', w0,
                        'PostingById', w0
                    ]);
                }
                return _this;
            }
            AccFundControlZoneWiseApproverForm.formKey = 'Configurations.AccFundControlZoneWiseApprover';
            return AccFundControlZoneWiseApproverForm;
        }(Serenity.PrefixedContext));
        Configurations.AccFundControlZoneWiseApproverForm = AccFundControlZoneWiseApproverForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccFundControlZoneWiseApproverRow;
        (function (AccFundControlZoneWiseApproverRow) {
            AccFundControlZoneWiseApproverRow.idProperty = 'Id';
            AccFundControlZoneWiseApproverRow.localTextPrefix = 'Configurations.AccFundControlZoneWiseApprover';
            AccFundControlZoneWiseApproverRow.lookupKey = 'Configurations.AccFundControlZoneWiseApprover';
            function getLookup() {
                return Q.getLookup('Configurations.AccFundControlZoneWiseApprover');
            }
            AccFundControlZoneWiseApproverRow.getLookup = getLookup;
        })(AccFundControlZoneWiseApproverRow = Configurations.AccFundControlZoneWiseApproverRow || (Configurations.AccFundControlZoneWiseApproverRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccFundControlZoneWiseApproverService;
        (function (AccFundControlZoneWiseApproverService) {
            AccFundControlZoneWiseApproverService.baseUrl = 'Configurations/AccFundControlZoneWiseApprover';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccFundControlZoneWiseApproverService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccFundControlZoneWiseApproverService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccFundControlZoneWiseApproverService = Configurations.AccFundControlZoneWiseApproverService || (Configurations.AccFundControlZoneWiseApproverService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccGovtLoanReportForm = (function (_super) {
            __extends(AccGovtLoanReportForm, _super);
            function AccGovtLoanReportForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccGovtLoanReportForm.init) {
                    AccGovtLoanReportForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.DecimalEditor;
                    var w2 = s.BooleanEditor;
                    Q.initFormType(AccGovtLoanReportForm, [
                        'CoaId', w0,
                        'LoanOpening', w1,
                        'LoanRefundOpening', w1,
                        'IsInterestFree', w2
                    ]);
                }
                return _this;
            }
            AccGovtLoanReportForm.formKey = 'Configurations.AccGovtLoanReport';
            return AccGovtLoanReportForm;
        }(Serenity.PrefixedContext));
        Configurations.AccGovtLoanReportForm = AccGovtLoanReportForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccGovtLoanReportRow;
        (function (AccGovtLoanReportRow) {
            AccGovtLoanReportRow.idProperty = 'Id';
            AccGovtLoanReportRow.localTextPrefix = 'Configurations.AccGovtLoanReport';
            AccGovtLoanReportRow.lookupKey = 'Configurations.AccGovtLoanReport';
            function getLookup() {
                return Q.getLookup('Configurations.AccGovtLoanReport');
            }
            AccGovtLoanReportRow.getLookup = getLookup;
        })(AccGovtLoanReportRow = Configurations.AccGovtLoanReportRow || (Configurations.AccGovtLoanReportRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccGovtLoanReportService;
        (function (AccGovtLoanReportService) {
            AccGovtLoanReportService.baseUrl = 'Configurations/AccGovtLoanReport';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccGovtLoanReportService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccGovtLoanReportService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccGovtLoanReportService = Configurations.AccGovtLoanReportService || (Configurations.AccGovtLoanReportService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccOpeningBalanceRow;
        (function (AccOpeningBalanceRow) {
            AccOpeningBalanceRow.idProperty = 'Id';
            AccOpeningBalanceRow.localTextPrefix = 'Configurations.AccOpeningBalance';
            AccOpeningBalanceRow.lookupKey = 'Configurations.AccOpeningBalance';
            function getLookup() {
                return Q.getLookup('Configurations.AccOpeningBalance');
            }
            AccOpeningBalanceRow.getLookup = getLookup;
        })(AccOpeningBalanceRow = Configurations.AccOpeningBalanceRow || (Configurations.AccOpeningBalanceRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccOpeningBalanceService;
        (function (AccOpeningBalanceService) {
            AccOpeningBalanceService.baseUrl = 'Configurations/AccOpeningBalance';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccOpeningBalanceService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccOpeningBalanceService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccOpeningBalanceService = Configurations.AccOpeningBalanceService || (Configurations.AccOpeningBalanceService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccPriorYearAdjustmentForm = (function (_super) {
            __extends(AccPriorYearAdjustmentForm, _super);
            function AccPriorYearAdjustmentForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccPriorYearAdjustmentForm.init) {
                    AccPriorYearAdjustmentForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.DecimalEditor;
                    Q.initFormType(AccPriorYearAdjustmentForm, [
                        'FinancialYearId', w0,
                        'IncomeTax', w1,
                        'Adjustment', w1
                    ]);
                }
                return _this;
            }
            AccPriorYearAdjustmentForm.formKey = 'Configurations.AccPriorYearAdjustment';
            return AccPriorYearAdjustmentForm;
        }(Serenity.PrefixedContext));
        Configurations.AccPriorYearAdjustmentForm = AccPriorYearAdjustmentForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccPriorYearAdjustmentRow;
        (function (AccPriorYearAdjustmentRow) {
            AccPriorYearAdjustmentRow.idProperty = 'Id';
            AccPriorYearAdjustmentRow.localTextPrefix = 'Configurations.AccPriorYearAdjustment';
            AccPriorYearAdjustmentRow.lookupKey = 'Configurations.AccPriorYearAdjustment';
            function getLookup() {
                return Q.getLookup('Configurations.AccPriorYearAdjustment');
            }
            AccPriorYearAdjustmentRow.getLookup = getLookup;
        })(AccPriorYearAdjustmentRow = Configurations.AccPriorYearAdjustmentRow || (Configurations.AccPriorYearAdjustmentRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccPriorYearAdjustmentService;
        (function (AccPriorYearAdjustmentService) {
            AccPriorYearAdjustmentService.baseUrl = 'Configurations/AccPriorYearAdjustment';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccPriorYearAdjustmentService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccPriorYearAdjustmentService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccPriorYearAdjustmentService = Configurations.AccPriorYearAdjustmentService || (Configurations.AccPriorYearAdjustmentService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeCoaMappingForm = (function (_super) {
            __extends(AccReportTypeCoaMappingForm, _super);
            function AccReportTypeCoaMappingForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccReportTypeCoaMappingForm.init) {
                    AccReportTypeCoaMappingForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.DecimalEditor;
                    Q.initFormType(AccReportTypeCoaMappingForm, [
                        'ReportTypeId', w0,
                        'GroupId', w0,
                        'CoaId', w0,
                        'OpeningBalance', w1
                    ]);
                }
                return _this;
            }
            AccReportTypeCoaMappingForm.formKey = 'Configurations.AccReportTypeCoaMapping';
            return AccReportTypeCoaMappingForm;
        }(Serenity.PrefixedContext));
        Configurations.AccReportTypeCoaMappingForm = AccReportTypeCoaMappingForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeCoaMappingRow;
        (function (AccReportTypeCoaMappingRow) {
            AccReportTypeCoaMappingRow.idProperty = 'Id';
            AccReportTypeCoaMappingRow.localTextPrefix = 'Configurations.AccReportTypeCoaMapping';
            AccReportTypeCoaMappingRow.lookupKey = 'Configurations.AccReportTypeCoaMapping';
            function getLookup() {
                return Q.getLookup('Configurations.AccReportTypeCoaMapping');
            }
            AccReportTypeCoaMappingRow.getLookup = getLookup;
        })(AccReportTypeCoaMappingRow = Configurations.AccReportTypeCoaMappingRow || (Configurations.AccReportTypeCoaMappingRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeCoaMappingService;
        (function (AccReportTypeCoaMappingService) {
            AccReportTypeCoaMappingService.baseUrl = 'Configurations/AccReportTypeCoaMapping';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccReportTypeCoaMappingService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccReportTypeCoaMappingService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccReportTypeCoaMappingService = Configurations.AccReportTypeCoaMappingService || (Configurations.AccReportTypeCoaMappingService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeCostCenterMappingForm = (function (_super) {
            __extends(AccReportTypeCostCenterMappingForm, _super);
            function AccReportTypeCostCenterMappingForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccReportTypeCostCenterMappingForm.init) {
                    AccReportTypeCostCenterMappingForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.DecimalEditor;
                    Q.initFormType(AccReportTypeCostCenterMappingForm, [
                        'ReportTypeId', w0,
                        'GroupId', w0,
                        'CostCenterId', w0,
                        'OpeningBalance', w1
                    ]);
                }
                return _this;
            }
            AccReportTypeCostCenterMappingForm.formKey = 'Configurations.AccReportTypeCostCenterMapping';
            return AccReportTypeCostCenterMappingForm;
        }(Serenity.PrefixedContext));
        Configurations.AccReportTypeCostCenterMappingForm = AccReportTypeCostCenterMappingForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeCostCenterMappingRow;
        (function (AccReportTypeCostCenterMappingRow) {
            AccReportTypeCostCenterMappingRow.idProperty = 'Id';
            AccReportTypeCostCenterMappingRow.localTextPrefix = 'Configurations.AccReportTypeCostCenterMapping';
            AccReportTypeCostCenterMappingRow.lookupKey = 'Configurations.AccReportTypeCostCenterMapping';
            function getLookup() {
                return Q.getLookup('Configurations.AccReportTypeCostCenterMapping');
            }
            AccReportTypeCostCenterMappingRow.getLookup = getLookup;
        })(AccReportTypeCostCenterMappingRow = Configurations.AccReportTypeCostCenterMappingRow || (Configurations.AccReportTypeCostCenterMappingRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeCostCenterMappingService;
        (function (AccReportTypeCostCenterMappingService) {
            AccReportTypeCostCenterMappingService.baseUrl = 'Configurations/AccReportTypeCostCenterMapping';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccReportTypeCostCenterMappingService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccReportTypeCostCenterMappingService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccReportTypeCostCenterMappingService = Configurations.AccReportTypeCostCenterMappingService || (Configurations.AccReportTypeCostCenterMappingService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeForm = (function (_super) {
            __extends(AccReportTypeForm, _super);
            function AccReportTypeForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccReportTypeForm.init) {
                    AccReportTypeForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    Q.initFormType(AccReportTypeForm, [
                        'ReportType', w0
                    ]);
                }
                return _this;
            }
            AccReportTypeForm.formKey = 'Configurations.AccReportType';
            return AccReportTypeForm;
        }(Serenity.PrefixedContext));
        Configurations.AccReportTypeForm = AccReportTypeForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeGroupOpeningBalanceForm = (function (_super) {
            __extends(AccReportTypeGroupOpeningBalanceForm, _super);
            function AccReportTypeGroupOpeningBalanceForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccReportTypeGroupOpeningBalanceForm.init) {
                    AccReportTypeGroupOpeningBalanceForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.IntegerEditor;
                    var w2 = s.DecimalEditor;
                    Q.initFormType(AccReportTypeGroupOpeningBalanceForm, [
                        'ReportTypeId', w0,
                        'GroupId', w0,
                        'ZoneId', w0,
                        'FundControlId', w1,
                        'OpeningBalance', w2
                    ]);
                }
                return _this;
            }
            AccReportTypeGroupOpeningBalanceForm.formKey = 'Configurations.AccReportTypeGroupOpeningBalance';
            return AccReportTypeGroupOpeningBalanceForm;
        }(Serenity.PrefixedContext));
        Configurations.AccReportTypeGroupOpeningBalanceForm = AccReportTypeGroupOpeningBalanceForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeGroupOpeningBalanceRow;
        (function (AccReportTypeGroupOpeningBalanceRow) {
            AccReportTypeGroupOpeningBalanceRow.idProperty = 'Id';
            AccReportTypeGroupOpeningBalanceRow.localTextPrefix = 'Configurations.AccReportTypeGroupOpeningBalance';
            AccReportTypeGroupOpeningBalanceRow.lookupKey = 'Configurations.AccReportTypeGroupOpeningBalance';
            function getLookup() {
                return Q.getLookup('Configurations.AccReportTypeGroupOpeningBalance');
            }
            AccReportTypeGroupOpeningBalanceRow.getLookup = getLookup;
        })(AccReportTypeGroupOpeningBalanceRow = Configurations.AccReportTypeGroupOpeningBalanceRow || (Configurations.AccReportTypeGroupOpeningBalanceRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeGroupOpeningBalanceService;
        (function (AccReportTypeGroupOpeningBalanceService) {
            AccReportTypeGroupOpeningBalanceService.baseUrl = 'Configurations/AccReportTypeGroupOpeningBalance';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccReportTypeGroupOpeningBalanceService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccReportTypeGroupOpeningBalanceService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccReportTypeGroupOpeningBalanceService = Configurations.AccReportTypeGroupOpeningBalanceService || (Configurations.AccReportTypeGroupOpeningBalanceService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeGroupSetupForm = (function (_super) {
            __extends(AccReportTypeGroupSetupForm, _super);
            function AccReportTypeGroupSetupForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccReportTypeGroupSetupForm.init) {
                    AccReportTypeGroupSetupForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.StringEditor;
                    var w2 = s.IntegerEditor;
                    var w3 = s.BooleanEditor;
                    var w4 = s.DecimalEditor;
                    Q.initFormType(AccReportTypeGroupSetupForm, [
                        'ReportTypeId', w0,
                        'ParentId', w0,
                        'GroupName', w1,
                        'SortingOrder', w2,
                        'ShowAutoSum', w3,
                        'NoteNo', w4,
                        'AddBlankSpaceBefore', w3,
                        'AddBlankSpaceAfter', w3,
                        'ShowBottomBorder', w3,
                        'ShowUpperBorder', w3,
                        'ShowLeftBorder', w3,
                        'ShowRightBorder', w3,
                        'Symbol', w1,
                        'FontWeight', w1,
                        'FundControlId', w2
                    ]);
                }
                return _this;
            }
            AccReportTypeGroupSetupForm.formKey = 'Configurations.AccReportTypeGroupSetup';
            return AccReportTypeGroupSetupForm;
        }(Serenity.PrefixedContext));
        Configurations.AccReportTypeGroupSetupForm = AccReportTypeGroupSetupForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeGroupSetupRow;
        (function (AccReportTypeGroupSetupRow) {
            AccReportTypeGroupSetupRow.idProperty = 'Id';
            AccReportTypeGroupSetupRow.nameProperty = 'GroupName';
            AccReportTypeGroupSetupRow.localTextPrefix = 'Configurations.AccReportTypeGroupSetup';
            AccReportTypeGroupSetupRow.lookupKey = 'Configurations.AccReportTypeGroupSetup';
            function getLookup() {
                return Q.getLookup('Configurations.AccReportTypeGroupSetup');
            }
            AccReportTypeGroupSetupRow.getLookup = getLookup;
        })(AccReportTypeGroupSetupRow = Configurations.AccReportTypeGroupSetupRow || (Configurations.AccReportTypeGroupSetupRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeGroupSetupService;
        (function (AccReportTypeGroupSetupService) {
            AccReportTypeGroupSetupService.baseUrl = 'Configurations/AccReportTypeGroupSetup';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccReportTypeGroupSetupService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccReportTypeGroupSetupService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccReportTypeGroupSetupService = Configurations.AccReportTypeGroupSetupService || (Configurations.AccReportTypeGroupSetupService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeRow;
        (function (AccReportTypeRow) {
            AccReportTypeRow.idProperty = 'Id';
            AccReportTypeRow.nameProperty = 'ReportType';
            AccReportTypeRow.localTextPrefix = 'Configurations.AccReportType';
            AccReportTypeRow.lookupKey = 'Configurations.AccReportType';
            function getLookup() {
                return Q.getLookup('Configurations.AccReportType');
            }
            AccReportTypeRow.getLookup = getLookup;
        })(AccReportTypeRow = Configurations.AccReportTypeRow || (Configurations.AccReportTypeRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeService;
        (function (AccReportTypeService) {
            AccReportTypeService.baseUrl = 'Configurations/AccReportType';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccReportTypeService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccReportTypeService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccReportTypeService = Configurations.AccReportTypeService || (Configurations.AccReportTypeService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccSetupForBankAdviceLetterForm = (function (_super) {
            __extends(AccSetupForBankAdviceLetterForm, _super);
            function AccSetupForBankAdviceLetterForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccSetupForBankAdviceLetterForm.init) {
                    AccSetupForBankAdviceLetterForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.StringEditor;
                    var w2 = s.TextAreaEditor;
                    var w3 = s.BooleanEditor;
                    var w4 = s.IntegerEditor;
                    Q.initFormType(AccSetupForBankAdviceLetterForm, [
                        'CoaId', w0,
                        'MemorandumNo', w1,
                        'Duplication', w2,
                        'IsAutoBankAdvice', w3,
                        'ZoneInfoId', w4,
                        'FundControlId', w4
                    ]);
                }
                return _this;
            }
            AccSetupForBankAdviceLetterForm.formKey = 'Configurations.AccSetupForBankAdviceLetter';
            return AccSetupForBankAdviceLetterForm;
        }(Serenity.PrefixedContext));
        Configurations.AccSetupForBankAdviceLetterForm = AccSetupForBankAdviceLetterForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccSetupForBankAdviceLetterRow;
        (function (AccSetupForBankAdviceLetterRow) {
            AccSetupForBankAdviceLetterRow.idProperty = 'Id';
            AccSetupForBankAdviceLetterRow.nameProperty = 'MemorandumNo';
            AccSetupForBankAdviceLetterRow.localTextPrefix = 'Configurations.AccSetupForBankAdviceLetter';
            AccSetupForBankAdviceLetterRow.lookupKey = 'Configurations.AccSetupForBankAdviceLetter';
            function getLookup() {
                return Q.getLookup('Configurations.AccSetupForBankAdviceLetter');
            }
            AccSetupForBankAdviceLetterRow.getLookup = getLookup;
        })(AccSetupForBankAdviceLetterRow = Configurations.AccSetupForBankAdviceLetterRow || (Configurations.AccSetupForBankAdviceLetterRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccSetupForBankAdviceLetterService;
        (function (AccSetupForBankAdviceLetterService) {
            AccSetupForBankAdviceLetterService.baseUrl = 'Configurations/AccSetupForBankAdviceLetter';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccSetupForBankAdviceLetterService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccSetupForBankAdviceLetterService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccSetupForBankAdviceLetterService = Configurations.AccSetupForBankAdviceLetterService || (Configurations.AccSetupForBankAdviceLetterService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccTransactionTypeForm = (function (_super) {
            __extends(AccTransactionTypeForm, _super);
            function AccTransactionTypeForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccTransactionTypeForm.init) {
                    AccTransactionTypeForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.StringEditor;
                    var w2 = VistaGL.COAMappingEditor;
                    var w3 = s.IntegerEditor;
                    var w4 = s.BooleanEditor;
                    var w5 = s.TextAreaEditor;
                    Q.initFormType(AccTransactionTypeForm, [
                        'VoucherTypeId', w0,
                        'TransactionType', w1,
                        'TransactionMode', w2,
                        'SortOrder', w3,
                        'IsbyDefault', w4,
                        'Remarks', w5
                    ]);
                }
                return _this;
            }
            AccTransactionTypeForm.formKey = 'Configurations.AccTransactionType';
            return AccTransactionTypeForm;
        }(Serenity.PrefixedContext));
        Configurations.AccTransactionTypeForm = AccTransactionTypeForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccTransactionTypeRow;
        (function (AccTransactionTypeRow) {
            AccTransactionTypeRow.idProperty = 'Id';
            AccTransactionTypeRow.nameProperty = 'TransactionType';
            AccTransactionTypeRow.localTextPrefix = 'Configurations.AccTransactionType';
            AccTransactionTypeRow.lookupKey = 'Configurations.AccTransactionType';
            function getLookup() {
                return Q.getLookup('Configurations.AccTransactionType');
            }
            AccTransactionTypeRow.getLookup = getLookup;
        })(AccTransactionTypeRow = Configurations.AccTransactionTypeRow || (Configurations.AccTransactionTypeRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccTransactionTypeService;
        (function (AccTransactionTypeService) {
            AccTransactionTypeService.baseUrl = 'Configurations/AccTransactionType';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccTransactionTypeService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccTransactionTypeService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccTransactionTypeService = Configurations.AccTransactionTypeService || (Configurations.AccTransactionTypeService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccUnitTypeForm = (function (_super) {
            __extends(AccUnitTypeForm, _super);
            function AccUnitTypeForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccUnitTypeForm.init) {
                    AccUnitTypeForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.TextAreaEditor;
                    Q.initFormType(AccUnitTypeForm, [
                        'UnitName', w0,
                        'Remarks', w1
                    ]);
                }
                return _this;
            }
            AccUnitTypeForm.formKey = 'Configurations.AccUnitType';
            return AccUnitTypeForm;
        }(Serenity.PrefixedContext));
        Configurations.AccUnitTypeForm = AccUnitTypeForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccUnitTypeRow;
        (function (AccUnitTypeRow) {
            AccUnitTypeRow.idProperty = 'Id';
            AccUnitTypeRow.nameProperty = 'UnitName';
            AccUnitTypeRow.localTextPrefix = 'Configurations.AccUnitType';
            AccUnitTypeRow.lookupKey = 'Configurations.AccUnitType';
            function getLookup() {
                return Q.getLookup('Configurations.AccUnitType');
            }
            AccUnitTypeRow.getLookup = getLookup;
        })(AccUnitTypeRow = Configurations.AccUnitTypeRow || (Configurations.AccUnitTypeRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccUnitTypeService;
        (function (AccUnitTypeService) {
            AccUnitTypeService.baseUrl = 'Configurations/AccUnitType';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccUnitTypeService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccUnitTypeService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccUnitTypeService = Configurations.AccUnitTypeService || (Configurations.AccUnitTypeService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiConfigDetailsForm = (function (_super) {
            __extends(AccVoucherApiConfigDetailsForm, _super);
            function AccVoucherApiConfigDetailsForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccVoucherApiConfigDetailsForm.init) {
                    AccVoucherApiConfigDetailsForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.StringEditor;
                    Q.initFormType(AccVoucherApiConfigDetailsForm, [
                        'AccountHeadId', w0,
                        'SubLedgerId', w0,
                        'DrCr', w1,
                        'Description', w1
                    ]);
                }
                return _this;
            }
            AccVoucherApiConfigDetailsForm.formKey = 'Configurations.AccVoucherApiConfigDetails';
            return AccVoucherApiConfigDetailsForm;
        }(Serenity.PrefixedContext));
        Configurations.AccVoucherApiConfigDetailsForm = AccVoucherApiConfigDetailsForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiConfigDetailsRow;
        (function (AccVoucherApiConfigDetailsRow) {
            AccVoucherApiConfigDetailsRow.idProperty = 'Id';
            AccVoucherApiConfigDetailsRow.nameProperty = 'DrCr';
            AccVoucherApiConfigDetailsRow.localTextPrefix = 'Configurations.AccVoucherApiConfigDetails';
            AccVoucherApiConfigDetailsRow.lookupKey = 'Configurations.AccVoucherApiConfigDetails';
            function getLookup() {
                return Q.getLookup('Configurations.AccVoucherApiConfigDetails');
            }
            AccVoucherApiConfigDetailsRow.getLookup = getLookup;
        })(AccVoucherApiConfigDetailsRow = Configurations.AccVoucherApiConfigDetailsRow || (Configurations.AccVoucherApiConfigDetailsRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiConfigDetailsService;
        (function (AccVoucherApiConfigDetailsService) {
            AccVoucherApiConfigDetailsService.baseUrl = 'Configurations/AccVoucherApiConfigDetails';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccVoucherApiConfigDetailsService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccVoucherApiConfigDetailsService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccVoucherApiConfigDetailsService = Configurations.AccVoucherApiConfigDetailsService || (Configurations.AccVoucherApiConfigDetailsService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiConfigForm = (function (_super) {
            __extends(AccVoucherApiConfigForm, _super);
            function AccVoucherApiConfigForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccVoucherApiConfigForm.init) {
                    AccVoucherApiConfigForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.LookupEditor;
                    var w2 = Configurations.AccVoucherApiConfigDetailsEditor;
                    Q.initFormType(AccVoucherApiConfigForm, [
                        'ConfigName', w0,
                        'ModuleId', w0,
                        'FormName', w0,
                        'VouchrTypeId', w1,
                        'TransactionId', w1,
                        'TransactionMode', w0,
                        'Narration', w0,
                        'FundControlId', w1,
                        'VoucherApiConfigDetails', w2
                    ]);
                }
                return _this;
            }
            AccVoucherApiConfigForm.formKey = 'Configurations.AccVoucherApiConfig';
            return AccVoucherApiConfigForm;
        }(Serenity.PrefixedContext));
        Configurations.AccVoucherApiConfigForm = AccVoucherApiConfigForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiConfigRow;
        (function (AccVoucherApiConfigRow) {
            AccVoucherApiConfigRow.idProperty = 'Id';
            AccVoucherApiConfigRow.nameProperty = 'ConfigName';
            AccVoucherApiConfigRow.localTextPrefix = 'Configurations.AccVoucherApiConfig';
            AccVoucherApiConfigRow.lookupKey = 'Configurations.AccVoucherApiConfig';
            function getLookup() {
                return Q.getLookup('Configurations.AccVoucherApiConfig');
            }
            AccVoucherApiConfigRow.getLookup = getLookup;
        })(AccVoucherApiConfigRow = Configurations.AccVoucherApiConfigRow || (Configurations.AccVoucherApiConfigRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiConfigService;
        (function (AccVoucherApiConfigService) {
            AccVoucherApiConfigService.baseUrl = 'Configurations/AccVoucherApiConfig';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccVoucherApiConfigService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccVoucherApiConfigService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccVoucherApiConfigService = Configurations.AccVoucherApiConfigService || (Configurations.AccVoucherApiConfigService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiDetailsForm = (function (_super) {
            __extends(AccVoucherApiDetailsForm, _super);
            function AccVoucherApiDetailsForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccVoucherApiDetailsForm.init) {
                    AccVoucherApiDetailsForm.init = true;
                    var s = Serenity;
                    var w0 = s.IntegerEditor;
                    var w1 = s.LookupEditor;
                    var w2 = s.StringEditor;
                    var w3 = s.DecimalEditor;
                    Q.initFormType(AccVoucherApiDetailsForm, [
                        'ConfigId', w0,
                        'AccountHeadId', w1,
                        'DrCr', w2,
                        'Description', w2,
                        'Amount', w3,
                        'EmpId', w0
                    ]);
                }
                return _this;
            }
            AccVoucherApiDetailsForm.formKey = 'Configurations.AccVoucherApiDetails';
            return AccVoucherApiDetailsForm;
        }(Serenity.PrefixedContext));
        Configurations.AccVoucherApiDetailsForm = AccVoucherApiDetailsForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiDetailsRow;
        (function (AccVoucherApiDetailsRow) {
            AccVoucherApiDetailsRow.idProperty = 'Id';
            AccVoucherApiDetailsRow.nameProperty = 'DrCr';
            AccVoucherApiDetailsRow.localTextPrefix = 'Configurations.AccVoucherApiDetails';
            AccVoucherApiDetailsRow.lookupKey = 'Configurations.AccVoucherApiDetails';
            function getLookup() {
                return Q.getLookup('Configurations.AccVoucherApiDetails');
            }
            AccVoucherApiDetailsRow.getLookup = getLookup;
        })(AccVoucherApiDetailsRow = Configurations.AccVoucherApiDetailsRow || (Configurations.AccVoucherApiDetailsRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiDetailsService;
        (function (AccVoucherApiDetailsService) {
            AccVoucherApiDetailsService.baseUrl = 'Configurations/AccVoucherApiDetails';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccVoucherApiDetailsService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccVoucherApiDetailsService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccVoucherApiDetailsService = Configurations.AccVoucherApiDetailsService || (Configurations.AccVoucherApiDetailsService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiForm = (function (_super) {
            __extends(AccVoucherApiForm, _super);
            function AccVoucherApiForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccVoucherApiForm.init) {
                    AccVoucherApiForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.IntegerEditor;
                    var w2 = s.StringEditor;
                    Q.initFormType(AccVoucherApiForm, [
                        'ConfigId', w0,
                        'VouchrTypeId', w1,
                        'TransactionId', w1,
                        'Narration', w2,
                        'TransactionMode', w2,
                        'EmpId', w0
                    ]);
                }
                return _this;
            }
            AccVoucherApiForm.formKey = 'Configurations.AccVoucherApi';
            return AccVoucherApiForm;
        }(Serenity.PrefixedContext));
        Configurations.AccVoucherApiForm = AccVoucherApiForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiRow;
        (function (AccVoucherApiRow) {
            AccVoucherApiRow.idProperty = 'Id';
            AccVoucherApiRow.nameProperty = 'Narration';
            AccVoucherApiRow.localTextPrefix = 'Configurations.AccVoucherApi';
            AccVoucherApiRow.lookupKey = 'Configurations.AccVoucherApiRow';
            function getLookup() {
                return Q.getLookup('Configurations.AccVoucherApiRow');
            }
            AccVoucherApiRow.getLookup = getLookup;
        })(AccVoucherApiRow = Configurations.AccVoucherApiRow || (Configurations.AccVoucherApiRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiService;
        (function (AccVoucherApiService) {
            AccVoucherApiService.baseUrl = 'Configurations/AccVoucherApi';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccVoucherApiService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccVoucherApiService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccVoucherApiService = Configurations.AccVoucherApiService || (Configurations.AccVoucherApiService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherTypeForm = (function (_super) {
            __extends(AccVoucherTypeForm, _super);
            function AccVoucherTypeForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccVoucherTypeForm.init) {
                    AccVoucherTypeForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.IntegerEditor;
                    Q.initFormType(AccVoucherTypeForm, [
                        'Name', w0,
                        'SortOrder', w1
                    ]);
                }
                return _this;
            }
            AccVoucherTypeForm.formKey = 'Configurations.AccVoucherType';
            return AccVoucherTypeForm;
        }(Serenity.PrefixedContext));
        Configurations.AccVoucherTypeForm = AccVoucherTypeForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherTypeRow;
        (function (AccVoucherTypeRow) {
            AccVoucherTypeRow.idProperty = 'Id';
            AccVoucherTypeRow.nameProperty = 'Name';
            AccVoucherTypeRow.localTextPrefix = 'Configurations.AccVoucherType';
            AccVoucherTypeRow.lookupKey = 'Configurations.AccVoucherType';
            function getLookup() {
                return Q.getLookup('Configurations.AccVoucherType');
            }
            AccVoucherTypeRow.getLookup = getLookup;
        })(AccVoucherTypeRow = Configurations.AccVoucherTypeRow || (Configurations.AccVoucherTypeRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherTypeService;
        (function (AccVoucherTypeService) {
            AccVoucherTypeService.baseUrl = 'Configurations/AccVoucherType';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccVoucherTypeService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccVoucherTypeService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccVoucherTypeService = Configurations.AccVoucherTypeService || (Configurations.AccVoucherTypeService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var ImportCoAForm = (function (_super) {
            __extends(ImportCoAForm, _super);
            function ImportCoAForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!ImportCoAForm.init) {
                    ImportCoAForm.init = true;
                    var s = Serenity;
                    var w0 = Configurations.CoAEditor;
                    Q.initFormType(ImportCoAForm, [
                        'CoADebit', w0
                    ]);
                }
                return _this;
            }
            ImportCoAForm.formKey = 'Configurations.ImportCoAForm';
            return ImportCoAForm;
        }(Serenity.PrefixedContext));
        Configurations.ImportCoAForm = ImportCoAForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var PrmDepartmentRow;
        (function (PrmDepartmentRow) {
            PrmDepartmentRow.idProperty = 'Id';
            PrmDepartmentRow.nameProperty = 'Name';
            PrmDepartmentRow.localTextPrefix = 'Configurations.PrmDepartment';
        })(PrmDepartmentRow = Configurations.PrmDepartmentRow || (Configurations.PrmDepartmentRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var PrmEmploymentInfoRow;
        (function (PrmEmploymentInfoRow) {
            PrmEmploymentInfoRow.idProperty = 'Id';
            PrmEmploymentInfoRow.nameProperty = 'LookupText';
            PrmEmploymentInfoRow.localTextPrefix = 'Configurations.PrmEmploymentInfo';
            PrmEmploymentInfoRow.lookupKey = 'Configurations.PrmEmploymentInfo';
            function getLookup() {
                return Q.getLookup('Configurations.PrmEmploymentInfo');
            }
            PrmEmploymentInfoRow.getLookup = getLookup;
        })(PrmEmploymentInfoRow = Configurations.PrmEmploymentInfoRow || (Configurations.PrmEmploymentInfoRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var PrmEmploymentInfoService;
        (function (PrmEmploymentInfoService) {
            PrmEmploymentInfoService.baseUrl = 'Configurations/PrmEmploymentInfo';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                PrmEmploymentInfoService[x] = function (r, s, o) {
                    return Q.serviceRequest(PrmEmploymentInfoService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(PrmEmploymentInfoService = Configurations.PrmEmploymentInfoService || (Configurations.PrmEmploymentInfoService = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var PrmZoneInfoRow;
        (function (PrmZoneInfoRow) {
            PrmZoneInfoRow.idProperty = 'Id';
            PrmZoneInfoRow.nameProperty = 'ZoneName';
            PrmZoneInfoRow.localTextPrefix = 'Configurations.PrmZoneInfo';
            PrmZoneInfoRow.lookupKey = 'Configurations.PrmZoneInfoRow';
            function getLookup() {
                return Q.getLookup('Configurations.PrmZoneInfoRow');
            }
            PrmZoneInfoRow.getLookup = getLookup;
        })(PrmZoneInfoRow = Configurations.PrmZoneInfoRow || (Configurations.PrmZoneInfoRow = {}));
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var selectFundControlInformationsForm = (function (_super) {
            __extends(selectFundControlInformationsForm, _super);
            function selectFundControlInformationsForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!selectFundControlInformationsForm.init) {
                    selectFundControlInformationsForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    Q.initFormType(selectFundControlInformationsForm, [
                        'FundControlInformationId', w0
                    ]);
                }
                return _this;
            }
            selectFundControlInformationsForm.formKey = 'Configurations.selectFundControlInformationsForm';
            return selectFundControlInformationsForm;
        }(Serenity.PrefixedContext));
        Configurations.selectFundControlInformationsForm = selectFundControlInformationsForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var VoucherPreviewForm = (function (_super) {
            __extends(VoucherPreviewForm, _super);
            function VoucherPreviewForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!VoucherPreviewForm.init) {
                    VoucherPreviewForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    Q.initFormType(VoucherPreviewForm, [
                        'FundControlInformationId', w0
                    ]);
                }
                return _this;
            }
            VoucherPreviewForm.formKey = 'Configurations.VoucherPreviewForm';
            return VoucherPreviewForm;
        }(Serenity.PrefixedContext));
        Configurations.VoucherPreviewForm = VoucherPreviewForm;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Default;
    (function (Default) {
        var AuditLogForm = (function (_super) {
            __extends(AuditLogForm, _super);
            function AuditLogForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AuditLogForm.init) {
                    AuditLogForm.init = true;
                    var s = Serenity;
                    var w0 = s.IntegerEditor;
                    var w1 = s.StringEditor;
                    var w2 = s.LookupEditor;
                    var w3 = s.DateTimeEditor;
                    var w4 = s.TextAreaEditor;
                    Q.initFormType(AuditLogForm, [
                        'UserId', w0,
                        'UserName', w1,
                        'UserFullName', w1,
                        'ZoneName', w1,
                        'Action', w2,
                        'ChangedOn', w3,
                        'Module', w1,
                        'Page', w1,
                        'RowId', w0,
                        'DBTableName', w2,
                        'Changes', w4
                    ]);
                }
                return _this;
            }
            AuditLogForm.formKey = 'Default.AuditLog';
            return AuditLogForm;
        }(Serenity.PrefixedContext));
        Default.AuditLogForm = AuditLogForm;
    })(Default = VistaGL.Default || (VistaGL.Default = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Default;
    (function (Default) {
        var AuditLogRow;
        (function (AuditLogRow) {
            AuditLogRow.idProperty = 'Id';
            AuditLogRow.nameProperty = 'UserName';
            AuditLogRow.localTextPrefix = 'Default.AuditLog';
            AuditLogRow.lookupKey = 'Default.AuditLog';
            function getLookup() {
                return Q.getLookup('Default.AuditLog');
            }
            AuditLogRow.getLookup = getLookup;
        })(AuditLogRow = Default.AuditLogRow || (Default.AuditLogRow = {}));
    })(Default = VistaGL.Default || (VistaGL.Default = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Default;
    (function (Default) {
        var AuditLogService;
        (function (AuditLogService) {
            AuditLogService.baseUrl = 'Default/AuditLog';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AuditLogService[x] = function (r, s, o) {
                    return Q.serviceRequest(AuditLogService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AuditLogService = Default.AuditLogService || (Default.AuditLogService = {}));
    })(Default = VistaGL.Default || (VistaGL.Default = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var EffectinCashFlow;
    (function (EffectinCashFlow) {
        EffectinCashFlow[EffectinCashFlow["Investing"] = 0] = "Investing";
        EffectinCashFlow[EffectinCashFlow["Operating"] = 1] = "Operating";
        EffectinCashFlow[EffectinCashFlow["Financing"] = 2] = "Financing";
    })(EffectinCashFlow = VistaGL.EffectinCashFlow || (VistaGL.EffectinCashFlow = {}));
    Serenity.Decorators.registerEnumType(EffectinCashFlow, 'VistaGL.EffectinCashFlow', 'EffectinCashFlow');
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var FixedAssetDevWorkType;
    (function (FixedAssetDevWorkType) {
        FixedAssetDevWorkType[FixedAssetDevWorkType["IsFixedAssetDevWork"] = 1] = "IsFixedAssetDevWork";
        FixedAssetDevWorkType[FixedAssetDevWorkType["IsFixedAssetNonDevWork"] = 2] = "IsFixedAssetNonDevWork";
    })(FixedAssetDevWorkType = VistaGL.FixedAssetDevWorkType || (VistaGL.FixedAssetDevWorkType = {}));
    Serenity.Decorators.registerEnumType(FixedAssetDevWorkType, 'VistaGL.FixedAssetDevWorkType');
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var HRM;
    (function (HRM) {
        var EmploymentInfoRow;
        (function (EmploymentInfoRow) {
            EmploymentInfoRow.idProperty = 'Id';
            EmploymentInfoRow.nameProperty = 'LookupText';
            EmploymentInfoRow.localTextPrefix = 'HRM.EmploymentInfo';
            EmploymentInfoRow.lookupKey = 'HRM.EmploymentInfo';
            function getLookup() {
                return Q.getLookup('HRM.EmploymentInfo');
            }
            EmploymentInfoRow.getLookup = getLookup;
        })(EmploymentInfoRow = HRM.EmploymentInfoRow || (HRM.EmploymentInfoRow = {}));
    })(HRM = VistaGL.HRM || (VistaGL.HRM = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var HRM;
    (function (HRM) {
        var EmploymentInfoService;
        (function (EmploymentInfoService) {
            EmploymentInfoService.baseUrl = 'HRM/EmploymentInfo';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                EmploymentInfoService[x] = function (r, s, o) {
                    return Q.serviceRequest(EmploymentInfoService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(EmploymentInfoService = HRM.EmploymentInfoService || (HRM.EmploymentInfoService = {}));
    })(HRM = VistaGL.HRM || (VistaGL.HRM = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Membership;
    (function (Membership) {
        var ChangePasswordForm = (function (_super) {
            __extends(ChangePasswordForm, _super);
            function ChangePasswordForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!ChangePasswordForm.init) {
                    ChangePasswordForm.init = true;
                    var s = Serenity;
                    var w0 = s.PasswordEditor;
                    Q.initFormType(ChangePasswordForm, [
                        'OldPassword', w0,
                        'NewPassword', w0,
                        'ConfirmPassword', w0
                    ]);
                }
                return _this;
            }
            ChangePasswordForm.formKey = 'Membership.ChangePassword';
            return ChangePasswordForm;
        }(Serenity.PrefixedContext));
        Membership.ChangePasswordForm = ChangePasswordForm;
    })(Membership = VistaGL.Membership || (VistaGL.Membership = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Membership;
    (function (Membership) {
        var ForgotPasswordForm = (function (_super) {
            __extends(ForgotPasswordForm, _super);
            function ForgotPasswordForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!ForgotPasswordForm.init) {
                    ForgotPasswordForm.init = true;
                    var s = Serenity;
                    var w0 = s.EmailEditor;
                    Q.initFormType(ForgotPasswordForm, [
                        'Email', w0
                    ]);
                }
                return _this;
            }
            ForgotPasswordForm.formKey = 'Membership.ForgotPassword';
            return ForgotPasswordForm;
        }(Serenity.PrefixedContext));
        Membership.ForgotPasswordForm = ForgotPasswordForm;
    })(Membership = VistaGL.Membership || (VistaGL.Membership = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Membership;
    (function (Membership) {
        var LoginForm = (function (_super) {
            __extends(LoginForm, _super);
            function LoginForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!LoginForm.init) {
                    LoginForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.PasswordEditor;
                    Q.initFormType(LoginForm, [
                        'Username', w0,
                        'Password', w1
                    ]);
                }
                return _this;
            }
            LoginForm.formKey = 'Membership.Login';
            return LoginForm;
        }(Serenity.PrefixedContext));
        Membership.LoginForm = LoginForm;
    })(Membership = VistaGL.Membership || (VistaGL.Membership = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Membership;
    (function (Membership) {
        var ResetPasswordForm = (function (_super) {
            __extends(ResetPasswordForm, _super);
            function ResetPasswordForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!ResetPasswordForm.init) {
                    ResetPasswordForm.init = true;
                    var s = Serenity;
                    var w0 = s.PasswordEditor;
                    Q.initFormType(ResetPasswordForm, [
                        'NewPassword', w0,
                        'ConfirmPassword', w0
                    ]);
                }
                return _this;
            }
            ResetPasswordForm.formKey = 'Membership.ResetPassword';
            return ResetPasswordForm;
        }(Serenity.PrefixedContext));
        Membership.ResetPasswordForm = ResetPasswordForm;
    })(Membership = VistaGL.Membership || (VistaGL.Membership = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Membership;
    (function (Membership) {
        var SignUpForm = (function (_super) {
            __extends(SignUpForm, _super);
            function SignUpForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!SignUpForm.init) {
                    SignUpForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.EmailEditor;
                    var w2 = s.PasswordEditor;
                    Q.initFormType(SignUpForm, [
                        'DisplayName', w0,
                        'Email', w1,
                        'ConfirmEmail', w1,
                        'Password', w2,
                        'ConfirmPassword', w2
                    ]);
                }
                return _this;
            }
            SignUpForm.formKey = 'Membership.SignUp';
            return SignUpForm;
        }(Serenity.PrefixedContext));
        Membership.SignUpForm = SignUpForm;
    })(Membership = VistaGL.Membership || (VistaGL.Membership = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var RTransferType;
    (function (RTransferType) {
        RTransferType[RTransferType["BanktoBank"] = 0] = "BanktoBank";
        RTransferType[RTransferType["BanktoCash"] = 1] = "BanktoCash";
        RTransferType[RTransferType["CashtoBank"] = 2] = "CashtoBank";
    })(RTransferType = VistaGL.RTransferType || (VistaGL.RTransferType = {}));
    Serenity.Decorators.registerEnumType(RTransferType, 'VistaGL.RTransferType', 'RTransferType');
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var SignatureType;
    (function (SignatureType) {
        SignatureType[SignatureType["PreparedBy"] = 1] = "PreparedBy";
        SignatureType[SignatureType["CheckedBy"] = 2] = "CheckedBy";
        SignatureType[SignatureType["ApprovedBy"] = 3] = "ApprovedBy";
        SignatureType[SignatureType["PostedBy"] = 4] = "PostedBy";
    })(SignatureType = VistaGL.SignatureType || (VistaGL.SignatureType = {}));
    Serenity.Decorators.registerEnumType(SignatureType, 'VistaGL.SignatureType', 'SignatureType');
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBankAdviceLetterService;
        (function (AccBankAdviceLetterService) {
            AccBankAdviceLetterService.baseUrl = 'Transaction/AccBankAdviceLetter';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccBankAdviceLetterService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccBankAdviceLetterService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccBankAdviceLetterService = Transaction.AccBankAdviceLetterService || (Transaction.AccBankAdviceLetterService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBankReconciliationDirectForm = (function (_super) {
            __extends(AccBankReconciliationDirectForm, _super);
            function AccBankReconciliationDirectForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccBankReconciliationDirectForm.init) {
                    AccBankReconciliationDirectForm.init = true;
                    var s = Serenity;
                    var w0 = s.DateEditor;
                    var w1 = s.StringEditor;
                    var w2 = VistaGL.BRTransactionTypeEditorDDL;
                    var w3 = s.LookupEditor;
                    var w4 = s.DecimalEditor;
                    var w5 = _Ext.AutoCompleteEditor;
                    Q.initFormType(AccBankReconciliationDirectForm, [
                        'VoucherDate', w0,
                        'VoucherNumber', w1,
                        'TransactionType', w2,
                        'BankAccountInformationId', w3,
                        'Amount', w4,
                        'PaytoOrReciveFrom', w5,
                        'ChequeNo', w1,
                        'ChequeDate', w0,
                        'ClearDate', w0,
                        'Description', w1,
                        'FundControlInformationId', w3
                    ]);
                }
                return _this;
            }
            AccBankReconciliationDirectForm.formKey = 'Transaction.AccBankReconciliationDirect';
            return AccBankReconciliationDirectForm;
        }(Serenity.PrefixedContext));
        Transaction.AccBankReconciliationDirectForm = AccBankReconciliationDirectForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBankReconciliationDirectRow;
        (function (AccBankReconciliationDirectRow) {
            AccBankReconciliationDirectRow.idProperty = 'Id';
            AccBankReconciliationDirectRow.nameProperty = 'ChequeNo';
            AccBankReconciliationDirectRow.localTextPrefix = 'Transaction.AccBankReconciliationDirect';
            AccBankReconciliationDirectRow.lookupKey = 'Transaction.AccBankReconciliationDirect';
            function getLookup() {
                return Q.getLookup('Transaction.AccBankReconciliationDirect');
            }
            AccBankReconciliationDirectRow.getLookup = getLookup;
        })(AccBankReconciliationDirectRow = Transaction.AccBankReconciliationDirectRow || (Transaction.AccBankReconciliationDirectRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBankReconciliationDirectService;
        (function (AccBankReconciliationDirectService) {
            AccBankReconciliationDirectService.baseUrl = 'Transaction/AccBankReconciliationDirect';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccBankReconciliationDirectService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccBankReconciliationDirectService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccBankReconciliationDirectService = Transaction.AccBankReconciliationDirectService || (Transaction.AccBankReconciliationDirectService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetApprovalHistoryForm = (function (_super) {
            __extends(AccBudgetApprovalHistoryForm, _super);
            function AccBudgetApprovalHistoryForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccBudgetApprovalHistoryForm.init) {
                    AccBudgetApprovalHistoryForm.init = true;
                    var s = Serenity;
                    var w0 = s.IntegerEditor;
                    var w1 = s.EnumEditor;
                    Q.initFormType(AccBudgetApprovalHistoryForm, [
                        'BudgetForDepartmentId', w0,
                        'FromAppoverId', w0,
                        'ApprovalStatusId', w1,
                        'ToApproverId', w0
                    ]);
                }
                return _this;
            }
            AccBudgetApprovalHistoryForm.formKey = 'Transaction.AccBudgetApprovalHistory';
            return AccBudgetApprovalHistoryForm;
        }(Serenity.PrefixedContext));
        Transaction.AccBudgetApprovalHistoryForm = AccBudgetApprovalHistoryForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetApprovalHistoryRow;
        (function (AccBudgetApprovalHistoryRow) {
            AccBudgetApprovalHistoryRow.idProperty = 'Id';
            AccBudgetApprovalHistoryRow.localTextPrefix = 'Transaction.AccBudgetApprovalHistory';
        })(AccBudgetApprovalHistoryRow = Transaction.AccBudgetApprovalHistoryRow || (Transaction.AccBudgetApprovalHistoryRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetApprovalHistoryService;
        (function (AccBudgetApprovalHistoryService) {
            AccBudgetApprovalHistoryService.baseUrl = 'Transaction/AccBudgetApprovalHistory';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccBudgetApprovalHistoryService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccBudgetApprovalHistoryService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccBudgetApprovalHistoryService = Transaction.AccBudgetApprovalHistoryService || (Transaction.AccBudgetApprovalHistoryService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetCircularForm = (function (_super) {
            __extends(AccBudgetCircularForm, _super);
            function AccBudgetCircularForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccBudgetCircularForm.init) {
                    AccBudgetCircularForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.BooleanEditor;
                    Q.initFormType(AccBudgetCircularForm, [
                        'FinancialYearId', w0,
                        'IsActive', w1
                    ]);
                }
                return _this;
            }
            AccBudgetCircularForm.formKey = 'Transaction.AccBudgetCircular';
            return AccBudgetCircularForm;
        }(Serenity.PrefixedContext));
        Transaction.AccBudgetCircularForm = AccBudgetCircularForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetCircularRow;
        (function (AccBudgetCircularRow) {
            AccBudgetCircularRow.idProperty = 'Id';
            AccBudgetCircularRow.nameProperty = 'FinancialYearYearName';
            AccBudgetCircularRow.localTextPrefix = 'Transaction.AccBudgetCircular';
            AccBudgetCircularRow.lookupKey = 'Transaction.AccBudgetCircular';
            function getLookup() {
                return Q.getLookup('Transaction.AccBudgetCircular');
            }
            AccBudgetCircularRow.getLookup = getLookup;
        })(AccBudgetCircularRow = Transaction.AccBudgetCircularRow || (Transaction.AccBudgetCircularRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetCircularService;
        (function (AccBudgetCircularService) {
            AccBudgetCircularService.baseUrl = 'Transaction/AccBudgetCircular';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccBudgetCircularService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccBudgetCircularService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccBudgetCircularService = Transaction.AccBudgetCircularService || (Transaction.AccBudgetCircularService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetCreationForm = (function (_super) {
            __extends(AccBudgetCreationForm, _super);
            function AccBudgetCreationForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccBudgetCreationForm.init) {
                    AccBudgetCreationForm.init = true;
                    var s = Serenity;
                    var w0 = s.IntegerEditor;
                    var w1 = s.BooleanEditor;
                    var w2 = s.StringEditor;
                    var w3 = s.DecimalEditor;
                    Q.initFormType(AccBudgetCreationForm, [
                        'BudgetForDepartmentId', w0,
                        'BudgetGroupId', w0,
                        'ParentId', w0,
                        'BudgetHeadId', w0,
                        'IsCoa', w1,
                        'IsBudgetHead', w1,
                        'BudgetHeadName', w2,
                        'ProposedBudgetAmount', w3,
                        'RevisedEstimateAmount', w3
                    ]);
                }
                return _this;
            }
            AccBudgetCreationForm.formKey = 'Transaction.AccBudgetCreation';
            return AccBudgetCreationForm;
        }(Serenity.PrefixedContext));
        Transaction.AccBudgetCreationForm = AccBudgetCreationForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetCreationService;
        (function (AccBudgetCreationService) {
            AccBudgetCreationService.baseUrl = 'Transaction/AccBudgetCreation';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List',
                'GetFinancialYearName',
                'GetBudgetApproverList'
            ].forEach(function (x) {
                AccBudgetCreationService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccBudgetCreationService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccBudgetCreationService = Transaction.AccBudgetCreationService || (Transaction.AccBudgetCreationService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetDetailsForm = (function (_super) {
            __extends(AccBudgetDetailsForm, _super);
            function AccBudgetDetailsForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccBudgetDetailsForm.init) {
                    AccBudgetDetailsForm.init = true;
                    var s = Serenity;
                    var w0 = s.IntegerEditor;
                    var w1 = s.LookupEditor;
                    var w2 = s.BooleanEditor;
                    var w3 = s.DecimalEditor;
                    var w4 = s.StringEditor;
                    Q.initFormType(AccBudgetDetailsForm, [
                        'BudgetId', w0,
                        'BudgetGroupId', w0,
                        'BudgetHeadId', w1,
                        'ParentId', w0,
                        'IsCoa', w2,
                        'IsBudgetHead', w2,
                        'IsCostCenter', w2,
                        'BudgetAmount', w3,
                        'BudgetCode', w4,
                        'BgSortOrder', w0
                    ]);
                }
                return _this;
            }
            AccBudgetDetailsForm.formKey = 'Transaction.AccBudgetDetails';
            return AccBudgetDetailsForm;
        }(Serenity.PrefixedContext));
        Transaction.AccBudgetDetailsForm = AccBudgetDetailsForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetDetailsRow;
        (function (AccBudgetDetailsRow) {
            AccBudgetDetailsRow.idProperty = 'Id';
            AccBudgetDetailsRow.nameProperty = 'BudgetHeadName';
            AccBudgetDetailsRow.localTextPrefix = 'Transaction.AccBudgetDetails';
            AccBudgetDetailsRow.lookupKey = 'Transaction.AccBudgetDetails';
            function getLookup() {
                return Q.getLookup('Transaction.AccBudgetDetails');
            }
            AccBudgetDetailsRow.getLookup = getLookup;
        })(AccBudgetDetailsRow = Transaction.AccBudgetDetailsRow || (Transaction.AccBudgetDetailsRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetDetailsService;
        (function (AccBudgetDetailsService) {
            AccBudgetDetailsService.baseUrl = 'Transaction/AccBudgetDetails';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccBudgetDetailsService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccBudgetDetailsService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccBudgetDetailsService = Transaction.AccBudgetDetailsService || (Transaction.AccBudgetDetailsService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetForDepartmentDetailForm = (function (_super) {
            __extends(AccBudgetForDepartmentDetailForm, _super);
            function AccBudgetForDepartmentDetailForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccBudgetForDepartmentDetailForm.init) {
                    AccBudgetForDepartmentDetailForm.init = true;
                    var s = Serenity;
                    var w0 = s.IntegerEditor;
                    var w1 = s.BooleanEditor;
                    Q.initFormType(AccBudgetForDepartmentDetailForm, [
                        'BudgetForDepartmentId', w0,
                        'BudgetGroupId', w0,
                        'ParentId', w0,
                        'BudgetHeadId', w0,
                        'IsCoa', w1,
                        'IsBudgetHead', w1
                    ]);
                }
                return _this;
            }
            AccBudgetForDepartmentDetailForm.formKey = 'Transaction.AccBudgetForDepartmentDetail';
            return AccBudgetForDepartmentDetailForm;
        }(Serenity.PrefixedContext));
        Transaction.AccBudgetForDepartmentDetailForm = AccBudgetForDepartmentDetailForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetForDepartmentDetailRow;
        (function (AccBudgetForDepartmentDetailRow) {
            AccBudgetForDepartmentDetailRow.idProperty = 'Id';
            AccBudgetForDepartmentDetailRow.nameProperty = 'BudgetHeadName';
            AccBudgetForDepartmentDetailRow.localTextPrefix = 'Transaction.AccBudgetForDepartmentDetail';
            AccBudgetForDepartmentDetailRow.lookupKey = 'Transaction.AccBudgetForDepartmentDetail';
            function getLookup() {
                return Q.getLookup('Transaction.AccBudgetForDepartmentDetail');
            }
            AccBudgetForDepartmentDetailRow.getLookup = getLookup;
        })(AccBudgetForDepartmentDetailRow = Transaction.AccBudgetForDepartmentDetailRow || (Transaction.AccBudgetForDepartmentDetailRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetForDepartmentDetailService;
        (function (AccBudgetForDepartmentDetailService) {
            AccBudgetForDepartmentDetailService.baseUrl = 'Transaction/AccBudgetForDepartmentDetail';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccBudgetForDepartmentDetailService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccBudgetForDepartmentDetailService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccBudgetForDepartmentDetailService = Transaction.AccBudgetForDepartmentDetailService || (Transaction.AccBudgetForDepartmentDetailService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetForDepartmentForm = (function (_super) {
            __extends(AccBudgetForDepartmentForm, _super);
            function AccBudgetForDepartmentForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccBudgetForDepartmentForm.init) {
                    AccBudgetForDepartmentForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.IntegerEditor;
                    var w2 = Transaction.AccBudgetForDepartmentDetailEditor;
                    Q.initFormType(AccBudgetForDepartmentForm, [
                        'BudgetCircularId', w0,
                        'ZoneId', w1,
                        'BudgetCircularFinancialYearId', w0,
                        'DepartmentId', w0,
                        'AccBudgetForDepartmentDetailList', w2
                    ]);
                }
                return _this;
            }
            AccBudgetForDepartmentForm.formKey = 'Transaction.AccBudgetForDepartment';
            return AccBudgetForDepartmentForm;
        }(Serenity.PrefixedContext));
        Transaction.AccBudgetForDepartmentForm = AccBudgetForDepartmentForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetForDepartmentRow;
        (function (AccBudgetForDepartmentRow) {
            AccBudgetForDepartmentRow.idProperty = 'Id';
            AccBudgetForDepartmentRow.localTextPrefix = 'Transaction.AccBudgetForDepartment';
            AccBudgetForDepartmentRow.lookupKey = 'Transaction.AccBudgetForDepartment';
            function getLookup() {
                return Q.getLookup('Transaction.AccBudgetForDepartment');
            }
            AccBudgetForDepartmentRow.getLookup = getLookup;
        })(AccBudgetForDepartmentRow = Transaction.AccBudgetForDepartmentRow || (Transaction.AccBudgetForDepartmentRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetForDepartmentService;
        (function (AccBudgetForDepartmentService) {
            AccBudgetForDepartmentService.baseUrl = 'Transaction/AccBudgetForDepartment';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List',
                'BudgetHeadList'
            ].forEach(function (x) {
                AccBudgetForDepartmentService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccBudgetForDepartmentService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccBudgetForDepartmentService = Transaction.AccBudgetForDepartmentService || (Transaction.AccBudgetForDepartmentService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetForm = (function (_super) {
            __extends(AccBudgetForm, _super);
            function AccBudgetForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccBudgetForm.init) {
                    AccBudgetForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.IntegerEditor;
                    var w2 = s.BooleanEditor;
                    var w3 = Transaction.AccBudgetDetailsEditor;
                    var w4 = s.MultipleImageUploadEditor;
                    Q.initFormType(AccBudgetForm, [
                        'FinancialYearId', w0,
                        'ZoneInfoId', w1,
                        'EntityId', w1,
                        'IsApproved', w2,
                        'BudgetDetails', w3,
                        'Attachment', w4
                    ]);
                }
                return _this;
            }
            AccBudgetForm.formKey = 'Transaction.AccBudget';
            return AccBudgetForm;
        }(Serenity.PrefixedContext));
        Transaction.AccBudgetForm = AccBudgetForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetRow;
        (function (AccBudgetRow) {
            AccBudgetRow.idProperty = 'Id';
            AccBudgetRow.nameProperty = 'FinancialYearYearName';
            AccBudgetRow.localTextPrefix = 'Transaction.AccBudget';
            AccBudgetRow.lookupKey = 'Transaction.AccBudget';
            function getLookup() {
                return Q.getLookup('Transaction.AccBudget');
            }
            AccBudgetRow.getLookup = getLookup;
        })(AccBudgetRow = Transaction.AccBudgetRow || (Transaction.AccBudgetRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetService;
        (function (AccBudgetService) {
            AccBudgetService.baseUrl = 'Transaction/AccBudget';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccBudgetService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccBudgetService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccBudgetService = Transaction.AccBudgetService || (Transaction.AccBudgetService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequeBookForm = (function (_super) {
            __extends(AccChequeBookForm, _super);
            function AccChequeBookForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccChequeBookForm.init) {
                    AccChequeBookForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.StringEditor;
                    var w2 = s.DateEditor;
                    var w3 = s.IntegerEditor;
                    var w4 = s.BooleanEditor;
                    Q.initFormType(AccChequeBookForm, [
                        'BankAccountInformationId', w0,
                        'AccountName', w1,
                        'BankName', w1,
                        'BranchName', w1,
                        'CheckBookName', w1,
                        'CBDate', w2,
                        'StartingNo', w1,
                        'Prefix', w1,
                        'PageNo', w3,
                        'EndingNo', w3,
                        'HasFinished', w4
                    ]);
                }
                return _this;
            }
            AccChequeBookForm.formKey = 'Transaction.AccChequeBook';
            return AccChequeBookForm;
        }(Serenity.PrefixedContext));
        Transaction.AccChequeBookForm = AccChequeBookForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequeBookRow;
        (function (AccChequeBookRow) {
            AccChequeBookRow.idProperty = 'Id';
            AccChequeBookRow.nameProperty = 'CheckBookName';
            AccChequeBookRow.localTextPrefix = 'Transaction.AccChequeBook';
            AccChequeBookRow.lookupKey = 'Transaction.AccChequeBook';
            function getLookup() {
                return Q.getLookup('Transaction.AccChequeBook');
            }
            AccChequeBookRow.getLookup = getLookup;
        })(AccChequeBookRow = Transaction.AccChequeBookRow || (Transaction.AccChequeBookRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequeBookService;
        (function (AccChequeBookService) {
            AccChequeBookService.baseUrl = 'Transaction/AccChequeBook';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccChequeBookService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccChequeBookService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccChequeBookService = Transaction.AccChequeBookService || (Transaction.AccChequeBookService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequePreparationService;
        (function (AccChequePreparationService) {
            AccChequePreparationService.baseUrl = 'Transaction/AccChequePreparation';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccChequePreparationService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccChequePreparationService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccChequePreparationService = Transaction.AccChequePreparationService || (Transaction.AccChequePreparationService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequeReceiveRegisterForm = (function (_super) {
            __extends(AccChequeReceiveRegisterForm, _super);
            function AccChequeReceiveRegisterForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccChequeReceiveRegisterForm.init) {
                    AccChequeReceiveRegisterForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.DateEditor;
                    var w2 = VistaGL.RecChequeTypeMappingEditor;
                    var w3 = VistaGL.ChequeTypeMappingEditor;
                    var w4 = s.DecimalEditor;
                    var w5 = s.TextAreaEditor;
                    var w6 = s.BooleanEditor;
                    Q.initFormType(AccChequeReceiveRegisterForm, [
                        'RecieveFrom', w0,
                        'ChequeReceiveDate', w1,
                        'AccountNo', w0,
                        'ReceiveType', w2,
                        'AccountName', w0,
                        'ChequeNo', w0,
                        'BankName', w0,
                        'ChequeType', w3,
                        'BranchName', w0,
                        'ChequeDate', w1,
                        'Amount', w4,
                        'Remarks', w5,
                        'IsCancelled', w6,
                        'IsUsed', w6
                    ]);
                }
                return _this;
            }
            AccChequeReceiveRegisterForm.formKey = 'Transaction.AccChequeReceiveRegister';
            return AccChequeReceiveRegisterForm;
        }(Serenity.PrefixedContext));
        Transaction.AccChequeReceiveRegisterForm = AccChequeReceiveRegisterForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequeReceiveRegisterRow;
        (function (AccChequeReceiveRegisterRow) {
            AccChequeReceiveRegisterRow.idProperty = 'Id';
            AccChequeReceiveRegisterRow.nameProperty = 'AccountName';
            AccChequeReceiveRegisterRow.localTextPrefix = 'Transaction.AccChequeReceiveRegister';
            AccChequeReceiveRegisterRow.lookupKey = 'Transaction.AccChequeReceiveRegister';
            function getLookup() {
                return Q.getLookup('Transaction.AccChequeReceiveRegister');
            }
            AccChequeReceiveRegisterRow.getLookup = getLookup;
        })(AccChequeReceiveRegisterRow = Transaction.AccChequeReceiveRegisterRow || (Transaction.AccChequeReceiveRegisterRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequeReceiveRegisterService;
        (function (AccChequeReceiveRegisterService) {
            AccChequeReceiveRegisterService.baseUrl = 'Transaction/AccChequeReceiveRegister';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccChequeReceiveRegisterService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccChequeReceiveRegisterService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccChequeReceiveRegisterService = Transaction.AccChequeReceiveRegisterService || (Transaction.AccChequeReceiveRegisterService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequeRegisterForm = (function (_super) {
            __extends(AccChequeRegisterForm, _super);
            function AccChequeRegisterForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccChequeRegisterForm.init) {
                    AccChequeRegisterForm.init = true;
                    var s = Serenity;
                    var w0 = s.DateEditor;
                    var w1 = _Ext.AutoCompleteEditor;
                    var w2 = s.LookupEditor;
                    var w3 = s.StringEditor;
                    var w4 = VistaGL.ChequeBookEditor;
                    var w5 = VistaGL.ChequeTypeMappingEditor;
                    var w6 = s.DecimalEditor;
                    var w7 = s.TextAreaEditor;
                    var w8 = s.BooleanEditor;
                    Q.initFormType(AccChequeRegisterForm, [
                        'ChequeIssueDate', w0,
                        'PayTo', w1,
                        'BankAccountInformationId', w2,
                        'ChequeBookId', w2,
                        'AccountName', w3,
                        'ChequeNo', w4,
                        'BankName', w3,
                        'ChequeType', w5,
                        'BranchName', w3,
                        'ChequeDate', w0,
                        'Amount', w6,
                        'Remarks', w7,
                        'IsBankAdvice', w8,
                        'BankAdviceDate', w0,
                        'IsFinished', w8,
                        'ChequeNumhdn', w6,
                        'ChequeNoTemp', w3,
                        'IsCancelled', w8,
                        'isAdjusted', w8
                    ]);
                }
                return _this;
            }
            AccChequeRegisterForm.formKey = 'Transaction.AccChequeRegister';
            return AccChequeRegisterForm;
        }(Serenity.PrefixedContext));
        Transaction.AccChequeRegisterForm = AccChequeRegisterForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequeRegisterRow;
        (function (AccChequeRegisterRow) {
            AccChequeRegisterRow.idProperty = 'Id';
            AccChequeRegisterRow.nameProperty = 'ChequeNo';
            AccChequeRegisterRow.localTextPrefix = 'Transaction.AccChequeRegister';
            AccChequeRegisterRow.lookupKey = 'Transaction.AccChequeRegister';
            function getLookup() {
                return Q.getLookup('Transaction.AccChequeRegister');
            }
            AccChequeRegisterRow.getLookup = getLookup;
        })(AccChequeRegisterRow = Transaction.AccChequeRegisterRow || (Transaction.AccChequeRegisterRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequeRegisterService;
        (function (AccChequeRegisterService) {
            AccChequeRegisterService.baseUrl = 'Transaction/AccChequeRegister';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccChequeRegisterService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccChequeRegisterService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccChequeRegisterService = Transaction.AccChequeRegisterService || (Transaction.AccChequeRegisterService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccCostCentreOrInstituteInformationForm = (function (_super) {
            __extends(AccCostCentreOrInstituteInformationForm, _super);
            function AccCostCentreOrInstituteInformationForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccCostCentreOrInstituteInformationForm.init) {
                    AccCostCentreOrInstituteInformationForm.init = true;
                    var s = Serenity;
                    var w0 = s.BooleanEditor;
                    var w1 = s.LookupEditor;
                    var w2 = s.StringEditor;
                    var w3 = s.IntegerEditor;
                    var w4 = s.TextAreaEditor;
                    var w5 = s.RadioButtonEditor;
                    var w6 = s.DecimalEditor;
                    Q.initFormType(AccCostCentreOrInstituteInformationForm, [
                        'IsInstitute', w0,
                        'CostCenterTypeId', w1,
                        'EmpId', w1,
                        'UserCode', w2,
                        'AccountCodeClient', w2,
                        'Code', w2,
                        'CodeCount', w3,
                        'Name', w2,
                        'NameForBankAdviceLetter', w2,
                        'ParentId', w1,
                        'Remarks', w4,
                        'IsActive', w0,
                        'IsBudgetHead', w0,
                        'BudgetCode', w2,
                        'BudgetGroupId', w1,
                        'FromCostCenter', w1,
                        'ToCostCenter', w1,
                        'ZoneName', w2,
                        'IsFixedAssetHead', w0,
                        'FixedAssetDevWorkTypeSelector', w5,
                        'DepreciationRate', w6
                    ]);
                }
                return _this;
            }
            AccCostCentreOrInstituteInformationForm.formKey = 'Transaction.AccCostCentreOrInstituteInformation';
            return AccCostCentreOrInstituteInformationForm;
        }(Serenity.PrefixedContext));
        Transaction.AccCostCentreOrInstituteInformationForm = AccCostCentreOrInstituteInformationForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccCostCentreOrInstituteInformationRow;
        (function (AccCostCentreOrInstituteInformationRow) {
            AccCostCentreOrInstituteInformationRow.idProperty = 'Id';
            AccCostCentreOrInstituteInformationRow.nameProperty = 'LookupText';
            AccCostCentreOrInstituteInformationRow.localTextPrefix = 'Transaction.AccCostCentreOrInstituteInformation';
            AccCostCentreOrInstituteInformationRow.lookupKey = 'Transaction.AccCostCentreOrInstituteInformation';
            function getLookup() {
                return Q.getLookup('Transaction.AccCostCentreOrInstituteInformation');
            }
            AccCostCentreOrInstituteInformationRow.getLookup = getLookup;
        })(AccCostCentreOrInstituteInformationRow = Transaction.AccCostCentreOrInstituteInformationRow || (Transaction.AccCostCentreOrInstituteInformationRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccCostCentreOrInstituteInformationService;
        (function (AccCostCentreOrInstituteInformationService) {
            AccCostCentreOrInstituteInformationService.baseUrl = 'Transaction/AccCostCentreOrInstituteInformation';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccCostCentreOrInstituteInformationService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccCostCentreOrInstituteInformationService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccCostCentreOrInstituteInformationService = Transaction.AccCostCentreOrInstituteInformationService || (Transaction.AccCostCentreOrInstituteInformationService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccCreditVoucherFromMoneyReceiptService;
        (function (AccCreditVoucherFromMoneyReceiptService) {
            AccCreditVoucherFromMoneyReceiptService.baseUrl = 'Transaction/AccCreditVoucherFromMoneyReceipt';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List',
                'CreateCreditVoucher',
                'BulkAction'
            ].forEach(function (x) {
                AccCreditVoucherFromMoneyReceiptService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccCreditVoucherFromMoneyReceiptService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccCreditVoucherFromMoneyReceiptService = Transaction.AccCreditVoucherFromMoneyReceiptService || (Transaction.AccCreditVoucherFromMoneyReceiptService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccCreditVoucherParametersForm = (function (_super) {
            __extends(AccCreditVoucherParametersForm, _super);
            function AccCreditVoucherParametersForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccCreditVoucherParametersForm.init) {
                    AccCreditVoucherParametersForm.init = true;
                    var s = Serenity;
                    var w0 = s.DateEditor;
                    var w1 = _Ext.AutoCompleteEditor;
                    var w2 = s.TextAreaEditor;
                    Q.initFormType(AccCreditVoucherParametersForm, [
                        'CreditVoucherDate', w0,
                        'ReceiveFrom', w1,
                        'CreditVoucherNarration', w2
                    ]);
                }
                return _this;
            }
            AccCreditVoucherParametersForm.formKey = 'Transaction.AccCreditVoucherParameters';
            return AccCreditVoucherParametersForm;
        }(Serenity.PrefixedContext));
        Transaction.AccCreditVoucherParametersForm = AccCreditVoucherParametersForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccEmpAdvanceForm = (function (_super) {
            __extends(AccEmpAdvanceForm, _super);
            function AccEmpAdvanceForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccEmpAdvanceForm.init) {
                    AccEmpAdvanceForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = VistaGL.COAMappingEditor;
                    var w2 = s.DecimalEditor;
                    var w3 = s.TextAreaEditor;
                    Q.initFormType(AccEmpAdvanceForm, [
                        'EmpId', w0,
                        'TransactionMode', w1,
                        'CoAId', w0,
                        'ChequeRegisterId', w0,
                        'CoAId2', w0,
                        'Amount', w2,
                        'RemainAmount', w2,
                        'Narration', w3
                    ]);
                }
                return _this;
            }
            AccEmpAdvanceForm.formKey = 'Transaction.AccEmpAdvance';
            return AccEmpAdvanceForm;
        }(Serenity.PrefixedContext));
        Transaction.AccEmpAdvanceForm = AccEmpAdvanceForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccEmpAdvanceRow;
        (function (AccEmpAdvanceRow) {
            AccEmpAdvanceRow.idProperty = 'Id';
            AccEmpAdvanceRow.nameProperty = 'TransactionMode';
            AccEmpAdvanceRow.localTextPrefix = 'Transaction.AccEmpAdvance';
            AccEmpAdvanceRow.lookupKey = 'Transaction.AccEmpAdvanceRow';
            function getLookup() {
                return Q.getLookup('Transaction.AccEmpAdvanceRow');
            }
            AccEmpAdvanceRow.getLookup = getLookup;
        })(AccEmpAdvanceRow = Transaction.AccEmpAdvanceRow || (Transaction.AccEmpAdvanceRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccEmpAdvanceService;
        (function (AccEmpAdvanceService) {
            AccEmpAdvanceService.baseUrl = 'Transaction/AccEmpAdvance';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccEmpAdvanceService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccEmpAdvanceService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccEmpAdvanceService = Transaction.AccEmpAdvanceService || (Transaction.AccEmpAdvanceService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccFixedAssetDepreciationForm = (function (_super) {
            __extends(AccFixedAssetDepreciationForm, _super);
            function AccFixedAssetDepreciationForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccFixedAssetDepreciationForm.init) {
                    AccFixedAssetDepreciationForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.StringEditor;
                    Q.initFormType(AccFixedAssetDepreciationForm, [
                        'FinancialYearId', w0,
                        'ProcessType', w1
                    ]);
                }
                return _this;
            }
            AccFixedAssetDepreciationForm.formKey = 'Transaction.AccFixedAssetDepreciation';
            return AccFixedAssetDepreciationForm;
        }(Serenity.PrefixedContext));
        Transaction.AccFixedAssetDepreciationForm = AccFixedAssetDepreciationForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccFixedAssetDepreciationRow;
        (function (AccFixedAssetDepreciationRow) {
            AccFixedAssetDepreciationRow.idProperty = 'Id';
            AccFixedAssetDepreciationRow.localTextPrefix = 'Transaction.AccFixedAssetDepreciation';
            AccFixedAssetDepreciationRow.lookupKey = 'Transaction.AccFixedAssetDepreciation';
            function getLookup() {
                return Q.getLookup('Transaction.AccFixedAssetDepreciation');
            }
            AccFixedAssetDepreciationRow.getLookup = getLookup;
        })(AccFixedAssetDepreciationRow = Transaction.AccFixedAssetDepreciationRow || (Transaction.AccFixedAssetDepreciationRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccFixedAssetDepreciationService;
        (function (AccFixedAssetDepreciationService) {
            AccFixedAssetDepreciationService.baseUrl = 'Transaction/AccFixedAssetDepreciation';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccFixedAssetDepreciationService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccFixedAssetDepreciationService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccFixedAssetDepreciationService = Transaction.AccFixedAssetDepreciationService || (Transaction.AccFixedAssetDepreciationService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccFixedAssetRefurbishmentForm = (function (_super) {
            __extends(AccFixedAssetRefurbishmentForm, _super);
            function AccFixedAssetRefurbishmentForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccFixedAssetRefurbishmentForm.init) {
                    AccFixedAssetRefurbishmentForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.DecimalEditor;
                    Q.initFormType(AccFixedAssetRefurbishmentForm, [
                        'CoaId', w0,
                        'FinancialYearId', w0,
                        'CostOpening', w1,
                        'CostAddition', w1,
                        'CostAdjustment', w1,
                        'CostClosing', w1,
                        'DepOpening', w1,
                        'DepCharge', w1,
                        'DepAdjustment', w1,
                        'DepClosing', w1,
                        'BookValue', w1
                    ]);
                }
                return _this;
            }
            AccFixedAssetRefurbishmentForm.formKey = 'Transaction.AccFixedAssetRefurbishment';
            return AccFixedAssetRefurbishmentForm;
        }(Serenity.PrefixedContext));
        Transaction.AccFixedAssetRefurbishmentForm = AccFixedAssetRefurbishmentForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccFixedAssetRefurbishmentRow;
        (function (AccFixedAssetRefurbishmentRow) {
            AccFixedAssetRefurbishmentRow.idProperty = 'Id';
            AccFixedAssetRefurbishmentRow.localTextPrefix = 'Transaction.AccFixedAssetRefurbishment';
            AccFixedAssetRefurbishmentRow.lookupKey = 'Transaction.AccFixedAssetRefurbishment';
            function getLookup() {
                return Q.getLookup('Transaction.AccFixedAssetRefurbishment');
            }
            AccFixedAssetRefurbishmentRow.getLookup = getLookup;
        })(AccFixedAssetRefurbishmentRow = Transaction.AccFixedAssetRefurbishmentRow || (Transaction.AccFixedAssetRefurbishmentRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccFixedAssetRefurbishmentService;
        (function (AccFixedAssetRefurbishmentService) {
            AccFixedAssetRefurbishmentService.baseUrl = 'Transaction/AccFixedAssetRefurbishment';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccFixedAssetRefurbishmentService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccFixedAssetRefurbishmentService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccFixedAssetRefurbishmentService = Transaction.AccFixedAssetRefurbishmentService || (Transaction.AccFixedAssetRefurbishmentService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccFixedAssetsManualInputForm = (function (_super) {
            __extends(AccFixedAssetsManualInputForm, _super);
            function AccFixedAssetsManualInputForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccFixedAssetsManualInputForm.init) {
                    AccFixedAssetsManualInputForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.IntegerEditor;
                    var w2 = s.DecimalEditor;
                    Q.initFormType(AccFixedAssetsManualInputForm, [
                        'CostCenterId', w0,
                        'FinancialYearId', w0,
                        'ZoneInfoId', w1,
                        'AdditionAmount', w2,
                        'AdjustmentAmount', w2,
                        'DepCharge', w2,
                        'DepAdjustment', w2,
                        'FundControlId', w1
                    ]);
                }
                return _this;
            }
            AccFixedAssetsManualInputForm.formKey = 'Transaction.AccFixedAssetsManualInput';
            return AccFixedAssetsManualInputForm;
        }(Serenity.PrefixedContext));
        Transaction.AccFixedAssetsManualInputForm = AccFixedAssetsManualInputForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccFixedAssetsManualInputRow;
        (function (AccFixedAssetsManualInputRow) {
            AccFixedAssetsManualInputRow.idProperty = 'Id';
            AccFixedAssetsManualInputRow.localTextPrefix = 'Transaction.AccFixedAssetsManualInput';
            AccFixedAssetsManualInputRow.lookupKey = 'Transaction.AccFixedAssetsManualInput';
            function getLookup() {
                return Q.getLookup('Transaction.AccFixedAssetsManualInput');
            }
            AccFixedAssetsManualInputRow.getLookup = getLookup;
        })(AccFixedAssetsManualInputRow = Transaction.AccFixedAssetsManualInputRow || (Transaction.AccFixedAssetsManualInputRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccFixedAssetsManualInputService;
        (function (AccFixedAssetsManualInputService) {
            AccFixedAssetsManualInputService.baseUrl = 'Transaction/AccFixedAssetsManualInput';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccFixedAssetsManualInputService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccFixedAssetsManualInputService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccFixedAssetsManualInputService = Transaction.AccFixedAssetsManualInputService || (Transaction.AccFixedAssetsManualInputService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccIbcsJsondataHistoryForm = (function (_super) {
            __extends(AccIbcsJsondataHistoryForm, _super);
            function AccIbcsJsondataHistoryForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccIbcsJsondataHistoryForm.init) {
                    AccIbcsJsondataHistoryForm.init = true;
                    var s = Serenity;
                    var w0 = s.TextAreaEditor;
                    Q.initFormType(AccIbcsJsondataHistoryForm, [
                        'JsonData', w0
                    ]);
                }
                return _this;
            }
            AccIbcsJsondataHistoryForm.formKey = 'Transaction.AccIbcsJsondataHistory';
            return AccIbcsJsondataHistoryForm;
        }(Serenity.PrefixedContext));
        Transaction.AccIbcsJsondataHistoryForm = AccIbcsJsondataHistoryForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccIbcsJsondataHistoryRow;
        (function (AccIbcsJsondataHistoryRow) {
            AccIbcsJsondataHistoryRow.idProperty = 'Id';
            AccIbcsJsondataHistoryRow.nameProperty = 'VoucherNo';
            AccIbcsJsondataHistoryRow.localTextPrefix = 'Transaction.AccIbcsJsondataHistory';
            AccIbcsJsondataHistoryRow.lookupKey = 'Transaction.AccIbcsJsondataHistoryRow';
            function getLookup() {
                return Q.getLookup('Transaction.AccIbcsJsondataHistoryRow');
            }
            AccIbcsJsondataHistoryRow.getLookup = getLookup;
        })(AccIbcsJsondataHistoryRow = Transaction.AccIbcsJsondataHistoryRow || (Transaction.AccIbcsJsondataHistoryRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccIbcsJsondataHistoryService;
        (function (AccIbcsJsondataHistoryService) {
            AccIbcsJsondataHistoryService.baseUrl = 'Transaction/AccIbcsJsondataHistory';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccIbcsJsondataHistoryService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccIbcsJsondataHistoryService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccIbcsJsondataHistoryService = Transaction.AccIbcsJsondataHistoryService || (Transaction.AccIbcsJsondataHistoryService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccMoneyReceiptDatailsForm = (function (_super) {
            __extends(AccMoneyReceiptDatailsForm, _super);
            function AccMoneyReceiptDatailsForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccMoneyReceiptDatailsForm.init) {
                    AccMoneyReceiptDatailsForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.LookupEditor;
                    var w2 = s.DecimalEditor;
                    Q.initFormType(AccMoneyReceiptDatailsForm, [
                        'MoneyReceiptId', w0,
                        'CoaId', w1,
                        'CostCenterId', w1,
                        'Amount', w2,
                        'Description', w0
                    ]);
                }
                return _this;
            }
            AccMoneyReceiptDatailsForm.formKey = 'Transaction.AccMoneyReceiptDatails';
            return AccMoneyReceiptDatailsForm;
        }(Serenity.PrefixedContext));
        Transaction.AccMoneyReceiptDatailsForm = AccMoneyReceiptDatailsForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccMoneyReceiptDatailsRow;
        (function (AccMoneyReceiptDatailsRow) {
            AccMoneyReceiptDatailsRow.idProperty = 'Id';
            AccMoneyReceiptDatailsRow.localTextPrefix = 'Transaction.AccMoneyReceiptDatails';
            AccMoneyReceiptDatailsRow.lookupKey = 'Transaction.AccMoneyReceiptDatails';
            function getLookup() {
                return Q.getLookup('Transaction.AccMoneyReceiptDatails');
            }
            AccMoneyReceiptDatailsRow.getLookup = getLookup;
        })(AccMoneyReceiptDatailsRow = Transaction.AccMoneyReceiptDatailsRow || (Transaction.AccMoneyReceiptDatailsRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccMoneyReceiptDatailsService;
        (function (AccMoneyReceiptDatailsService) {
            AccMoneyReceiptDatailsService.baseUrl = 'Transaction/AccMoneyReceiptDatails';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccMoneyReceiptDatailsService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccMoneyReceiptDatailsService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccMoneyReceiptDatailsService = Transaction.AccMoneyReceiptDatailsService || (Transaction.AccMoneyReceiptDatailsService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccMoneyReceiptForm = (function (_super) {
            __extends(AccMoneyReceiptForm, _super);
            function AccMoneyReceiptForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccMoneyReceiptForm.init) {
                    AccMoneyReceiptForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.DateEditor;
                    var w2 = _Ext.AutoCompleteEditor;
                    var w3 = Transaction.AccMoneyReceiptDatailsEditor;
                    var w4 = s.DecimalEditor;
                    var w5 = s.TextAreaEditor;
                    var w6 = VistaGL.RecChequeTypeMappingEditor;
                    var w7 = s.LookupEditor;
                    var w8 = s.BooleanEditor;
                    Q.initFormType(AccMoneyReceiptForm, [
                        'SerialNo', w0,
                        'MonryReceiptDate', w1,
                        'ReceiveFrom', w2,
                        'AccMoneyReceiptDatailsList', w3,
                        'Amount', w4,
                        'Dollar', w4,
                        'AmountInWord', w0,
                        'Narration', w5,
                        'ChequeType', w6,
                        'ChequeDate', w1,
                        'ChequeNo', w0,
                        'AccHeadBankId', w7,
                        'IsCancelled', w8,
                        'IsConfirmed', w8,
                        'IsUsed', w8,
                        'VoucherNo', w0,
                        'MoneyReceiptNo', w0
                    ]);
                }
                return _this;
            }
            AccMoneyReceiptForm.formKey = 'Transaction.AccMoneyReceipt';
            return AccMoneyReceiptForm;
        }(Serenity.PrefixedContext));
        Transaction.AccMoneyReceiptForm = AccMoneyReceiptForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccMoneyReceiptRow;
        (function (AccMoneyReceiptRow) {
            AccMoneyReceiptRow.idProperty = 'Id';
            AccMoneyReceiptRow.nameProperty = 'AmountInWord';
            AccMoneyReceiptRow.localTextPrefix = 'Transaction.AccMoneyReceipt';
            AccMoneyReceiptRow.lookupKey = 'Transaction.AccMoneyReceipt';
            function getLookup() {
                return Q.getLookup('Transaction.AccMoneyReceipt');
            }
            AccMoneyReceiptRow.getLookup = getLookup;
        })(AccMoneyReceiptRow = Transaction.AccMoneyReceiptRow || (Transaction.AccMoneyReceiptRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccMoneyReceiptService;
        (function (AccMoneyReceiptService) {
            AccMoneyReceiptService.baseUrl = 'Transaction/AccMoneyReceipt';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List',
                'GetNewMoneyReceiptNo'
            ].forEach(function (x) {
                AccMoneyReceiptService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccMoneyReceiptService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccMoneyReceiptService = Transaction.AccMoneyReceiptService || (Transaction.AccMoneyReceiptService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccNoaForm = (function (_super) {
            __extends(AccNoaForm, _super);
            function AccNoaForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccNoaForm.init) {
                    AccNoaForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.DateEditor;
                    var w2 = s.LookupEditor;
                    var w3 = s.DecimalEditor;
                    var w4 = s.IntegerEditor;
                    Q.initFormType(AccNoaForm, [
                        'NoaNumber', w0,
                        'NoaDate', w1,
                        'CostCenterId', w2,
                        'ContactValue', w3,
                        'NameofContract', w0,
                        'ContractDate', w1,
                        'BudgetProvision', w3,
                        'TenderNo', w0,
                        'AdministrativeApproved', w0,
                        'AdministrativeDate', w1,
                        'TechnicalApproved', w0,
                        'TechnicalDate', w1,
                        'FinancialApproved', w0,
                        'FinancialDate', w1,
                        'NameofContractor', w0,
                        'ContractorAddress', w0,
                        'SecurityMoney', w3,
                        'MBNo', w0,
                        'WorkStartOn', w1,
                        'CompilationDate', w1,
                        'ZoneInfoId', w4
                    ]);
                }
                return _this;
            }
            AccNoaForm.formKey = 'Transaction.AccNoa';
            return AccNoaForm;
        }(Serenity.PrefixedContext));
        Transaction.AccNoaForm = AccNoaForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccNoaRow;
        (function (AccNoaRow) {
            AccNoaRow.idProperty = 'Id';
            AccNoaRow.nameProperty = 'NoaNumber';
            AccNoaRow.localTextPrefix = 'Transaction.AccNoa';
            AccNoaRow.lookupKey = 'Transaction.AccNoa';
            function getLookup() {
                return Q.getLookup('Transaction.AccNoa');
            }
            AccNoaRow.getLookup = getLookup;
        })(AccNoaRow = Transaction.AccNoaRow || (Transaction.AccNoaRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccNoaService;
        (function (AccNoaService) {
            AccNoaService.baseUrl = 'Transaction/AccNoa';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccNoaService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccNoaService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccNoaService = Transaction.AccNoaService || (Transaction.AccNoaService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccPartyPaymentForm = (function (_super) {
            __extends(AccPartyPaymentForm, _super);
            function AccPartyPaymentForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccPartyPaymentForm.init) {
                    AccPartyPaymentForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = VistaGL.COAMappingEditor;
                    var w2 = s.DecimalEditor;
                    var w3 = s.TextAreaEditor;
                    Q.initFormType(AccPartyPaymentForm, [
                        'PartyId', w0,
                        'TransactionMode', w1,
                        'CoAId', w0,
                        'ChequeRegisterId', w0,
                        'CoAId2', w0,
                        'Amount', w2,
                        'RemainAmount', w2,
                        'Narration', w3
                    ]);
                }
                return _this;
            }
            AccPartyPaymentForm.formKey = 'Transaction.AccPartyPayment';
            return AccPartyPaymentForm;
        }(Serenity.PrefixedContext));
        Transaction.AccPartyPaymentForm = AccPartyPaymentForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccPartyPaymentRow;
        (function (AccPartyPaymentRow) {
            AccPartyPaymentRow.idProperty = 'Id';
            AccPartyPaymentRow.nameProperty = 'TransactionMode';
            AccPartyPaymentRow.localTextPrefix = 'Transaction.AccPartyPayment';
            AccPartyPaymentRow.lookupKey = 'Transaction.AccPartyPayment';
            function getLookup() {
                return Q.getLookup('Transaction.AccPartyPayment');
            }
            AccPartyPaymentRow.getLookup = getLookup;
        })(AccPartyPaymentRow = Transaction.AccPartyPaymentRow || (Transaction.AccPartyPaymentRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccPartyPaymentService;
        (function (AccPartyPaymentService) {
            AccPartyPaymentService.baseUrl = 'Transaction/AccPartyPayment';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccPartyPaymentService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccPartyPaymentService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccPartyPaymentService = Transaction.AccPartyPaymentService || (Transaction.AccPartyPaymentService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccTransactionTypeAssignForm = (function (_super) {
            __extends(AccTransactionTypeAssignForm, _super);
            function AccTransactionTypeAssignForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccTransactionTypeAssignForm.init) {
                    AccTransactionTypeAssignForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    var w1 = s.LookupEditor;
                    Q.initFormType(AccTransactionTypeAssignForm, [
                        'TrType', w0,
                        'ParentId', w1,
                        'CoaId', w1
                    ]);
                }
                return _this;
            }
            AccTransactionTypeAssignForm.formKey = 'Transaction.AccTransactionTypeAssign';
            return AccTransactionTypeAssignForm;
        }(Serenity.PrefixedContext));
        Transaction.AccTransactionTypeAssignForm = AccTransactionTypeAssignForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccTransactionTypeAssignMasterForm = (function (_super) {
            __extends(AccTransactionTypeAssignMasterForm, _super);
            function AccTransactionTypeAssignMasterForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccTransactionTypeAssignMasterForm.init) {
                    AccTransactionTypeAssignMasterForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.StringEditor;
                    var w2 = Transaction.CoADebitEditor;
                    Q.initFormType(AccTransactionTypeAssignMasterForm, [
                        'VoucherTypeId', w0,
                        'TransactionTypeId', w0,
                        'Remarks', w1,
                        'CoADebit', w2,
                        'Credit', w1
                    ]);
                }
                return _this;
            }
            AccTransactionTypeAssignMasterForm.formKey = 'Transaction.AccTransactionTypeAssignMaster';
            return AccTransactionTypeAssignMasterForm;
        }(Serenity.PrefixedContext));
        Transaction.AccTransactionTypeAssignMasterForm = AccTransactionTypeAssignMasterForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccTransactionTypeAssignMasterRow;
        (function (AccTransactionTypeAssignMasterRow) {
            AccTransactionTypeAssignMasterRow.idProperty = 'Id';
            AccTransactionTypeAssignMasterRow.nameProperty = 'Remarks';
            AccTransactionTypeAssignMasterRow.localTextPrefix = 'Transaction.AccTransactionTypeAssignMaster';
            AccTransactionTypeAssignMasterRow.lookupKey = 'Transaction.AccTransactionTypeAssignMaster';
            function getLookup() {
                return Q.getLookup('Transaction.AccTransactionTypeAssignMaster');
            }
            AccTransactionTypeAssignMasterRow.getLookup = getLookup;
        })(AccTransactionTypeAssignMasterRow = Transaction.AccTransactionTypeAssignMasterRow || (Transaction.AccTransactionTypeAssignMasterRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccTransactionTypeAssignMasterService;
        (function (AccTransactionTypeAssignMasterService) {
            AccTransactionTypeAssignMasterService.baseUrl = 'Transaction/AccTransactionTypeAssignMaster';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccTransactionTypeAssignMasterService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccTransactionTypeAssignMasterService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccTransactionTypeAssignMasterService = Transaction.AccTransactionTypeAssignMasterService || (Transaction.AccTransactionTypeAssignMasterService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccTransactionTypeAssignRow;
        (function (AccTransactionTypeAssignRow) {
            AccTransactionTypeAssignRow.idProperty = 'Id';
            AccTransactionTypeAssignRow.nameProperty = 'CoaAccountName';
            AccTransactionTypeAssignRow.localTextPrefix = 'Transaction.AccTransactionTypeAssign';
            AccTransactionTypeAssignRow.lookupKey = 'Transaction.AccTransactionTypeAssign';
            function getLookup() {
                return Q.getLookup('Transaction.AccTransactionTypeAssign');
            }
            AccTransactionTypeAssignRow.getLookup = getLookup;
        })(AccTransactionTypeAssignRow = Transaction.AccTransactionTypeAssignRow || (Transaction.AccTransactionTypeAssignRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccTransactionTypeAssignService;
        (function (AccTransactionTypeAssignService) {
            AccTransactionTypeAssignService.baseUrl = 'Transaction/AccTransactionTypeAssign';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccTransactionTypeAssignService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccTransactionTypeAssignService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccTransactionTypeAssignService = Transaction.AccTransactionTypeAssignService || (Transaction.AccTransactionTypeAssignService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetDetailsDeptForm = (function (_super) {
            __extends(AccViewBudgetDetailsDeptForm, _super);
            function AccViewBudgetDetailsDeptForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccViewBudgetDetailsDeptForm.init) {
                    AccViewBudgetDetailsDeptForm.init = true;
                    var s = Serenity;
                    var w0 = s.IntegerEditor;
                    var w1 = s.StringEditor;
                    var w2 = s.DecimalEditor;
                    Q.initFormType(AccViewBudgetDetailsDeptForm, [
                        'Id', w0,
                        'AccountName', w1,
                        'Quantity', w2,
                        'Amount', w2,
                        'ZoneInfoId', w0,
                        'BudgetYearId', w0,
                        'BudgetStatus', w0,
                        'BudgetDepartmentInfoId', w0,
                        'BudgetDept', w1,
                        'YearName', w1,
                        'ActualDuring', w2,
                        'Actual1stSixMonths', w2,
                        'BudgetApproved', w2,
                        'RevisedEstimate', w2,
                        'BudgetApproved1Step', w2
                    ]);
                }
                return _this;
            }
            AccViewBudgetDetailsDeptForm.formKey = 'Transaction.AccViewBudgetDetailsDept';
            return AccViewBudgetDetailsDeptForm;
        }(Serenity.PrefixedContext));
        Transaction.AccViewBudgetDetailsDeptForm = AccViewBudgetDetailsDeptForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetDetailsDeptRow;
        (function (AccViewBudgetDetailsDeptRow) {
            AccViewBudgetDetailsDeptRow.idProperty = 'Id';
            AccViewBudgetDetailsDeptRow.nameProperty = 'AccountName';
            AccViewBudgetDetailsDeptRow.localTextPrefix = 'Transaction.AccViewBudgetDetailsDept';
            AccViewBudgetDetailsDeptRow.lookupKey = 'Transaction.AccViewBudgetDetailsDeptRow';
            function getLookup() {
                return Q.getLookup('Transaction.AccViewBudgetDetailsDeptRow');
            }
            AccViewBudgetDetailsDeptRow.getLookup = getLookup;
        })(AccViewBudgetDetailsDeptRow = Transaction.AccViewBudgetDetailsDeptRow || (Transaction.AccViewBudgetDetailsDeptRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetDetailsDeptService;
        (function (AccViewBudgetDetailsDeptService) {
            AccViewBudgetDetailsDeptService.baseUrl = 'Transaction/AccViewBudgetDetailsDept';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccViewBudgetDetailsDeptService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccViewBudgetDetailsDeptService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccViewBudgetDetailsDeptService = Transaction.AccViewBudgetDetailsDeptService || (Transaction.AccViewBudgetDetailsDeptService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetDetailsForm = (function (_super) {
            __extends(AccViewBudgetDetailsForm, _super);
            function AccViewBudgetDetailsForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccViewBudgetDetailsForm.init) {
                    AccViewBudgetDetailsForm.init = true;
                    var s = Serenity;
                    var w0 = s.IntegerEditor;
                    var w1 = s.StringEditor;
                    var w2 = s.DecimalEditor;
                    Q.initFormType(AccViewBudgetDetailsForm, [
                        'Id', w0,
                        'AccountName', w1,
                        'Quantity', w2,
                        'Amount', w2,
                        'BudgetRevisionNo', w0,
                        'BudgetDepartmentInfoId', w0,
                        'ZoneInfoId', w0,
                        'EntityId', w0,
                        'BudgetYearId', w0,
                        'BudgetStatus', w0,
                        'BudgetDept', w1,
                        'YearName', w1,
                        'FundControlName', w1
                    ]);
                }
                return _this;
            }
            AccViewBudgetDetailsForm.formKey = 'Transaction.AccViewBudgetDetails';
            return AccViewBudgetDetailsForm;
        }(Serenity.PrefixedContext));
        Transaction.AccViewBudgetDetailsForm = AccViewBudgetDetailsForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetDetailsRow;
        (function (AccViewBudgetDetailsRow) {
            AccViewBudgetDetailsRow.idProperty = 'AccountName';
            AccViewBudgetDetailsRow.nameProperty = 'AccountName';
            AccViewBudgetDetailsRow.localTextPrefix = 'Transaction.AccViewBudgetDetails';
        })(AccViewBudgetDetailsRow = Transaction.AccViewBudgetDetailsRow || (Transaction.AccViewBudgetDetailsRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetDetailsService;
        (function (AccViewBudgetDetailsService) {
            AccViewBudgetDetailsService.baseUrl = 'Transaction/AccViewBudgetDetails';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccViewBudgetDetailsService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccViewBudgetDetailsService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccViewBudgetDetailsService = Transaction.AccViewBudgetDetailsService || (Transaction.AccViewBudgetDetailsService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetForm = (function (_super) {
            __extends(AccViewBudgetForm, _super);
            function AccViewBudgetForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccViewBudgetForm.init) {
                    AccViewBudgetForm.init = true;
                    var s = Serenity;
                    var w0 = s.IntegerEditor;
                    var w1 = s.StringEditor;
                    var w2 = s.DecimalEditor;
                    Q.initFormType(AccViewBudgetForm, [
                        'Id', w0,
                        'AccountName', w1,
                        'Quantity', w2,
                        'Amount', w2,
                        'BudgetRevisionNo', w0,
                        'BudgetDepartmentInfoId', w0,
                        'ZoneInfoId', w0,
                        'EntityId', w0,
                        'BudgetYearId', w0,
                        'BudgetStatus', w0
                    ]);
                }
                return _this;
            }
            AccViewBudgetForm.formKey = 'Transaction.AccViewBudget';
            return AccViewBudgetForm;
        }(Serenity.PrefixedContext));
        Transaction.AccViewBudgetForm = AccViewBudgetForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetRow;
        (function (AccViewBudgetRow) {
            AccViewBudgetRow.idProperty = 'AccountName';
            AccViewBudgetRow.nameProperty = 'AccountName';
            AccViewBudgetRow.localTextPrefix = 'Transaction.AccViewBudget';
        })(AccViewBudgetRow = Transaction.AccViewBudgetRow || (Transaction.AccViewBudgetRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetService;
        (function (AccViewBudgetService) {
            AccViewBudgetService.baseUrl = 'Transaction/AccViewBudget';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccViewBudgetService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccViewBudgetService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccViewBudgetService = Transaction.AccViewBudgetService || (Transaction.AccViewBudgetService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetZoneForm = (function (_super) {
            __extends(AccViewBudgetZoneForm, _super);
            function AccViewBudgetZoneForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccViewBudgetZoneForm.init) {
                    AccViewBudgetZoneForm.init = true;
                    var s = Serenity;
                    var w0 = s.IntegerEditor;
                    var w1 = s.StringEditor;
                    var w2 = s.DecimalEditor;
                    Q.initFormType(AccViewBudgetZoneForm, [
                        'Id', w0,
                        'AccountName', w1,
                        'BudgetYearId', w0,
                        'BudgetStatus', w0,
                        'Quantity', w2,
                        'Amount', w2,
                        'ZoneInfoId', w0
                    ]);
                }
                return _this;
            }
            AccViewBudgetZoneForm.formKey = 'Transaction.AccViewBudgetZone';
            return AccViewBudgetZoneForm;
        }(Serenity.PrefixedContext));
        Transaction.AccViewBudgetZoneForm = AccViewBudgetZoneForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetZoneRow;
        (function (AccViewBudgetZoneRow) {
            AccViewBudgetZoneRow.idProperty = 'Id';
            AccViewBudgetZoneRow.nameProperty = 'AccountName';
            AccViewBudgetZoneRow.localTextPrefix = 'Transaction.AccViewBudgetZone';
            AccViewBudgetZoneRow.lookupKey = 'Transaction.AccViewBudgetZoneRow';
            function getLookup() {
                return Q.getLookup('Transaction.AccViewBudgetZoneRow');
            }
            AccViewBudgetZoneRow.getLookup = getLookup;
        })(AccViewBudgetZoneRow = Transaction.AccViewBudgetZoneRow || (Transaction.AccViewBudgetZoneRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetZoneService;
        (function (AccViewBudgetZoneService) {
            AccViewBudgetZoneService.baseUrl = 'Transaction/AccViewBudgetZone';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccViewBudgetZoneService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccViewBudgetZoneService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccViewBudgetZoneService = Transaction.AccViewBudgetZoneService || (Transaction.AccViewBudgetZoneService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewProjectListRow;
        (function (AccViewProjectListRow) {
            AccViewProjectListRow.idProperty = 'Id';
            AccViewProjectListRow.nameProperty = 'NameOfWorks';
            AccViewProjectListRow.localTextPrefix = 'Transaction.AccViewProjectList';
            AccViewProjectListRow.lookupKey = 'Transaction.AccViewProjectList';
            function getLookup() {
                return Q.getLookup('Transaction.AccViewProjectList');
            }
            AccViewProjectListRow.getLookup = getLookup;
        })(AccViewProjectListRow = Transaction.AccViewProjectListRow || (Transaction.AccViewProjectListRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherBankWiseForm = (function (_super) {
            __extends(AccVoucherBankWiseForm, _super);
            function AccVoucherBankWiseForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccVoucherBankWiseForm.init) {
                    AccVoucherBankWiseForm.init = true;
                    var s = Serenity;
                    var w0 = VistaGL.GetRecommenderInfoByApplicantVoucherEditor;
                    var w1 = s.EnumEditor;
                    var w2 = s.BooleanEditor;
                    var w3 = s.StringEditor;
                    var w4 = s.LookupEditor;
                    var w5 = s.DateEditor;
                    var w6 = VistaGL.ChequeBookEditor;
                    var w7 = VistaGL.ChequeTypeMappingEditor;
                    var w8 = _Ext.AutoCompleteEditor;
                    var w9 = s.DecimalEditor;
                    var w10 = s.IntegerEditor;
                    var w11 = VistaGL.VoucherTemplateDrCrMappingEditor;
                    var w12 = Transaction.AccVoucherDetailsEditor;
                    var w13 = s.TextAreaEditor;
                    var w14 = s.MultipleImageUploadEditor;
                    var w15 = Transaction.VoucherApprovalHistoryEditor;
                    Q.initFormType(AccVoucherBankWiseForm, [
                        'ApproverId', w0,
                        'approveStatus', w1,
                        'IsBankWisePaymentVoucher', w2,
                        'IsBankWiseReceiptVoucher', w2,
                        'Id', w3,
                        'VoucherTypeId', w4,
                        'TransactionMode', w3,
                        'PostingFinancialYearId', w4,
                        'TransactionTypeEntityId', w4,
                        'VoucherDate', w5,
                        'VoucherNo', w3,
                        'AccountHeadBankCash', w4,
                        'BankAccountInformationId', w4,
                        'ChequeBookId', w4,
                        'ChequeNumhdn', w6,
                        'ChequeNo', w3,
                        'ChequeDate', w5,
                        'ChequeType', w7,
                        'ChequeRemarks', w3,
                        'PaytoOrReciveFrom', w8,
                        'IsChequeFinished', w2,
                        'BankAmount', w9,
                        'PaytoForBankAdvice', w3,
                        'ChequeRegisterId', w4,
                        'PowerofAttorney', w3,
                        'NOAId', w4,
                        'NOAId2', w10,
                        'LinkedWithAutoJV', w2,
                        'AutoPV_AccountHead', w4,
                        'AutoBudgetAmountCOA', w9,
                        'AutoPV_CostCentreId', w4,
                        'AutoBudgetAmountSUbledger', w9,
                        'AutoJVVoucherNo', w3,
                        'AutoJVVoucherNumber', w3,
                        'TransactionTypeEntityIdForAutoJV', w10,
                        'TransactionType', w3,
                        'VoucherType', w3,
                        'VoucherNumber', w3,
                        'AccountHead', w4,
                        'BudgetAmountCOA', w9,
                        'CostCenterTypeId', w4,
                        'ParentId', w4,
                        'CostCentreId', w4,
                        'BudgetAmountSUbledger', w9,
                        'MultipleCostCenter', w2,
                        'DebitAmount', w9,
                        'CreditAmount', w9,
                        'CalculationRate', w9,
                        'CalculationAmount', w9,
                        'Type', w11,
                        'DDescription', w3,
                        'AddtoGrid', w3,
                        'VoucherDetails', w12,
                        'AccountBankCash', w3,
                        'AccountBankCashAmount', w9,
                        'DAmount', w9,
                        'CAmount', w9,
                        'AmountInWords', w3,
                        'Amount', w9,
                        'ProjectID', w4,
                        'ClearDate', w5,
                        'IsClearDate', w10,
                        'Description', w13,
                        'PostedBy', w3,
                        'PostingDate', w5,
                        'EmpId', w10,
                        'TemplateStatus', w10,
                        'TemplateId', w10,
                        'TemplateCOAId', w10,
                        'TemplateChequeRegisterId', w10,
                        'RemainAmount', w9,
                        'TemplateCOAId2', w9,
                        'FileName', w14,
                        'ConversionRate', w9,
                        'ConversionAmount', w9,
                        'FileNo', w3,
                        'PageNo', w3,
                        'MultiCurrency', w3,
                        'ApplicationInformationHistory', w15
                    ]);
                }
                return _this;
            }
            AccVoucherBankWiseForm.formKey = 'Transaction.AccVoucherBankWise';
            return AccVoucherBankWiseForm;
        }(Serenity.PrefixedContext));
        Transaction.AccVoucherBankWiseForm = AccVoucherBankWiseForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherConfigurationForm = (function (_super) {
            __extends(AccVoucherConfigurationForm, _super);
            function AccVoucherConfigurationForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccVoucherConfigurationForm.init) {
                    AccVoucherConfigurationForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.BooleanEditor;
                    var w2 = s.IntegerEditor;
                    var w3 = s.StringEditor;
                    var w4 = s.DateEditor;
                    Q.initFormType(AccVoucherConfigurationForm, [
                        'VoucherTypeId', w0,
                        'AutoNumbering', w1,
                        'TransactionTypeId', w0,
                        'PreparedByInfo', w1,
                        'AccountingPeriodId', w0,
                        'IsUserFinancialAtTheEnd', w1,
                        'StartingNumber', w2,
                        'NewNumber', w1,
                        'NumberLength', w2,
                        'CommonDescription', w1,
                        'Prefix', w3,
                        'EachAccounting', w1,
                        'Suffix', w3,
                        'IsAutoPost', w1,
                        'Separators', w3,
                        'IsUserFinancialAtStart', w1,
                        'IsMonth', w1,
                        'IsDate', w1,
                        'Date', w4,
                        'NewNumberforEveryBankAccount', w1,
                        'IsActive', w1,
                        'AddZoneShortCode', w1,
                        'AddBankACShortCode', w1
                    ]);
                }
                return _this;
            }
            AccVoucherConfigurationForm.formKey = 'Transaction.AccVoucherConfiguration';
            return AccVoucherConfigurationForm;
        }(Serenity.PrefixedContext));
        Transaction.AccVoucherConfigurationForm = AccVoucherConfigurationForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherConfigurationRow;
        (function (AccVoucherConfigurationRow) {
            AccVoucherConfigurationRow.idProperty = 'Id';
            AccVoucherConfigurationRow.nameProperty = 'AccountingPeriodYearName';
            AccVoucherConfigurationRow.localTextPrefix = 'Transaction.AccVoucherConfiguration';
            AccVoucherConfigurationRow.lookupKey = 'Transaction.AccVoucherConfiguration';
            function getLookup() {
                return Q.getLookup('Transaction.AccVoucherConfiguration');
            }
            AccVoucherConfigurationRow.getLookup = getLookup;
        })(AccVoucherConfigurationRow = Transaction.AccVoucherConfigurationRow || (Transaction.AccVoucherConfigurationRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherConfigurationService;
        (function (AccVoucherConfigurationService) {
            AccVoucherConfigurationService.baseUrl = 'Transaction/AccVoucherConfiguration';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccVoucherConfigurationService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccVoucherConfigurationService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccVoucherConfigurationService = Transaction.AccVoucherConfigurationService || (Transaction.AccVoucherConfigurationService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDetailsForm = (function (_super) {
            __extends(AccVoucherDetailsForm, _super);
            function AccVoucherDetailsForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccVoucherDetailsForm.init) {
                    AccVoucherDetailsForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.DecimalEditor;
                    var w2 = s.TextAreaEditor;
                    var w3 = Transaction.AccVoucherDtlAllocationEditor;
                    var w4 = Transaction.AccVoucherDtlBillRefEditor;
                    Q.initFormType(AccVoucherDetailsForm, [
                        'ChartofAccountsId', w0,
                        'DebitAmount', w1,
                        'CreditAmount', w1,
                        'CalculationAmount', w1,
                        'CalculationRate', w1,
                        'ChequeRegisterId', w0,
                        'EffectiveValue', w1,
                        'CCreditAmount', w1,
                        'CDebitAmount', w1,
                        'Description', w2,
                        'AdjustedChequeRegisterId', w0,
                        'VoucherDtlAllocation', w3,
                        'VoucherDtlBillRef', w4,
                        'ConversionRate', w1,
                        'ConversionAmount', w1
                    ]);
                }
                return _this;
            }
            AccVoucherDetailsForm.formKey = 'Transaction.AccVoucherDetails';
            return AccVoucherDetailsForm;
        }(Serenity.PrefixedContext));
        Transaction.AccVoucherDetailsForm = AccVoucherDetailsForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDetailsRow;
        (function (AccVoucherDetailsRow) {
            AccVoucherDetailsRow.idProperty = 'Id';
            AccVoucherDetailsRow.nameProperty = 'Description';
            AccVoucherDetailsRow.localTextPrefix = 'Transaction.AccVoucherDetails';
            AccVoucherDetailsRow.lookupKey = 'Transaction.AccVoucherDetails';
            function getLookup() {
                return Q.getLookup('Transaction.AccVoucherDetails');
            }
            AccVoucherDetailsRow.getLookup = getLookup;
        })(AccVoucherDetailsRow = Transaction.AccVoucherDetailsRow || (Transaction.AccVoucherDetailsRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDetailsService;
        (function (AccVoucherDetailsService) {
            AccVoucherDetailsService.baseUrl = 'Transaction/AccVoucherDetails';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccVoucherDetailsService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccVoucherDetailsService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccVoucherDetailsService = Transaction.AccVoucherDetailsService || (Transaction.AccVoucherDetailsService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDtlAllocationForm = (function (_super) {
            __extends(AccVoucherDtlAllocationForm, _super);
            function AccVoucherDtlAllocationForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccVoucherDtlAllocationForm.init) {
                    AccVoucherDtlAllocationForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = s.DecimalEditor;
                    Q.initFormType(AccVoucherDtlAllocationForm, [
                        'CostCenterTypeId', w0,
                        'CostCenterParentId', w0,
                        'CostCenterId', w0,
                        'Amount', w1
                    ]);
                }
                return _this;
            }
            AccVoucherDtlAllocationForm.formKey = 'Transaction.AccVoucherDtlAllocation';
            return AccVoucherDtlAllocationForm;
        }(Serenity.PrefixedContext));
        Transaction.AccVoucherDtlAllocationForm = AccVoucherDtlAllocationForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDtlAllocationRow;
        (function (AccVoucherDtlAllocationRow) {
            AccVoucherDtlAllocationRow.idProperty = 'Id';
            AccVoucherDtlAllocationRow.localTextPrefix = 'Transaction.AccVoucherDtlAllocation';
            AccVoucherDtlAllocationRow.lookupKey = 'Transaction.AccVoucherDtlAllocationRow';
            function getLookup() {
                return Q.getLookup('Transaction.AccVoucherDtlAllocationRow');
            }
            AccVoucherDtlAllocationRow.getLookup = getLookup;
        })(AccVoucherDtlAllocationRow = Transaction.AccVoucherDtlAllocationRow || (Transaction.AccVoucherDtlAllocationRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDtlAllocationService;
        (function (AccVoucherDtlAllocationService) {
            AccVoucherDtlAllocationService.baseUrl = 'Transaction/AccVoucherDtlAllocation';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccVoucherDtlAllocationService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccVoucherDtlAllocationService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccVoucherDtlAllocationService = Transaction.AccVoucherDtlAllocationService || (Transaction.AccVoucherDtlAllocationService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDtlBillRefForm = (function (_super) {
            __extends(AccVoucherDtlBillRefForm, _super);
            function AccVoucherDtlBillRefForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccVoucherDtlBillRefForm.init) {
                    AccVoucherDtlBillRefForm.init = true;
                    var s = Serenity;
                    var w0 = s.DateEditor;
                    var w1 = VistaGL.BillTypeEditor;
                    var w2 = s.StringEditor;
                    var w3 = s.DecimalEditor;
                    var w4 = s.TextAreaEditor;
                    Q.initFormType(AccVoucherDtlBillRefForm, [
                        'BillDate', w0,
                        'BillType', w1,
                        'BillRefNo', w2,
                        'Amount', w3,
                        'Description', w4
                    ]);
                }
                return _this;
            }
            AccVoucherDtlBillRefForm.formKey = 'Transaction.AccVoucherDtlBillRef';
            return AccVoucherDtlBillRefForm;
        }(Serenity.PrefixedContext));
        Transaction.AccVoucherDtlBillRefForm = AccVoucherDtlBillRefForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDtlBillRefRow;
        (function (AccVoucherDtlBillRefRow) {
            AccVoucherDtlBillRefRow.idProperty = 'Id';
            AccVoucherDtlBillRefRow.nameProperty = 'BillRefNo';
            AccVoucherDtlBillRefRow.localTextPrefix = 'Transaction.AccVoucherDtlBillRef';
            AccVoucherDtlBillRefRow.lookupKey = 'Transaction.AccVoucherDtlBillRefRow';
            function getLookup() {
                return Q.getLookup('Transaction.AccVoucherDtlBillRefRow');
            }
            AccVoucherDtlBillRefRow.getLookup = getLookup;
        })(AccVoucherDtlBillRefRow = Transaction.AccVoucherDtlBillRefRow || (Transaction.AccVoucherDtlBillRefRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDtlBillRefService;
        (function (AccVoucherDtlBillRefService) {
            AccVoucherDtlBillRefService.baseUrl = 'Transaction/AccVoucherDtlBillRef';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccVoucherDtlBillRefService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccVoucherDtlBillRefService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccVoucherDtlBillRefService = Transaction.AccVoucherDtlBillRefService || (Transaction.AccVoucherDtlBillRefService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherInformationForm = (function (_super) {
            __extends(AccVoucherInformationForm, _super);
            function AccVoucherInformationForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccVoucherInformationForm.init) {
                    AccVoucherInformationForm.init = true;
                    var s = Serenity;
                    var w0 = VistaGL.GetRecommenderInfoByApplicantVoucherEditor;
                    var w1 = s.EnumEditor;
                    var w2 = s.StringEditor;
                    var w3 = s.LookupEditor;
                    var w4 = VistaGL.COAMappingEditor;
                    var w5 = s.DateEditor;
                    var w6 = _Ext.AutoCompleteEditor;
                    var w7 = s.IntegerEditor;
                    var w8 = s.BooleanEditor;
                    var w9 = s.DecimalEditor;
                    var w10 = Transaction.AccVoucherDetailsEditor;
                    var w11 = s.TextAreaEditor;
                    var w12 = s.MultipleImageUploadEditor;
                    var w13 = Transaction.VoucherApprovalHistoryEditor;
                    Q.initFormType(AccVoucherInformationForm, [
                        'ApproverId', w0,
                        'approveStatus', w1,
                        'Id', w2,
                        'VoucherTypeId', w3,
                        'PostingFinancialYearId', w3,
                        'TransactionTypeEntityId', w3,
                        'TransactionMode', w4,
                        'VoucherDate', w5,
                        'VoucherNo', w2,
                        'PaytoOrReciveFrom', w6,
                        'NOAId', w3,
                        'NOAId2', w7,
                        'ChequeRegisterId', w3,
                        'LinkedWithAutoJV', w8,
                        'LinkedPaymentVoucherNo', w2,
                        'TransactionType', w2,
                        'VoucherType', w2,
                        'VoucherNumber', w2,
                        'AccountHead', w3,
                        'CostCenterTypeId', w3,
                        'ParentId', w3,
                        'CostCentreId', w3,
                        'MultipleCostCenter', w8,
                        'MultiCurrency', w2,
                        'DebitAmount', w9,
                        'CreditAmount', w9,
                        'DDescription', w2,
                        'AdjustedChequeRegisterId', w3,
                        'AddtoGrid', w2,
                        'VoucherDetails', w10,
                        'DAmount', w9,
                        'CAmount', w9,
                        'AmountInWords', w2,
                        'Amount', w9,
                        'ProjectID', w3,
                        'Description', w11,
                        'PostedBy', w2,
                        'PostingDate', w5,
                        'EmpId', w7,
                        'TemplateStatus', w7,
                        'TemplateId', w7,
                        'TemplateCOAId', w7,
                        'TemplateChequeRegisterId', w7,
                        'RemainAmount', w9,
                        'TemplateCOAId2', w9,
                        'FileName', w12,
                        'ConversionRate', w9,
                        'ConversionAmount', w9,
                        'FileNo', w2,
                        'PageNo', w2,
                        'ApplicationInformationHistory', w13
                    ]);
                }
                return _this;
            }
            AccVoucherInformationForm.formKey = 'Transaction.AccVoucherInformation';
            return AccVoucherInformationForm;
        }(Serenity.PrefixedContext));
        Transaction.AccVoucherInformationForm = AccVoucherInformationForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherInformationRow;
        (function (AccVoucherInformationRow) {
            AccVoucherInformationRow.idProperty = 'Id';
            AccVoucherInformationRow.nameProperty = 'AmountInWords';
            AccVoucherInformationRow.localTextPrefix = 'Transaction.AccVoucherInformation';
            AccVoucherInformationRow.lookupKey = 'Transaction.AccVoucherInformation';
            function getLookup() {
                return Q.getLookup('Transaction.AccVoucherInformation');
            }
            AccVoucherInformationRow.getLookup = getLookup;
        })(AccVoucherInformationRow = Transaction.AccVoucherInformationRow || (Transaction.AccVoucherInformationRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherInformationService;
        (function (AccVoucherInformationService) {
            AccVoucherInformationService.baseUrl = 'Transaction/AccVoucherInformation';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List',
                'GetNewVoucherNo',
                'GetApproverInfoByApplicant'
            ].forEach(function (x) {
                AccVoucherInformationService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccVoucherInformationService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccVoucherInformationService = Transaction.AccVoucherInformationService || (Transaction.AccVoucherInformationService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherTemplateForm = (function (_super) {
            __extends(AccVoucherTemplateForm, _super);
            function AccVoucherTemplateForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccVoucherTemplateForm.init) {
                    AccVoucherTemplateForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = VistaGL.COAMappingEditor;
                    var w2 = s.StringEditor;
                    var w3 = s.BooleanEditor;
                    var w4 = VistaGL.VoucherTemplateDrCrMappingEditor;
                    var w5 = s.DecimalEditor;
                    var w6 = s.TextAreaEditor;
                    Q.initFormType(AccVoucherTemplateForm, [
                        'VoucherTypeId', w0,
                        'TransactionTypeId', w0,
                        'TransactionMode', w1,
                        'TemplateName', w2,
                        'CoaDebitHeadId', w0,
                        'IsDebitHeadCheque', w3,
                        'CoaCreditHeadId', w0,
                        'IsCreditHeadCheque', w3,
                        'IsBillReference', w3,
                        'IsCostCenter', w3,
                        'IsSd', w3,
                        'CoaSdId', w0,
                        'SdType', w4,
                        'SdRate', w5,
                        'IsVat', w3,
                        'CoaVatId', w0,
                        'VatType', w4,
                        'VatRate', w5,
                        'IsTax', w3,
                        'CoaTaxId', w0,
                        'TaxType', w4,
                        'TaxRate', w5,
                        'Remarks', w6
                    ]);
                }
                return _this;
            }
            AccVoucherTemplateForm.formKey = 'Transaction.AccVoucherTemplate';
            return AccVoucherTemplateForm;
        }(Serenity.PrefixedContext));
        Transaction.AccVoucherTemplateForm = AccVoucherTemplateForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherTemplateRow;
        (function (AccVoucherTemplateRow) {
            AccVoucherTemplateRow.idProperty = 'Id';
            AccVoucherTemplateRow.nameProperty = 'TemplateName';
            AccVoucherTemplateRow.localTextPrefix = 'Transaction.AccVoucherTemplate';
            AccVoucherTemplateRow.lookupKey = 'Transaction.AccVoucherTemplateRow';
            function getLookup() {
                return Q.getLookup('Transaction.AccVoucherTemplateRow');
            }
            AccVoucherTemplateRow.getLookup = getLookup;
        })(AccVoucherTemplateRow = Transaction.AccVoucherTemplateRow || (Transaction.AccVoucherTemplateRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherTemplateService;
        (function (AccVoucherTemplateService) {
            AccVoucherTemplateService.baseUrl = 'Transaction/AccVoucherTemplate';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                AccVoucherTemplateService[x] = function (r, s, o) {
                    return Q.serviceRequest(AccVoucherTemplateService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(AccVoucherTemplateService = Transaction.AccVoucherTemplateService || (Transaction.AccVoucherTemplateService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherTemplateVoucherIssueForm = (function (_super) {
            __extends(AccVoucherTemplateVoucherIssueForm, _super);
            function AccVoucherTemplateVoucherIssueForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!AccVoucherTemplateVoucherIssueForm.init) {
                    AccVoucherTemplateVoucherIssueForm.init = true;
                    var s = Serenity;
                    var w0 = s.LookupEditor;
                    var w1 = VistaGL.COAMappingEditor;
                    var w2 = VistaGL.TemplateNameEditor;
                    var w3 = s.BooleanEditor;
                    var w4 = s.StringEditor;
                    var w5 = s.DecimalEditor;
                    var w6 = s.DateEditor;
                    var w7 = s.TextAreaEditor;
                    var w8 = VistaGL.VoucherTemplateDrCrMappingEditor;
                    Q.initFormType(AccVoucherTemplateVoucherIssueForm, [
                        'VoucherTypeId', w0,
                        'TransactionTypeId', w0,
                        'TransactionMode', w1,
                        'TemplateName', w2,
                        'CoaDebitHeadId', w0,
                        'IsDebitHeadCheque', w3,
                        'DebitHeadChequeId', w0,
                        'CoaCreditHeadId', w0,
                        'IsCreditHeadCheque', w3,
                        'CreditHeadChequeId', w0,
                        'IsBillReference', w3,
                        'BillReferenceNo', w4,
                        'IsCostCenter', w3,
                        'CostCenterId', w0,
                        'Amount', w5,
                        'VoucherDate', w6,
                        'Remarks', w7,
                        'IsSd', w3,
                        'CoaSdId', w0,
                        'SdType', w8,
                        'SdRate', w5,
                        'SdAmount', w5,
                        'IsVat', w3,
                        'CoaVatId', w0,
                        'VatType', w8,
                        'VatRate', w5,
                        'VatAmount', w5,
                        'IsTax', w3,
                        'CoaTaxId', w0,
                        'TaxType', w8,
                        'TaxRate', w5,
                        'TaxAmount', w5
                    ]);
                }
                return _this;
            }
            AccVoucherTemplateVoucherIssueForm.formKey = 'Transaction.AccVoucherTemplateVoucherIssue';
            return AccVoucherTemplateVoucherIssueForm;
        }(Serenity.PrefixedContext));
        Transaction.AccVoucherTemplateVoucherIssueForm = AccVoucherTemplateVoucherIssueForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var ApvApplicationInformationRow;
        (function (ApvApplicationInformationRow) {
            ApvApplicationInformationRow.idProperty = 'Id';
            ApvApplicationInformationRow.nameProperty = 'ApproverComments';
            ApvApplicationInformationRow.localTextPrefix = 'Transaction.ApvApplicationInformation';
        })(ApvApplicationInformationRow = Transaction.ApvApplicationInformationRow || (Transaction.ApvApplicationInformationRow = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var ApvApplicationInformationService;
        (function (ApvApplicationInformationService) {
            ApvApplicationInformationService.baseUrl = 'Transaction/ApvApplicationInformation';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                ApvApplicationInformationService[x] = function (r, s, o) {
                    return Q.serviceRequest(ApvApplicationInformationService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(ApvApplicationInformationService = Transaction.ApvApplicationInformationService || (Transaction.ApvApplicationInformationService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var BankReconciliationVoucherService;
        (function (BankReconciliationVoucherService) {
            BankReconciliationVoucherService.baseUrl = 'Transaction/BankReconciliationVoucher';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                BankReconciliationVoucherService[x] = function (r, s, o) {
                    return Q.serviceRequest(BankReconciliationVoucherService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(BankReconciliationVoucherService = Transaction.BankReconciliationVoucherService || (Transaction.BankReconciliationVoucherService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var BudgetCreationApprovalForm = (function (_super) {
            __extends(BudgetCreationApprovalForm, _super);
            function BudgetCreationApprovalForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!BudgetCreationApprovalForm.init) {
                    BudgetCreationApprovalForm.init = true;
                    var s = Serenity;
                    var w0 = s.StringEditor;
                    Q.initFormType(BudgetCreationApprovalForm, [
                        'FinancialYearName', w0,
                        'DepartmentName', w0
                    ]);
                }
                return _this;
            }
            BudgetCreationApprovalForm.formKey = 'Transaction.BudgetCreationApproval';
            return BudgetCreationApprovalForm;
        }(Serenity.PrefixedContext));
        Transaction.BudgetCreationApprovalForm = BudgetCreationApprovalForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var BudgetCreationApprovalService;
        (function (BudgetCreationApprovalService) {
            BudgetCreationApprovalService.baseUrl = 'Transaction/BudgetCreationApproval';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List'
            ].forEach(function (x) {
                BudgetCreationApprovalService[x] = function (r, s, o) {
                    return Q.serviceRequest(BudgetCreationApprovalService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(BudgetCreationApprovalService = Transaction.BudgetCreationApprovalService || (Transaction.BudgetCreationApprovalService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var selectCalculationForm = (function (_super) {
            __extends(selectCalculationForm, _super);
            function selectCalculationForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!selectCalculationForm.init) {
                    selectCalculationForm.init = true;
                    var s = Serenity;
                    var w0 = VistaGL.VoucherTemplateDrCrMappingEditor;
                    var w1 = s.DecimalEditor;
                    Q.initFormType(selectCalculationForm, [
                        'Type', w0,
                        'Amount', w1,
                        'Rate', w1
                    ]);
                }
                return _this;
            }
            selectCalculationForm.formKey = 'Transaction.selectCalculationForm';
            return selectCalculationForm;
        }(Serenity.PrefixedContext));
        Transaction.selectCalculationForm = selectCalculationForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var TransferVoucherForm = (function (_super) {
            __extends(TransferVoucherForm, _super);
            function TransferVoucherForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!TransferVoucherForm.init) {
                    TransferVoucherForm.init = true;
                    var s = Serenity;
                    var w0 = s.RadioButtonEditor;
                    var w1 = s.LookupEditor;
                    var w2 = s.StringEditor;
                    var w3 = s.DateEditor;
                    var w4 = s.TextAreaEditor;
                    var w5 = s.DecimalEditor;
                    var w6 = Transaction.TransferDetailesEditor;
                    Q.initFormType(TransferVoucherForm, [
                        'TransferType', w0,
                        'VoucherTypeId', w1,
                        'PostingFinancialYearId', w1,
                        'TransactionTypeEntityId', w1,
                        'VoucherNo', w2,
                        'VoucherDate', w3,
                        'TransactionMode', w2,
                        'FileNo', w2,
                        'PageNo', w2,
                        'TransactionType', w2,
                        'VoucherType', w2,
                        'VoucherNumber', w2,
                        'Description', w4,
                        'AccountHeadFrom', w1,
                        'AccountHeadTo', w1,
                        'TransferAmount', w5,
                        'Amount', w5,
                        'DDescription', w4,
                        'AddtoGrid', w2,
                        'VoucherDetails', w6,
                        'DAmount', w5,
                        'CAmount', w5,
                        'AmountInWords', w2,
                        'PostedBy', w2,
                        'PostingDate', w3
                    ]);
                }
                return _this;
            }
            TransferVoucherForm.formKey = 'Transaction.TransferVoucher';
            return TransferVoucherForm;
        }(Serenity.PrefixedContext));
        Transaction.TransferVoucherForm = TransferVoucherForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var VoucherApprovalForm = (function (_super) {
            __extends(VoucherApprovalForm, _super);
            function VoucherApprovalForm(prefix) {
                var _this = _super.call(this, prefix) || this;
                if (!VoucherApprovalForm.init) {
                    VoucherApprovalForm.init = true;
                    var s = Serenity;
                    var w0 = s.EnumEditor;
                    var w1 = VistaGL.GetApproverInfoByApplicantVoucherEditor;
                    var w2 = s.LookupEditor;
                    var w3 = s.StringEditor;
                    var w4 = s.TextAreaEditor;
                    var w5 = s.DateEditor;
                    var w6 = VistaGL.COAMappingEditor;
                    var w7 = s.IntegerEditor;
                    var w8 = Transaction.AccVoucherDetailsEditor;
                    var w9 = s.DecimalEditor;
                    var w10 = s.MultipleImageUploadEditor;
                    var w11 = Transaction.VoucherApprovalHistoryEditor;
                    Q.initFormType(VoucherApprovalForm, [
                        'approveStatus', w0,
                        'ApproverId', w1,
                        'postingSendTo', w2,
                        'RegretSendTo', w2,
                        'ApprovalAction', w3,
                        'ApprovalComments', w4,
                        'VoucherTypeId', w2,
                        'TransactionTypeEntityId', w2,
                        'VoucherDate', w5,
                        'TransactionMode', w6,
                        'VoucherNo', w3,
                        'PaytoOrReciveFrom', w3,
                        'ChequeRegisterChequeNo', w7,
                        'ChequeRegisterChequeDate', w5,
                        'AutoJVVoucherNo', w3,
                        'TransactionType', w3,
                        'VoucherType', w3,
                        'VoucherNumber', w3,
                        'VoucherDetails', w8,
                        'DAmount', w9,
                        'CAmount', w9,
                        'Amount', w9,
                        'AmountInWords', w3,
                        'Description', w4,
                        'PostedBy', w3,
                        'PostingDate', w5,
                        'PostToLedger', w7,
                        'EmpId', w7,
                        'FileName', w10,
                        'ApplicationInformationHistory', w11
                    ]);
                }
                return _this;
            }
            VoucherApprovalForm.formKey = 'Transaction.VoucherApproval';
            return VoucherApprovalForm;
        }(Serenity.PrefixedContext));
        Transaction.VoucherApprovalForm = VoucherApprovalForm;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var VoucherApprovalService;
        (function (VoucherApprovalService) {
            VoucherApprovalService.baseUrl = 'Transaction/VoucherApproval';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List',
                'IsVoucherApprover',
                'GetNextApprover',
                'GetAmountByApprover',
                'GetPostingSendTo',
                'GetRegretList'
            ].forEach(function (x) {
                VoucherApprovalService[x] = function (r, s, o) {
                    return Q.serviceRequest(VoucherApprovalService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(VoucherApprovalService = Transaction.VoucherApprovalService || (Transaction.VoucherApprovalService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var VoucherPostingService;
        (function (VoucherPostingService) {
            VoucherPostingService.baseUrl = 'Transaction/VoucherPosting';
            [
                'Create',
                'Update',
                'Delete',
                'Retrieve',
                'List',
                'BulkAction'
            ].forEach(function (x) {
                VoucherPostingService[x] = function (r, s, o) {
                    return Q.serviceRequest(VoucherPostingService.baseUrl + '/' + x, r, s, o);
                };
            });
        })(VoucherPostingService = Transaction.VoucherPostingService || (Transaction.VoucherPostingService = {}));
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var VoucherType;
    (function (VoucherType) {
        VoucherType[VoucherType["Payment_Voucher"] = 1] = "Payment_Voucher";
        VoucherType[VoucherType["Receipt_Voucher"] = 2] = "Receipt_Voucher";
        VoucherType[VoucherType["Journal_Voucher"] = 3] = "Journal_Voucher";
        VoucherType[VoucherType["Transfer_Voucher"] = 4] = "Transfer_Voucher";
    })(VoucherType = VistaGL.VoucherType || (VistaGL.VoucherType = {}));
    Serenity.Decorators.registerEnumType(VoucherType, 'VistaGL.VoucherType', 'VoucherType');
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var EntityDialogBase = (function (_super) {
        __extends(EntityDialogBase, _super);
        function EntityDialogBase() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        EntityDialogBase = __decorate([
            Serenity.Decorators.responsive(),
            Serenity.Decorators.maximizable()
        ], EntityDialogBase);
        return EntityDialogBase;
    }(_Ext.DialogBase));
    VistaGL.EntityDialogBase = EntityDialogBase;
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var EntityGridBase = (function (_super) {
        __extends(EntityGridBase, _super);
        function EntityGridBase() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        EntityGridBase = __decorate([
            Serenity.Decorators.filterable()
        ], EntityGridBase);
        return EntityGridBase;
    }(_Ext.GridBase));
    VistaGL.EntityGridBase = EntityGridBase;
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var EntityGridBaseNew = (function (_super) {
        __extends(EntityGridBaseNew, _super);
        function EntityGridBaseNew(container, options) {
            var _this = _super.call(this, container, options) || this;
            _this.isAutosized = false;
            $('section.content').fadeTo(0, 0);
            _this.slickContainer.fadeTo(0, 0);
            return _this;
        }
        EntityGridBaseNew.prototype.createSlickGrid = function () {
            var grid = _super.prototype.createSlickGrid.call(this);
            this.autoColumnSizePlugin = new Slick.AutoColumnSize();
            grid.registerPlugin(this.autoColumnSizePlugin);
            grid.setSelectionModel(new Slick.RowSelectionModel());
            return grid;
        };
        EntityGridBaseNew.prototype.markupReady = function () {
            var _this = this;
            _super.prototype.markupReady.call(this);
            setTimeout(function () {
                if (_this.isAutosized == false) {
                    _this.resizeAllCulumn();
                    $('section.content').fadeTo(200, 1);
                    _this.slickContainer.fadeTo(200, 1);
                }
            }, 200);
            //this.slickGrid.autoSizeColumns();
        };
        EntityGridBaseNew.prototype.resizeAllCulumn = function () {
            this.isAutosized = true;
            var gridContainerWidth = this.slickContainer.width();
            if (this.slickGrid.getOptions().forceFitColumns == false) {
                //gridContainerWidth -= 60;
            }
            else {
                this.slickGrid.setOptions({ forceFitColumns: false });
            }
            var allColumns = this.autoColumnSizePlugin.resizeAllColumns().filter(function (f) { return f.visible != false; }); // this.allColumns;
            var allVisibleColumnWidth = 0;
            allColumns.map(function (m) { return m.width; }).forEach(function (e) { return allVisibleColumnWidth += e; });
            if (allVisibleColumnWidth > gridContainerWidth) {
                this.slickGrid.setOptions({ forceFitColumns: false });
                this.autoColumnSizePlugin.resizeAllColumns();
            }
            else if (allVisibleColumnWidth < gridContainerWidth) {
                this.autoColumnSizePlugin.resizeAllColumns();
                var fixedSizeColumns = allColumns.filter(function (c) { return c.minWidth == c.maxWidth; });
                fixedSizeColumns.forEach(function (c) {
                    c.width = c.maxWidth;
                });
                var fixedSizeColumnsWidth_2 = 0;
                fixedSizeColumns.map(function (m) { return m.width; }).forEach(function (e) { return fixedSizeColumnsWidth_2 += e; });
                var stretchableGridAreaWidth_2 = gridContainerWidth - fixedSizeColumnsWidth_2 - 18;
                //if (this.view.getGrouping().length > 0) {
                //    stretchableGridAreaWidth -= 20;
                //}
                //if (this.element.hasClass('editor') == true) { // for detail grid
                //    stretchableGridAreaWidth -= fixedSizeColumnsWidth + 77;
                //}
                var resizableColumns = allColumns.filter(function (c) { return c.minWidth != c.maxWidth; }).filter(function (c) {
                    var proposedWidth = c.width * (gridContainerWidth / allVisibleColumnWidth);
                    return !c.maxWidth || c.maxWidth > proposedWidth;
                });
                var resizableColumnsWidth_2 = 0;
                resizableColumns.map(function (m) { return m.width; }).forEach(function (e) { return resizableColumnsWidth_2 += e; });
                resizableColumns.forEach(function (c) {
                    c.width = c.width * (stretchableGridAreaWidth_2 / resizableColumnsWidth_2);
                });
                this.slickGrid.setColumns(allColumns);
                this.slickGrid.onColumnsResized.notify();
            }
            //this.view.refresh();
            this.setItems(this.getItems());
        };
        EntityGridBaseNew.prototype.getSlickOptions = function () {
            var opt = _super.prototype.getSlickOptions.call(this);
            opt.forceFitColumns = false;
            opt.enableTextSelectionOnCells = true;
            opt.selectedCellCssClass = "slick-row-selected";
            opt.enableCellNavigation = true;
            return opt;
        };
        EntityGridBaseNew.prototype.getButtons = function () {
            var _this = this;
            var buttons = _super.prototype.getButtons.call(this);
            //buttons.push(Common.ExcelExportHelper.createToolButton({
            //    grid: this,
            //    service: this.getService() + '/ListExcel',
            //    onViewSubmit: () => this.onViewSubmit(),
            //    separator: true
            //}));
            buttons.push(VistaGL.Common.PdfExportHelper.createToolButton({
                grid: this,
                tableOptions: { theme: 'grid' },
                onViewSubmit: function () { return _this.onViewSubmit(); }
            }));
            return buttons;
        };
        EntityGridBaseNew.prototype.getColumns = function () {
            var cols = _super.prototype.getColumns.call(this);
            cols.unshift({
                field: 'Serial',
                name: '#',
                cssClass: 'align-center',
                headerCssClass: 'align-center',
                width: 60,
                minWidth: 60,
                maxWidth: 60,
            });
            return cols;
        };
        EntityGridBaseNew.prototype.onClick = function (e, row, cell) {
            _super.prototype.onClick.call(this, e, row, cell);
            if (e.isDefaultPrevented())
                return;
            var item = this.itemAt(row);
            var recordId = item[this.getIdProperty()];
            var target = $(e.target);
            // if user clicks "i" element, e.g. icon
            if (target.parent().hasClass('inline-action'))
                target = target.parent();
            if (target.hasClass('inline-action')) {
                //e.preventDefault();
                this.onInlineActionClick(target, recordId, item);
            }
        };
        EntityGridBaseNew.prototype.onInlineActionClick = function (target, recordId, item) {
            var _this = this;
            if (target.hasClass('delete-row')) {
                Q.confirm('Delete record?', function () {
                    var o = _this;
                    if (o.deleteEntity) {
                        o.deleteEntity(recordId);
                    }
                    else {
                        Q.serviceRequest(_this.getService() + '/Delete', { EntityId: recordId }, function (response) {
                            _this.refresh();
                        });
                    }
                });
            }
            else if (target.hasClass('view-details')) {
                this.editItem(recordId);
            }
        };
        EntityGridBaseNew.prototype.onViewProcessData = function (response) {
            var _this = this;
            var r = _super.prototype.onViewProcessData.call(this, response);
            var items = r.Entities;
            var grouping_levels = this.view.getGrouping();
            if (grouping_levels.length == 0) {
                for (var i = 0; i < items.length; i++) {
                    items[i].Serial = response.Skip + i + 1;
                }
            }
            else if (grouping_levels.length = 1) {
                var groups_1 = this.view.getGroups();
                var generateSerialNo = function () {
                    groups_1 = _this.view.getGroups();
                    var _loop_1 = function (gi) {
                        var rows = groups_1[gi].rows;
                        var _loop_2 = function (i) {
                            var item = items.filter(function (f) { return f.Id == rows[i].Id; })[0];
                            if (item)
                                item.Serial = i + 1;
                        };
                        for (var i = 0; i < rows.length; i++) {
                            _loop_2(i);
                        }
                    };
                    for (var gi = 0; gi < groups_1.length; gi++) {
                        _loop_1(gi);
                    }
                };
                if (groups_1.length == 0) {
                    setTimeout(generateSerialNo);
                }
                else {
                    generateSerialNo();
                }
            }
            return r;
        };
        EntityGridBaseNew = __decorate([
            Serenity.Decorators.filterable()
        ], EntityGridBaseNew);
        return EntityGridBaseNew;
    }(Serenity.EntityGrid));
    VistaGL.EntityGridBaseNew = EntityGridBaseNew;
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var GridEditorBase = (function (_super) {
        __extends(GridEditorBase, _super);
        function GridEditorBase() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        GridEditorBase = __decorate([
            Serenity.Decorators.registerClass([Serenity.IGetEditValue, Serenity.ISetEditValue]),
            Serenity.Decorators.editor(),
            Serenity.Decorators.element("<div/>")
        ], GridEditorBase);
        return GridEditorBase;
    }(_Ext.GridEditorBase));
    VistaGL.GridEditorBase = GridEditorBase;
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var GridEditorDialog = (function (_super) {
        __extends(GridEditorDialog, _super);
        function GridEditorDialog() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        GridEditorDialog = __decorate([
            Serenity.Decorators.registerClass()
        ], GridEditorDialog);
        return GridEditorDialog;
    }(_Ext.EditorDialogBase));
    VistaGL.GridEditorDialog = GridEditorDialog;
})(VistaGL || (VistaGL = {}));
var q;
(function (q) {
    function groupBy(xs, key) {
        return xs.reduce(function (rv, x) {
            (rv[x[key]] = rv[x[key]] || []).push(x);
            return rv;
        }, {});
    }
    q.groupBy = groupBy;
    function sortBy(xs, key) {
        return xs.sort(function (a, b) {
            if (a[key] < b[key]) {
                return -1;
            }
            if (a[key] > b[key]) {
                return 1;
            }
            return 0;
        });
    }
    q.sortBy = sortBy;
    function sortByDesc(xs, key) {
        return xs.sort(function (a, b) {
            if (a[key] > b[key]) {
                return -1;
            }
            if (a[key] < b[key]) {
                return 1;
            }
            return 0;
        });
    }
    q.sortByDesc = sortByDesc;
})(q || (q = {}));
var q;
(function (q) {
    function nextTick(date) {
        return new Date(date.getTime() + 1);
    }
    q.nextTick = nextTick;
    function addMinutes(date, minutes) {
        return new Date(date.getTime() + minutes * 60000);
    }
    q.addMinutes = addMinutes;
    function addHours(date, hours) {
        return new Date(date.getTime() + hours * 3600000);
    }
    q.addHours = addHours;
    function getHours(fromDate, toDate) {
        var hours = 0;
        if (fromDate && toDate) {
            var totalMiliSeconds = toDate.valueOf() - fromDate.valueOf();
            hours = totalMiliSeconds / (1000 * 60 * 60);
        }
        return hours;
    }
    q.getHours = getHours;
    function getDays24HourPulse(fromDate, toDate) {
        var days = q.getHours(fromDate, toDate) / 24;
        return Math.ceil(days);
    }
    q.getDays24HourPulse = getDays24HourPulse;
    function getDays(pFromDate, pToDate) {
        var fromDate = new Date(pFromDate.getFullYear(), pFromDate.getMonth(), pFromDate.getDate());
        var toDate = new Date(pToDate.getFullYear(), pToDate.getMonth(), pToDate.getDate(), 23, 59, 59);
        var days = q.getHours(fromDate, toDate) / 24;
        //days = days <= 0 ? 1 : days;
        return Math.ceil(days);
    }
    q.getDays = getDays;
    function getMonths(fromDate, toDate) {
        var months = q.getDays24HourPulse(fromDate, toDate) / 30;
        return Math.ceil(months);
    }
    q.getMonths = getMonths;
    function getCalenderMonths(fromDate, toDate) {
        var months;
        months = (toDate.getFullYear() - fromDate.getFullYear()) * 12;
        months -= fromDate.getMonth();
        months += toDate.getMonth();
        return months <= 0 ? 0 : months;
    }
    q.getCalenderMonths = getCalenderMonths;
    function getCalenderMonthsCeil(fromDate, toDate) {
        var months = q.getCalenderMonths(fromDate, toDate);
        return months == 0 ? 1 : months;
    }
    q.getCalenderMonthsCeil = getCalenderMonthsCeil;
    function addDays(date, days) {
        var result = new Date(date);
        result.setDate(result.getDate() + days);
        return result;
    }
    q.addDays = addDays;
    function addMonths(date, months) {
        var result = new Date(date);
        result.setMonth(result.getMonth() + months);
        return result;
    }
    q.addMonths = addMonths;
    function addYear(date, years) {
        var result = new Date(date);
        result.setFullYear(result.getFullYear() + years);
        return result;
    }
    q.addYear = addYear;
    function getPeriods(fromDate, toDate, periodUnit) {
        if (periodUnit == _Ext.TimeUoM.Day) {
            var days = q.getDays(fromDate, toDate);
            return days;
        }
        else if (periodUnit == _Ext.TimeUoM.Month) {
            var months = q.getMonths(fromDate, toDate);
            return months == 0 ? 1 : months;
        }
        else if (periodUnit == _Ext.TimeUoM.CalenderMonth) {
            var calenderMonths = q.getCalenderMonths(fromDate, toDate);
            return calenderMonths + 1;
        }
    }
    q.getPeriods = getPeriods;
    function addPeriod(date, period, periodUnit) {
        var result = new Date(date);
        if (periodUnit == _Ext.TimeUoM.Day)
            result.setDate(result.getDate() + period);
        else if (periodUnit == _Ext.TimeUoM.Month)
            result.setMonth(result.getMonth() + period);
        else if (periodUnit == _Ext.TimeUoM.CalenderMonth) {
            result.setDate(1);
            result.setMonth(result.getMonth() + period);
        }
        return result;
    }
    q.addPeriod = addPeriod;
    function formatISODate(date) {
        if (date) {
            var offset = date.getTimezoneOffset();
            var result = new Date(date.getTime() - offset * 60 * 1000);
            return result.toISOString();
        }
        else
            return null;
    }
    q.formatISODate = formatISODate;
    //editor utils
    function bindDateTimeEditorChange(editor, handler) {
        editor.change(handler);
        editor.element.closest('.field').find('.time').change(handler);
        editor.element.closest('.field').find('.inplace-now').click(handler);
    }
    q.bindDateTimeEditorChange = bindDateTimeEditorChange;
    function initDateRangeEditor(fromDateEditor, toDateEditor, onChangeHandler) {
        var startDateTextBox = fromDateEditor.element;
        var endDateTextBox = toDateEditor.element;
        startDateTextBox.datepicker('option', 'onClose', function (dateText, inst) {
            if (endDateTextBox.val() != '') {
                var testStartDate = startDateTextBox.datepicker('getDate');
                var testEndDate = endDateTextBox.datepicker('getDate');
                if (testStartDate > testEndDate)
                    endDateTextBox.datepicker('setDate', testStartDate);
            }
            else {
                endDateTextBox.val(dateText);
            }
        });
        endDateTextBox.datepicker('option', 'minDate', startDateTextBox.datepicker('getDate'));
        startDateTextBox.datepicker('option', 'onSelect', function (selectedDateTime) {
            endDateTextBox.datepicker('option', 'minDate', startDateTextBox.datepicker('getDate'));
        });
        endDateTextBox.datepicker('option', 'onClose', function (dateText, inst) {
            if (startDateTextBox.val() != '') {
                var testStartDate = startDateTextBox.datepicker('getDate');
                var testEndDate = endDateTextBox.datepicker('getDate');
                if (testStartDate > testEndDate)
                    startDateTextBox.datepicker('setDate', testEndDate);
            }
            else {
                startDateTextBox.val(dateText);
            }
        });
        startDateTextBox.datepicker('option', 'maxDate', endDateTextBox.datepicker('getDate'));
        endDateTextBox.datepicker('option', 'onSelect', function (selectedDateTime) {
            startDateTextBox.datepicker('option', 'maxDate', endDateTextBox.datepicker('getDate'));
        });
        setTimeout(function () {
            fromDateEditor.change(onChangeHandler);
            toDateEditor.change(onChangeHandler);
        }, 500);
    }
    q.initDateRangeEditor = initDateRangeEditor;
    function initDateTimeRangeEditor(fromDateTimeEditor, toDateTimeEditor, onChangeHandler) {
        //fromDateTimeEditor.destroy();
        //toDateTimeEditor.destroy();
        var startDateTextBox = fromDateTimeEditor.element;
        var endDateTextBox = toDateTimeEditor.element;
        //startDateTextBox.datetimepicker('option', 'timeFormat', 'HH:mm z')
        startDateTextBox.datetimepicker('option', 'onClose', function (dateText, inst) {
            if (endDateTextBox.val() != '') {
                var testStartDate = startDateTextBox.datetimepicker('getDate');
                var testEndDate = endDateTextBox.datetimepicker('getDate');
                if (testStartDate > testEndDate)
                    endDateTextBox.datetimepicker('setDate', testStartDate);
            }
            else {
                endDateTextBox.val(dateText);
            }
        });
        endDateTextBox.datetimepicker('option', 'minDate', startDateTextBox.datetimepicker('getDate'));
        startDateTextBox.datetimepicker('option', 'onSelect', function (selectedDateTime) {
            endDateTextBox.datetimepicker('option', 'minDate', startDateTextBox.datetimepicker('getDate'));
        });
        //endDateTextBox.datetimepicker('option', 'timeFormat', 'HH:mm z')
        endDateTextBox.datetimepicker('option', 'onClose', function (dateText, inst) {
            if (startDateTextBox.val() != '') {
                var testStartDate = startDateTextBox.datetimepicker('getDate');
                var testEndDate = endDateTextBox.datetimepicker('getDate');
                if (testStartDate > testEndDate)
                    startDateTextBox.datetimepicker('setDate', testEndDate);
            }
            else {
                startDateTextBox.val(dateText);
            }
        });
        startDateTextBox.datetimepicker('option', 'maxDate', endDateTextBox.datetimepicker('getDate'));
        endDateTextBox.datetimepicker('option', 'onSelect', function (selectedDateTime) {
            startDateTextBox.datetimepicker('option', 'maxDate', endDateTextBox.datetimepicker('getDate'));
        });
        setTimeout(function () {
            fromDateTimeEditor.change(onChangeHandler);
            toDateTimeEditor.change(onChangeHandler);
        }, 500);
    }
    q.initDateTimeRangeEditor = initDateTimeRangeEditor;
    function formatDate(d, format) {
        if (!d) {
            return '';
        }
        var date;
        if (typeof d == "string") {
            var res = Q.parseDate(d);
            if (!res)
                return d;
            date = res;
        }
        else
            date = d;
        if (format == null || format == "d") {
            format = Q.Culture.dateFormat;
        }
        else {
            switch (format) {
                case "g":
                    format = Q.Culture.dateTimeFormat.replace(":ss", "");
                    break;
                case "G":
                    format = Q.Culture.dateTimeFormat;
                    break;
                case "s":
                    format = "yyyy-MM-ddTHH:mm:ss";
                    break;
                case "u": return Q.formatISODateTimeUTC(date);
            }
        }
        var pad = function (i) {
            return Q.zeroPad(i, 2);
        };
        return format.replace(new RegExp('dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|fff|zz?z?|\\/', 'g'), function (fmt) {
            var days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            var months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            switch (fmt) {
                case '/': return Q.Culture.dateSeparator;
                case 'hh': return pad(((date.getHours() < 13) ? date.getHours() : (date.getHours() - 12)));
                case 'h': return ((date.getHours() < 13) ? date.getHours() : (date.getHours() - 12));
                case 'HH': return pad(date.getHours());
                case 'H': return date.getHours();
                case 'mm': return pad(date.getMinutes());
                case 'm': return date.getMinutes();
                case 'ss': return pad(date.getSeconds());
                case 's': return date.getSeconds();
                case 'yyyy': return date.getFullYear();
                case 'yy': return date.getFullYear().toString().substr(2, 4);
                case 'dddd': return days[date.getDay()];
                case 'ddd': return days[date.getDay()].substr(0, 3);
                case 'dd': return pad(date.getDate());
                case 'd': return date.getDate().toString();
                case 'MMMM': return months[date.getMonth()];
                case 'MMM': return months[date.getMonth()].substr(0, 3);
                case 'MM': return pad(date.getMonth() + 1);
                case 'M': return date.getMonth() + 1;
                case 't': return ((date.getHours() < 12) ? 'A' : 'P');
                case 'tt': return ((date.getHours() < 12) ? 'AM' : 'PM');
                case 'fff': return Q.zeroPad(date.getMilliseconds(), 3);
                case 'zzz':
                case 'zz':
                case 'z': return '';
                default: return fmt;
            }
        });
    }
    q.formatDate = formatDate;
})(q || (q = {}));
var q;
(function (q) {
    function initDetailEditor(dialog, editor, options) {
        if (options === void 0) { options = {}; }
        if (options.showCaption != true) {
            editor.element.siblings('.caption').hide();
        }
        if (options.hideToolbar == true) {
            editor.element.find('.grid-toolbar').hide();
        }
        if (options.isReadOnly == true) {
            editor.set_readOnly(options.isReadOnly);
        }
        editor.parentDialog = dialog;
        dialog.onAfterSetDialogSize = function () {
            var $gridContainer = editor.element.find('.grid-container');
            if (options.height) {
                editor.slickGrid.setOptions({ autoHeight: false });
                $gridContainer.height(options.height);
            }
            else {
                var top_1 = $gridContainer.position().top;
                var height = dialog.element.innerHeight() - top_1 - 40;
                if (height > 200)
                    $gridContainer.height(height);
            }
            if (options.width) {
                $gridContainer.width(options.width);
            }
            editor.slickGrid.resizeCanvas();
        };
    }
    q.initDetailEditor = initDetailEditor;
    function setGridEditorHeight(editor, heightInPx) {
        editor.css('height', heightInPx + 'px');
        editor.find('.grid-container')
            .css('height', (heightInPx - 25) + 'px')
            .height(heightInPx);
    }
    q.setGridEditorHeight = setGridEditorHeight;
    function addNotificationIcon(editor, isSuccess) {
        var isAddOnInitialized = editor.element.data('isAddOnInitialized');
        if (isAddOnInitialized != true) {
            editor.element.after('<span class="text text-danger" style="padding:3px"><i class="fa fa-times"></i></span>');
            editor.element.data('isAddOnInitialized', true);
        }
        if (isSuccess == true) {
            editor.element.switchClass('bg-danger', 'bg-success')
                .siblings('.text').switchClass('text-danger', 'text-success')
                .children().switchClass('fa-times', 'fa-check');
        }
        else {
            editor.element.switchClass('bg-success', 'bg-danger')
                .siblings('.text').switchClass('text-success', 'text-danger')
                .children().switchClass('fa-check', 'fa-times');
        }
    }
    q.addNotificationIcon = addNotificationIcon;
    function setEditorLabel(editor, value) {
        editor.element.siblings('label').text(value);
    }
    q.setEditorLabel = setEditorLabel;
    function hideEditorLabel(editor) {
        editor.element.siblings('label').hide();
    }
    q.hideEditorLabel = hideEditorLabel;
    function setEditorCategoryLabel(editor, value) {
        var categoryAnchor = editor.element.closest('.category').find('.category-anchor');
        categoryAnchor.text(value);
        var categoryAnchorName = categoryAnchor.attr('name');
        categoryAnchor.closest('.s-PropertyGrid').find("a[href='#" + categoryAnchorName + "']").text(value);
    }
    q.setEditorCategoryLabel = setEditorCategoryLabel;
    function hideEditorCategory(editor, value) {
        if (value === void 0) { value = true; }
        if (value == true)
            editor.element.closest('.category').hide();
        else
            editor.element.closest('.category').show();
        var categoryAnchor = editor.element.closest('.category').find('.category-anchor');
        var categoryAnchorName = categoryAnchor.attr('name');
        if (value == true)
            categoryAnchor.closest('.s-PropertyGrid').find("a[href='#" + categoryAnchorName + "']").hide();
        else
            categoryAnchor.closest('.s-PropertyGrid').find("a[href='#" + categoryAnchorName + "']").show();
    }
    q.hideEditorCategory = hideEditorCategory;
    function hideCategories(containerElement, value) {
        if (value === void 0) { value = true; }
        if (value == true)
            containerElement.find('.category').hide();
        else
            containerElement.find('.category').show();
        var categoryAnchor = containerElement.find('.category').find('.category-anchor');
        var categoryAnchorName = categoryAnchor.attr('name');
        if (value == true)
            categoryAnchor.closest('.s-PropertyGrid').find("a[href='#" + categoryAnchorName + "']").hide();
        else
            categoryAnchor.closest('.s-PropertyGrid').find("a[href='#" + categoryAnchorName + "']").show();
    }
    q.hideCategories = hideCategories;
    function hideFields(containerElement, value) {
        if (value === void 0) { value = true; }
        if (value == true)
            containerElement.find('.field').hide();
        else
            containerElement.find('.field').show();
    }
    q.hideFields = hideFields;
    function hideFieldsAndCategories(containerElement, value) {
        if (value === void 0) { value = true; }
        hideFields(containerElement);
        hideCategories(containerElement);
    }
    q.hideFieldsAndCategories = hideFieldsAndCategories;
    function hideField(editor, value) {
        if (value === void 0) { value = true; }
        if (editor) {
            if (value == true)
                editor.element.closest('.field').hide();
            else
                editor.element.closest('.field').show();
        }
    }
    q.hideField = hideField;
    function showField(editor, value) {
        if (value === void 0) { value = true; }
        if (editor) {
            if (value == true)
                editor.element.closest('.field').show();
            else
                editor.element.closest('.field').hide();
        }
    }
    q.showField = showField;
    function showFieldAndCategory(editor, value) {
        if (value === void 0) { value = true; }
        showField(editor, value);
        if (value == true)
            hideEditorCategory(editor, false);
    }
    q.showFieldAndCategory = showFieldAndCategory;
    function hideEditorTab(editor, value) {
        if (value === void 0) { value = true; }
        var tabId = editor.element.closest('.tab-pane').hide().attr('id');
        var tabAnchor = editor.element.closest('.s-PropertyGrid').find("a[href='#" + tabId + "']");
        tabAnchor.closest('li').hide();
    }
    q.hideEditorTab = hideEditorTab;
    function readOnlyEditorTab(editor, value) {
        if (value === void 0) { value = true; }
        var $editors = editor.element.closest('.tab-pane').find('.editor');
        Serenity.EditorUtils.setReadonly($editors, value);
    }
    q.readOnlyEditorTab = readOnlyEditorTab;
    function readOnlyEditorCategory(editor, value) {
        if (value === void 0) { value = true; }
        var $editors = editor.element.closest('.category').find('.editor');
        Serenity.EditorUtils.setReadonly($editors, value);
    }
    q.readOnlyEditorCategory = readOnlyEditorCategory;
    function readonlyEditorCategory($editor, value) {
        if (value === void 0) { value = true; }
        var $editors = $editor.closest('.category').find('.editor');
        Serenity.EditorUtils.setReadonly($editors, value);
    }
    q.readonlyEditorCategory = readonlyEditorCategory;
    function readOnlyEditor(editor, value) {
        if (value === void 0) { value = true; }
        Serenity.EditorUtils.setReadOnly(editor, value);
    }
    q.readOnlyEditor = readOnlyEditor;
    function readonlyEditor($editor, value) {
        if (value === void 0) { value = true; }
        Serenity.EditorUtils.setReadonly($editor, value);
    }
    q.readonlyEditor = readonlyEditor;
    function moveEditorFromTab(editor, toElement, isPrepend) {
        if (isPrepend === void 0) { isPrepend = false; }
        var fieldDiv = editor.element.closest('.field');
        if (isPrepend == true)
            fieldDiv.prependTo(toElement);
        else
            fieldDiv.appendTo(toElement);
    }
    q.moveEditorFromTab = moveEditorFromTab;
    function moveEditorCategoryFromTab(editor, toElement, isPrepend) {
        if (isPrepend === void 0) { isPrepend = false; }
        var fieldDiv = editor.element.closest('.field');
        var categoryDiv = editor.element.closest('.category');
        if (isPrepend == true)
            categoryDiv.prependTo(toElement);
        else
            categoryDiv.appendTo(toElement);
        //hide category navigation link
        var categoryAnchor = categoryDiv.find('.category-anchor');
        var categoryAnchorName = categoryAnchor.attr('name');
        categoryAnchor.closest('.s-PropertyGrid').find("a[href='#" + categoryAnchorName + "']").hide();
    }
    q.moveEditorCategoryFromTab = moveEditorCategoryFromTab;
    function selectEditorTab(editor) {
        var tabId = editor.element.closest('.tab-pane').attr('id');
        var tabAnchor = editor.element.closest('.s-PropertyGrid').find("a[href='#" + tabId + "']");
        tabAnchor.tab('show');
    }
    q.selectEditorTab = selectEditorTab;
    // for select2 lookup editor
    function getSelectedRow(e) {
        var selectedItem = e.added;
        var selectedRow = selectedItem.source;
        return selectedRow;
    }
    q.getSelectedRow = getSelectedRow;
})(q || (q = {}));
var q;
(function (q) {
    function getEnumText(enumKey, value) {
        var title = Serenity.EnumFormatter.format(Serenity.EnumTypeRegistry.get(enumKey), value);
        return title;
    }
    q.getEnumText = getEnumText;
    function getEnumValues(enumType) {
        var items = [];
        for (var item in enumType) {
            if (!isNaN(Number(item))) {
                items.push(enumType[item]);
            }
        }
        return items;
    }
    q.getEnumValues = getEnumValues;
    function getEnumKeys(enumType) {
        var items = [];
        for (var item in enumType) {
            if (!isNaN(Number(item))) {
                items.push(item);
            }
        }
        return items;
    }
    q.getEnumKeys = getEnumKeys;
})(q || (q = {}));
var q;
(function (q) {
    function isCosmicThemeApplied() {
        return document.body.className.indexOf('cosmic') >= 0;
    }
    q.isCosmicThemeApplied = isCosmicThemeApplied;
    function getSelectedLanguage() {
        return document.getElementById('LanguageSelect').value;
    }
    q.getSelectedLanguage = getSelectedLanguage;
    function formatDecimal(value) {
        var title = Serenity.NumberFormatter.format(value, '#,##0.00');
        return title;
    }
    q.formatDecimal = formatDecimal;
    function formatInt(value) {
        var title = Serenity.NumberFormatter.format(value, '#,##0');
        return title;
    }
    q.formatInt = formatInt;
    // Check numeric or not then return value, if NAN then return zero(0)
    function ToNumber(value) {
        return isNaN(value) ? 0 : value;
    }
    q.ToNumber = ToNumber;
    function ToBool(value) {
        return value == 'true' ? true : false;
    }
    q.ToBool = ToBool;
    //colorDepth should be within '0123456789ABCDEF'
    function getRandomColor(hexLetters) {
        var letters = hexLetters; // '0123456789ABCDEF';
        var color = '#';
        for (var i = 0; i < 6; i++) {
            var letterIndex = Math.floor((Math.random()) * letters.length);
            if (letterIndex > 15)
                letterIndex = 15;
            if (letterIndex < 0)
                letterIndex = 0;
            color += letters[letterIndex];
        }
        return color;
    }
    q.getRandomColor = getRandomColor;
})(q || (q = {}));
var isPageRefreshRequired;
//const nameof = <T>(name: keyof T) => name;
//const nameofFactory = <T>() => (name: keyof T) => name;
//usage const nameof = nameofFactory<Edoc.RevenueReportModel>();
var q;
(function (q) {
    q.queryString = {};
    q.jsPDFHeaderImageData = null;
    q.jsPDFHeaderTitle = 'Report Title';
    q.useSerenityInlineEditors = true;
    q.DefaultMainGridOptions = {
        AutoColumnSize: true,
        FadeInEffectWhenInit: true,
        ShowAnyInEqualityFilterWithTextValue: true,
        ShowInlineActionsColumn: true,
        ShowDeleteInlineButtun: false,
        ShowEditInlineButtun: true,
        ShowRowNumberColumn: true,
        ShowRowSelectionCheckboxColumn: false,
        RowsPerPage: 100
    };
    q.DefaultEditorGridOptions = {
        AutoColumnSize: true,
        FadeInEffectWhenInit: true,
        ShowAnyInEqualityFilterWithTextValue: true,
        ShowInlineActionsColumn: true,
        ShowDeleteInlineButtun: true,
        ShowEditInlineButtun: true,
        ShowRowSelectionCheckboxColumn: false,
        ShowRowNumberColumn: true
    };
    q.DefaultEntityDialogOptions = {
        AutoFitContentArea: true,
        HideCategoyLinksBar: true,
        PendingChangesConfirmation: true,
        ShowSaveAndNewButtonInToolbar: false,
        ShowCloseButtonInToolbar: false,
        ShowRefreshButtonInToolbar: false,
        ShowChangeLogButtonInToolbar: false,
        ShowReplaceRowButtonInToolbar: false
    };
    q.DefaultEditorDialogOptions = {
        AutoFitContentArea: false,
        HideCategoyLinksBar: true,
        PendingChangesConfirmation: true,
        ShowSaveAndNewButtonInToolbar: false,
        ShowCloseButtonInToolbar: false,
        ShowRefreshButtonInToolbar: false,
        ShowChangeLogButtonInToolbar: false,
        ShowReplaceRowButtonInToolbar: false
    };
    //date time
    q.fiscalYearMonths = [6, 7, 8, 9, 10, 11, 0, 1, 2, 3, 4, 5];
})(q || (q = {}));
var _Ext;
(function (_Ext) {
    var AuditLogActionTypeFormatter = (function () {
        function AuditLogActionTypeFormatter() {
        }
        AuditLogActionTypeFormatter_1 = AuditLogActionTypeFormatter;
        AuditLogActionTypeFormatter.format = function (ctx) {
            var item = ctx.item;
            var klass = '';
            if (item.ActionType == _Ext.AuditActionType.Update) {
                klass = 'warning';
            }
            else if (item.ActionType == _Ext.AuditActionType.Delete) {
                klass = 'danger';
            }
            else {
                klass = 'default';
            }
            return "<span class=\"label label-" + klass + "\">" + _Ext.AuditActionType[item.ActionType] + "</span>";
        };
        AuditLogActionTypeFormatter.prototype.format = function (ctx) {
            return AuditLogActionTypeFormatter_1.format(ctx);
        };
        AuditLogActionTypeFormatter = AuditLogActionTypeFormatter_1 = __decorate([
            Serenity.Decorators.registerFormatter([Serenity.ISlickFormatter])
        ], AuditLogActionTypeFormatter);
        return AuditLogActionTypeFormatter;
        var AuditLogActionTypeFormatter_1;
    }());
    _Ext.AuditLogActionTypeFormatter = AuditLogActionTypeFormatter;
})(_Ext || (_Ext = {}));
/// <reference path="../Bases/DialogBase.ts" />
var _Ext;
(function (_Ext) {
    var AuditLogDialog = (function (_super) {
        __extends(AuditLogDialog, _super);
        function AuditLogDialog() {
            var _this = _super !== null && _super.apply(this, arguments) || this;
            _this.form = new _Ext.AuditLogForm(_this.idPrefix);
            return _this;
        }
        AuditLogDialog.prototype.getFormKey = function () { return _Ext.AuditLogForm.formKey; };
        AuditLogDialog.prototype.getIdProperty = function () { return _Ext.AuditLogRow.idProperty; };
        AuditLogDialog.prototype.getLocalTextPrefix = function () { return _Ext.AuditLogRow.localTextPrefix; };
        AuditLogDialog.prototype.getNameProperty = function () { return _Ext.AuditLogRow.nameProperty; };
        AuditLogDialog.prototype.getService = function () { return _Ext.AuditLogService.baseUrl; };
        AuditLogDialog.prototype.afterLoadEntity = function () {
            _super.prototype.afterLoadEntity.call(this);
            usingJsonDiffPatch();
            //showing diff visually
            var left = JSON.parse(this.entity.OldEntity);
            if (left) {
                if (left.PlantJson) {
                    left.PlantInfo = JSON.parse(left.PlantJson);
                    delete (left.PlantJson);
                }
                delete (left.Id);
                delete (left.IDate);
                delete (left.IUser);
                delete (left.EDate);
                delete (left.EUser);
            }
            var right = JSON.parse(this.entity.NewEntity);
            if (right) {
                if (right.PlantJson) {
                    right.PlantInfo = JSON.parse(right.PlantJson);
                    delete (right.PlantJson);
                }
            }
            var delta = jsondiffpatch.diff(left, right);
            // beautiful html diff
            this.form.Differences.value = jsondiffpatch.formatters.html.format(delta);
        };
        AuditLogDialog = __decorate([
            Serenity.Decorators.registerClass(),
            Serenity.Decorators.responsive()
        ], AuditLogDialog);
        return AuditLogDialog;
    }(_Ext.DialogBase));
    _Ext.AuditLogDialog = AuditLogDialog;
})(_Ext || (_Ext = {}));
/// <reference path="../Bases/GridBase.ts" />
var _Ext;
(function (_Ext) {
    var AuditLogGrid = (function (_super) {
        __extends(AuditLogGrid, _super);
        function AuditLogGrid(container) {
            return _super.call(this, container) || this;
        }
        AuditLogGrid.prototype.getColumnsKey = function () { return '_Ext.AuditLog'; };
        AuditLogGrid.prototype.getDialogType = function () { return _Ext.AuditLogDialog; };
        AuditLogGrid.prototype.getIdProperty = function () { return _Ext.AuditLogRow.idProperty; };
        AuditLogGrid.prototype.getLocalTextPrefix = function () { return _Ext.AuditLogRow.localTextPrefix; };
        AuditLogGrid.prototype.getService = function () { return _Ext.AuditLogService.baseUrl; };
        AuditLogGrid.prototype.getButtons = function () {
            var buttons = _super.prototype.getButtons.call(this);
            buttons.splice(0, 1);
            return buttons;
        };
        AuditLogGrid = __decorate([
            Serenity.Decorators.registerClass()
        ], AuditLogGrid);
        return AuditLogGrid;
    }(_Ext.GridBase));
    _Ext.AuditLogGrid = AuditLogGrid;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var AuditLogViewer = (function () {
        function AuditLogViewer(el, entityVersions) {
            this.el = '.content-wrapper';
            this.data = {
                entityVersions: []
            };
            this.mounted = function () {
            };
            this.computed = {
                test: function () {
                    return 'test computed';
                }
            };
            this.filters = {
                filterByYardId: function () {
                    return [];
                }
            };
            this.methods = {
                showDiff: function (versionInfo) {
                    //showing diff visually
                    var left = versionInfo.OldEntity;
                    var right = versionInfo.NewEntity;
                    var delta = jsondiffpatch.diff(left, right);
                    // beautiful html diff
                    document.getElementById('visualizeDiff').innerHTML = jsondiffpatch.formatters.html.format(delta, left);
                },
                getDiff: function (versionInfo) {
                    //showing diff visually
                    var left = versionInfo.OldEntity;
                    var right = versionInfo.NewEntity;
                    var delta = jsondiffpatch.diff(left, right);
                    // beautiful html diff
                    return jsondiffpatch.formatters.html.format(delta);
                    //var delta = jsondiffpatch.diff(left, right);
                    //// left is optional, if specified unchanged values will be visible too
                    //document.getElementBy('the-diff').innerHTML = jsondiffpatch.formatters.html.format(delta, left);
                    //// Also you can dinamically show/hide unchanged values
                    //jsondiffpatch.formatters.html.showUnchanged();
                    //jsondiffpatch.formatters.html.hideUnchanged();
                    //// these will also adjust array move arrows (SVG), which is useful if something alters the html layout
                }
            };
            this.el = el || this.el;
            this.data.entityVersions = entityVersions;
        }
        AuditLogViewer.prototype.destroyed = function () {
        };
        return AuditLogViewer;
    }());
    _Ext.AuditLogViewer = AuditLogViewer;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var AuditLogViewerDialog = (function (_super) {
        __extends(AuditLogViewerDialog, _super);
        function AuditLogViewerDialog(request) {
            var _this = _super.call(this) || this;
            _this.request = request;
            _this.dialogTitle = 'Audit Log Viewer';
            _this.onDialogOpen = function () {
                _Ext.AuditLogViewerService.List(_this.request, function (response) {
                    response.EntityVersions.forEach(function (e) {
                        delete (e.Id);
                        e.OldEntity = JSON.parse(e.OldEntity);
                        e.NewEntity = JSON.parse(e.NewEntity);
                        delete (e.OldEntity.Id);
                        delete (e.OldEntity.IDate);
                        delete (e.OldEntity.IUser);
                        delete (e.OldEntity.EDate);
                        delete (e.OldEntity.EUser);
                        e.ActionType = _Ext.AuditActionType[e.ActionType];
                        e.isShowed = false;
                    });
                    new Vue(new _Ext.AuditLogViewer('#' + _this.idPrefix + 'dialogContent', response.EntityVersions));
                });
            };
            return _this;
        }
        AuditLogViewerDialog.prototype.getTemplateName = function () {
            usingVuejs();
            usingJsonDiffPatch();
            return '_Ext.AuditLogViewer';
        };
        AuditLogViewerDialog = __decorate([
            Serenity.Decorators.registerClass(),
            Serenity.Decorators.maximizable()
        ], AuditLogViewerDialog);
        return AuditLogViewerDialog;
    }(Serenity.TemplatedDialog));
    _Ext.AuditLogViewerDialog = AuditLogViewerDialog;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var ReplaceRowDialog = (function (_super) {
        __extends(ReplaceRowDialog, _super);
        function ReplaceRowDialog(request, entityList) {
            var _this = _super.call(this) || this;
            _this.request = request;
            _this.entityList = entityList;
            _this.form = new _Ext.ReplaceRowForm(_this.idPrefix);
            _this.dialogTitle = 'Replace Row';
            _this.form.DeletedEntityName.value = request.DeletedEntityName;
            _this.form.ReplaceWithEntityId.items = entityList.map(function (m) { return { id: String(m[request.IdProperty]), text: m[request.NameProperty], source: m }; });
            return _this;
        }
        ReplaceRowDialog.prototype.getFormKey = function () { return _Ext.ReplaceRowForm.formKey; };
        ReplaceRowDialog.prototype.getToolbarButtons = function () {
            var _this = this;
            var buttons = [];
            _super.prototype.getToolbarButtons.call(this);
            buttons.push({
                title: 'Replace',
                icon: 'fa fa fa-trash-o',
                onClick: function () {
                    if (_this.validateForm() == false)
                        return;
                    Q.confirm("Are you sure? \n\n" + _this.request.EntityTypeTitle + ": \"" + _this.request.DeletedEntityName + "\" will be deleted \nand all references will be replaced with \"" + _this.form.ReplaceWithEntityId.text + "\". \n\nThis action cannot be undone!\n\n", function () {
                        _this.request.ReplaceWithEntityId = Q.toId(_this.form.ReplaceWithEntityId.value);
                        Q.serviceRequest(Q.resolveUrl('~/Services/ReplaceRow/Replace'), _this.request, function (response) {
                            _this.dialogClose();
                            if (window['lastGrid'])
                                window['lastGrid'].refresh();
                        });
                    });
                }
            });
            return buttons;
        };
        ReplaceRowDialog = __decorate([
            Serenity.Decorators.registerClass(),
            Serenity.Decorators.maximizable()
        ], ReplaceRowDialog);
        return ReplaceRowDialog;
    }(_Ext.DialogBase));
    _Ext.ReplaceRowDialog = ReplaceRowDialog;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var DevTools;
    (function (DevTools) {
        var SergenPanel = (function (_super) {
            __extends(SergenPanel, _super);
            function SergenPanel(container) {
                var _this = _super.call(this, container) || this;
                var vm = new Vue({
                    el: $('<div/>').appendTo(_this.element)[0],
                    data: {
                        connection: "",
                        connections: [],
                        tables: [],
                        generate: {
                            Row: true,
                            Service: true,
                            UI: true
                        }
                    },
                    methods: {
                        generateCode: function (table) {
                            if (!table.Identifier) {
                                Q.notifyError("Identifier cannot be empty!");
                                return;
                            }
                            if (!table.Module) {
                                Q.notifyError("Module cannot be empty!");
                                return;
                            }
                            DevTools.SergenService.Generate({
                                ConnectionKey: this.connection,
                                Table: table,
                                GenerateOptions: this.generate
                            }, function (r) {
                                Q.notifySuccess("Code for selected table is generated. You'll need to rebuild your project.");
                            });
                        }
                    },
                    watch: {
                        connection: function (val) {
                            if (!val || !val.length)
                                vm.tables = [];
                            else
                                DevTools.SergenService.ListTables({
                                    ConnectionKey: val
                                }, function (response) { return vm.tables = response.Entities; });
                        }
                    },
                    template: Q.getTemplate('_Ext.SergenPanel')
                });
                DevTools.SergenService.ListConnections({}, function (response) { return vm.connections = response.Entities; });
                return _this;
            }
            return SergenPanel;
        }(Serenity.Widget));
        DevTools.SergenPanel = SergenPanel;
    })(DevTools = _Ext.DevTools || (_Ext.DevTools = {}));
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var AutoCompleteEditor = (function (_super) {
        __extends(AutoCompleteEditor, _super);
        function AutoCompleteEditor(input, options) {
            var _this = _super.call(this, input) || this;
            _this.options = options;
            input.bind('change', function (e) {
                if (!Serenity.WX.hasOriginalEvent(e)) {
                    return;
                }
            });
            setTimeout(function () {
                _this.bindAutoComplete(input);
            }, 500);
            return _this;
        }
        AutoCompleteEditor.prototype.bindAutoComplete = function (input) {
            var opt = this.options;
            var source = opt.sourceArray;
            if (opt.sourceCSV) {
                source = opt.sourceCSV.split(',');
            }
            else if (this.options.lookupKey) {
                var lookup_1 = Q.getLookup(opt.lookupKey);
                source = lookup_1.items.map(function (m) { return m[lookup_1.textField]; });
            }
            input.autocomplete({
                minLength: 1,
                autoFocus: true,
                source: source,
                focus: function (event, ui) {
                    //$(".ui-helper-hidden-accessible").hide();  //fix issue with the selected data showing up on webpage
                    //event.preventDefault();
                    //return false;
                },
            });
            input.data("ui-autocomplete")._renderItem = function (ul, item) {
                return $("<li>")
                    .append("<a>" + item.label + "</a>")
                    .appendTo(ul);
            };
            input.bind('click', function (e) {
                var wasOpen = input.autocomplete("widget").is(":visible");
                // Close if already visible
                if (wasOpen) {
                    return;
                }
                // Pass empty string as value to search for, displaying all results
                input.autocomplete("search", "");
            });
        };
        AutoCompleteEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], AutoCompleteEditor);
        return AutoCompleteEditor;
    }(Serenity.StringEditor));
    _Ext.AutoCompleteEditor = AutoCompleteEditor;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var ColorEditor = (function (_super) {
        __extends(ColorEditor, _super);
        function ColorEditor(container) {
            var _this = _super.call(this, container) || this;
            try {
                _this.element.colorpicker({ format: "hex" });
            }
            catch (e) { }
            return _this;
        }
        ColorEditor.prototype.getTemplate = function () {
            usingBootstrapColorPicker();
            return "<div class=\"input-group colorpicker-component\">\n                        <input type=\"text\" value=\"#00AABB\" class=\"form-control\" />\n                        <span class=\"input-group-addon\"><i></i></span>\n                    </div>";
        };
        ;
        ColorEditor.prototype.getEditValue = function (property, target) {
            try {
                var editVal = this.element.colorpicker().data().color;
                target[property.name] = editVal;
            }
            catch (e) { }
        };
        ColorEditor.prototype.setEditValue = function (source, property) {
            var val = source[property.name];
            //this.element.children('input').val(val);
            try {
                this.element.data('colorpicker').setValue(val);
            }
            catch (e) { }
        };
        ColorEditor = __decorate([
            Serenity.Decorators.registerClass([Serenity.IGetEditValue, Serenity.ISetEditValue]),
            Serenity.Decorators.editor(),
            Serenity.Decorators.element("<div/>")
        ], ColorEditor);
        return ColorEditor;
    }(Serenity.TemplatedWidget));
    _Ext.ColorEditor = ColorEditor;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var DateTimePickerEditor = (function (_super) {
        __extends(DateTimePickerEditor, _super);
        function DateTimePickerEditor(container) {
            var _this = _super.call(this, container) || this;
            usingJqueryUITimepickerAddon();
            _this.element.datetimepicker({
                timeInput: true,
                controlType: 'select',
                oneLine: true,
                timeFormat: "HH:mm",
                showOn: "button"
            });
            return _this;
        }
        DateTimePickerEditor.prototype.getEditValue = function (property, target) { target[property.name] = this.value; };
        DateTimePickerEditor.prototype.setEditValue = function (source, property) { this.value = source[property.name]; };
        Object.defineProperty(DateTimePickerEditor.prototype, "value", {
            //http://trentrichardson.com/examples/timepicker
            get: function () {
                return Q.formatDate(this.valueAsDate, 'yyyy-MM-ddTHH:mm');
            },
            set: function (val) {
                this.valueAsDate = Q.parseISODateTime(val);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(DateTimePickerEditor.prototype, "valueAsDate", {
            get: function () {
                var val = this.element.datetimepicker('getDate');
                return val;
            },
            set: function (val) {
                this.element.datetimepicker('setDate', val);
            },
            enumerable: true,
            configurable: true
        });
        DateTimePickerEditor.prototype.get_readOnly = function () {
            return this.element.hasClass('readonly');
        };
        DateTimePickerEditor.prototype.set_readOnly = function (value) {
            if (value == true) {
                this.element.datetimepicker("option", "disabled", true);
                this.element.addClass('readonly');
                this.element.attr("disabled");
            }
            else {
                this.element.datetimepicker("option", "disabled", false);
                this.element.removeClass('readonly');
                this.element.removeAttr("disabled");
            }
        };
        DateTimePickerEditor.prototype.set_minDate = function (date) {
            this.element.datetimepicker('option', 'minDate', date);
        };
        DateTimePickerEditor.prototype.set_maxDate = function (date) {
            this.element.datetimepicker('option', 'maxDate', date);
        };
        DateTimePickerEditor.prototype.set_minDateTime = function (date) {
            this.element.datetimepicker('option', 'minDateTime', date);
        };
        DateTimePickerEditor.prototype.set_maxDateTime = function (date) {
            this.element.datetimepicker('option', 'maxDateTime', date);
        };
        DateTimePickerEditor = __decorate([
            Serenity.Decorators.registerClass([Serenity.IGetEditValue, Serenity.ISetEditValue, Serenity.IReadOnly]),
            Serenity.Decorators.editor(),
            Serenity.Decorators.element("<input/>")
        ], DateTimePickerEditor);
        return DateTimePickerEditor;
    }(Serenity.Widget));
    _Ext.DateTimePickerEditor = DateTimePickerEditor;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var EmptyLookupEditor = (function (_super) {
        __extends(EmptyLookupEditor, _super);
        function EmptyLookupEditor() {
            return _super !== null && _super.apply(this, arguments) || this;
        }
        EmptyLookupEditor.prototype.setSelect2Items = function (items) {
            var _this = this;
            this.clearItems();
            items.forEach(function (item) { _this.addItem(item); });
        };
        EmptyLookupEditor.prototype.setLookupItems = function (lookup) {
            var items = lookup.items.map(function (m) {
                return {
                    id: m[lookup.idField],
                    text: m[lookup.textField],
                    source: m
                };
            });
            this.setSelect2Items(items);
        };
        EmptyLookupEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], EmptyLookupEditor);
        return EmptyLookupEditor;
    }(Serenity.Select2Editor));
    _Ext.EmptyLookupEditor = EmptyLookupEditor;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var HardCodedLookupEditor = (function (_super) {
        __extends(HardCodedLookupEditor, _super);
        function HardCodedLookupEditor(container, options) {
            var _this = _super.call(this, container, options) || this;
            var source = options.sourceArray;
            if (options.sourceCSV) {
                source = options.sourceCSV.split(',');
            }
            source.forEach(function (i) { return _this.addOption(i, i); });
            return _this;
        }
        HardCodedLookupEditor.prototype.getSelect2Options = function () {
            var opt = _super.prototype.getSelect2Options.call(this);
            return opt;
        };
        HardCodedLookupEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], HardCodedLookupEditor);
        return HardCodedLookupEditor;
    }(Serenity.Select2Editor));
    _Ext.HardCodedLookupEditor = HardCodedLookupEditor;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var HtmlTemplateEditor = (function (_super) {
        __extends(HtmlTemplateEditor, _super);
        function HtmlTemplateEditor(textArea, opt) {
            return _super.call(this, textArea, opt) || this;
        }
        HtmlTemplateEditor.prototype.getConfig = function () {
            var config = _super.prototype.getConfig.call(this);
            var placehorders = this.options.placeholders;
            if (placehorders) {
                config.placeholder_select = {
                    placeholders: placehorders.split(',')
                };
                config.extraPlugins += ',richcombo,placeholder_select';
            }
            config.allowedContent = true;
            config.enterMode = window['CKEDITOR'].ENTER_BR;
            config.extraPlugins += ',showborders';
            config.removePlugins += ',uploadimage';
            //config.forcePasteAsPlainText = true;
            //config.toolbar = [['placeholder_select']];
            config.removeButtons += ',Cut,Copy,Paste,PasteText,PasteFromWord' +
                ',SpecialChar,Subscript,Superscript,Styles,' +
                'Link,Unlink,CreatePlaceholder,' +
                'Image,Anchor,Blockquote,BGColor,' +
                'Superscript,RemoveFormat';
            return config;
        };
        HtmlTemplateEditor = __decorate([
            Serenity.Decorators.editor(),
            Serenity.Decorators.element("<div/>")
        ], HtmlTemplateEditor);
        return HtmlTemplateEditor;
    }(Serenity.HtmlContentEditor));
    _Ext.HtmlTemplateEditor = HtmlTemplateEditor;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var StaticTextBlock = (function (_super) {
        __extends(StaticTextBlock, _super);
        function StaticTextBlock(container, options) {
            var _this = _super.call(this, container, options) || this;
            // hide the caption label for this editor if in a form. ugly hack
            if (_this.options.hideLabel)
                _this.element.closest('.field').find('.caption').hide();
            // remove required asterisk (*)
            _this.element.closest('.field').find('sup').hide();
            _this.updateElementContent();
            return _this;
        }
        StaticTextBlock.prototype.updateElementContent = function () {
            var text = Q.coalesce(this.options.text, this._value);
            // if isLocalText is set, text is actually a local text key
            if (this.options.isLocalText)
                text = Q.text(text);
            // don't html encode if isHtml option is true
            if (this.options.isHtml)
                this.element.html(text);
            else
                this.element.text(text);
        };
        /**
         * By implementing ISetEditValue interface, we allow this editor to display its field value.
         * But only do this when our text content is not explicitly set in options
         */
        StaticTextBlock.prototype.setEditValue = function (source, property) {
            if (this.options.text == null) {
                this._value = Q.coalesce(this.options.text, source[property.name]);
                this.updateElementContent();
            }
        };
        Object.defineProperty(StaticTextBlock.prototype, "value", {
            get: function () {
                return this._value;
            },
            set: function (value) {
                this._value = value;
                this.updateElementContent();
            },
            enumerable: true,
            configurable: true
        });
        StaticTextBlock = __decorate([
            Serenity.Decorators.element("<div/>"),
            Serenity.Decorators.registerEditor([Serenity.ISetEditValue])
        ], StaticTextBlock);
        return StaticTextBlock;
    }(Serenity.Widget));
    _Ext.StaticTextBlock = StaticTextBlock;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var GridItemPickerEditor = (function (_super) {
        __extends(GridItemPickerEditor, _super);
        function GridItemPickerEditor(container, options) {
            var _this = _super.call(this, container, options) || this;
            setTimeout(function () {
                _this.element.find('.btn').click(function (e) {
                    var pickerDialog = new _Ext.GridItemPickerDialog(options);
                    pickerDialog.onSuccess = function (selectedItems) {
                        _this.value = pickerDialog.checkGrid.rowSelection.getSelectedKeys().join(',');
                        _this.text = selectedItems.map(function (m) { return m[options.nameFieldInGridRow]; }).join(', ');
                    };
                    pickerDialog.dialogOpen();
                });
            }, 500);
            return _this;
        }
        GridItemPickerEditor.prototype.getTemplate = function () {
            return "<div class=\"input-group\">\n                        <input type=\"hidden\" class=\"value\" />\n                        <input type=\"text\" class=\"form-control text\" disabled/>\n                          <span class=\"input-group-btn\">\n                            <button class=\"btn btn-default\" style=\"height: 27px; padding-top: 3px;\" type=\"button\"><i class=\"fa fa-search\"></i></button>\n                          </span>\n                    </div>";
        };
        ;
        GridItemPickerEditor.prototype.getEditValue = function (property, target) { target[property.name] = this.value; };
        GridItemPickerEditor.prototype.setEditValue = function (source, property) { this.value = source[property.name]; this.text = source[this.options.nameFieldInThisRow]; };
        Object.defineProperty(GridItemPickerEditor.prototype, "value", {
            get: function () {
                var editVal = this.element.find('input.value').val();
                return editVal;
            },
            set: function (val) {
                this.element.find('input.value').val(val);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(GridItemPickerEditor.prototype, "text", {
            get: function () {
                var editVal = this.element.find('input.text').val();
                return editVal;
            },
            set: function (val) {
                this.element.find('input.text').val(val);
            },
            enumerable: true,
            configurable: true
        });
        GridItemPickerEditor = __decorate([
            Serenity.Decorators.registerClass([Serenity.IGetEditValue, Serenity.ISetEditValue]),
            Serenity.Decorators.editor(),
            Serenity.Decorators.element("<div/>")
        ], GridItemPickerEditor);
        return GridItemPickerEditor;
    }(Serenity.TemplatedWidget));
    _Ext.GridItemPickerEditor = GridItemPickerEditor;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var CardViewMixin = (function () {
        function CardViewMixin(options) {
            var _this = this;
            this.options = options;
            var u, f;
            var dg = this.dataGrid = options.grid;
            var idProperty = dg.getIdProperty();
            var getId = this.getId = function (item) { return item[idProperty]; };
            options.defaultViewType = options.defaultViewType || 'list';
            this.viewType = options.defaultViewType;
            var divViewSwitch = $('\n<div class="btn-group view-switch" data-toggle="buttons" style="float: right">\n    <label class="btn btn-default active" title="List View">\n        <i class="fa fa-th-list text-purple"><\/i>\n        <input type="radio" name="' + dg.element.attr("id") + '_ViewType" value="list" checked />\n    <\/label>\n    <label class="btn btn-default" title="Card View">\n        <i class="fa fa-th-large text-purple"><\/i>\n        <input type="radio" name="' + dg.element.attr("id") + '_ViewType" value="card" />    \n    <\/label>\n<\/div>')
                .prependTo(dg.element.find(".grid-title"));
            this.cardContainer = $('<div class="card-container" style="display: none;"><div class="card-items"><\/div><\/div>').insertAfter(dg.element.children(".grid-container"));
            divViewSwitch.find("input").change(function (e) {
                return _this.switchView($(e.target).val());
            });
            this.resizeCardView();
            dg.element.bind("layout", function () {
                return _this.resizeCardView();
            });
            dg.view.onDataChanged.subscribe(function () {
                _this.vm && _this.updateCardItems();
            });
            u = dg.getCurrentSettings;
            dg.getCurrentSettings = function (n) {
                var i = u.apply(dg, [n]);
                return i.viewType = divViewSwitch.find("input:checked").val(), i;
            };
            f = dg.restoreSettings;
            dg.restoreSettings = function (n, i) {
                var u, e, o, s;
                if (f.apply(dg, [n, i]),
                    n == null) {
                    if (u = this.getPersistanceStorage(),
                        u == null)
                        return;
                    if (e = Q.trimToNull(u.getItem(this.getPersistanceKey())),
                        !e)
                        return;
                    n = JSON.parse(e);
                }
                o = n.viewType || options.defaultViewType;
                s = divViewSwitch.find("input:checked").val() || options.defaultViewType;
                o != s && divViewSwitch.find("input").eq(o == "card" ? 1 : 0).click();
            };
        }
        CardViewMixin.prototype.switchView = function (viewType) {
            this.resizeCardView();
            var isCardView = viewType == "card";
            this.dataGrid.element.children(".card-container").toggle(isCardView);
            this.dataGrid.element.children(".grid-container").toggle(!isCardView);
            isCardView && this.updateCardItems();
            this.dataGrid.persistSettings();
        };
        CardViewMixin.prototype.updateCardItems = function () {
            if (this.vm)
                this.vm.items = this.dataGrid.getItems();
            else {
                usingVuejs();
                this.vm = new Vue({
                    el: this.cardContainer.children()[0],
                    template: this.options.containerTemplate ? "<div> " + this.options.containerTemplate + " </div>"
                        : "<div class=\"card-items\">\n    <div v-for=\"(item, index) in items\" class=\"" + (this.options.itemCssClass || 'col-sm-12 col-md-6 col-lg-4') + "\">\n        <div class=\"card-item\" style=\"" + this.options.itemCssStyle + "\">\n        " + this.options.itemTemplate + "\n        </div>\n    </div>\n</div>",
                    data: {
                        items: this.dataGrid.getItems()
                    },
                    methods: this.options.methods
                });
            }
        };
        CardViewMixin.prototype.resizeCardView = function () {
            var gridContainer = this.dataGrid.element.children(".grid-container"), width = this.dataGrid.element.width(), height = gridContainer.height();
            this.dataGrid.element.children(".card-container").css({
                width: width + "px",
                height: height + "px"
            });
        };
        return CardViewMixin;
    }());
    _Ext.CardViewMixin = CardViewMixin;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    /**
     * A mixin that can be applied to a DataGrid for excel style filtering functionality
     */
    var HeaderFiltersMixin = (function () {
        function HeaderFiltersMixin(options) {
            this.options = options;
            var dg = this.dataGrid = options.grid;
            var currentColumn = null;
            var cachedValues = {};
            usingSlickHeaderFilters();
            var headerFilters = new Slick['Plugins'].HeaderFilters({
                getFilterValues: function (column, setFilterableValues) {
                    if (!dg.view.url || !dg.view["getPagingInfo"]().rowsPerPage || dg.view.getLength() == 0
                        && !Q.any(dg.slickGrid.getColumns(), function (x) { return x.filterValues && x.filterValues.length > 0; })) {
                        return null;
                    }
                    currentColumn = column;
                    try {
                        if (!dg.onViewSubmit()) {
                            setFilterableValues([]);
                            return;
                        }
                    }
                    finally {
                        currentColumn = null;
                    }
                    var request = Q.deepClone(dg.view.params);
                    request.DistinctFields = [column.field];
                    request.Skip = 0;
                    request.Take = 0;
                    var cacheKey = $.toJSON(request);
                    var cachedValue = cachedValues[cacheKey];
                    if (cachedValue && cachedValue.expires > (new Date).getTime())
                        setFilterableValues(cachedValue.value);
                    else {
                        Q.serviceCall({
                            request: request,
                            url: dg.view.url,
                            onSuccess: function (response) {
                                cachedValues[cacheKey] = {
                                    value: response.Values,
                                    expires: (new Date).getTime() + 1e3 * 30
                                };
                                setFilterableValues(response.Values);
                            }
                        });
                    }
                },
                isFilterable: function (column) {
                    return column.sourceItem != null && column.sortable && (column.sourceItem.notFilterable == null || !column.sourceItem.notFilterable);
                }
            });
            headerFilters.onFilterApplied.subscribe(function () {
                dg.refresh();
            });
            dg.slickGrid.registerPlugin(headerFilters);
            var oldOnViewSubmit = dg.onViewSubmit;
            dg.onViewSubmit = function () {
                if (!oldOnViewSubmit.call(dg))
                    return false;
                var columns = dg.slickGrid.getColumns();
                var request = dg.view.params;
                for (var n = 0; n < columns.length; n++) {
                    var column = columns[n];
                    if (column === currentColumn)
                        continue;
                    var filterValues = column.filterValues;
                    if (filterValues && filterValues.length) {
                        var u = filterValues.filter(function (f) { return f != null; });
                        var d = [[column.field], "in", [u]];
                        if (u.length !== filterValues.length) {
                            if (u.length > 0)
                                d = Serenity.Criteria.or(["is null", [column.field]], d);
                            else
                                d = ["is null", [column.field]];
                        }
                        request.Criteria = Serenity.Criteria.and(request.Criteria, d);
                    }
                }
                return true;
            };
        }
        return HeaderFiltersMixin;
    }());
    _Ext.HeaderFiltersMixin = HeaderFiltersMixin;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    /**
     * A mixin that can be applied to a DataGrid for tree functionality
     */
    var TreeGridMixin = (function () {
        function TreeGridMixin(options) {
            this.options = options;
            var dg = this.dataGrid = options.grid;
            var idProperty = options.idField || dg.getIdProperty();
            var getId = this.getId = function (item) { return item[idProperty]; };
            dg.element.find('.grid-container').on('click', function (e) {
                if ($(e.target).hasClass('s-TreeToggle')) {
                    var src = dg.slickGrid.getCellFromEvent(e);
                    if (src.cell >= 0 &&
                        src.row >= 0) {
                        TreeGridMixin.toggleClick(e, src.row, src.row, dg.view, getId);
                    }
                }
            });
            var oldViewFilter = dg.onViewFilter;
            dg.onViewFilter = function (item) {
                if (!oldViewFilter.apply(this, [item]))
                    return false;
                return TreeGridMixin.filterById(item, dg.view, idProperty, options.getParentId);
            };
            var oldProcessData = dg.onViewProcessData;
            dg.onViewProcessData = function (response) {
                response = oldProcessData.apply(this, [response]);
                response.Entities = TreeGridMixin.applyTreeOrdering(response.Entities, getId, options.getParentId);
                Serenity.SlickTreeHelper.setIndents(response.Entities, getId, options.getParentId, (options.initialCollapse && options.initialCollapse()) || false);
                return response;
            };
            if (options.toggleField) {
                var col = Q.first(dg.getGrid().getColumns(), function (x) { return x.field == options.toggleField; });
                col.format = TreeGridMixin.treeToggle(function () { return dg.view; }, getId, col.format || (function (ctx) { return Q.htmlEncode(ctx.value); }));
                col.formatter = Serenity.SlickHelper.convertToFormatter(col.format);
            }
        }
        /**
         * Expands / collapses all rows in a grid automatically
         */
        TreeGridMixin.prototype.toggleAll = function () {
            Serenity.SlickTreeHelper.setCollapsed(this.dataGrid.view.getItems(), !this.dataGrid.view.getItems().every(function (x) { return x._collapsed == true; }));
            this.dataGrid.view.setItems(this.dataGrid.view.getItems(), true);
        };
        TreeGridMixin.prototype.expandAll = function () {
            Serenity.SlickTreeHelper.setCollapsed(this.dataGrid.view.getItems(), false);
            this.dataGrid.view.setItems(this.dataGrid.view.getItems(), true);
        };
        TreeGridMixin.prototype.collapsedAll = function () {
            Serenity.SlickTreeHelper.setCollapsed(this.dataGrid.view.getItems(), true);
            this.dataGrid.view.setItems(this.dataGrid.view.getItems(), true);
        };
        /**
         * Reorders a set of items so that parents comes before their children.
         * This method is required for proper tree ordering, as it is not so easy to perform with SQL.
         * @param items list of items to be ordered
         * @param getId a delegate to get ID of a record (must return same ID with grid identity field)
         * @param getParentId a delegate to get parent ID of a record
         */
        TreeGridMixin.applyTreeOrdering = function (items, getId, getParentId) {
            var result = [];
            var byId = Q.toGrouping(items, getId);
            var byParentId = Q.toGrouping(items, getParentId);
            var visited = {};
            function takeChildren(theParentId) {
                if (visited[theParentId])
                    return;
                visited[theParentId] = true;
                for (var _i = 0, _a = (byParentId[theParentId] || []); _i < _a.length; _i++) {
                    var child = _a[_i];
                    result.push(child);
                    takeChildren(getId(child));
                }
            }
            for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {
                var item = items_1[_i];
                var parentId = getParentId(item);
                var hasParent = parentId != null;
                var parent_1 = byId[parentId];
                var isRootItem = !hasParent || !(parent_1 || []).length;
                if (isRootItem) {
                    result.push(item);
                    takeChildren(getId(item));
                }
            }
            return result;
        };
        TreeGridMixin.filterById = function (item, view, idProperty, getParentId) {
            return Serenity.SlickTreeHelper.filterCustom(item, function (x) {
                var parentId = getParentId(x);
                if (parentId == null) {
                    return null;
                }
                var items = view.getItems();
                var parentItem = items.filter(function (f) { return f[idProperty] == parentId; })[0];
                return parentItem;
            });
        };
        TreeGridMixin.treeToggle = function (getView, getId, formatter) {
            return function (ctx) {
                var text = formatter(ctx);
                var view = getView();
                var indent = Q.coalesce(ctx.item._indent, 0);
                var spacer = '<span class="s-TreeIndent" style="width:' + 15 * indent + 'px"></span>';
                var id = getId(ctx.item);
                var idx = view.getIdxById(ctx.item.__id || id);
                var next = view.getItemByIdx(idx + 1);
                if (next != null) {
                    var nextIndent = Q.coalesce(next._indent, 0);
                    if (nextIndent > indent) {
                        if (!!!!ctx.item._collapsed) {
                            return spacer + '<span class="s-TreeToggle s-TreeExpand"></span>' + text;
                        }
                        else {
                            return spacer + '<span class="s-TreeToggle s-TreeCollapse"></span>' + text;
                        }
                    }
                }
                return spacer + '<span class="s-TreeToggle"></span>' + text;
            };
        };
        TreeGridMixin.toggleClick = function (e, row, cell, view, getId) {
            var target = $(e.target);
            if (!target.hasClass('s-TreeToggle')) {
                return;
            }
            if (target.hasClass('s-TreeCollapse') || target.hasClass('s-TreeExpand')) {
                var item = view.getItem(row);
                if (item != null) {
                    if (!!!item._collapsed) {
                        item._collapsed = true;
                    }
                    else {
                        item._collapsed = false;
                    }
                    var id = getId(item);
                    view.updateItem(item.__id || id, item); //to support in-memory grid we check fake item.__id
                }
                if (e.shiftKey) {
                    view.beginUpdate();
                    try {
                        Serenity.SlickTreeHelper.setCollapsed(view.getItems(), !!item._collapsed);
                        view.setItems(view.getItems(), true);
                    }
                    finally {
                        view.endUpdate();
                    }
                }
            }
        };
        return TreeGridMixin;
    }());
    _Ext.TreeGridMixin = TreeGridMixin;
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var ExcelExportHelper;
    (function (ExcelExportHelper) {
        function createToolButton(options) {
            return {
                hint: Q.coalesce(options.title, 'Excel'),
                title: Q.coalesce(options.hint, ''),
                cssClass: 'export-xlsx-button',
                onClick: function () {
                    if (!options.onViewSubmit()) {
                        return;
                    }
                    var grid = options.grid;
                    var request = Q.deepClone(grid.getView().params);
                    request.Take = 0;
                    request.Skip = 0;
                    var sortBy = grid.getView().sortBy;
                    if (sortBy) {
                        request.Sort = sortBy;
                    }
                    request.IncludeColumns = [];
                    var columns = grid.getGrid().getColumns();
                    for (var _i = 0, columns_1 = columns; _i < columns_1.length; _i++) {
                        var column = columns_1[_i];
                        request.IncludeColumns.push(column.id || column.field);
                    }
                    Q.postToService({ service: options.service, request: request, target: '_blank' });
                },
                separator: options.separator
            };
        }
        ExcelExportHelper.createToolButton = createToolButton;
    })(ExcelExportHelper = _Ext.ExcelExportHelper || (_Ext.ExcelExportHelper = {}));
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var PdfExportHelper;
    (function (PdfExportHelper) {
        function toAutoTableColumns(srcColumns, columnStyles, columnTitles) {
            return srcColumns.map(function (src) {
                var col = {
                    dataKey: src.id || src.field,
                    title: src.name || ''
                };
                if (columnTitles && columnTitles[col.dataKey] != null)
                    col.title = columnTitles[col.dataKey];
                var style = {};
                if ((src.cssClass || '').indexOf("align-right") >= 0)
                    style.halign = 'right';
                else if ((src.cssClass || '').indexOf("align-center") >= 0)
                    style.halign = 'center';
                columnStyles[col.dataKey] = style;
                return col;
            });
        }
        function toAutoTableData(entities, keys, srcColumns) {
            var el = document.createElement('span');
            var row = 0;
            return entities.map(function (item) {
                var dst = {};
                for (var cell = 0; cell < srcColumns.length; cell++) {
                    var src = srcColumns[cell];
                    var fld = src.field || '';
                    var key = keys[cell];
                    var txt = void 0;
                    var html = void 0;
                    if (src.formatter) {
                        html = src.formatter(row, cell, item[fld], src, item);
                    }
                    else if (src.format) {
                        html = src.format({ row: row, cell: cell, item: item, value: item[fld] });
                    }
                    else {
                        dst[key] = item[fld];
                        continue;
                    }
                    if (!html || (html.indexOf('<') < 0 && html.indexOf('&') < 0))
                        dst[key] = html;
                    else {
                        el.innerHTML = html;
                        if (el.children.length == 1 &&
                            $(el.children[0]).is(":input")) {
                            dst[key] = $(el.children[0]).val();
                        }
                        else if (el.children.length == 1 &&
                            $(el.children).is('.check-box')) {
                            dst[key] = $(el.children).hasClass("checked") ? "Yes" : "No";
                        }
                        else
                            dst[key] = el.textContent || '';
                    }
                }
                row++;
                return dst;
            });
        }
        function exportToPdf(options) {
            var g = options.grid;
            if (!options.onViewSubmit())
                return;
            includeAutoTable();
            var request = Q.deepClone(g.view.params);
            request.Take = 0;
            request.Skip = 0;
            var sortBy = g.view.sortBy;
            if (sortBy != null)
                request.Sort = sortBy;
            var gridColumns = g.slickGrid.getColumns();
            gridColumns = gridColumns.filter(function (x) { return x.id !== "__select__" && x.name.length > 0; });
            request.IncludeColumns = [];
            for (var _i = 0, gridColumns_1 = gridColumns; _i < gridColumns_1.length; _i++) {
                var column = gridColumns_1[_i];
                request.IncludeColumns.push(column.id || column.field);
            }
            Q.serviceCall({
                url: g.view.url,
                request: request,
                onSuccess: function (response) {
                    var doc = new jsPDF('l', 'pt');
                    var groupings = g.view.getGrouping(); //group fields
                    var groupingColumns = gridColumns.filter(function (f) { return groupings.some(function (s) { return s.getter == f.field; }) == true; });
                    var srcColumns = gridColumns.filter(function (f) { return groupings.some(function (s) { return s.getter == f.field; }) == false; });
                    var columnStyles = {};
                    var columns = toAutoTableColumns(srcColumns, columnStyles, options.columnTitles);
                    var keys = columns.filter(function (f) { return groupings.some(function (s) { return s.getter == f; }) == false; }).map(function (x) { return x.dataKey; });
                    var totalPagesExp = "{{T}}";
                    var pageNumbers = options.pageNumbers == null || options.pageNumbers;
                    var autoOptions = $.extend({
                        margin: { top: 40, left: 40, right: 40, bottom: pageNumbers ? 110 : 100 },
                        startY: 90,
                        styles: {
                            fontSize: 8,
                            overflow: 'linebreak',
                            cellPadding: 5,
                            valign: 'middle',
                            lineColor: 0
                        },
                        headerStyles: { fillColor: 255, textColor: 0, lineWidth: 1, fillStyle: 'S', halign: 'center', valign: 'middle' },
                        columnStyles: columnStyles
                    }, options.tableOptions);
                    ///region Title
                    {
                        if (q.jsPDFHeaderImageData) {
                            doc.addImage(q.jsPDFHeaderImageData, 'PNG', 40, 40, 60, 60);
                        }
                        doc.autoTable([q.jsPDFHeaderTitle], [], {
                            margin: { bottom: 10, left: 110 },
                            startY: options.titleTop || 45,
                            headerStyles: { fillColor: 255, textColor: 0 },
                            styles: { halign: 'left', fontSize: 18 }
                        });
                        var reportTitle = '';
                        if (groupingColumns[0])
                            reportTitle = groupingColumns.map(function (m) { return m.name; }).join(', ') + ' wise ';
                        reportTitle += options.reportTitle || g.getTitle();
                        reportTitle += " Report";
                        doc.autoTable([reportTitle], [], {
                            margin: { top: 10, bottom: 10, left: 110 },
                            startY: doc.autoTableEndPosY(),
                            headerStyles: { fillColor: 255, textColor: 0 },
                            styles: { halign: 'left', fontSize: 14 }
                        });
                    }
                    ///region Header
                    {
                        var header = function (data) {
                        };
                        autoOptions.beforePageContent = header;
                    }
                    ///region Footer
                    {
                        if (pageNumbers) {
                            var footer = function (data) {
                                var str = data.pageCount;
                                // Total page number plugin only available in jspdf v1.0+
                                if (typeof doc.putTotalPages === 'function') {
                                    str = str + " / " + totalPagesExp;
                                }
                                doc.autoTableText(str, doc.internal.pageSize.width / 2, doc.internal.pageSize.height - autoOptions.margin.bottom, {
                                    halign: 'center'
                                });
                            };
                            autoOptions.afterPageContent = footer;
                        }
                    }
                    ///region Content
                    {
                        //extra space after title
                        doc.autoTable([''], [], {
                            startY: doc.autoTableEndPosY() + 20,
                            headerStyles: { fillColor: 255, textColor: 0 }
                        });
                        var headerHeight = 125;
                        var headerFontSizeBase = 11;
                        var entities = response.Entities || [];
                        g.setItems(entities);
                        var groups = g.view.getGroups(); //grouped data
                        if (groups.length > 0) {
                            var ggg = function (grps, parentGroupIndex) {
                                var endPosY = doc.autoTableEndPosY();
                                for (var i = 0; i < grps.length; i++) {
                                    var group = grps[i];
                                    var level = group.level + 1;
                                    doc.autoTable([group.title], [], {
                                        margin: { left: 30 + level * 10, top: 2 },
                                        startY: doc.autoTableEndPosY(),
                                        headerStyles: { fillColor: 255, textColor: 0, fontSize: 10 - group.level, cellPadding: 0 }
                                    });
                                    if (group.groups) {
                                        ggg(group.groups, i);
                                    }
                                    else {
                                        var data = toAutoTableData(group.rows, keys, srcColumns);
                                        autoOptions.startY = doc.autoTableEndPosY();
                                        autoOptions.margin.left = 30 + level * 10;
                                        autoOptions.margin.bottom = 10;
                                        doc.autoTable(columns, data, autoOptions);
                                        //for extra space
                                        doc.autoTable([''], [], {
                                            margin: { left: 30 + level * 10, top: 2 },
                                            startY: doc.autoTableEndPosY() + 10,
                                            headerStyles: { fillColor: 255, textColor: 0 }
                                        });
                                    }
                                }
                            };
                            ggg(groups, -1);
                        }
                        else {
                            var data = toAutoTableData(g.getItems(), keys, srcColumns);
                            autoOptions.startY = headerHeight;
                            doc.autoTable(columns, data, autoOptions);
                        }
                    }
                    if (typeof doc.putTotalPages === 'function') {
                        doc.putTotalPages(totalPagesExp);
                    }
                    if (!options.output || options.output == "file") {
                        var fileName = options.reportTitle || "{0}_{1}.pdf";
                        fileName = Q.format(fileName, g.getTitle() || "report", Q.formatDate(new Date(), "yyyyMMdd_HHmm"));
                        doc.save(fileName);
                        return;
                    }
                    if (options.autoPrint)
                        doc.autoPrint();
                    var output = options.output;
                    if (output == 'newwindow' || '_blank')
                        output = 'dataurlnewwindow';
                    else if (output == 'window')
                        output = 'datauri';
                    doc.output(output);
                }
            });
        }
        PdfExportHelper.exportToPdf = exportToPdf;
        function createToolButton(options) {
            return {
                title: options.title || '',
                hint: options.hint || 'PDF',
                cssClass: 'export-pdf-button',
                onClick: function () { return exportToPdf(options); },
                separator: options.separator
            };
        }
        PdfExportHelper.createToolButton = createToolButton;
        function includeJsPDF() {
            if (typeof jsPDF !== "undefined")
                return;
            var script = $("jsPDFScript");
            if (script.length > 0)
                return;
            $("<script/>")
                .attr("type", "text/javascript")
                .attr("id", "jsPDFScript")
                .attr("src", Q.resolveUrl("~/Scripts/jspdf.min.js"))
                .appendTo(document.head);
        }
        function includeAutoTable() {
            includeJsPDF();
            if (typeof jsPDF === "undefined" ||
                typeof jsPDF.API == "undefined" ||
                typeof jsPDF.API.autoTable !== "undefined")
                return;
            var script = $("jsPDFAutoTableScript");
            if (script.length > 0)
                return;
            $("<script/>")
                .attr("type", "text/javascript")
                .attr("id", "jsPDFAutoTableScript")
                .attr("src", Q.resolveUrl("~/Scripts/jspdf.plugin.autotable.min.js"))
                .appendTo(document.head);
        }
    })(PdfExportHelper = _Ext.PdfExportHelper || (_Ext.PdfExportHelper = {}));
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var ReportHelper;
    (function (ReportHelper) {
        function createToolButton(options) {
            return {
                title: Q.coalesce(options.title, 'Report'),
                cssClass: Q.coalesce(options.cssClass, 'print-button'),
                icon: options.icon,
                onClick: function () {
                    ReportHelper.execute(options);
                }
            };
        }
        ReportHelper.createToolButton = createToolButton;
        function execute(options) {
            var opt = options.getParams ? options.getParams() : options.params;
            Q.postToUrl({
                url: '~/Report/' + (options.download ? 'Download' : 'Render'),
                params: {
                    key: options.reportKey,
                    ext: Q.coalesce(options.extension, 'pdf'),
                    opt: opt ? $.toJSON(opt) : ''
                },
                target: Q.coalesce(options.target, '_blank')
            });
        }
        ReportHelper.execute = execute;
    })(ReportHelper = _Ext.ReportHelper || (_Ext.ReportHelper = {}));
})(_Ext || (_Ext = {}));
var _Ext;
(function (_Ext) {
    var DialogUtils;
    (function (DialogUtils) {
        function pendingChangesConfirmation(element, hasPendingChanges) {
            element.bind('dialogbeforeclose', function (e) {
                if (!Serenity.WX.hasOriginalEvent(e) || !hasPendingChanges()) {
                    return;
                }
                e.preventDefault();
                Q.confirm('You have pending changes. Save them?', function () { return element.find('div.save-and-close-button').click(); }, {
                    onNo: function () {
                        element.dialog().dialog('close');
                    }
                });
            });
        }
        DialogUtils.pendingChangesConfirmation = pendingChangesConfirmation;
    })(DialogUtils = _Ext.DialogUtils || (_Ext.DialogUtils = {}));
})(_Ext || (_Ext = {}));
function loadScriptAsync(url, callback) {
    // Adding the script tag to the head as suggested before
    var head = document.getElementsByTagName('head')[0];
    var script = document.createElement('script');
    script.type = 'text/javascript';
    script.src = url;
    // Then bind the event to the callback function.
    // There are several events for cross browser compatibility.
    script.onload = callback;
    // Fire the loading
    head.appendChild(script);
}
function loadScript(url) {
    $.ajax({
        url: url,
        dataType: "script",
        async: false,
        cache: true,
        success: function () {
            // all good...
        },
        error: function () {
            throw new Error("Could not load script " + url);
        }
    });
}
function usingVuejs() {
    if (window['Vue']) {
        return;
    }
    else {
        loadScript(Q.resolveUrl("~/Scripts/vue.js"));
        //filters
        window['Vue'].filter('formatDate', function (value, format) {
            if (value) {
                return Q.formatDate(value, format);
            }
        });
        window['Vue'].filter('formatDateReadable', function (value) {
            if (value) {
                var date = Q.parseISODateTime(value);
                return date.getDate() + ' ' + _Ext.Months[date.getMonth()].substr(0, 3) + ' ' + date.getFullYear();
            }
        });
        window['Vue'].filter('dayOnly', function (value) {
            if (value) {
                return Q.formatDate(value, 'dd');
            }
        });
        window['Vue'].filter('monthOnly', function (value) {
            if (value) {
                var date = Q.parseISODateTime(value);
                return _Ext.Months[date.getMonth()];
            }
        });
        window['Vue'].filter('monthOnly3', function (value) {
            if (value) {
                var date = Q.parseISODateTime(value);
                return _Ext.Months[date.getMonth()].substr(0, 3);
            }
        });
        window['Vue'].filter('yearOnly', function (value) {
            if (value) {
                var date = Q.parseISODateTime(value);
                return date.getFullYear();
            }
        });
        window['Vue'].filter('timeOnlyHHmm', function (value) {
            if (value) {
                return Q.formatDate(value, 'HH:mm');
            }
        });
        window['Vue'].filter('formatDateTimeReadable', function (value) {
            if (value) {
                var date = Q.parseISODateTime(value);
                return date.getDate() + ' ' + _Ext.Months[date.getMonth()] + ' ' + date.getFullYear()
                    + ' ' + date.getHours() + ':' + date.getMinutes() + ':' + date.getSeconds();
            }
        });
        window['Vue'].filter('enumText', function (value, enumKey) {
            if (value) {
                return Serenity.EnumFormatter.format(Serenity.EnumTypeRegistry.get(enumKey), value);
            }
        });
        window['Vue'].filter('truncate', function (text, length, clamp) {
            clamp = clamp || '...';
            length = length || 30;
            if (text.length <= length)
                return text;
            var tcText = text.slice(0, length - clamp.length);
            var last = tcText.length - 1;
            while (last > 0 && tcText[last] !== ' ' && tcText[last] !== clamp[0])
                last -= 1;
            // Fix for case when text dont have any `space`
            last = last || length - clamp.length;
            tcText = tcText.slice(0, last);
            return tcText + clamp;
        });
        window['Vue'].filter('capitalize', function (value) {
            if (!value)
                return '';
            value = value.toString();
            return value.charAt(0).toUpperCase() + value.toLowerCase().slice(1);
        });
    }
}
function includeBootstrapColorPickerCss() {
    var style = $("#colorpicker");
    if (style.length > 0) {
        return;
    }
    $("<link/>")
        .attr("type", "text/css")
        .attr("id", "colorpicker")
        .attr("rel", "stylesheet")
        .attr("href", Q.resolveUrl("~/Scripts/colorpicker/bootstrap-colorpicker.min.css"))
        .appendTo(document.head);
}
function usingBootstrapColorPicker() {
    if (window['colorpicker']) {
        return;
    }
    else {
        includeBootstrapColorPickerCss();
        loadScript(Q.resolveUrl("~/Scripts/colorpicker/bootstrap-colorpicker.min.js"));
    }
}
function includeJqueryUITimepickerAddonCss() {
    var style = $("#datetimepicker");
    if (style.length > 0) {
        return;
    }
    $("<link/>")
        .attr("type", "text/css")
        .attr("id", "datetimepicker")
        .attr("rel", "stylesheet")
        .attr("href", Q.resolveUrl("~/Content/jquery-ui-timepicker-addon.css"))
        .appendTo(document.head);
}
function usingJqueryUITimepickerAddon() {
    if (window['datetimepicker']) {
        return;
    }
    else {
        includeJqueryUITimepickerAddonCss();
        loadScript(Q.resolveUrl("~/Scripts/jquery-ui-timepicker-addon.js"));
    }
}
function usingBabylonjs() {
    if (window['BABYLON'] && window['BABYLON']['Engine']) {
        return;
    }
    else {
        loadScript(Q.resolveUrl("~/Scripts/babylonjs/babylon.js"));
    }
}
function usingChartjs() {
    if (window['Chart']) {
        return;
    }
    else {
        loadScript(Q.resolveUrl('~/Scripts/chartjs/Chart.js'));
    }
}
function includeCustomMarkerCss() {
    var style = $("#customMarker");
    if (style.length > 0) {
        return;
    }
    $("<link/>")
        .attr("type", "text/css")
        .attr("id", "customMarker")
        .attr("rel", "stylesheet")
        .attr("href", Q.resolveUrl("~/Scripts/googlemap/CustomMarker.css"))
        .appendTo(document.head);
}
function usingCustomMarker() {
    if (window['CustomMarker']) {
        return;
    }
    else {
        includeCustomMarkerCss();
        loadScript(Q.resolveUrl("~/Scripts/googlemap/CustomMarker.js"));
    }
}
function includeGoogleMap(callback, callbackFullName) {
    if (window['google']) {
        if (callback)
            callback();
        return;
    }
    var script = $("#googleScript");
    if (script.length > 0) {
        if (callback)
            callback();
        return;
    }
    $("<script/>")
        .attr("type", "text/javascript")
        .attr("id", "googleScript")
        .attr("src", 'http://maps.google.com/maps/api/js?v=3.31&key=AIzaSyCRiY7aFA2cI6STbl3YQ3r6m1IpUFmBM98&callback=' + callbackFullName || 'includeGoogleMap')
        .appendTo(document.head);
}
function includeMarkerWithLabel() {
    if (window['MarkerWithLabel']) {
        return;
    }
    var script = $("#MarkerWithLabelScript");
    if (script.length > 0) {
        return;
    }
    $("<script/>")
        .attr("type", "text/javascript")
        .attr("id", "MarkerWithLabelScript")
        .attr("src", Q.resolveUrl("~/Scripts/googlemap/markerwithlabel.js"))
        .appendTo(document.head);
}
function includeVisCss() {
    var style = $("#Vis");
    if (style.length > 0) {
        return;
    }
    $("<link/>")
        .attr("type", "text/css")
        .attr("id", "Vis")
        .attr("rel", "stylesheet")
        .attr("href", Q.resolveUrl("~/Scripts/visjs/vis.min.css"))
        .appendTo(document.head);
}
function usingVisjs() {
    if (window['vis']) {
        return;
    }
    else {
        includeVisCss();
        loadScript(Q.resolveUrl("~/Scripts/visjs/vis.min.js"));
    }
}
function usingJsonDiffPatch() {
    if (window['jsondiffpatch']) {
        return;
    }
    else {
        $("<link/>").attr("type", "text/css").attr("id", "JsonDiffPatch").attr("rel", "stylesheet")
            .attr("href", Q.resolveUrl("~/Modules/_Ext/AuditLogViewer/jsondiffpatch/formatters-styles/html.css"))
            .appendTo(document.head);
        loadScript(Q.resolveUrl("~/Modules/_Ext/AuditLogViewer/jsondiffpatch/jsondiffpatch.min.js"));
        loadScript(Q.resolveUrl("~/Modules/_Ext/AuditLogViewer/jsondiffpatch/jsondiffpatch-formatters.min.js"));
    }
}
function usingSlickGridEditors() {
    if (window['Slick'] && window['Slick']['Editors'] && window['Slick']['Editors']['Text']) {
        return;
    }
    else {
        loadScript(Q.resolveUrl("~/Modules/_Ext/Editors/slick.editors.js"));
    }
}
function usingSlickAutoColumnSize() {
    if (window['Slick'] && window['Slick']['AutoColumnSize']) {
        return;
    }
    else {
        loadScript(Q.resolveUrl("~/Modules/_Ext/CustomSlickGridPlugin/slick.autocolumnsize.js"));
    }
}
function usingSlickHeaderFilters() {
    if (window['Slick'] && window['Slick']['HeaderFilters']) {
        return;
    }
    else {
        $("<link/>")
            .attr("type", "text/css")
            .attr("id", "CustomSlickGridPlugin")
            .attr("rel", "stylesheet")
            .attr("href", Q.resolveUrl("~/Modules/_Ext/CustomSlickGridPlugin/slick-headerfilters.css"))
            .appendTo(document.head);
        loadScript(Q.resolveUrl("~/Modules/_Ext/CustomSlickGridPlugin/slick.headerfilters.js"));
    }
}
/// <reference path="../../_Bases/EntityDialogBase.ts" />
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var LanguageDialog = (function (_super) {
            __extends(LanguageDialog, _super);
            function LanguageDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Administration.LanguageForm(_this.idPrefix);
                return _this;
            }
            LanguageDialog.prototype.getFormKey = function () { return Administration.LanguageForm.formKey; };
            LanguageDialog.prototype.getIdProperty = function () { return Administration.LanguageRow.idProperty; };
            LanguageDialog.prototype.getLocalTextPrefix = function () { return Administration.LanguageRow.localTextPrefix; };
            LanguageDialog.prototype.getNameProperty = function () { return Administration.LanguageRow.nameProperty; };
            LanguageDialog.prototype.getService = function () { return Administration.LanguageService.baseUrl; };
            LanguageDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], LanguageDialog);
            return LanguageDialog;
        }(VistaGL.EntityDialogBase));
        Administration.LanguageDialog = LanguageDialog;
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
/// <reference path="../../_Bases/EntityGridBase.ts" />
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var LanguageGrid = (function (_super) {
            __extends(LanguageGrid, _super);
            function LanguageGrid(container) {
                return _super.call(this, container) || this;
            }
            LanguageGrid.prototype.getColumnsKey = function () { return "Administration.Language"; };
            LanguageGrid.prototype.getDialogType = function () { return Administration.LanguageDialog; };
            LanguageGrid.prototype.getIdProperty = function () { return Administration.LanguageRow.idProperty; };
            LanguageGrid.prototype.getLocalTextPrefix = function () { return Administration.LanguageRow.localTextPrefix; };
            LanguageGrid.prototype.getService = function () { return Administration.LanguageService.baseUrl; };
            LanguageGrid.prototype.getDefaultSortBy = function () {
                return ["LanguageName" /* LanguageName */];
            };
            LanguageGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], LanguageGrid);
            return LanguageGrid;
        }(VistaGL.EntityGridBase));
        Administration.LanguageGrid = LanguageGrid;
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var RoleDialog = (function (_super) {
            __extends(RoleDialog, _super);
            function RoleDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Administration.RoleForm(_this.idPrefix);
                return _this;
            }
            RoleDialog.prototype.getFormKey = function () { return Administration.RoleForm.formKey; };
            RoleDialog.prototype.getIdProperty = function () { return Administration.RoleRow.idProperty; };
            RoleDialog.prototype.getLocalTextPrefix = function () { return Administration.RoleRow.localTextPrefix; };
            RoleDialog.prototype.getNameProperty = function () { return Administration.RoleRow.nameProperty; };
            RoleDialog.prototype.getService = function () { return Administration.RoleService.baseUrl; };
            RoleDialog.prototype.getToolbarButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getToolbarButtons.call(this);
                buttons.push({
                    title: Q.text('Site.RolePermissionDialog.EditButton'),
                    cssClass: 'edit-permissions-button',
                    icon: 'icon-lock-open text-green',
                    onClick: function () {
                        new Administration.RolePermissionDialog({
                            roleID: _this.entity.RoleId,
                            title: _this.entity.RoleName
                        }).dialogOpen();
                    }
                });
                return buttons;
            };
            RoleDialog.prototype.updateInterface = function () {
                _super.prototype.updateInterface.call(this);
                this.toolbar.findButton("edit-permissions-button").toggleClass("disabled", this.isNewOrDeleted());
            };
            RoleDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], RoleDialog);
            return RoleDialog;
        }(VistaGL.EntityDialogBase));
        Administration.RoleDialog = RoleDialog;
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var RoleGrid = (function (_super) {
            __extends(RoleGrid, _super);
            function RoleGrid(container) {
                return _super.call(this, container) || this;
            }
            RoleGrid.prototype.getColumnsKey = function () { return "Administration.Role"; };
            RoleGrid.prototype.getDialogType = function () { return Administration.RoleDialog; };
            RoleGrid.prototype.getIdProperty = function () { return Administration.RoleRow.idProperty; };
            RoleGrid.prototype.getLocalTextPrefix = function () { return Administration.RoleRow.localTextPrefix; };
            RoleGrid.prototype.getService = function () { return Administration.RoleService.baseUrl; };
            RoleGrid.prototype.getDefaultSortBy = function () {
                return ["RoleName" /* RoleName */];
            };
            RoleGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], RoleGrid);
            return RoleGrid;
        }(VistaGL.EntityGridBase));
        Administration.RoleGrid = RoleGrid;
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var RolePermissionDialog = (function (_super) {
            __extends(RolePermissionDialog, _super);
            function RolePermissionDialog(opt) {
                var _this = _super.call(this, opt) || this;
                _this.permissions = new Administration.PermissionCheckEditor(_this.byId('Permissions'), {
                    showRevoke: false
                });
                Administration.RolePermissionService.List({
                    RoleID: _this.options.roleID,
                    Module: null,
                    Submodule: null
                }, function (response) {
                    _this.permissions.set_value(response.Entities.map(function (x) { return ({ PermissionKey: x }); }));
                });
                return _this;
            }
            RolePermissionDialog.prototype.getDialogOptions = function () {
                var _this = this;
                var opt = _super.prototype.getDialogOptions.call(this);
                opt.buttons = [
                    {
                        text: Q.text('Dialogs.OkButton'),
                        click: function (e) {
                            Administration.RolePermissionService.Update({
                                RoleID: _this.options.roleID,
                                Permissions: _this.permissions.get_value().map(function (x) { return x.PermissionKey; }),
                                Module: null,
                                Submodule: null
                            }, function (response) {
                                _this.dialogClose();
                                window.setTimeout(function () { return Q.notifySuccess(Q.text('Site.RolePermissionDialog.SaveSuccess')); }, 0);
                            });
                        }
                    }, {
                        text: Q.text('Dialogs.CancelButton'),
                        click: function () { return _this.dialogClose(); }
                    }
                ];
                opt.title = Q.format(Q.text('Site.RolePermissionDialog.DialogTitle'), this.options.title);
                return opt;
            };
            RolePermissionDialog.prototype.getTemplate = function () {
                return '<div id="~_Permissions"></div>';
            };
            RolePermissionDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], RolePermissionDialog);
            return RolePermissionDialog;
        }(Serenity.TemplatedDialog));
        Administration.RolePermissionDialog = RolePermissionDialog;
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var TranslationGrid = (function (_super) {
            __extends(TranslationGrid, _super);
            function TranslationGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.element.on('keyup.' + _this.uniqueName + ' change.' + _this.uniqueName, 'input.custom-text', function (e) {
                    var value = Q.trimToNull($(e.target).val());
                    if (value === '') {
                        value = null;
                    }
                    _this.view.getItemById($(e.target).data('key')).CustomText = value;
                    _this.hasChanges = true;
                });
                return _this;
            }
            TranslationGrid.prototype.getIdProperty = function () { return "Key"; };
            TranslationGrid.prototype.getLocalTextPrefix = function () { return "Administration.Translation"; };
            TranslationGrid.prototype.getService = function () { return Administration.TranslationService.baseUrl; };
            TranslationGrid.prototype.onClick = function (e, row, cell) {
                var _this = this;
                _super.prototype.onClick.call(this, e, row, cell);
                if (e.isDefaultPrevented()) {
                    return;
                }
                var item = this.itemAt(row);
                var done;
                if ($(e.target).hasClass('source-text')) {
                    e.preventDefault();
                    done = function () {
                        item.CustomText = item.SourceText;
                        _this.view.updateItem(item.Key, item);
                        _this.hasChanges = true;
                    };
                    if (Q.isTrimmedEmpty(item.CustomText) ||
                        (Q.trimToEmpty(item.CustomText) === Q.trimToEmpty(item.SourceText))) {
                        done();
                        return;
                    }
                    Q.confirm(Q.text('Db.Administration.Translation.OverrideConfirmation'), done);
                    return;
                }
                if ($(e.target).hasClass('target-text')) {
                    e.preventDefault();
                    done = function () {
                        item.CustomText = item.TargetText;
                        _this.view.updateItem(item.Key, item);
                        _this.hasChanges = true;
                    };
                    if (Q.isTrimmedEmpty(item.CustomText) ||
                        (Q.trimToEmpty(item.CustomText) === Q.trimToEmpty(item.TargetText))) {
                        done();
                        return;
                    }
                    Q.confirm(Q.text('Db.Administration.Translation.OverrideConfirmation'), done);
                    return;
                }
            };
            TranslationGrid.prototype.getColumns = function () {
                var columns = [];
                columns.push({ field: 'Key', width: 300, sortable: false });
                columns.push({
                    field: 'SourceText',
                    width: 300,
                    sortable: false,
                    format: function (ctx) {
                        return Q.outerHtml($('<a/>')
                            .addClass('source-text')
                            .text(ctx.value || ''));
                    }
                });
                columns.push({
                    field: 'CustomText',
                    width: 300,
                    sortable: false,
                    format: function (ctx) { return Q.outerHtml($('<input/>')
                        .addClass('custom-text')
                        .attr('value', ctx.value)
                        .attr('type', 'text')
                        .attr('data-key', ctx.item.Key)); }
                });
                columns.push({
                    field: 'TargetText',
                    width: 300,
                    sortable: false,
                    format: function (ctx) { return Q.outerHtml($('<a/>')
                        .addClass('target-text')
                        .text(ctx.value || '')); }
                });
                return columns;
            };
            TranslationGrid.prototype.createToolbarExtensions = function () {
                var _this = this;
                _super.prototype.createToolbarExtensions.call(this);
                var opt = {
                    lookupKey: 'Administration.Language'
                };
                this.sourceLanguage = Serenity.Widget.create({
                    type: Serenity.LookupEditor,
                    element: function (el) { return el.appendTo(_this.toolbar.element).attr('placeholder', '--- ' +
                        Q.text('Db.Administration.Translation.SourceLanguage') + ' ---'); },
                    options: opt
                });
                this.sourceLanguage.changeSelect2(function (e) {
                    if (_this.hasChanges) {
                        _this.saveChanges(_this.targetLanguageKey).then(function () { return _this.refresh(); });
                    }
                    else {
                        _this.refresh();
                    }
                });
                this.targetLanguage = Serenity.Widget.create({
                    type: Serenity.LookupEditor,
                    element: function (el) { return el.appendTo(_this.toolbar.element).attr('placeholder', '--- ' +
                        Q.text('Db.Administration.Translation.TargetLanguage') + ' ---'); },
                    options: opt
                });
                this.targetLanguage.changeSelect2(function (e) {
                    if (_this.hasChanges) {
                        _this.saveChanges(_this.targetLanguageKey).then(function () { return _this.refresh(); });
                    }
                    else {
                        _this.refresh();
                    }
                });
            };
            TranslationGrid.prototype.saveChanges = function (language) {
                var _this = this;
                var translations = {};
                for (var _i = 0, _a = this.getItems(); _i < _a.length; _i++) {
                    var item = _a[_i];
                    translations[item.Key] = item.CustomText;
                }
                return RSVP.resolve(Administration.TranslationService.Update({
                    TargetLanguageID: language,
                    Translations: translations
                })).then(function () {
                    _this.hasChanges = false;
                    language = Q.trimToNull(language) || 'invariant';
                    Q.notifySuccess('User translations in "' + language +
                        '" language are saved to "user.texts.' +
                        language + '.json" ' + 'file under "~/App_Data/texts/"', '');
                });
            };
            TranslationGrid.prototype.onViewSubmit = function () {
                var request = this.view.params;
                request.SourceLanguageID = this.sourceLanguage.value;
                this.targetLanguageKey = this.targetLanguage.value || '';
                request.TargetLanguageID = this.targetLanguageKey;
                this.hasChanges = false;
                return _super.prototype.onViewSubmit.call(this);
            };
            TranslationGrid.prototype.getButtons = function () {
                var _this = this;
                return [{
                        title: Q.text('Db.Administration.Translation.SaveChangesButton'),
                        onClick: function (e) { return _this.saveChanges(_this.targetLanguageKey).then(function () { return _this.refresh(); }); },
                        cssClass: 'apply-changes-button'
                    }];
            };
            TranslationGrid.prototype.createQuickSearchInput = function () {
                var _this = this;
                Serenity.GridUtils.addQuickSearchInputCustom(this.toolbar.element, function (field, searchText) {
                    _this.searchText = searchText;
                    _this.view.setItems(_this.view.getItems(), true);
                });
            };
            TranslationGrid.prototype.onViewFilter = function (item) {
                if (!_super.prototype.onViewFilter.call(this, item)) {
                    return false;
                }
                if (!this.searchText) {
                    return true;
                }
                var sd = Select2.util.stripDiacritics;
                var searching = sd(this.searchText).toLowerCase();
                function match(str) {
                    if (!str)
                        return false;
                    return str.toLowerCase().indexOf(searching) >= 0;
                }
                return Q.isEmptyOrNull(searching) || match(item.Key) || match(item.SourceText) ||
                    match(item.TargetText) || match(item.CustomText);
            };
            TranslationGrid.prototype.usePager = function () {
                return false;
            };
            TranslationGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], TranslationGrid);
            return TranslationGrid;
        }(VistaGL.EntityGridBase));
        Administration.TranslationGrid = TranslationGrid;
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var UserDialog = (function (_super) {
            __extends(UserDialog, _super);
            function UserDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Administration.UserForm(_this.idPrefix);
                _this.form.Password.addValidationRule(_this.uniqueName, function (e) {
                    if (_this.form.Password.value.length < 7)
                        return "Password must be at least 7 characters!";
                });
                _this.form.PasswordConfirm.addValidationRule(_this.uniqueName, function (e) {
                    if (_this.form.Password.value != _this.form.PasswordConfirm.value)
                        return "The passwords entered doesn't match!";
                });
                return _this;
            }
            UserDialog.prototype.getFormKey = function () { return Administration.UserForm.formKey; };
            UserDialog.prototype.getIdProperty = function () { return Administration.UserRow.idProperty; };
            UserDialog.prototype.getIsActiveProperty = function () { return Administration.UserRow.isActiveProperty; };
            UserDialog.prototype.getLocalTextPrefix = function () { return Administration.UserRow.localTextPrefix; };
            UserDialog.prototype.getNameProperty = function () { return Administration.UserRow.nameProperty; };
            UserDialog.prototype.getService = function () { return Administration.UserService.baseUrl; };
            UserDialog.prototype.getToolbarButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getToolbarButtons.call(this);
                buttons.push({
                    title: Q.text('Site.UserDialog.EditRolesButton'),
                    cssClass: 'edit-roles-button',
                    icon: 'icon-people text-blue',
                    onClick: function () {
                        new Administration.UserRoleDialog({
                            userID: _this.entity.UserId,
                            username: _this.entity.Username
                        }).dialogOpen();
                    }
                });
                buttons.push({
                    title: Q.text('Site.UserDialog.EditPermissionsButton'),
                    cssClass: 'edit-permissions-button',
                    icon: 'icon-lock-open text-green',
                    onClick: function () {
                        new Administration.UserPermissionDialog({
                            userID: _this.entity.UserId,
                            username: _this.entity.Username
                        }).dialogOpen();
                    }
                });
                return buttons;
            };
            UserDialog.prototype.updateInterface = function () {
                _super.prototype.updateInterface.call(this);
                this.toolbar.findButton('edit-roles-button').toggleClass('disabled', this.isNewOrDeleted());
                this.toolbar.findButton("edit-permissions-button").toggleClass("disabled", this.isNewOrDeleted());
            };
            UserDialog.prototype.afterLoadEntity = function () {
                _super.prototype.afterLoadEntity.call(this);
                // these fields are only required in new record mode
                this.form.Password.element.toggleClass('required', this.isNew())
                    .closest('.field').find('sup').toggle(this.isNew());
                this.form.PasswordConfirm.element.toggleClass('required', this.isNew())
                    .closest('.field').find('sup').toggle(this.isNew());
            };
            UserDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], UserDialog);
            return UserDialog;
        }(VistaGL.EntityDialogBase));
        Administration.UserDialog = UserDialog;
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var UserGrid = (function (_super) {
            __extends(UserGrid, _super);
            function UserGrid(container) {
                return _super.call(this, container) || this;
            }
            UserGrid.prototype.getColumnsKey = function () { return "Administration.User"; };
            UserGrid.prototype.getDialogType = function () { return Administration.UserDialog; };
            UserGrid.prototype.getIdProperty = function () { return Administration.UserRow.idProperty; };
            UserGrid.prototype.getIsActiveProperty = function () { return Administration.UserRow.isActiveProperty; };
            UserGrid.prototype.getLocalTextPrefix = function () { return Administration.UserRow.localTextPrefix; };
            UserGrid.prototype.getService = function () { return Administration.UserService.baseUrl; };
            UserGrid.prototype.getDefaultSortBy = function () {
                return ["Username" /* Username */];
            };
            UserGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], UserGrid);
            return UserGrid;
        }(VistaGL.EntityGridBase));
        Administration.UserGrid = UserGrid;
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Authorization;
    (function (Authorization) {
        Object.defineProperty(Authorization, 'userDefinition', {
            get: function () {
                return Q.getRemoteData('UserData');
            }
        });
        function hasPermission(permissionKey) {
            var ud = Authorization.userDefinition;
            return ud.Username === 'admin' || !!ud.Permissions[permissionKey];
        }
        Authorization.hasPermission = hasPermission;
    })(Authorization = VistaGL.Authorization || (VistaGL.Authorization = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var PermissionCheckEditor = (function (_super) {
            __extends(PermissionCheckEditor, _super);
            function PermissionCheckEditor(container, opt) {
                var _this = _super.call(this, container, opt) || this;
                _this.rolePermissions = {};
                var titleByKey = {};
                var permissionKeys = _this.getSortedGroupAndPermissionKeys(titleByKey);
                var items = permissionKeys.map(function (key) { return ({
                    Key: key,
                    ParentKey: _this.getParentKey(key),
                    Title: titleByKey[key],
                    GrantRevoke: null,
                    IsGroup: key.charAt(key.length - 1) === ':'
                }); });
                _this.byParentKey = Q.toGrouping(items, function (x) { return x.ParentKey; });
                _this.setItems(items);
                return _this;
            }
            PermissionCheckEditor.prototype.getIdProperty = function () { return "Key"; };
            PermissionCheckEditor.prototype.getItemGrantRevokeClass = function (item, grant) {
                if (!item.IsGroup) {
                    return ((item.GrantRevoke === grant) ? ' checked' : '');
                }
                var desc = this.getDescendants(item, true);
                var granted = desc.filter(function (x) { return x.GrantRevoke === grant; });
                if (!granted.length) {
                    return '';
                }
                if (desc.length === granted.length) {
                    return 'checked';
                }
                return 'checked partial';
            };
            PermissionCheckEditor.prototype.getItemEffectiveClass = function (item) {
                var _this = this;
                if (item.IsGroup) {
                    var desc = this.getDescendants(item, true);
                    var grantCount = Q.count(desc, function (x) { return x.GrantRevoke === true ||
                        (x.GrantRevoke == null && _this.rolePermissions[x.Key]); });
                    if (grantCount === desc.length || desc.length === 0) {
                        return 'allow';
                    }
                    if (grantCount === 0) {
                        return 'deny';
                    }
                    return 'partial';
                }
                var granted = item.GrantRevoke === true ||
                    (item.GrantRevoke == null && this.rolePermissions[item.Key]);
                return (granted ? ' allow' : ' deny');
            };
            PermissionCheckEditor.prototype.getColumns = function () {
                var _this = this;
                var columns = [{
                        name: Q.text('Site.UserPermissionDialog.Permission'),
                        field: 'Title',
                        format: Serenity.SlickFormatting.treeToggle(function () { return _this.view; }, function (x) { return x.Key; }, function (ctx) {
                            var item = ctx.item;
                            var klass = _this.getItemEffectiveClass(item);
                            return '<span class="effective-permission ' + klass + '">' + Q.htmlEncode(ctx.value) + '</span>';
                        }),
                        width: 495,
                        sortable: false
                    }, {
                        name: Q.text('Site.UserPermissionDialog.Grant'), field: 'Grant',
                        format: function (ctx) {
                            var item1 = ctx.item;
                            var klass1 = _this.getItemGrantRevokeClass(item1, true);
                            return "<span class='check-box grant no-float " + klass1 + "'></span>";
                        },
                        width: 65,
                        sortable: false,
                        headerCssClass: 'align-center',
                        cssClass: 'align-center'
                    }];
                if (this.options.showRevoke) {
                    columns.push({
                        name: Q.text('Site.UserPermissionDialog.Revoke'), field: 'Revoke',
                        format: function (ctx) {
                            var item2 = ctx.item;
                            var klass2 = _this.getItemGrantRevokeClass(item2, false);
                            return '<span class="check-box revoke no-float ' + klass2 + '"></span>';
                        },
                        width: 65,
                        sortable: false,
                        headerCssClass: 'align-center',
                        cssClass: 'align-center'
                    });
                }
                return columns;
            };
            PermissionCheckEditor.prototype.setItems = function (items) {
                Serenity.SlickTreeHelper.setIndents(items, function (x) { return x.Key; }, function (x) { return x.ParentKey; }, false);
                this.view.setItems(items, true);
            };
            PermissionCheckEditor.prototype.onViewSubmit = function () {
                return false;
            };
            PermissionCheckEditor.prototype.onViewFilter = function (item) {
                var _this = this;
                if (!_super.prototype.onViewFilter.call(this, item)) {
                    return false;
                }
                if (!Serenity.SlickTreeHelper.filterById(item, this.view, function (x) { return x.ParentKey; }))
                    return false;
                if (this.searchText) {
                    return this.matchContains(item) || item.IsGroup && Q.any(this.getDescendants(item, false), function (x) { return _this.matchContains(x); });
                }
                return true;
            };
            PermissionCheckEditor.prototype.matchContains = function (item) {
                return Select2.util.stripDiacritics(item.Title || '').toLowerCase().indexOf(this.searchText) >= 0;
            };
            PermissionCheckEditor.prototype.getDescendants = function (item, excludeGroups) {
                var result = [];
                var stack = [item];
                while (stack.length > 0) {
                    var i = stack.pop();
                    var children = this.byParentKey[i.Key];
                    if (!children)
                        continue;
                    for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {
                        var child = children_1[_i];
                        if (!excludeGroups || !child.IsGroup) {
                            result.push(child);
                        }
                        stack.push(child);
                    }
                }
                return result;
            };
            PermissionCheckEditor.prototype.onClick = function (e, row, cell) {
                _super.prototype.onClick.call(this, e, row, cell);
                if (!e.isDefaultPrevented()) {
                    Serenity.SlickTreeHelper.toggleClick(e, row, cell, this.view, function (x) { return x.Key; });
                }
                if (e.isDefaultPrevented()) {
                    return;
                }
                var target = $(e.target);
                var grant = target.hasClass('grant');
                if (grant || target.hasClass('revoke')) {
                    e.preventDefault();
                    var item = this.itemAt(row);
                    var checkedOrPartial = target.hasClass('checked') || target.hasClass('partial');
                    if (checkedOrPartial) {
                        grant = null;
                    }
                    else {
                        grant = grant !== checkedOrPartial;
                    }
                    if (item.IsGroup) {
                        for (var _i = 0, _a = this.getDescendants(item, true); _i < _a.length; _i++) {
                            var d = _a[_i];
                            d.GrantRevoke = grant;
                        }
                    }
                    else
                        item.GrantRevoke = grant;
                    this.slickGrid.invalidate();
                }
            };
            PermissionCheckEditor.prototype.getParentKey = function (key) {
                if (key.charAt(key.length - 1) === ':') {
                    key = key.substr(0, key.length - 1);
                }
                var idx = key.lastIndexOf(':');
                if (idx >= 0) {
                    return key.substr(0, idx + 1);
                }
                return null;
            };
            PermissionCheckEditor.prototype.getButtons = function () {
                return [];
            };
            PermissionCheckEditor.prototype.createToolbarExtensions = function () {
                var _this = this;
                _super.prototype.createToolbarExtensions.call(this);
                Serenity.GridUtils.addQuickSearchInputCustom(this.toolbar.element, function (field, text) {
                    _this.searchText = Select2.util.stripDiacritics(Q.trimToNull(text) || '').toLowerCase();
                    _this.view.setItems(_this.view.getItems(), true);
                });
            };
            PermissionCheckEditor.prototype.getSortedGroupAndPermissionKeys = function (titleByKey) {
                var keys = Q.getRemoteData('Administration.PermissionKeys').Entities;
                var titleWithGroup = {};
                for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {
                    var k = keys_1[_i];
                    var s = k;
                    if (!s) {
                        continue;
                    }
                    if (s.charAt(s.length - 1) == ':') {
                        s = s.substr(0, s.length - 1);
                        if (s.length === 0) {
                            continue;
                        }
                    }
                    if (titleByKey[s]) {
                        continue;
                    }
                    titleByKey[s] = Q.coalesce(Q.tryGetText('Permission.' + s), s);
                    var parts = s.split(':');
                    var group = '';
                    var groupTitle = '';
                    for (var i = 0; i < parts.length - 1; i++) {
                        group = group + parts[i] + ':';
                        var txt = Q.tryGetText('Permission.' + group);
                        if (txt == null) {
                            txt = parts[i];
                        }
                        titleByKey[group] = txt;
                        groupTitle = groupTitle + titleByKey[group] + ':';
                        titleWithGroup[group] = groupTitle;
                    }
                    titleWithGroup[s] = groupTitle + titleByKey[s];
                }
                keys = Object.keys(titleByKey);
                keys = keys.sort(function (x, y) { return Q.turkishLocaleCompare(titleWithGroup[x], titleWithGroup[y]); });
                return keys;
            };
            PermissionCheckEditor.prototype.get_value = function () {
                var result = [];
                for (var _i = 0, _a = this.view.getItems(); _i < _a.length; _i++) {
                    var item = _a[_i];
                    if (item.GrantRevoke != null && item.Key.charAt(item.Key.length - 1) != ':') {
                        result.push({ PermissionKey: item.Key, Granted: item.GrantRevoke });
                    }
                }
                return result;
            };
            PermissionCheckEditor.prototype.set_value = function (value) {
                for (var _i = 0, _a = this.view.getItems(); _i < _a.length; _i++) {
                    var item = _a[_i];
                    item.GrantRevoke = null;
                }
                if (value != null) {
                    for (var _b = 0, value_1 = value; _b < value_1.length; _b++) {
                        var row = value_1[_b];
                        var r = this.view.getItemById(row.PermissionKey);
                        if (r) {
                            r.GrantRevoke = Q.coalesce(row.Granted, true);
                        }
                    }
                }
                this.setItems(this.getItems());
            };
            PermissionCheckEditor.prototype.get_rolePermissions = function () {
                return Object.keys(this.rolePermissions);
            };
            PermissionCheckEditor.prototype.set_rolePermissions = function (value) {
                this.rolePermissions = {};
                if (value) {
                    for (var _i = 0, value_2 = value; _i < value_2.length; _i++) {
                        var k = value_2[_i];
                        this.rolePermissions[k] = true;
                    }
                }
                this.setItems(this.getItems());
            };
            PermissionCheckEditor = __decorate([
                Serenity.Decorators.registerEditor([Serenity.IGetEditValue, Serenity.ISetEditValue])
            ], PermissionCheckEditor);
            return PermissionCheckEditor;
        }(Serenity.DataGrid));
        Administration.PermissionCheckEditor = PermissionCheckEditor;
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var UserPermissionDialog = (function (_super) {
            __extends(UserPermissionDialog, _super);
            function UserPermissionDialog(opt) {
                var _this = _super.call(this, opt) || this;
                _this.permissions = new Administration.PermissionCheckEditor(_this.byId('Permissions'), {
                    showRevoke: true
                });
                Administration.UserPermissionService.List({
                    UserID: _this.options.userID,
                    Module: null,
                    Submodule: null
                }, function (response) {
                    _this.permissions.set_value(response.Entities);
                });
                Administration.UserPermissionService.ListRolePermissions({
                    UserID: _this.options.userID,
                    Module: null,
                    Submodule: null,
                }, function (response) {
                    _this.permissions.set_rolePermissions(response.Entities);
                });
                return _this;
            }
            UserPermissionDialog.prototype.getDialogOptions = function () {
                var _this = this;
                var opt = _super.prototype.getDialogOptions.call(this);
                opt.buttons = [
                    {
                        text: Q.text('Dialogs.OkButton'),
                        click: function (e) {
                            Administration.UserPermissionService.Update({
                                UserID: _this.options.userID,
                                Permissions: _this.permissions.get_value(),
                                Module: null,
                                Submodule: null
                            }, function (response) {
                                _this.dialogClose();
                                window.setTimeout(function () { return Q.notifySuccess(Q.text('Site.UserPermissionDialog.SaveSuccess')); }, 0);
                            });
                        }
                    }, {
                        text: Q.text('Dialogs.CancelButton'),
                        click: function () { return _this.dialogClose(); }
                    }
                ];
                opt.title = Q.format(Q.text('Site.UserPermissionDialog.DialogTitle'), this.options.username);
                return opt;
            };
            UserPermissionDialog.prototype.getTemplate = function () {
                return '<div id="~_Permissions"></div>';
            };
            UserPermissionDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], UserPermissionDialog);
            return UserPermissionDialog;
        }(Serenity.TemplatedDialog));
        Administration.UserPermissionDialog = UserPermissionDialog;
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var RoleCheckEditor = (function (_super) {
            __extends(RoleCheckEditor, _super);
            function RoleCheckEditor(div) {
                return _super.call(this, div) || this;
            }
            RoleCheckEditor.prototype.createToolbarExtensions = function () {
                var _this = this;
                _super.prototype.createToolbarExtensions.call(this);
                Serenity.GridUtils.addQuickSearchInputCustom(this.toolbar.element, function (field, text) {
                    _this.searchText = Select2.util.stripDiacritics(text || '').toUpperCase();
                    _this.view.setItems(_this.view.getItems(), true);
                });
            };
            RoleCheckEditor.prototype.getButtons = function () {
                return [];
            };
            RoleCheckEditor.prototype.getTreeItems = function () {
                return Administration.RoleRow.getLookup().items.map(function (role) { return ({
                    id: role.RoleId.toString(),
                    text: role.RoleName
                }); });
            };
            RoleCheckEditor.prototype.onViewFilter = function (item) {
                return _super.prototype.onViewFilter.call(this, item) &&
                    (Q.isEmptyOrNull(this.searchText) ||
                        Select2.util.stripDiacritics(item.text || '')
                            .toUpperCase().indexOf(this.searchText) >= 0);
            };
            RoleCheckEditor = __decorate([
                Serenity.Decorators.registerEditor()
            ], RoleCheckEditor);
            return RoleCheckEditor;
        }(Serenity.CheckTreeEditor));
        Administration.RoleCheckEditor = RoleCheckEditor;
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Administration;
    (function (Administration) {
        var UserRoleDialog = (function (_super) {
            __extends(UserRoleDialog, _super);
            function UserRoleDialog(opt) {
                var _this = _super.call(this, opt) || this;
                _this.permissions = new Administration.RoleCheckEditor(_this.byId('Roles'));
                Administration.UserRoleService.List({
                    UserID: _this.options.userID
                }, function (response) {
                    _this.permissions.value = response.Entities.map(function (x) { return x.toString(); });
                });
                return _this;
            }
            UserRoleDialog.prototype.getDialogOptions = function () {
                var _this = this;
                var opt = _super.prototype.getDialogOptions.call(this);
                opt.buttons = [{
                        text: Q.text('Dialogs.OkButton'),
                        click: function () {
                            Q.serviceRequest('Administration/UserRole/Update', {
                                UserID: _this.options.userID,
                                Roles: _this.permissions.value.map(function (x) { return parseInt(x, 10); })
                            }, function (response) {
                                _this.dialogClose();
                                Q.notifySuccess(Q.text('Site.UserRoleDialog.SaveSuccess'));
                            });
                        }
                    }, {
                        text: Q.text('Dialogs.CancelButton'),
                        click: function () { return _this.dialogClose(); }
                    }];
                opt.title = Q.format(Q.text('Site.UserRoleDialog.DialogTitle'), this.options.username);
                return opt;
            };
            UserRoleDialog.prototype.getTemplate = function () {
                return "<div id='~_Roles'></div>";
            };
            UserRoleDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], UserRoleDialog);
            return UserRoleDialog;
        }(Serenity.TemplatedDialog));
        Administration.UserRoleDialog = UserRoleDialog;
    })(Administration = VistaGL.Administration || (VistaGL.Administration = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var ReconciliationEditor = (function (_super) {
        __extends(ReconciliationEditor, _super);
        function ReconciliationEditor(hidden) {
            var _this = _super.call(this, hidden, null) || this;
            _this.addItem({ id: '0', text: 'Not Reconciled' });
            _this.addItem({ id: '1', text: 'Reconciled' });
            return _this;
        }
        ReconciliationEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], ReconciliationEditor);
        return ReconciliationEditor;
    }(Serenity.Select2Editor));
    VistaGL.ReconciliationEditor = ReconciliationEditor;
    var COAMappingEditor = (function (_super) {
        __extends(COAMappingEditor, _super);
        function COAMappingEditor(container) {
            var _this = _super.call(this, container, null) || this;
            _this.addOption("BANK", "Bank");
            _this.addOption("CASH", "Cash");
            _this.addOption("Other", "Other");
            return _this;
        }
        COAMappingEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], COAMappingEditor);
        return COAMappingEditor;
    }(Serenity.Select2Editor));
    VistaGL.COAMappingEditor = COAMappingEditor;
    var ChequeTypeMappingEditor = (function (_super) {
        __extends(ChequeTypeMappingEditor, _super);
        function ChequeTypeMappingEditor(container) {
            var _this = _super.call(this, container, null) || this;
            // add option accepts a key (id) value and display text value
            _this.addOption("AccountPayee", "Account Payee");
            _this.addOption("CashCheque", "Cash Cheque");
            return _this;
        }
        ChequeTypeMappingEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], ChequeTypeMappingEditor);
        return ChequeTypeMappingEditor;
    }(Serenity.Select2Editor));
    VistaGL.ChequeTypeMappingEditor = ChequeTypeMappingEditor;
    var RecChequeTypeMappingEditor = (function (_super) {
        __extends(RecChequeTypeMappingEditor, _super);
        function RecChequeTypeMappingEditor(container) {
            var _this = _super.call(this, container, null) || this;
            // add option accepts a key (id) value and display text value
            _this.addOption("Cheque", "Cheque");
            _this.addOption("Cash", "Cash");
            _this.addOption("DD", "DD");
            _this.addOption("PO", "PO");
            return _this;
        }
        RecChequeTypeMappingEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], RecChequeTypeMappingEditor);
        return RecChequeTypeMappingEditor;
    }(Serenity.Select2Editor));
    VistaGL.RecChequeTypeMappingEditor = RecChequeTypeMappingEditor;
    var VoucherTemplateDrCrMappingEditor = (function (_super) {
        __extends(VoucherTemplateDrCrMappingEditor, _super);
        function VoucherTemplateDrCrMappingEditor(container) {
            var _this = _super.call(this, container, null) || this;
            // add option accepts a key (id) value and display text value
            _this.addOption("Dr", "Dr");
            _this.addOption("Cr", "Cr");
            return _this;
        }
        VoucherTemplateDrCrMappingEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], VoucherTemplateDrCrMappingEditor);
        return VoucherTemplateDrCrMappingEditor;
    }(Serenity.Select2Editor));
    VistaGL.VoucherTemplateDrCrMappingEditor = VoucherTemplateDrCrMappingEditor;
    var TemplateNameEditor = (function (_super) {
        __extends(TemplateNameEditor, _super);
        function TemplateNameEditor(container) {
            var _this = _super.call(this, container, null) || this;
            var items = VistaGL.Transaction.AccVoucherTemplateRow.getLookup().items; //.filter((v, i, a) => a.indexOf(v) === i);
            for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {
                var str = items_2[_i];
                _this.addOption(str.TemplateName, str.TemplateName);
            }
            return _this;
        }
        TemplateNameEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], TemplateNameEditor);
        return TemplateNameEditor;
    }(Serenity.Select2Editor));
    VistaGL.TemplateNameEditor = TemplateNameEditor;
    //@Serenity.Decorators.registerEditor()
    //export class VoucherTemplateCostCenterMappingEditor extends Serenity.Select2Editor<any, any> {
    //    constructor(container: JQuery) {
    //        super(container, null);
    //        var items = Transaction.AccCostCentreOrInstituteInformationRow.getLookup().items;//.filter((v, i, a) => a.indexOf(v) === i);
    //        for (var item of items) {
    //            this.addItem({ id: item.Id.toString(), text: item.Name, source: null, disabled: false });
    //        }
    //    }
    //}
    //@Serenity.Decorators.registerEditor()
    //export class VoucherTemplateChequNoEditor extends Serenity.Select2Editor<any, any> {
    //    constructor(container: JQuery) {
    //        super(container, null);
    //        var items = Transaction.AccChequeRegisterRow.getLookup().items;//.filter((v, i, a) => a.indexOf(v) === i);
    //        for (var item of items) {
    //            this.addItem({ id: item.Id.toString(), text: item.ChequeNo, source: null, disabled: false });
    //        }
    //    }
    //}
    var BudgetTypeEditorDDL = (function (_super) {
        __extends(BudgetTypeEditorDDL, _super);
        function BudgetTypeEditorDDL(container) {
            var _this = _super.call(this, container, null) || this;
            // add option accepts a key (id) value and display text value
            _this.addOption("Proposed", "Proposed");
            _this.addOption("Revised", "Revised");
            _this.addOption("Approved", "Approved");
            return _this;
        }
        BudgetTypeEditorDDL = __decorate([
            Serenity.Decorators.registerEditor()
        ], BudgetTypeEditorDDL);
        return BudgetTypeEditorDDL;
    }(Serenity.Select2Editor));
    VistaGL.BudgetTypeEditorDDL = BudgetTypeEditorDDL;
    var BillTypeEditor = (function (_super) {
        __extends(BillTypeEditor, _super);
        function BillTypeEditor(container) {
            var _this = _super.call(this, container, null) || this;
            // add option accepts a key (id) value and display text value
            _this.addOption("New", "New");
            _this.addOption("Advance", "Advance");
            _this.addOption("Against", "Against");
            return _this;
        }
        BillTypeEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], BillTypeEditor);
        return BillTypeEditor;
    }(Serenity.Select2Editor));
    VistaGL.BillTypeEditor = BillTypeEditor;
    var BRTransactionTypeEditorDDL = (function (_super) {
        __extends(BRTransactionTypeEditorDDL, _super);
        function BRTransactionTypeEditorDDL(container) {
            var _this = _super.call(this, container, null) || this;
            // add option accepts a key (id) value and display text value
            _this.addOption("PAYMENT", "PAYMENT");
            _this.addOption("RECEIVE", "RECEIVE");
            return _this;
        }
        BRTransactionTypeEditorDDL = __decorate([
            Serenity.Decorators.registerEditor()
        ], BRTransactionTypeEditorDDL);
        return BRTransactionTypeEditorDDL;
    }(Serenity.Select2Editor));
    VistaGL.BRTransactionTypeEditorDDL = BRTransactionTypeEditorDDL;
    //@Serenity.Decorators.registerEditor()
    //export class GetApproverInfoByApplicantEditor extends Serenity.Select2Editor<any, any> {
    //    constructor(container: JQuery) {
    //        super(container, null);
    //        Transaction.AccBudgetSubmissionService.GetApproverInfoByApplicant({}, r => {
    //            var items = r.Entities;
    //            for (var str of items) {
    //                this.addOption(str.Id.toString(), str.FullName);
    //            }
    //        });
    //    }
    //}
    //@Serenity.Decorators.registerEditor()
    //export class GetApproverInfoByApplicantHQEditor extends Serenity.Select2Editor<any, any> {
    //    constructor(container: JQuery) {
    //        super(container, null);
    //        Transaction.AccBudgetHqMasterService.GetApproverInfoByApplicant({}, r => {
    //            var items = r.Entities;
    //            for (var str of items) {
    //                this.addOption(str.Id.toString(), str.FullName);
    //            }
    //        });
    //    }
    //}
    var GetRecommenderInfoByApplicantVoucherEditor = (function (_super) {
        __extends(GetRecommenderInfoByApplicantVoucherEditor, _super);
        function GetRecommenderInfoByApplicantVoucherEditor(container) {
            var _this = _super.call(this, container, null) || this;
            // ApprovalStepTypeId: 2 - recommender only
            // ApprovalStepTypeId: 1 - approver only
            // ApprovalStepTypeId: 0 - both
            VistaGL.Transaction.AccVoucherInformationService.GetApproverInfoByApplicant({ ApprovalStepTypeId: 0 }, function (r) {
                var items = r.Entities;
                for (var _i = 0, items_3 = items; _i < items_3.length; _i++) {
                    var str = items_3[_i];
                    _this.addOption(str.Id.toString(), str.FullName);
                }
            });
            return _this;
        }
        GetRecommenderInfoByApplicantVoucherEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], GetRecommenderInfoByApplicantVoucherEditor);
        return GetRecommenderInfoByApplicantVoucherEditor;
    }(Serenity.Select2Editor));
    VistaGL.GetRecommenderInfoByApplicantVoucherEditor = GetRecommenderInfoByApplicantVoucherEditor;
    var GetApproverInfoByApplicantVoucherEditor = (function (_super) {
        __extends(GetApproverInfoByApplicantVoucherEditor, _super);
        function GetApproverInfoByApplicantVoucherEditor(container) {
            var _this = _super.call(this, container, null) || this;
            // ApprovalStepTypeId: 2 - recommender only
            // ApprovalStepTypeId: 1 - approver only
            // ApprovalStepTypeId: 0 - both
            VistaGL.Transaction.AccVoucherInformationService.GetApproverInfoByApplicant({ ApprovalStepTypeId: 1 }, function (r) {
                var items = r.Entities;
                for (var _i = 0, items_4 = items; _i < items_4.length; _i++) {
                    var str = items_4[_i];
                    _this.addOption(str.Id.toString(), str.FullName);
                }
            });
            return _this;
        }
        GetApproverInfoByApplicantVoucherEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], GetApproverInfoByApplicantVoucherEditor);
        return GetApproverInfoByApplicantVoucherEditor;
    }(Serenity.Select2Editor));
    VistaGL.GetApproverInfoByApplicantVoucherEditor = GetApproverInfoByApplicantVoucherEditor;
    //@Serenity.Decorators.registerEditor()
    //export class GetApproverInfoByApplicantZoneEditor extends Serenity.Select2Editor<any, any> {
    //    constructor(container: JQuery) {
    //        super(container, null);
    //        Transaction.AccBudgetZoneMasterService.GetApproverInfoByApplicant({}, r => {
    //            var items = r.Entities;
    //            for (var str of items) {
    //                this.addOption(str.Id.toString(), str.FullName);
    //            }
    //        });
    //    }
    //}
    var ChequeBookEditor = (function (_super) {
        __extends(ChequeBookEditor, _super);
        function ChequeBookEditor(container) {
            return _super.call(this, container, null) || this;
            // add option accepts a key (id) value and display text value
            //this.addOption("1", "1");
            //this.addOption("2", "2");
            //this.addOption("3", "3");
            //// you may also use addItem which accepts a Select2Item parameter
            //this.addItem({
            //    id: "key3",
            //    text: "Text 3"
            //});
            //// don't let selecting this one (disabled)
            //this.addItem({
            //    id: "key4",
            //    text: "Text 4",
            //    disabled: true
            //});
        }
        ChequeBookEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], ChequeBookEditor);
        return ChequeBookEditor;
    }(Serenity.Select2Editor));
    VistaGL.ChequeBookEditor = ChequeBookEditor;
    var TrueFalseEditor = (function (_super) {
        __extends(TrueFalseEditor, _super);
        function TrueFalseEditor(hidden, opt) {
            var _this = _super.call(this, hidden, opt) || this;
            _super.prototype.addItem.call(_this, { id: "true", text: "Yes", disabled: false, source: "common" });
            _super.prototype.addItem.call(_this, { id: "false", text: "No", disabled: false, source: "common" });
            return _this;
        }
        TrueFalseEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], TrueFalseEditor);
        return TrueFalseEditor;
    }(Serenity.Select2Editor));
    VistaGL.TrueFalseEditor = TrueFalseEditor;
    var DebitCreditEditor = (function (_super) {
        __extends(DebitCreditEditor, _super);
        function DebitCreditEditor(container) {
            var _this = _super.call(this, container, null) || this;
            _this.addOption("Debit", "Debit");
            _this.addOption("Credit", "Credit");
            return _this;
        }
        DebitCreditEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], DebitCreditEditor);
        return DebitCreditEditor;
    }(Serenity.Select2Editor));
    VistaGL.DebitCreditEditor = DebitCreditEditor;
    var ApprovalStatusEditor = (function (_super) {
        __extends(ApprovalStatusEditor, _super);
        function ApprovalStatusEditor(hidden, opt) {
            var _this = _super.call(this, hidden, opt) || this;
            _super.prototype.addItem.call(_this, { id: "1", text: "Draft", disabled: false, source: "common" });
            _super.prototype.addItem.call(_this, { id: "2", text: "Cancel", disabled: false, source: "common" });
            _super.prototype.addItem.call(_this, { id: "3", text: "Submit", disabled: false, source: "common" });
            _super.prototype.addItem.call(_this, { id: "4", text: "Regret", disabled: false, source: "common" });
            _super.prototype.addItem.call(_this, { id: "5", text: "Recommend", disabled: false, source: "common" });
            _super.prototype.addItem.call(_this, { id: "6", text: "Approved", disabled: false, source: "common" });
            return _this;
        }
        ApprovalStatusEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], ApprovalStatusEditor);
        return ApprovalStatusEditor;
    }(Serenity.Select2Editor));
    VistaGL.ApprovalStatusEditor = ApprovalStatusEditor;
    var AccHeadTypeMappingEditor = (function (_super) {
        __extends(AccHeadTypeMappingEditor, _super);
        function AccHeadTypeMappingEditor(hidden) {
            var _this = _super.call(this, hidden, null) || this;
            _this.addItem({ id: '1', text: 'S.D.' });
            _this.addItem({ id: '2', text: 'I.TAX' });
            _this.addItem({ id: '3', text: 'VAT' });
            _this.addItem({ id: '4', text: 'ADVANCE' });
            _this.addItem({ id: '5', text: 'WIP' });
            return _this;
        }
        AccHeadTypeMappingEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], AccHeadTypeMappingEditor);
        return AccHeadTypeMappingEditor;
    }(Serenity.Select2Editor));
    VistaGL.AccHeadTypeMappingEditor = AccHeadTypeMappingEditor;
    var FinancialReportEditor = (function (_super) {
        __extends(FinancialReportEditor, _super);
        function FinancialReportEditor(container) {
            var _this = _super.call(this, container, null) || this;
            _this.addOption("AR", "ACCOUNTS  RECEIVABLE");
            _this.addOption("ADO", "Advance, Deposits & Others");
            _this.addOption("LOF", "LIABILITIES FOR OTHER FINANCE");
            return _this;
        }
        FinancialReportEditor = __decorate([
            Serenity.Decorators.registerEditor()
        ], FinancialReportEditor);
        return FinancialReportEditor;
    }(Serenity.Select2Editor));
    VistaGL.FinancialReportEditor = FinancialReportEditor;
})(VistaGL || (VistaGL = {}));
var multiplicationFactor = 10;
var containerWidth = 8;
var containerHeight = 8.6;
var VistaGL;
(function (VistaGL) {
    var ScriptInitialization;
    (function (ScriptInitialization) {
        Q.Config.responsiveDialogs = true;
        Q.Config.rootNamespaces.push('VistaGL');
        Q.Config.rootNamespaces.push('_Ext');
    })(ScriptInitialization = VistaGL.ScriptInitialization || (VistaGL.ScriptInitialization = {}));
})(VistaGL || (VistaGL = {}));
var VoucherUtil = (function () {
    function VoucherUtil() {
        //
    }
    VoucherUtil.currencyToWords = function (s) {
        var data = Q.parseDecimal(s.toString()) - Math.floor(s);
        var inWords = '';
        if (data > 0) {
            inWords = this.convertNumber(s) + " TAKA " + this.convertNumber(data * 100) + " POISA";
        }
        else {
            inWords = this.convertNumber(s) + " TAKA";
        }
        return inWords + ' ONLY';
    };
    VoucherUtil.newVoucherNumberFactory = function (voucherConfiguration, transactionTypeId, voucherDate, financialYearId, fundControlId, zoneId, bankAccId, _callback) {
        if (transactionTypeId === "") {
            Q.alert("Please select Transaction Type.");
            return;
        }
        var voucherNo = "";
        var voucherNumber = "";
        var vc = voucherConfiguration
            .filter(function (p) { return p.FundControlInformationId == fundControlId
            && p.TransactionTypeId == transactionTypeId
            && p.AccountingPeriodId == financialYearId
            && p.ZoneInfoId == zoneId; });
        if (vc.length > 0) {
            // call our service, see AccVoucherInformationEndpoint.cs and AccVoucherInformationRepository.cs
            VistaGL.Transaction.AccVoucherInformationService.GetNewVoucherNo({
                TransactionTypeId: transactionTypeId,
                FundControlInformationId: fundControlId,
                ZoneId: zoneId,
                FinancialYearId: financialYearId,
                VoucherDate: voucherDate,
                BankAccId: bankAccId
            }, function (response) {
                voucherNo = response.VoucherNo;
                voucherNumber = response.VoucherNumber;
            }).done(function () {
                if (_callback && typeof (_callback) === "function") {
                    _callback(voucherNo, voucherNumber);
                }
            });
        }
        else {
            Q.alert("Voucher Configuration not found!");
        }
    };
    VoucherUtil.convertNumber = function (num) {
        if ((num < 0) || (num > 99999999999999)) {
            return "NUMBER OUT OF RANGE!";
        }
        var Gn = Math.floor(num / 10000000); /* Crore */
        num -= Gn * 10000000;
        var kn = Math.floor(num / 100000); /* lakhs */
        num -= kn * 100000;
        var Hn = Math.floor(num / 1000); /* thousand */
        num -= Hn * 1000;
        var Dn = Math.floor(num / 100); /* Tens (deca) */
        num = num % 100; /* Ones */
        var tn = Math.floor(num / 10);
        var one = Math.floor(num % 10);
        var res = "";
        if (Gn > 0) {
            res += (this.convertNumber(Gn) + " CRORE");
        }
        if (kn > 0) {
            res += (((res == "") ? "" : " ") +
                this.convertNumber(kn) + " LAKH");
        }
        if (Hn > 0) {
            res += (((res == "") ? "" : " ") +
                this.convertNumber(Hn) + " THOUSAND");
        }
        if (Dn) {
            res += (((res == "") ? "" : " ") +
                this.convertNumber(Dn) + " HUNDRED");
        }
        var ones = Array("", "ONE", "TWO", "THREE", "FOUR", "FIVE", "SIX", "SEVEN", "EIGHT", "NINE", "TEN", "ELEVEN", "TWELVE", "THIRTEEN", "FOURTEEN", "FIFTEEN", "SIXTEEN", "SEVENTEEN", "EIGHTEEN", "NINETEEN");
        var tens = Array("", "", "TWENTY", "THIRTY", "FOURTY", "FIFTY", "SIXTY", "SEVENTY", "EIGHTY", "NINETY");
        if (tn > 0 || one > 0) {
            if (!(res == "")) {
                res += " AND ";
            }
            if (tn < 2) {
                res += ones[tn * 10 + one];
            }
            else {
                res += tens[tn];
                if (one > 0) {
                    res += ("-" + ones[one]);
                }
            }
        }
        if (res == "") {
            res = "ZERO";
        }
        return res;
    };
    return VoucherUtil;
}());
var VistaGL;
(function (VistaGL) {
    var BasicProgressDialog = (function (_super) {
        __extends(BasicProgressDialog, _super);
        function BasicProgressDialog() {
            var _this = _super.call(this) || this;
            _this.byId('ProgressBar').progressbar({
                max: 100,
                value: 0,
                change: function (e, v) {
                    _this.byId('ProgressLabel').text(_this.value + ' / ' + _this.max);
                }
            });
            return _this;
        }
        Object.defineProperty(BasicProgressDialog.prototype, "max", {
            get: function () {
                return this.byId('ProgressBar').progressbar().progressbar('option', 'max');
            },
            set: function (value) {
                this.byId('ProgressBar').progressbar().progressbar('option', 'max', value);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(BasicProgressDialog.prototype, "value", {
            get: function () {
                return this.byId('ProgressBar').progressbar('value');
            },
            set: function (value) {
                this.byId('ProgressBar').progressbar().progressbar('value', value);
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(BasicProgressDialog.prototype, "title", {
            get: function () {
                return this.element.dialog().dialog('option', 'title');
            },
            set: function (value) {
                this.element.dialog().dialog('option', 'title', value);
            },
            enumerable: true,
            configurable: true
        });
        BasicProgressDialog.prototype.getDialogOptions = function () {
            var _this = this;
            var opt = _super.prototype.getDialogOptions.call(this);
            opt.title = Q.text('Site.BasicProgressDialog.PleaseWait');
            opt.width = 600;
            opt.buttons = [{
                    text: Q.text('Dialogs.CancelButton'),
                    click: function () {
                        _this.cancelled = true;
                        _this.element.closest('.ui-dialog')
                            .find('.ui-dialog-buttonpane .ui-button')
                            .attr('disabled', 'disabled')
                            .css('opacity', '0.5');
                        _this.element.dialog('option', 'title', Q.trimToNull(_this.cancelTitle) ||
                            Q.text('Site.BasicProgressDialog.CancelTitle'));
                    }
                }];
            return opt;
        };
        BasicProgressDialog.prototype.initDialog = function () {
            _super.prototype.initDialog.call(this);
            this.element.closest('.ui-dialog').find('.ui-dialog-titlebar-close').hide();
        };
        BasicProgressDialog.prototype.getTemplate = function () {
            return ("<div class='s-DialogContent s-BasicProgressDialogContent'>" +
                "<div id='~_StatusText' class='status-text' ></div>" +
                "<div id='~_ProgressBar' class='progress-bar'>" +
                "<div id='~_ProgressLabel' class='progress-label' ></div>" +
                "</div>" +
                "</div>");
        };
        return BasicProgressDialog;
    }(Serenity.TemplatedDialog));
    VistaGL.BasicProgressDialog = BasicProgressDialog;
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Common;
    (function (Common) {
        var BulkServiceAction = (function () {
            function BulkServiceAction() {
            }
            BulkServiceAction.prototype.createProgressDialog = function () {
                this.progressDialog = new VistaGL.BasicProgressDialog();
                this.progressDialog.dialogOpen();
                this.progressDialog.max = this.keys.length;
                this.progressDialog.value = 0;
            };
            BulkServiceAction.prototype.getConfirmationFormat = function () {
                return Q.text('Site.BulkServiceAction.ConfirmationFormat');
            };
            BulkServiceAction.prototype.getConfirmationMessage = function (targetCount) {
                return Q.format(this.getConfirmationFormat(), targetCount);
            };
            BulkServiceAction.prototype.confirm = function (targetCount, action) {
                Q.confirm(this.getConfirmationMessage(targetCount), action);
            };
            BulkServiceAction.prototype.getNothingToProcessMessage = function () {
                return Q.text('Site.BulkServiceAction.NothingToProcess');
            };
            BulkServiceAction.prototype.nothingToProcess = function () {
                Q.notifyError(this.getNothingToProcessMessage());
            };
            BulkServiceAction.prototype.getParallelRequests = function () {
                return 1;
            };
            BulkServiceAction.prototype.getBatchSize = function () {
                return 1;
            };
            BulkServiceAction.prototype.startParallelExecution = function () {
                this.createProgressDialog();
                this.successCount = 0;
                this.errorCount = 0;
                this.pendingRequests = 0;
                this.completedRequests = 0;
                this.errorCount = 0;
                this.errorByKey = {};
                this.queue = this.keys.slice();
                this.queueIndex = 0;
                var parallelRequests = this.getParallelRequests();
                while (parallelRequests-- > 0) {
                    this.executeNextBatch();
                }
            };
            BulkServiceAction.prototype.serviceCallCleanup = function () {
                this.pendingRequests--;
                this.completedRequests++;
                var title = Q.text((this.progressDialog.cancelled ?
                    'Site.BasicProgressDialog.CancelTitle' : 'Site.BasicProgressDialog.PleaseWait'));
                title += ' (';
                if (this.successCount > 0) {
                    title += Q.format(Q.text('Site.BulkServiceAction.SuccessCount'), this.successCount);
                }
                if (this.errorCount > 0) {
                    if (this.successCount > 0) {
                        title += ', ';
                    }
                    title += Q.format(Q.text('Site.BulkServiceAction.ErrorCount'), this.errorCount);
                }
                this.progressDialog.title = title + ')';
                this.progressDialog.value = this.successCount + this.errorCount;
                if (!this.progressDialog.cancelled && this.progressDialog.value < this.keys.length) {
                    this.executeNextBatch();
                }
                else if (this.pendingRequests === 0) {
                    this.progressDialog.dialogClose();
                    this.showResults();
                    if (this.done) {
                        this.done();
                        this.done = null;
                    }
                }
            };
            BulkServiceAction.prototype.executeForBatch = function (batch) {
            };
            BulkServiceAction.prototype.executeNextBatch = function () {
                var batchSize = this.getBatchSize();
                var batch = [];
                while (true) {
                    if (batch.length >= batchSize) {
                        break;
                    }
                    if (this.queueIndex >= this.queue.length) {
                        break;
                    }
                    batch.push(this.queue[this.queueIndex++]);
                }
                if (batch.length > 0) {
                    this.pendingRequests++;
                    this.executeForBatch(batch);
                }
            };
            BulkServiceAction.prototype.getAllHadErrorsFormat = function () {
                return Q.text('Site.BulkServiceAction.AllHadErrorsFormat');
            };
            BulkServiceAction.prototype.showAllHadErrors = function () {
                Q.notifyError(Q.format(this.getAllHadErrorsFormat(), this.errorCount));
            };
            BulkServiceAction.prototype.getSomeHadErrorsFormat = function () {
                return Q.text('Site.BulkServiceAction.SomeHadErrorsFormat');
            };
            BulkServiceAction.prototype.showSomeHadErrors = function () {
                Q.notifyWarning(Q.format(this.getSomeHadErrorsFormat(), this.successCount, this.errorCount));
            };
            BulkServiceAction.prototype.getAllSuccessFormat = function () {
                return Q.text('Site.BulkServiceAction.AllSuccessFormat');
            };
            BulkServiceAction.prototype.showAllSuccess = function () {
                Q.notifySuccess(Q.format(this.getAllSuccessFormat(), this.successCount));
            };
            BulkServiceAction.prototype.showResults = function () {
                if (this.errorCount === 0 && this.successCount === 0) {
                    this.nothingToProcess();
                    return;
                }
                if (this.errorCount > 0 && this.successCount === 0) {
                    this.showAllHadErrors();
                    return;
                }
                if (this.errorCount > 0) {
                    this.showSomeHadErrors();
                    return;
                }
                this.showAllSuccess();
            };
            BulkServiceAction.prototype.execute = function (keys) {
                var _this = this;
                this.keys = keys;
                if (this.keys.length === 0) {
                    this.nothingToProcess();
                    return;
                }
                this.confirm(this.keys.length, function () { return _this.startParallelExecution(); });
            };
            BulkServiceAction.prototype.get_successCount = function () {
                return this.successCount;
            };
            BulkServiceAction.prototype.set_successCount = function (value) {
                this.successCount = value;
            };
            BulkServiceAction.prototype.get_errorCount = function () {
                return this.errorCount;
            };
            BulkServiceAction.prototype.set_errorCount = function (value) {
                this.errorCount = value;
            };
            return BulkServiceAction;
        }());
        Common.BulkServiceAction = BulkServiceAction;
    })(Common = VistaGL.Common || (VistaGL.Common = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var DialogUtils;
    (function (DialogUtils) {
        function pendingChangesConfirmation(element, hasPendingChanges) {
            element.bind('dialogbeforeclose', function (e) {
                if (!Serenity.WX.hasOriginalEvent(e) || !hasPendingChanges()) {
                    return;
                }
                e.preventDefault();
                Q.confirm('You have pending changes. Save them?', function () { return element.find('div.save-and-close-button').click(); }, {
                    onNo: function () {
                        element.dialog().dialog('close');
                    }
                });
            });
        }
        DialogUtils.pendingChangesConfirmation = pendingChangesConfirmation;
    })(DialogUtils = VistaGL.DialogUtils || (VistaGL.DialogUtils = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Common;
    (function (Common) {
        var ExcelExportHelper;
        (function (ExcelExportHelper) {
            function createToolButton(options) {
                return {
                    hint: Q.coalesce(options.title, 'Excel'),
                    title: Q.coalesce(options.hint, ''),
                    cssClass: 'export-xlsx-button',
                    onClick: function () {
                        if (!options.onViewSubmit()) {
                            return;
                        }
                        var grid = options.grid;
                        var request = Q.deepClone(grid.getView().params);
                        request.Take = 0;
                        request.Skip = 0;
                        var sortBy = grid.getView().sortBy;
                        if (sortBy) {
                            request.Sort = sortBy;
                        }
                        request.IncludeColumns = [];
                        var columns = grid.getGrid().getColumns();
                        for (var _i = 0, columns_2 = columns; _i < columns_2.length; _i++) {
                            var column = columns_2[_i];
                            request.IncludeColumns.push(column.id || column.field);
                        }
                        Q.postToService({ service: options.service, request: request, target: '_blank' });
                    },
                    separator: options.separator
                };
            }
            ExcelExportHelper.createToolButton = createToolButton;
        })(ExcelExportHelper = Common.ExcelExportHelper || (Common.ExcelExportHelper = {}));
    })(Common = VistaGL.Common || (VistaGL.Common = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var LanguageList;
    (function (LanguageList) {
        function getValue() {
            var result = [];
            for (var _i = 0, _a = VistaGL.Administration.LanguageRow.getLookup().items; _i < _a.length; _i++) {
                var k = _a[_i];
                if (k.LanguageId !== 'en') {
                    result.push([k.Id.toString(), k.LanguageName]);
                }
            }
            return result;
        }
        LanguageList.getValue = getValue;
    })(LanguageList = VistaGL.LanguageList || (VistaGL.LanguageList = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Common;
    (function (Common) {
        var ReportHelper;
        (function (ReportHelper) {
            function createToolButton(options) {
                return {
                    title: Q.coalesce(options.title, 'Report'),
                    cssClass: Q.coalesce(options.cssClass, 'print-button'),
                    icon: options.icon,
                    onClick: function () {
                        Q.postToUrl({
                            url: '~/Report/' + (options.download ? 'Download' : 'Render'),
                            params: {
                                key: options.reportKey,
                                ext: Q.coalesce(options.extension, 'pdf'),
                                opt: (options.getParams == null ? '' : $.toJSON(options.getParams()))
                            },
                            target: Q.coalesce(options.target, '_blank')
                        });
                    }
                };
            }
            ReportHelper.createToolButton = createToolButton;
        })(ReportHelper = Common.ReportHelper || (Common.ReportHelper = {}));
    })(Common = VistaGL.Common || (VistaGL.Common = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Common;
    (function (Common) {
        var LanguageSelection = (function (_super) {
            __extends(LanguageSelection, _super);
            function LanguageSelection(select, currentLanguage) {
                var _this = _super.call(this, select) || this;
                currentLanguage = Q.coalesce(currentLanguage, 'en');
                _this.change(function (e) {
                    $.cookie('LanguagePreference', select.val(), {
                        path: Q.Config.applicationPath,
                        expires: 365
                    });
                    window.location.reload(true);
                });
                Q.getLookupAsync('Administration.Language').then(function (x) {
                    if (!Q.any(x.items, function (z) { return z.LanguageId === currentLanguage; })) {
                        var idx = currentLanguage.lastIndexOf('-');
                        if (idx >= 0) {
                            currentLanguage = currentLanguage.substr(0, idx);
                            if (!Q.any(x.items, function (y) { return y.LanguageId === currentLanguage; })) {
                                currentLanguage = 'en';
                            }
                        }
                        else {
                            currentLanguage = 'en';
                        }
                    }
                    for (var _i = 0, _a = x.items; _i < _a.length; _i++) {
                        var l = _a[_i];
                        Q.addOption(select, l.LanguageId, l.LanguageName);
                    }
                    select.val(currentLanguage);
                });
                return _this;
            }
            return LanguageSelection;
        }(Serenity.Widget));
        Common.LanguageSelection = LanguageSelection;
    })(Common = VistaGL.Common || (VistaGL.Common = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Common;
    (function (Common) {
        var SidebarSearch = (function (_super) {
            __extends(SidebarSearch, _super);
            function SidebarSearch(input, menuUL) {
                var _this = _super.call(this, input) || this;
                new Serenity.QuickSearchInput(input, {
                    onSearch: function (field, text, success) {
                        _this.updateMatchFlags(text);
                        success(true);
                    }
                });
                _this.menuUL = menuUL;
                return _this;
            }
            SidebarSearch.prototype.updateMatchFlags = function (text) {
                var liList = this.menuUL.find('li').removeClass('non-match');
                text = Q.trimToNull(text);
                if (text == null) {
                    liList.show();
                    liList.removeClass('expanded');
                    return;
                }
                var parts = text.replace(',', ' ').split(' ').filter(function (x) { return !Q.isTrimmedEmpty(x); });
                for (var i = 0; i < parts.length; i++) {
                    parts[i] = Q.trimToNull(Select2.util.stripDiacritics(parts[i]).toUpperCase());
                }
                var items = liList;
                items.each(function (idx, e) {
                    var x = $(e);
                    var title = Select2.util.stripDiacritics(Q.coalesce(x.text(), '').toUpperCase());
                    for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {
                        var p = parts_1[_i];
                        if (p != null && !(title.indexOf(p) !== -1)) {
                            x.addClass('non-match');
                            break;
                        }
                    }
                });
                var matchingItems = items.not('.non-match');
                var visibles = matchingItems.parents('li').add(matchingItems);
                var nonVisibles = liList.not(visibles);
                nonVisibles.hide().addClass('non-match');
                visibles.show();
                liList.addClass('expanded');
            };
            return SidebarSearch;
        }(Serenity.Widget));
        Common.SidebarSearch = SidebarSearch;
    })(Common = VistaGL.Common || (VistaGL.Common = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Common;
    (function (Common) {
        var ThemeSelection = (function (_super) {
            __extends(ThemeSelection, _super);
            function ThemeSelection(select) {
                var _this = _super.call(this, select) || this;
                _this.change(function (e) {
                    $.cookie('ThemePreference', select.val(), {
                        path: Q.Config.applicationPath,
                        expires: 365
                    });
                    $('body').removeClass('skin-' + _this.getCurrentTheme());
                    $('body').addClass('skin-' + select.val());
                });
                Q.addOption(select, 'blue', Q.text('Site.Layout.ThemeBlue'));
                Q.addOption(select, 'blue-light', Q.text('Site.Layout.ThemeBlueLight'));
                Q.addOption(select, 'purple', Q.text('Site.Layout.ThemePurple'));
                Q.addOption(select, 'purple-light', Q.text('Site.Layout.ThemePurpleLight'));
                Q.addOption(select, 'red', Q.text('Site.Layout.ThemeRed'));
                Q.addOption(select, 'red-light', Q.text('Site.Layout.ThemeRedLight'));
                Q.addOption(select, 'green', Q.text('Site.Layout.ThemeGreen'));
                Q.addOption(select, 'green-light', Q.text('Site.Layout.ThemeGreenLight'));
                Q.addOption(select, 'yellow', Q.text('Site.Layout.ThemeYellow'));
                Q.addOption(select, 'yellow-light', Q.text('Site.Layout.ThemeYellowLight'));
                Q.addOption(select, 'black', Q.text('Site.Layout.ThemeBlack'));
                Q.addOption(select, 'black-light', Q.text('Site.Layout.ThemeBlackLight'));
                select.val(_this.getCurrentTheme());
                return _this;
            }
            ThemeSelection.prototype.getCurrentTheme = function () {
                var skinClass = Q.first(($('body').attr('class') || '').split(' '), function (x) { return Q.startsWith(x, 'skin-'); });
                if (skinClass) {
                    return skinClass.substr(5);
                }
                return 'blue';
            };
            return ThemeSelection;
        }(Serenity.Widget));
        Common.ThemeSelection = ThemeSelection;
    })(Common = VistaGL.Common || (VistaGL.Common = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Common;
    (function (Common) {
        var PdfExportHelper;
        (function (PdfExportHelper) {
            // Use http://dopiaza.org/tools/datauri or similar service to convert an image into image data
            var headerImgData = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABQCAYAAADvCdDvAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAK4pJREFUeNrkfQdgVeXZ/++MO3Nzs0MGBCFhDyEKIo6irSI4arWtttRBW+3Qz1qt289VcM9WcWuxTqx1UTayh0xBwg4BAtnz5u57znn/z/uec0MWkITQfvZ/4Ca5557xnmf+nvG+V2KM4buyle2YOebQvN+tsyfmQnb3gmxzwuFMQNR/CHogALWhGDlXfPGD5P6TFuM7uqnfqcFGQufIehh5F70Fb87pUKADshPMCKOp+gA2ffA92EtnT/guM0T+d9/w4LdvZWxfdMcP92x6b0hXzquvXGuv3Pby9XLKUHgyx0CRXZBkN0AKLtHfiZnDkFHwAwT2rJgSbipL7cq1K0sWD9g897ZfHt76wvj/bzSk5sDSfoe/fe26yKENtxgNe1JYUv4BLbzv1iHj//ezzpzvUNMGhSu2DvEMvwE2uxMSNDAmQZIk+q1DlhRkDrgE+3bO6uer2HKaMzFn4fGuGfWVyId3fnx9xcZXHpF8h3MP7fXE6nd/8RpLKvzUm3HKkr6jbjL+6xhyYNvMPN+ehXf4Sz/7jT0s29wFF0AadSPCW9/pG/h62ielqveBPmP/ML3teXXl3+TWb57RW3VlZ4c1R4bu33RJRIbaZ9DFxAyuGBJXDetoQ7wSMs6ApDhRt+m5h8vK1w2UtbpKSfcfyhh6fXlW7jkHWl6/onhldrDorRlVRW9fLmUPQdrpLyJSvcrWVDL7Jhz46iZ7/4sXlju807OHXLPs38kQ6WQ59eqDSxMqdn50U/TAV3dLoboUZ9+zkT1yKrynnA9F8qCpZhVKFtyNQMVKuPMvezlr2B9eCvurUlnd2pHRcNPompLFP5Qi9ck21VAlyUEMUJCQdy4KJr0KxZ5CHNFpn0x7OXNigkGapqFk3u/gK50HjfyKSo8WYbquqSkNqemj1yVmDJifmP+jLaG6bUkNRe/c2VSxaXzSsKtRMP4uOLxDoLMIQrUbcHjDawju/Rc0PcjU3pe+P3Tyy7c4XKl132mGlG1+deiBpbcXeZPTkHvJv5CYMVwQTyPiKaSYEiegEUXJmidQvv4ZuI1IJAanLWLzyGpCNvIKzoOaVgDmzYeL3rsdScSIdEg20gpm0H+ZzBUzX9y5G3ZoCmlKTEIsVg8tWomIvxFGQymijRtRWboGgerDsGn1TDOCkjt7HAomPIrkrLOFJ2U0MomRwZBMfQv69qBi8f+gcd8iFFzzzbjkzOFff6cZwgxN2j3nhr83HF4wZeT1u+F0JAB6DLosQTEIH8mGsPtCm4rfRVPxXGFyEnJHwpk0CnZHsnkd/mLmb85OicwU1wziA3TJRCX8M5l+aOI9fycJs8Y3xfqtawH4CRYHDq9AJBpFr2FXwO7uS1pB/oeuq8BBp9H1xfk2RMMhbJ51PjwI7ii4/MvTnd684Hfah0iyylyp/ZfX76ieEiazZOt7ITGACCaZVDRNDTc7UWTm/xzp+T8iYrjoI7mZEZL1gmQgpvmJCX4YegNRPkaMUYkB5FSYJkwWZwGTielqAmTZQzfwcrY1j0eh/YnpI5FEr/hm0LmycEg2urZBL5m0QxKuqfHQfLDytUg557FP/l3MOOlOPWXAFQvqN75R6T+wspe370ThhCWd/5JMR8z4T8U0P0qCYIJGr1jwAMK1+xD2lSBQXwTmq0SIv8Jl5BSqoYWDltYINhC/mNAFm9MFxZlGvzPh9KRDSekPR9ogODw5cCcPgzsxT3CYH20YEVM4SBt0YfpIY5kirmgQ88u3vQ1nYv8yV58LX/6vQVnVh1cyKcEbLNk6G5lj7xEE47ZGZzEYRADy11AV0hWFoalhJxrKtiBEUlm9ZxG0pv3EnQD5DIV8SG+o3izYkvpAdY6G25VBZLQJzeH/QCZQMnTEQj6EY4eghQ6jsWw/wrsXkGY10VPaCTf3Q1bB+Ug6ZTwSMsciMS1XaCTnkEKmlCQCkqWSTXV7ULt7GTIyUsnEfZWd2qew7DuNskp3LZX8FUuv9u957Wm9oSbHOeT3GHrhdDIbLuGEda4VXEq1OvjK1qGx5BPU7viCor8qLuewZQyFM2cUtJSRSO9biOS0flBVivXIFKmSdMS3tAC9cV+ic60jtGTEIgjU7UBNyQoYjUXQajYgVLlNqKDhTkTqwIlIGXwdksip253JzcZN5xoaaMCuVY8gvOstJOihRs+4p29PKbjs7eT0vsZ3jiGlu+ZkNpUsu6u26NnbnCTRuePuQtbwa4lIdlIE7swpIIs0IlA6H4e3vIe64uXEqAYkphYiJXcCMoacBUfWWbCp6c0umfsZk+Sq6czpvUZBoUKoSKHxS9yjS2bigRHD4gySWozL0GsRqPka5duXIXhoDWJVRQhFyS/lnop8iotS+18CuyfL9FscxUl+NB5cg/1rHiGhWYvMgdd8kF144xNJ2eO3fGcYUr3zvavLlj/5SCBYMSDnzNuRceovkeBMF1LHSavrNSjf+BaqvnmTEM9uaI5M9Bk1FWn5k8jhnkomLbk9WhP/JMvBx109a6UlMpPiTyOcMqxj4wGk1Hwt86Vp9RRv7CaztBCHimZC9e2F3VuAXgMmI/P0X5FpHGnpikKMDOHQlndRuvxuyDa1Pm/s7Q/2GXPnX//jDAkFGuTqiu1D8/LHb+vo831rnr21ftWfnoo5ktX+k2cQcrqaHilMxHIKOFpW/Dnq1jyN2OGVgDcZ6aNuRtqAK+BNHw3TxWsWKlJaM4RrgCS1eo84sJW69rAai4lzJEJVinVuyHcQdfs/ROX6lxGs3A9Heh7Sz3gYeSOuE/fVWBQ22Y7G8vUoXvIb6OVbmLfw1mme3LMe6j3wilYmrOzbZz0x25BBmX3HbnO50iInlSHFyx94pHzrc3/ypo1f3Ou0m5/oNfDSlfHPtv3jR08Gi+fegT7nIv/CJ5CaNppU3pTNSLgSB5bej8pv3yZkoyLz1Knoc/otpBFDhAzKTDsiyVJbQ3OUGCfOFKlrHBEAwNIumW7OzZsmm9F+uGEfDm9/H+XrXoEUPYyEQRei4KxHSGDOEDrKxxXyl6Hkq1tRt/1jpAyZ9PmgSbN+RUIkl3z95IRg3beT9dqis8P15X2T+p+7Mn/ia79wuHPKepwhjVWbpLKNb/1v0+6/Pezp/wMEKjcTDG30e/pf9A/3KZOXGOVLzq3Y/vdfZYycityzHxUISOOOlaBo3e5/oGb9EyRdG5FScCUyC29ASr/vEwEUkzxkamSp46SzYRAMleUOtaTbwar1U7KMVzzo5JG/JNvE+6aqDSjfPAMVW96HzZuKXqffhFNG3wKmeAhukIBFGlC6/nHUrv8LXKkDt4bCjRlhrS6bP3cSRf+qLRU1G19E0qDLFuZ9/5VLXYlZXdMU/rDHeu1b/cAv1/wZbNvsnzCD+VksUMQOLLmZrf1rBls7HWzNk2C7lv6W6SzENGZuoVAt277wD2zl4zb29TOprHTb8yzGgnQ+E8do4qfODINeYm/7rampiU2bNo3t2bOHHW8j5olX1zbz3ua5YRYzNBYxIrSXfxJmVbtnsdVv9GNfPcKffSoL+Q6Js6LWeMu3vca2fnAW27HwBlZ34H0WC1fQeTFxzZI1D7KVRJviZQ8+EtNi6vFo3PJ1zA+r9y/43tfPOMOb3juLBfyVdDvGItbj1FStYVu+vJHtXfMC7dcYpwd/mEiwnG377Cq26FGwdW8WsooDy80H0SMsooeJeuagxXMJIvKz2hNz0aJFQnanT5/OTs5mNN83zhimkZehMYa0sNjfWFfCtv7zJ2wVEXfDO6NYfdUm8wwjIEYd1aP8yc1r6CRmOgkd7YvQvqJ5N7N1j4NVbnnjhh5hSMBXmrlp5phtG17OY/76jXQjnSQozDSSJPpBkqJbQyG3Z0RNqW7cyzbOupStoIFs++e1LObbaUkc/aSBco3olOzSvYqLi9mCBQvYhg0biE4aO9mbcUTdzBFbO2JaDds+/1dsxdMkYC8NZTUH14pjY0QLbhUMEjBm8N8BnrQkpkRMKxCqZNvfHMbW/zWrvmL/3HM7y5CjVgzLt7z3h2DZ+mF5582AO7lQZFRtFM0qPCGoGLDx4hAzs0iqZENd+TLs+HAiwntmI/vs6Rhw6UwgcRB5ihg5booP5M6jokgkgjfffBMffvghXn31VdTU1Jz8CLnVH5a3IQygKmkouPA19LvoA/ijB1H82aWo2TWHntkBydBEOsjgf9NLkZxQZEWEvbIzE70v+wiSLTW5csM79+7a9KF8Qj4kWLt38MoXPY3bFtwppJxznrW00yTtmhEVJqyxbjdb8foAtpZ8TenqB1hY7NdJi0iKjLh56tg0dbRVVlYyu90eDxvYpk2bui/5LfxL5/yM6ekMYYZNsxYTxpqx6uJP2frnU9nKv6azyj2LxF7Tb2iWL+S2gPRDN4SfjEYqt5Sufumc6m8/yz9hDXGl5u/MGXDNrODWNxFo2kQSTiiEGc35Ci75EmkG85di35fXA7V7kEWQN3vcQ1ANG+yEslTdxhMRBC+1tnJ4zM3v92Ps2LEYM2YMxo0bRwGl3n3Jl6RmhNYZiM8EQpQEZOcJR/7AssGJFUV6/8vRa+KrCEd8KJ43Fb6DXxIBVZEl5scZ8eCVlxi0SLj88IE7ep/5+xXpw39Y3NnxKg899NDRB+dICtZufunaKBEkpf8PzewoM8wcK5muiP8wds39HfyHvkLv86eh95i7BNbn6QzIilVAsmILqWWV4thbXV2dYMLQoUMxePBgjB49Gmlpad1iSDAYxPPPPy9+FxQUdIKBaBEPHfkt0fMaROyk9GGwJ2bCv2sWGg+tRmL+ZDicaUJADZ4pCDfiQNHfKJAu+7R3/gWPdx2bH0N9dENTtn3+ozlrn0tnFQfXmw7XCAvzE401sh1f/IKtIFi4ff51pLhkkmKkwEZMKPGJbHGEFX/Nnj2729faunUrs9lsbPLkyQIsnKDLt0wvY4c2P8pWPAa28ZNLWSRSSebbINporLpmB1v5pIt9+8H3FncFXR3XZIlwTVL07IE//8RoqMEBimKPpCxkVHwzA00b34VnwHnIP/evorDEFLP7QznB/BjFIK1bgOrruxcI0jgGDRqEiooKvPvuuycQXEqtwktCVsgYdSfSxt6D0O4vsXfdNNEFQx8gNXUgWYr/QWDf8rNr9sy9skf7siLBitTKor9fryRmoP+QycJKGpIdDRX7UbHuNbDMHPQnvyE73aJIxCTVLLPixLLUsVjsmO+7sj388MO46qqrcN111wnGnDgcs5KXhDL7j78F7pwRqFv5Jsp3fglJsQlhzRj7R8gZg+yHVtzxuL9sY3qPMaR66ztTK3d+cXbahNuQlvcDkQCMabXYu+wXCEUqkTfpbXhTxxAKls2KG3jVzSaKPSeycdh7rPed3TgDnnrqKZAJxJdffoldu3b1AEAmWyCrFAIw8h1Z6EOQWPYk4eCS36GpeoMQRrs7C/0veh3+uqKC+uJPHuwWQ/Yuv/Oib14dfHfzw5QustftmHWN55TB6Dvqd0I7ZNhRtvF16HtWodfIq9Cr34WiIMTVVe+BXFPLPFZPmCxFUXDffffhwQcfFJrSu3fvHotaGI+tQMgraxx6nX4rtLoqVG79mD7hycoYEvuMgzfnLNRuePHXgfr9g7rMEK3s67tjoYrH4u8DlRt+6a/bdWpO4Z+hykniUH/dTlRt/gu05GRkD/+jAL+ygLWK1ZygxLsSTuhxA4FAO6TUnS0UCgkI7fP5xCsajXYa/nYmVcmZAhZG3qk3wXXKORQwvoKmmo30CcF+gsOZYx9AwIg4yzc/f7em+dVOM6Ry37/GRqu3FSYNnWyaqvKvMkJb3/2f5NwzkDHwcjCuBiQNJaueg1ZTjr7j7oK31wizDCuZafOe0w8I4h2LQZ3d9u3bh6effhrPPfccnnnmGRDi6rnIXjy32ccluRLQ95x7QSALxauegmaY5a2M/AlIzv8hqta9cH35nllndpohjfvnnh8O1CV6en/flKyqb671lW8fmjL4p+CVHEaCH6gthr/kIyT2HoOMob8l3dDJkUtWUNSzG5fsntCQuNmKb3EN6ZnNSq+Qz9TJSqTnTURW/hQ07JpDMfIc8zNiWO5pt0O2J0Kr2vajTjGkvmavJAXqRvIqaEKq2bOkbZ3zE5acA3f/SyCMkaSjdseHiIUakXbGH6C6k4kRUbNj8CQwpKGhoVUBqq3GdHZrbGxsFeXHGSL1iL+TrVYmHXZNFddMHHYlQf4Ayjc9DUkPiVZWb59CuHO/B/++BZMioQr7cduA6srXOP3B/RPd/c+HzZOL6v3LLqqvWTcyd/RvkejNEZF3oGEvyre8AW/2KGT0u0C0XQp/IUuiIaCnZzW0derdZUhbU1ddXd2To7Rsl5mR4LYrNY8cOQEdf+lKVB5ejuy8CwT9skZciZI5vx1cUzz/N8zed27MV9ZL0coH+bbN6OU59ff7+oy6aZZicwqVU7P7jE8pW35vqmKEsW1mIVxNvtlNbpvSb/AUq8Ito2nvl4C/DNkT/kxQL5PUVLM6z6Uekrb2tr/lFg6HW1UQO7u1NVE8JdNzm3wEv1hWUZU96FV4I5n2eahb/yIy+lwossCpA69C6cZXsf/L6/+iuLwhVZEdATlVdmphBDdMM5Kyz9ye0nv8t+Ia/qaGrFFX/QuR+j0INe5GqGKVkpM0AkkZ+SKZqIUjOPjtPwBPClL6nt9CXVs1e/bo1hYNcdPDO9vtdnuXrtM2oOSMPZkbH29anzEoyx2C2KEtCPkr4ErMhqq6kD3qOvhScpGQcZrLldgPtl5DULV9CRqW/VE2AmXcV5gMSckasNVm84q+V1MRuUPlva4mhPVXriaH9A28Ay4mk9bbZIMk4WRNvuIOvLi4uJ2T707Gt21AWV5efnJrKsQQmyMXKSN/iYo5dyFEZstDwIgZUeSM+JV4cdo2ty+NSkLN1j8TYz48K23Qj98Tok7M0ESvkiWNMpwitJGsrpGmg/Mp+IsiteBHZqq5C2n07vqPtiiLS3bbfZ3Z4oWtuFnljO5ZpNU+raJzX9L7fBiE7qr3zRFWxpDMiI0zw7A6+WU60pOQB3facOjB2oJ2gaFMDDEEU+I1Dwr5oo2o3DsbblK1zH4TLUd2cmftckfc1rRw1BVHXl01IS23kpKSbsc0nbofn85At/QkDYTzlO8R7f6FcGMpRQ42yLwFmU8y4hldg8+S4W5Yhi15EHyNe0ZEAqW9WzFEEvM1DBPGWgoQrN6FWMMOuDLOgOzJ7FKR6UT8B/cXbTWkO4RsmzXufl6MtfjNjqXepA0axT4epPa7DK5ILSK124XWMNmcYCSLtldJ9KNxI5x8CqHWSFXW2gWXXtGCIcwsIFupAOgmpPPXbINB40/MGmd1+uk42RtnSFvYy/d1x2S1RYDcD3XEpONvWgt2HCOTLdusFBJDatYIUX301a7lDkAYF8lCZmJeDJNEcB2s2gEHN9NNoRYmi/noI5XUKAaD75F1cfNo/V4YKpB0yhir9q+ekMnorCNuex7XmMOHD3f5PhydtfVPbbWvc88hm7GX4IhyVC0RgMeat2JP6gfV7kXjwQ0k36TdfGKMyAVLIoLnGnNwzf2oWPEgkof+6r3v/WT1280M2bLoXnMijWQn5+4gW2cTfbDRht2we7PgSh0qypddNVcta9mdZU5Hx4oesWMEdfw+bbWqoziEH9Od2gov30pQrSnYRzdbZoelqQWyIwGu5L4I1G4i5Fgh2lZZc5ggo2TVA6hY8jjShv9kXt/znrzZ5UpramaIb8tr2L54CvSGCrptkE6mQRshaI0lULyDQFGkFZF3zWTNmzcPjz32mCBCZwNI7rw7QkK1tbXt9vH6xscff4zbb78ds2bNavd5W3DAx9Gd4HDv3j344P2P8Kfbb8KevWuPCvl5i1RMi+KFF57H3t0HYUsdyB0xYsJMmnNi9GgdStY8hLpVTyG78MZ38i94+VqbM6kZsQgblDP+rherlk2/udjwYuikxxBFAphei1jwEGwpFwknxStkQh87sa1atUpkWT/77DOMHDkSd9xxR7d9SJyR3JRxE/TNN99g/fr1WLp0KZYvX97sE+6///7jMoT7kDhaO16/MEdkPDs8f/58fPDBR3RevdCMq6+e0KG55NfyNflw0+9/h3ffnYXNRevhTeiLmpiBaIib21FCN6qK/4Gy5Q8jZ+ztb/Y/7+lft8tl8R9pfS9+ucH+7I1atIlCYa+INoLkRCNRPxKd6cIZQeJOx3UUNTUfbNu2bZg5cyZeeumlZifsdru7JI28ftHSZPFr844TXvXj1z548GA7hvHjHQ5Hu3F1pGnHSjByP8WZ/cUXX+DTTz9tA7UdcDliohGuI7PMx33rrX8kZrwPh9ND0bkNiUnZAu5KwfpmY6VHddgp9jMc+S92mFzkP+oPb1A0kn6nLUns4goZC/gRjQQJOHhM+0sYOh4sth3QoUOH8MYbb5CqvtAqU9vVaQPc4bY1KTx/xZOLXOva3vdYvokTviPz1DJRyc+trKzEpk2bMGfOHGH+qqqq2oMncsIGO/ozlJdXYOrU64U2iUnGskV+JdOcnBrxHaGaLZ3jAjkUrko8KkNq932crLGwanP2OkKcoE/MTHIlxyXc2SJ/dSQJyGvWXJr4gx0N+RzLoXMGLlu2DLNnz8a3336LPXv2tGImZ1JHyOh4IKElomp5LL8fl2beosqZUFRUJJjQ9notx9DsyKWW9zf7HRYuXIibb74Zu3fvFgnX5mZCur87JVMkHmOxI7GPzZ0KRdfkvv3PTDsqQ3TZJsCc2gI98NlPfDkLMYM1nnuxnBmvcT/77LNCK+KdHEfrDuT72xaJOBG4f+EM2LBhA0pLS48ZP3Q3BdPWh/DrzpgxAy+++CIOHDjQThNbatzRGM6OZEmwbt06TJkyRSBAs4IIkRoBM6MN2UVxiczHEm7h+PlHDmixgHxUhtjkVCPCBaKl0zb48hXcANqbA3Se+HudmPDKyy9j586dnTId/HPONO6AFyxYIBwlZ0jbQK87EPlYGiOLyFhqN0burLsaM5nnm9ywWcI1d+483HDDr5vhuLh+XIUkw6zb8VUiuCYZLfwOfRCToxxK60dlSCy81cbLDZAcR7TB8Ih0Chk0k7N06KPT7sH0x562Bmmq5/GIx7WgsLCwXU9UvOe21dyIbuXzzGu4XC6Bojjj165dizVr1mD//v2d1rZj39+UeFVVEQpH8NcXX8D99z0g/JFJBxZPZqG5YZb+VkV+kFsge7Oxl8VaLzESGEeHIb9asfPDsxy23vcbxm46PnAk4nTIwibq4SNIpdFXaxHBbqZaOtEQx2FpHJq2tcs9NQOYX5fHPJ9//jlWr17dIWw+oaSh1UbN0dMzT7+CWZ8sOSKUrXyLmHBj+hHa6Q/WCTLJNrUFcAlx1MoMJneYnFN9hz6/jVXt/oEi2wgv1woic5hrT0gQ0Wm48YipM5qJ2b0U9slYpCB+zcWLF5+0e/IF0gQgqGvA/LkrWuw3OvQw4TDPVSkIhyLcesGuKM08i0RJOCWbsWPdh4Gz8i9ozxBn9qT3avct+6EadSlMq7aicXLfTiccdjukWF2zumVn98agwYOh8pZJGPhPL6B5xO80d3ieFIbw+hCvaTjIIycnOtAYDIliVPsClcJbBuF0uOAmCxNrrBJWTHF6jlyLAm4ScT2tb2GHrTRqVv7lJTYl2li85P5UOVKDKKm7KusUBKVAdaQS/C0VGsELdnfdex/uIdvJcXnreMT4T7GkLfY5CibqsfJZi/RRR9dWrDEYoiC1fft2qHwGhztT7OFnhIlJsiE15vY/s8PypWp3epvCZUVexV8L5omRRsQIStih2RIh80izaT+BBZ7jd1Hg9CE5zWUUrVrzJuJSIn13lpo9Eb6zuDqyjue6CNhL/2wUpd/yx9vgjFQhQDjJ7ukt+tckcuYaWZxg1Je6d/kt/7R5+n/qyrvs8/zhP97XEmVV1RR9qmYUXoO0/CuIFx4B28iFwZ6Sg/CepWCxBkiqG/3yMxHTh1sTWtDMECbJ/z3EZx2ZLNaxYrbjG+9yJgujqHC4Ger9FJ94s+DgxT0xYcmGvNN+Q6avl1K7/ZVztMNF5/jLN/2pcdtHS7yDrn2mYPSlmzlDonmXvAxPcl+CZw401O6EymMQ0gibkosqckJlexchOWcCRgzoi8JhBc0jkqyBnozuxf9TPJKMoxrLdniMycLnNNTsFv1sidmFiDaVQw/UCsQl8Q6UEVOQkDMGvrL1CB9amhMsmz3FPvQc3ue6WazksPZZhU8SEgRm1pqDsrXGi40sWEiYRpWwsyaSZW0HJf0XEV+XOmJI5yyzwsxjYuZCFXBoZj0rRCBIEQt1CuPDV/qCxtuCFTdkjVdomeEZfduVw77/9GcCIPc97zGBGjhK4IV63kAt6zYKKnmdXRYRpykkTKCNDuBFj1kLqYeO6gmLxZpNVvtHZEfxNZyOOs8S8GnjHK0SwQyRlI2J1fPMyaS6udZQ/FHUZC2p/xXn8ayUYIg9bbwgettnZmY9srkSbK4PojS/k46BsvgUBcnSOl22HKGYNCq1OY5Zgzcfmq+nJdY/7JBYslXoMaySaFtzyY5obDMWlnBkkacOs1It3pljaf8sR9CcdEz8Jh1Jf7RYQopPlpWamcobIWTR98tpw+fwR42YPRqumeL0ZNSJc/d+ctERCWhBbU4YXVZETVkR5oyJIKmtqWId+BCuXZxYMjOXcjWsilnr6W4WRIw33onjzSaA5gFZzIqvLqSLjg1DzMHQFcls+G5BY27BebrC4OaVi4/o0JespWZaJG2lOGqKU+roWtfMJKkFkDkGGpOsRgdmCatqyNBkSVgXnqPiDQ66Yi5vK4RMI2Q2cIoy+rI3aiVzkYBNM2VZuda8mdRahoTJ4tfVYfCVCwy9FcJqxnvtxsYsyWIidcD4NGkWbwJoSUMr/2OlVaRITDjRI90dUivLKGjjckF2eAQjBfNayC1fMYKPUw6HIUVjZHqZOM+IO+aWjyi1Aa9SKy61NhdSPDNidNKkWidwASIYLKZVW1PD+QoQuhatJQsyg2g0jEboVd1Zc53evA8EQ7TS8ouMcHiuRPGHuHcz1azcE2dKejpsCfZu2WWttFKs2Qur0N9qGQt2JJ6R7UTonJTjXi+8aBUCK5YIU2BYlzDNnmlQvTk5MM47Dwqhwv8TQKG6CYbfR05cMheF9HigZiS9SR91XMItn/n6o7Hpj8LuTRVowGaIL4IQkhrjnOVPnJIA94WXwHPn7XD16fxcPb2mBmUTzoGtvo746kRM1UiFuRmJmdojkfRwNY5GIBcWIm3hfAjBOFYq41+fwv38M1bdBuDlH7slm4p4r8CXnAx21VVIevJxOL0dFucQqa9H2bQnYY/6RZe/uUCg1aojjAkT5kW07YR9cF1wIdJ++tMuMSNcUYma70+EVH4YzGaDTFpr5OYic9ni8+xpaePokLVtGSI5JGV0ZjgCu+4j22uAaIMwQuJDB3fpbhcMXy20F59H1aF9yPlwFmxtathHtb9k0NObmmD3NYGpEQEeAlHz2vGZJXEPxGrMyt3xMJTsspszAHgClJirkkmMOulqQTJRkTBkpw1J9Dv06gxUpSej97TpHfaJSDSmlOefg8uItIPvJmtkwZ6IxSaDzCEjhnQF49XN/DuStm+B2+EiqEv+VycB316E8NIV/e1XXj6xDUOS1LgZF57BRn9oOurGj0XN2WOREHMgsWgrElcugFNKgJZgg+OrhTB2lwAjBnc67aArsmi4k+QYoq4E+K69AXY+QNJGu2F9y0FUgtK3DxKUzjfjMV7jjIQQOuN0+P82A1JpOSIPPYbspctEtc5pI7nfsAE8xrKWrms9NLLtoVPyYATqEVETYWcRseQfXxPYRRphDwf5GkjgUYTir4emdLFRkMvMV/PBs+/8XIWn3omOKjE3+NEH0K647GxVfAkKgpZynK2aztKI0sl2PuVfj2pIuXgicu+9XzAptH8P/IWnQ+GTZshmqxwAxbrWn8VtvUDg3CG63ch77oWeiRlkwvNSFHpiArL6DoFMr/CD5BO/Xg1XVDdLNg11FHwRGLHbOsisZiKNfJGk6/Dw2IHbd1VGOBxFiDRB3boZnJpy1IdIrxyoV/y4S9oR3PgN2Pr1sKsKAnY7oukFsFeWwc5N98K5iBQVRdXhI+JZX94AsMFkuSRHFNMMC/shFR9EcH0RPZAfwUUL4AjxyogNEX8T/D/+OZKHFnRRTuI40w41FkLkldcJedjJP+li3S2+GL4RJrx07tlwjhza+SDS4Mt4yGJVay3kg0YmKPrGR7DHwnQrN0m1hCj5D52I2pFsS4oCe05u+6LabXfBvqUIhssBJdCEqvwCJH/yGRwjhnXpqaMvPI+E+kbodidCub0QvvduSL//PbkGBm9DE7SPPxuG4SPOoUPjRZZKsxVm2qO8+5RFPAnM7/Ww6uQUVpyWyUpTk5nPrjDN6WCaamcVP/s5CzcFu7Rsi1ZVxZqys5nmcDEtIYlFE53MJ9lZE5GyXrIxH4UnDTawRrq//97/7dQ1Y/fcyyEB091eRkRjTRlprPq08ezgKf1Yk83Dwp5EFk5w8bZxVnXfg51eCoevi1d1zz3Mb1NZxJ3IAg6FVSelsfp167u8XE3Y72cNA/qzmM1J41CY7yc/Zv7GBlY3cjDTFBuLOOzM17s3i9TWVtHh97VafIZCeTNWYjaBKBKCIfSp9SO5roHQjw4/2fgo2SrlQDGCsz/tRpXBECkFEVsYDmG6VDKIdnLwNrJ+jhgHDzC/5KuTjkk0nakG2WYb7A0BuDauRq/9JWROA9BIk7VACLWXXYrUP93aKTPDn6nxtj/C+cRTZKUchNI1BNxeON56C8ljTu861N30DdRD5eSnePhHaPW0MXB5k8hv/Aw+vtaYbIdcST5vxbIMOnxSK9jbHOKT+tvCAYQuOAeBi6+GEaxHuPoQHJ8vhHSoGN41mxBcNxV+1Y3EH1/e6VKCZOUNVIpFwglehB9/FJJdESyQRepEFx0u9jPGda1MwVMznHD5/QAedzBzUX3d6QE7bRTSJl8MJTn5+MTjrua2O6G+9BKBARd0Agrh7Cw4X38DiRMndp0ZJHzhd2YimZdwKYCFk8yqFkPT6rVQ7CR6Tu6XZCj0zP6/z4Rz8iW7bTbh43K4mkjV06azEJ8ZkpDIgtx0PHa/WLovYq0ZGnzlL4wXLWOuFBYgcN549c86vxgrmSx/jmWyHA4Wye51wgtWcpMVpXFqNF7SW1bzs6u7vUIXX+yy4rEnWQNdJ0TPF3LYWF1mBgvPndft8YWK97HKtBRm2J3McKayoDeRzH8qK0nLZjVJ/L2TRROSWSjBweodbhZYvWaqZbISuIYUGIqJ0m0kcTxVrFWHoJVVIcrbVZp8YEs3wEsQkn+lkM6nKuiRLjk3/h02hkgdqCLvFdq7F/B6zdQFiyctTdzvSE8VU72OfU0rSyTHRD5I1nUR03R1DSKdpLbxz0/A8cQTsLtVOHgra4IH0ttvw3HRxG6jv8iSJfA0EJR2ucW8EmdTBDnkNaV4AZhozFxhorcTUsQPbdWKCThzHJ8fEuAMCTMxlwfi64hsFHQ1fvA+Kr/4QsQNSU0hpNcR5HU6hckh+QQbMrpLA1QMXdTSOKqRKUgsO+9cM23E4TBv+ZS56SHcRzY2Z9kKuHplHqfpwDSFEYnHCOQyte4VyCrffAvu6Q/D5rTzzjpESNDYkEJEiQ4VX3zZvAI2n6jEIbROTMs+73zIHUDo5jRRKIzo3z8gn6iI5cxjRNnKCyZATvSIpKiuENKsb4Lz62WE/iS4yWsEli65yvmnOxpJoN7hDCmVY2YPrKZrQktyqqqIoxXCHgtXTGMKxRiC9Id/wg+QfdNvuyiKxJQIMUSXRdY2r6y2GQ2bX1WkiVggxPM9xvEdu0YxkRgxwVzepBkK+5HQjbpHwqrVcNMzS0YKQXB6djWChC3rEL3ypwQ0mMha8IJciAJIO92zPrs3NIpN7GlJR71ubOkSOJctgkZ+Q4kEoY0qRMo/P4ec4Gy+r+GncKJwFGwEkhjFPfKSJQ79i9k3KJddkiucupyQBJaUQRxLFCoW41/aaHl83UV/JaXCGD4G0qSJ6HXpJNhSkroQFSqIeNNF1pUpajuEJlpsxLesaQilplKAdvxoOHrRJDQ5nOQgyQHHIpBHjOiyuRKyr0VEa6A91CA6CuOG2NmcE7PSOxTXiKIpITd2jMY7fmwdabg7qRcc9kREYw3Qf/YzOCxmNB/n8cA//gLYqhvhcybBQbGOf/6yUNJll8jmYvx8KeZg2Cogsea0cXNK2mHnDcDdD6nFhEbWcRGhRZabN0tIic5/WxbWP28RWNE2M5nJZ4ypZsunQ+O1C12QuPkLLDUdTenpyP7FNThWT4fuJ+YZrLnWg0R3x6UWnhsJBUWximd1DFmqlxKcSwRDihffSLRQRB5bFPQ5dol/LRHvQDHMWaOyLolpv2KlarOCJSRGNjqIzfkUYLqOQXYeYlkpxar4Ge0cdLyrQyyEFo3F86xoUVayUvWGWZS2SqFcs/hYxBjjuV52nMVoW9bHPW4zGteZIL3BHZmImRRxvRhff5dAjGrVYRgHD9b8Etno+C66TRYLgTYvyiNMIqwyLqxldikK4zkoxcp0E11dueMC2UOmLjYn7OxbTA4lKgYSv494UHRQSuWENszKndTqW6BaF53M7JVhrWDArHcddHCIfiUm9stWZY+1+BadI2VU2bqf+W1q/BjOCMWqWccrivEy6fEZIgkiR2VDpF8Uwy5mIHPUpzCzQqnxqqfYGRV04d+/KDcLbceNckKnpHhRTBaOXDZUQqimxsmiQKUKDeQxGBc+g+IeTXcEs4ZM9f8/AQYAkanvWBd9BdQAAAAASUVORK5CYII=';
            function toAutoTableColumns(srcColumns, columnStyles, columnTitles) {
                return srcColumns.map(function (src) {
                    var col = {
                        dataKey: src.id || src.field,
                        title: src.name || ''
                    };
                    if (columnTitles && columnTitles[col.dataKey] != null)
                        col.title = columnTitles[col.dataKey];
                    var style = {};
                    if ((src.cssClass || '').indexOf("align-right") >= 0)
                        style.halign = 'right';
                    else if ((src.cssClass || '').indexOf("align-center") >= 0)
                        style.halign = 'center';
                    columnStyles[col.dataKey] = style;
                    return col;
                });
            }
            function toAutoTableData(entities, keys, srcColumns) {
                var el = document.createElement('span');
                var row = 0;
                return entities.map(function (item) {
                    var dst = {};
                    for (var cell = 0; cell < srcColumns.length; cell++) {
                        var src = srcColumns[cell];
                        var fld = src.field || '';
                        var key = keys[cell];
                        var txt = void 0;
                        var html = void 0;
                        if (src.formatter) {
                            html = src.formatter(row, cell, item[fld], src, item);
                        }
                        else if (src.format) {
                            html = src.format({ row: row, cell: cell, item: item, value: item[fld] });
                        }
                        else {
                            dst[key] = item[fld];
                            continue;
                        }
                        if (!html || (html.indexOf('<') < 0 && html.indexOf('&') < 0))
                            dst[key] = html;
                        else {
                            el.innerHTML = html;
                            if (el.children.length == 1 &&
                                $(el.children[0]).is(":input")) {
                                dst[key] = $(el.children[0]).val();
                            }
                            else if (el.children.length == 1 &&
                                $(el.children).is('.check-box')) {
                                dst[key] = $(el.children).hasClass("checked") ? "Yes" : "No";
                            }
                            else
                                dst[key] = el.textContent || '';
                        }
                    }
                    row++;
                    return dst;
                });
            }
            function exportToPdf(options) {
                var g = options.grid;
                if (!options.onViewSubmit())
                    return;
                includeAutoTable();
                var request = Q.deepClone(g.view.params);
                request.Take = 0;
                request.Skip = 0;
                var sortBy = g.view.sortBy;
                if (sortBy != null)
                    request.Sort = sortBy;
                var gridColumns = g.slickGrid.getColumns();
                gridColumns = gridColumns.filter(function (x) { return x.id !== "__select__" && x.name.length > 0; });
                request.IncludeColumns = [];
                for (var _i = 0, gridColumns_2 = gridColumns; _i < gridColumns_2.length; _i++) {
                    var column = gridColumns_2[_i];
                    request.IncludeColumns.push(column.id || column.field);
                }
                Q.serviceCall({
                    url: g.view.url,
                    request: request,
                    onSuccess: function (response) {
                        var doc = new jsPDF('l', 'pt');
                        var groupings = g.view.getGrouping(); //group fields
                        var groupingColumns = gridColumns.filter(function (f) { return groupings.some(function (s) { return s.getter == f.field; }) == true; });
                        var srcColumns = gridColumns.filter(function (f) { return groupings.some(function (s) { return s.getter == f.field; }) == false; });
                        var columnStyles = {};
                        var columns = toAutoTableColumns(srcColumns, columnStyles, options.columnTitles);
                        var keys = columns.filter(function (f) { return groupings.some(function (s) { return s.getter == f; }) == false; }).map(function (x) { return x.dataKey; });
                        var totalPagesExp = "{{T}}";
                        var pageNumbers = options.pageNumbers == null || options.pageNumbers;
                        var autoOptions = $.extend({
                            margin: { top: 30, left: 30, right: 30, bottom: pageNumbers ? 25 : 30 },
                            startY: 90,
                            styles: {
                                fontSize: 8,
                                overflow: 'linebreak',
                                cellPadding: 2,
                                valign: 'middle',
                                lineColor: 0
                            },
                            headerStyles: { fillColor: 255, textColor: 0, lineWidth: 1, fillStyle: 'S' },
                            columnStyles: columnStyles
                        }, options.tableOptions);
                        ///region Title
                        {
                            doc.addImage(headerImgData, 'JPEG', 30, 30, 60, 60);
                            doc.autoTable(['BEPZA'], [], {
                                margin: { bottom: 10, left: 100 },
                                startY: options.titleTop || 35,
                                headerStyles: { fillColor: 255, textColor: 0 },
                                styles: { halign: 'left', fontSize: 18 }
                            });
                            var reportTitle = '';
                            if (groupingColumns[0])
                                reportTitle = groupingColumns.map(function (m) { return m.name; }).join(', ') + ' wise ';
                            reportTitle += options.reportTitle || g.getTitle();
                            reportTitle += " Report";
                            doc.autoTable([reportTitle], [], {
                                margin: { top: 10, bottom: 10, left: 100 },
                                startY: doc.autoTableEndPosY(),
                                headerStyles: { fillColor: 255, textColor: 0 },
                                styles: { halign: 'left', fontSize: 14 }
                            });
                        }
                        ///region Header
                        {
                            var header = function (data) {
                            };
                            autoOptions.beforePageContent = header;
                        }
                        ///region Footer
                        {
                            if (pageNumbers) {
                                var footer = function (data) {
                                    var str = data.pageCount;
                                    // Total page number plugin only available in jspdf v1.0+
                                    if (typeof doc.putTotalPages === 'function') {
                                        str = str + " / " + totalPagesExp;
                                    }
                                    doc.autoTableText(str, doc.internal.pageSize.width / 2, doc.internal.pageSize.height - autoOptions.margin.bottom, {
                                        halign: 'center'
                                    });
                                };
                                autoOptions.afterPageContent = footer;
                            }
                        }
                        ///region Content
                        {
                            //extra space after title
                            doc.autoTable([''], [], {
                                startY: doc.autoTableEndPosY() + 20,
                                headerStyles: { fillColor: 255, textColor: 0 }
                            });
                            var headerHeight = 100;
                            var headerFontSizeBase = 11;
                            var entities = response.Entities || [];
                            g.setItems(entities);
                            var groups = g.view.getGroups(); //grouped data
                            if (groups.length > 0) {
                                var ggg = function (grps, parentGroupIndex) {
                                    var endPosY = doc.autoTableEndPosY();
                                    for (var i = 0; i < grps.length; i++) {
                                        var group = grps[i];
                                        var level = group.level + 1;
                                        doc.autoTable([group.title], [], {
                                            margin: { left: 30 + level * 10, top: 2 },
                                            startY: doc.autoTableEndPosY(),
                                            headerStyles: { fillColor: 255, textColor: 0, fontSize: 10 - group.level, cellPadding: 0 }
                                        });
                                        if (group.groups) {
                                            ggg(group.groups, i);
                                        }
                                        else {
                                            var data = toAutoTableData(group.rows, keys, srcColumns);
                                            autoOptions.startY = doc.autoTableEndPosY();
                                            autoOptions.margin.left = 30 + level * 10;
                                            autoOptions.margin.bottom = 10;
                                            doc.autoTable(columns, data, autoOptions);
                                            //for extra space
                                            doc.autoTable([''], [], {
                                                margin: { left: 30 + level * 10, top: 2 },
                                                startY: doc.autoTableEndPosY() + 10,
                                                headerStyles: { fillColor: 255, textColor: 0 }
                                            });
                                        }
                                    }
                                };
                                ggg(groups, -1);
                            }
                            else {
                                var data = toAutoTableData(g.getItems(), keys, srcColumns);
                                autoOptions.startY = headerHeight;
                                doc.autoTable(columns, data, autoOptions);
                            }
                        }
                        if (typeof doc.putTotalPages === 'function') {
                            doc.putTotalPages(totalPagesExp);
                        }
                        if (!options.output || options.output == "file") {
                            var fileName = options.reportTitle || "{0}_{1}.pdf";
                            fileName = Q.format(fileName, g.getTitle() || "report", Q.formatDate(new Date(), "yyyyMMdd_HHmm"));
                            doc.save(fileName);
                            return;
                        }
                        if (options.autoPrint)
                            doc.autoPrint();
                        var output = options.output;
                        if (output == 'newwindow' || '_blank')
                            output = 'dataurlnewwindow';
                        else if (output == 'window')
                            output = 'datauri';
                        doc.output(output);
                    }
                });
            }
            PdfExportHelper.exportToPdf = exportToPdf;
            function createToolButton(options) {
                return {
                    title: options.title || '',
                    hint: options.hint || 'PDF',
                    cssClass: 'export-pdf-button',
                    onClick: function () { return exportToPdf(options); },
                    separator: options.separator
                };
            }
            PdfExportHelper.createToolButton = createToolButton;
            function includeJsPDF() {
                if (typeof jsPDF !== "undefined")
                    return;
                var script = $("jsPDFScript");
                if (script.length > 0)
                    return;
                $("<script/>")
                    .attr("type", "text/javascript")
                    .attr("id", "jsPDFScript")
                    .attr("src", Q.resolveUrl("~/Scripts/jspdf.min.js"))
                    .appendTo(document.head);
            }
            function includeAutoTable() {
                includeJsPDF();
                if (typeof jsPDF === "undefined" ||
                    typeof jsPDF.API == "undefined" ||
                    typeof jsPDF.API.autoTable !== "undefined")
                    return;
                var script = $("jsPDFAutoTableScript");
                if (script.length > 0)
                    return;
                $("<script/>")
                    .attr("type", "text/javascript")
                    .attr("id", "jsPDFAutoTableScript")
                    .attr("src", Q.resolveUrl("~/Scripts/jspdf.plugin.autotable.min.js"))
                    .appendTo(document.head);
            }
        })(PdfExportHelper = Common.PdfExportHelper || (Common.PdfExportHelper = {}));
    })(Common = VistaGL.Common || (VistaGL.Common = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Common;
    (function (Common) {
        var ReportDialog = (function (_super) {
            __extends(ReportDialog, _super);
            function ReportDialog(options) {
                var _this = _super.call(this, options) || this;
                _this.updateInterface();
                _this.loadReport(_this.options.reportKey);
                return _this;
            }
            ReportDialog.prototype.getDialogButtons = function () {
                return null;
            };
            ReportDialog.prototype.createPropertyGrid = function () {
                this.propertyGrid && this.byId('PropertyGrid').html('').attr('class', '');
                this.propertyGrid = new Serenity.PropertyGrid(this.byId('PropertyGrid'), {
                    idPrefix: this.idPrefix,
                    useCategories: true,
                    items: this.propertyItems
                }).init(null);
            };
            ReportDialog.prototype.loadReport = function (reportKey) {
                var _this = this;
                Q.serviceCall({
                    url: Q.resolveUrl('~/Report/Retrieve'),
                    request: {
                        ReportKey: reportKey
                    },
                    onSuccess: function (response) {
                        _this.report = response;
                        _this.element.dialog().dialog('option', 'title', _this.report.Title);
                        _this.createPropertyGrid();
                        _this.propertyGrid.load(_this.report.InitialSettings || {});
                        _this.updateInterface();
                        _this.dialogOpen();
                    }
                });
            };
            ReportDialog.prototype.updateInterface = function () {
                this.toolbar.findButton('print-preview-button')
                    .toggle(this.report && !this.report.IsDataOnlyReport);
                this.toolbar.findButton('export-pdf-button')
                    .toggle(this.report && !this.report.IsDataOnlyReport);
                this.toolbar.findButton('export-xlsx-button')
                    .toggle(this.report && this.report.IsDataOnlyReport);
            };
            ReportDialog.prototype.executeReport = function (target, ext, download) {
                if (!this.validateForm()) {
                    return;
                }
                var opt = {};
                this.propertyGrid.save(opt);
                Q.postToUrl({
                    url: Q.resolveUrl(download ? '~/Report/Download' : '~/Report/Execute'),
                    params: {
                        key: this.report.ReportKey,
                        opt: JSON.stringify(opt),
                        ext: ext
                    },
                    target: target
                });
            };
            ReportDialog.prototype.getToolbarButtons = function () {
                var _this = this;
                return [
                    {
                        title: 'Preview',
                        cssClass: 'print-preview-button',
                        onClick: function () { return _this.executeReport('_blank', null, false); }
                    },
                    {
                        title: 'PDF',
                        cssClass: 'export-pdf-button',
                        onClick: function () { return _this.executeReport('_blank', 'pdf', true); }
                    },
                    {
                        title: 'Excel',
                        cssClass: 'export-xlsx-button',
                        onClick: function () { return _this.executeReport('_blank', 'xlsx', true); }
                    }
                ];
            };
            return ReportDialog;
        }(Serenity.TemplatedDialog));
        Common.ReportDialog = ReportDialog;
    })(Common = VistaGL.Common || (VistaGL.Common = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Common;
    (function (Common) {
        //export interface ReportButtonOptions extends ReportExecuteOptions {
        //    title?: string;
        //    cssClass?: string;
        //    icon?: string;
        //}
        var ReportHelper;
        (function (ReportHelper) {
            //export function createToolButton(options: ReportButtonOptions): Serenity.ToolButton {
            //    return {
            //        title: Q.coalesce(options.title, 'Report'),
            //        cssClass: Q.coalesce(options.cssClass, 'print-button'),
            //        icon: options.icon,
            //        onClick: () => {
            //            ReportHelper.execute(options);
            //        }
            //    };
            //}
            function execute(options) {
                var opt = options.getParams ? options.getParams() : options.params;
                Q.postToUrl({
                    url: '~/Report/' + (options.download ? 'Download' : 'Render'),
                    params: {
                        key: options.reportKey,
                        ext: Q.coalesce(options.extension, 'pdf'),
                        opt: opt ? $.toJSON(opt) : ''
                    },
                    target: Q.coalesce(options.target, '_blank')
                });
            }
            ReportHelper.execute = execute;
        })(ReportHelper = Common.ReportHelper || (Common.ReportHelper = {}));
    })(Common = VistaGL.Common || (VistaGL.Common = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Common;
    (function (Common) {
        var ReportPage = (function (_super) {
            __extends(ReportPage, _super);
            function ReportPage(element) {
                var _this = _super.call(this, element) || this;
                $('.report-link', element).click(function (e) { return _this.reportLinkClick(e); });
                $('div.line', element).click(function (e) { return _this.categoryClick(e); });
                new Serenity.QuickSearchInput($('.s-QuickSearchBar input', element), {
                    onSearch: function (field, text, done) {
                        _this.updateMatchFlags(text);
                        done(true);
                    }
                });
                return _this;
            }
            ReportPage.prototype.updateMatchFlags = function (text) {
                var liList = $('.report-list', this.element).find('li').removeClass('non-match');
                text = Q.trimToNull(text);
                if (!text) {
                    liList.children('ul').hide();
                    liList.show().removeClass('expanded');
                    return;
                }
                text = Select2.util.stripDiacritics(text).toUpperCase();
                var reportItems = liList.filter('.report-item');
                reportItems.each(function (ix, e) {
                    var x = $(e);
                    var title = Select2.util.stripDiacritics(Q.coalesce(x.text(), '').toUpperCase());
                    if (title.indexOf(text) < 0) {
                        x.addClass('non-match');
                    }
                });
                var matchingItems = reportItems.not('.non-match');
                var visibles = matchingItems.parents('li').add(matchingItems);
                var nonVisibles = liList.not(visibles);
                nonVisibles.hide().addClass('non-match');
                visibles.show();
                if (visibles.length <= 100) {
                    liList.children('ul').show();
                    liList.addClass('expanded');
                }
            };
            ReportPage.prototype.categoryClick = function (e) {
                var li = $(e.target).closest('li');
                if (li.hasClass('expanded')) {
                    li.find('ul').hide('fast');
                    li.removeClass('expanded');
                    li.find('li').removeClass('expanded');
                }
                else {
                    li.addClass('expanded');
                    li.children('ul').show('fast');
                    if (li.children('ul').children('li').length === 1 && !li.children('ul').children('li').hasClass('expanded')) {
                        li.children('ul').children('li').children('.line').click();
                    }
                }
            };
            ReportPage.prototype.reportLinkClick = function (e) {
                e.preventDefault();
                new Common.ReportDialog({
                    reportKey: $(e.target).data('key')
                }).dialogOpen();
            };
            return ReportPage;
        }(Serenity.Widget));
        Common.ReportPage = ReportPage;
    })(Common = VistaGL.Common || (VistaGL.Common = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Common;
    (function (Common) {
        var UserPreferenceStorage = (function () {
            function UserPreferenceStorage() {
            }
            UserPreferenceStorage.prototype.getItem = function (key) {
                var value;
                Common.UserPreferenceService.Retrieve({
                    PreferenceType: "UserPreferenceStorage",
                    Name: key
                }, function (response) { return value = response.Value; }, {
                    async: false
                });
                return value;
            };
            UserPreferenceStorage.prototype.setItem = function (key, data) {
                Common.UserPreferenceService.Update({
                    PreferenceType: "UserPreferenceStorage",
                    Name: key,
                    Value: data
                });
            };
            return UserPreferenceStorage;
        }());
        Common.UserPreferenceStorage = UserPreferenceStorage;
    })(Common = VistaGL.Common || (VistaGL.Common = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccAccountingPeriodInformationDialog = (function (_super) {
            __extends(AccAccountingPeriodInformationDialog, _super);
            function AccAccountingPeriodInformationDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Configurations.AccAccountingPeriodInformationForm(_this.idPrefix);
                _this.form.IsActive.changeSelect2(function (e) {
                    if (_this.form.IsActive.value) {
                        _this.form.IsClosed.value = false;
                    }
                });
                _this.form.IsClosed.changeSelect2(function (e) {
                    if (_this.form.IsClosed.value) {
                        _this.form.IsActive.value = false;
                    }
                });
                return _this;
            }
            AccAccountingPeriodInformationDialog.prototype.getFormKey = function () { return Configurations.AccAccountingPeriodInformationForm.formKey; };
            AccAccountingPeriodInformationDialog.prototype.getIdProperty = function () { return Configurations.AccAccountingPeriodInformationRow.idProperty; };
            AccAccountingPeriodInformationDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccAccountingPeriodInformationRow.localTextPrefix; };
            AccAccountingPeriodInformationDialog.prototype.getNameProperty = function () { return Configurations.AccAccountingPeriodInformationRow.nameProperty; };
            AccAccountingPeriodInformationDialog.prototype.getService = function () { return Configurations.AccAccountingPeriodInformationService.baseUrl; };
            AccAccountingPeriodInformationDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccAccountingPeriodInformationDialog);
            return AccAccountingPeriodInformationDialog;
        }(VistaGL.EntityDialogBase));
        Configurations.AccAccountingPeriodInformationDialog = AccAccountingPeriodInformationDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccAccountingPeriodInformationGrid = (function (_super) {
            __extends(AccAccountingPeriodInformationGrid, _super);
            function AccAccountingPeriodInformationGrid(container) {
                return _super.call(this, container) || this;
            }
            AccAccountingPeriodInformationGrid.prototype.getColumnsKey = function () { return 'Configurations.AccAccountingPeriodInformation'; };
            AccAccountingPeriodInformationGrid.prototype.getDialogType = function () { return Configurations.AccAccountingPeriodInformationDialog; };
            AccAccountingPeriodInformationGrid.prototype.getIdProperty = function () { return Configurations.AccAccountingPeriodInformationRow.idProperty; };
            AccAccountingPeriodInformationGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccAccountingPeriodInformationRow.localTextPrefix; };
            AccAccountingPeriodInformationGrid.prototype.getService = function () { return Configurations.AccAccountingPeriodInformationService.baseUrl; };
            AccAccountingPeriodInformationGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccAccountingPeriodInformationGrid);
            return AccAccountingPeriodInformationGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccAccountingPeriodInformationGrid = AccAccountingPeriodInformationGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccAdvanceDepositeReportDialog = (function (_super) {
            __extends(AccAdvanceDepositeReportDialog, _super);
            function AccAdvanceDepositeReportDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccAdvanceDepositeReportForm(_this.idPrefix);
                return _this;
            }
            AccAdvanceDepositeReportDialog.prototype.getFormKey = function () { return Configurations.AccAdvanceDepositeReportForm.formKey; };
            AccAdvanceDepositeReportDialog.prototype.getIdProperty = function () { return Configurations.AccAdvanceDepositeReportRow.idProperty; };
            AccAdvanceDepositeReportDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccAdvanceDepositeReportRow.localTextPrefix; };
            AccAdvanceDepositeReportDialog.prototype.getService = function () { return Configurations.AccAdvanceDepositeReportService.baseUrl; };
            AccAdvanceDepositeReportDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccAdvanceDepositeReportDialog);
            return AccAdvanceDepositeReportDialog;
        }(Serenity.EntityDialog));
        Configurations.AccAdvanceDepositeReportDialog = AccAdvanceDepositeReportDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccAdvanceDepositeReportGrid = (function (_super) {
            __extends(AccAdvanceDepositeReportGrid, _super);
            function AccAdvanceDepositeReportGrid(container) {
                return _super.call(this, container) || this;
            }
            AccAdvanceDepositeReportGrid.prototype.getColumnsKey = function () { return 'Configurations.AccAdvanceDepositeReport'; };
            AccAdvanceDepositeReportGrid.prototype.getDialogType = function () { return Configurations.AccAdvanceDepositeReportDialog; };
            AccAdvanceDepositeReportGrid.prototype.getIdProperty = function () { return Configurations.AccAdvanceDepositeReportRow.idProperty; };
            AccAdvanceDepositeReportGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccAdvanceDepositeReportRow.localTextPrefix; };
            AccAdvanceDepositeReportGrid.prototype.getService = function () { return Configurations.AccAdvanceDepositeReportService.baseUrl; };
            AccAdvanceDepositeReportGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccAdvanceDepositeReportGrid);
            return AccAdvanceDepositeReportGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccAdvanceDepositeReportGrid = AccAdvanceDepositeReportGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccArDoubtfulDebtsDialog = (function (_super) {
            __extends(AccArDoubtfulDebtsDialog, _super);
            function AccArDoubtfulDebtsDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccArDoubtfulDebtsForm(_this.idPrefix);
                return _this;
            }
            AccArDoubtfulDebtsDialog.prototype.getFormKey = function () { return Configurations.AccArDoubtfulDebtsForm.formKey; };
            AccArDoubtfulDebtsDialog.prototype.getIdProperty = function () { return Configurations.AccArDoubtfulDebtsRow.idProperty; };
            AccArDoubtfulDebtsDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccArDoubtfulDebtsRow.localTextPrefix; };
            AccArDoubtfulDebtsDialog.prototype.getService = function () { return Configurations.AccArDoubtfulDebtsService.baseUrl; };
            AccArDoubtfulDebtsDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccArDoubtfulDebtsDialog);
            return AccArDoubtfulDebtsDialog;
        }(Serenity.EntityDialog));
        Configurations.AccArDoubtfulDebtsDialog = AccArDoubtfulDebtsDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccArDoubtfulDebtsGrid = (function (_super) {
            __extends(AccArDoubtfulDebtsGrid, _super);
            function AccArDoubtfulDebtsGrid(container) {
                return _super.call(this, container) || this;
            }
            AccArDoubtfulDebtsGrid.prototype.getColumnsKey = function () { return 'Configurations.AccArDoubtfulDebts'; };
            AccArDoubtfulDebtsGrid.prototype.getDialogType = function () { return Configurations.AccArDoubtfulDebtsDialog; };
            AccArDoubtfulDebtsGrid.prototype.getIdProperty = function () { return Configurations.AccArDoubtfulDebtsRow.idProperty; };
            AccArDoubtfulDebtsGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccArDoubtfulDebtsRow.localTextPrefix; };
            AccArDoubtfulDebtsGrid.prototype.getService = function () { return Configurations.AccArDoubtfulDebtsService.baseUrl; };
            AccArDoubtfulDebtsGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccArDoubtfulDebtsGrid);
            return AccArDoubtfulDebtsGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccArDoubtfulDebtsGrid = AccArDoubtfulDebtsGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankAccountInformationDialog = (function (_super) {
            __extends(AccBankAccountInformationDialog, _super);
            function AccBankAccountInformationDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccBankAccountInformationForm(_this.idPrefix);
                return _this;
            }
            AccBankAccountInformationDialog.prototype.getFormKey = function () { return Configurations.AccBankAccountInformationForm.formKey; };
            AccBankAccountInformationDialog.prototype.getIdProperty = function () { return Configurations.AccBankAccountInformationRow.idProperty; };
            AccBankAccountInformationDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccBankAccountInformationRow.localTextPrefix; };
            AccBankAccountInformationDialog.prototype.getNameProperty = function () { return Configurations.AccBankAccountInformationRow.nameProperty; };
            AccBankAccountInformationDialog.prototype.getService = function () { return Configurations.AccBankAccountInformationService.baseUrl; };
            AccBankAccountInformationDialog.prototype.validateBeforeSave = function () {
                var _this = this;
                if (!this.validateForm())
                    return false;
                _super.prototype.validateBeforeSave.call(this);
                var isValid = true;
                if (this.isNew()) {
                    var data = Configurations.AccBankAccountInformationRow.getLookup().items
                        .filter(function (f) { return f.CoaId == +_this.form.CoaId.value; });
                    data.forEach(function (d) {
                        Q.alert("Sorry! Selected account head is already used for another bank-branch.");
                        isValid = false;
                    });
                }
                else {
                    var data = Configurations.AccBankAccountInformationRow.getLookup().items
                        .filter(function (f) { return f.CoaId == +_this.form.CoaId.value && f.Id != _this.form.Id.value; });
                    data.forEach(function (d) {
                        Q.alert("Sorry! Selected account head is already used for another bank-branch..");
                        isValid = false;
                    });
                }
                return isValid;
            };
            AccBankAccountInformationDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccBankAccountInformationDialog);
            return AccBankAccountInformationDialog;
        }(Serenity.EntityDialog));
        Configurations.AccBankAccountInformationDialog = AccBankAccountInformationDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankAccountInformationGrid = (function (_super) {
            __extends(AccBankAccountInformationGrid, _super);
            function AccBankAccountInformationGrid(container) {
                return _super.call(this, container) || this;
            }
            AccBankAccountInformationGrid.prototype.getColumnsKey = function () { return 'Configurations.AccBankAccountInformation'; };
            AccBankAccountInformationGrid.prototype.getDialogType = function () { return Configurations.AccBankAccountInformationDialog; };
            AccBankAccountInformationGrid.prototype.getIdProperty = function () { return Configurations.AccBankAccountInformationRow.idProperty; };
            AccBankAccountInformationGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccBankAccountInformationRow.localTextPrefix; };
            AccBankAccountInformationGrid.prototype.getService = function () { return Configurations.AccBankAccountInformationService.baseUrl; };
            AccBankAccountInformationGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBankAccountInformationGrid);
            return AccBankAccountInformationGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccBankAccountInformationGrid = AccBankAccountInformationGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankAdviceLetterTemplateDialog = (function (_super) {
            __extends(AccBankAdviceLetterTemplateDialog, _super);
            function AccBankAdviceLetterTemplateDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Configurations.AccBankAdviceLetterTemplateForm(_this.idPrefix);
                //var label = document.createElement('label');
                //label.appendChild(document.createTextNode('@@ChequeNo'));
                //$('.Subject').parentNode.insertBefore(label);
                var element = document.createElement("div");
                element.appendChild(document.createTextNode('@@ChequeNo'));
                $('.s-DialogToolbar')[0].appendChild(element);
                return _this;
            }
            AccBankAdviceLetterTemplateDialog.prototype.getFormKey = function () { return Configurations.AccBankAdviceLetterTemplateForm.formKey; };
            AccBankAdviceLetterTemplateDialog.prototype.getIdProperty = function () { return Configurations.AccBankAdviceLetterTemplateRow.idProperty; };
            AccBankAdviceLetterTemplateDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccBankAdviceLetterTemplateRow.localTextPrefix; };
            AccBankAdviceLetterTemplateDialog.prototype.getNameProperty = function () { return Configurations.AccBankAdviceLetterTemplateRow.nameProperty; };
            AccBankAdviceLetterTemplateDialog.prototype.getService = function () { return Configurations.AccBankAdviceLetterTemplateService.baseUrl; };
            AccBankAdviceLetterTemplateDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccBankAdviceLetterTemplateDialog);
            return AccBankAdviceLetterTemplateDialog;
        }(Serenity.EntityDialog));
        Configurations.AccBankAdviceLetterTemplateDialog = AccBankAdviceLetterTemplateDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankAdviceLetterTemplateGrid = (function (_super) {
            __extends(AccBankAdviceLetterTemplateGrid, _super);
            function AccBankAdviceLetterTemplateGrid(container) {
                return _super.call(this, container) || this;
            }
            AccBankAdviceLetterTemplateGrid.prototype.getColumnsKey = function () { return 'Configurations.AccBankAdviceLetterTemplate'; };
            AccBankAdviceLetterTemplateGrid.prototype.getDialogType = function () { return Configurations.AccBankAdviceLetterTemplateDialog; };
            AccBankAdviceLetterTemplateGrid.prototype.getIdProperty = function () { return Configurations.AccBankAdviceLetterTemplateRow.idProperty; };
            AccBankAdviceLetterTemplateGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccBankAdviceLetterTemplateRow.localTextPrefix; };
            AccBankAdviceLetterTemplateGrid.prototype.getService = function () { return Configurations.AccBankAdviceLetterTemplateService.baseUrl; };
            AccBankAdviceLetterTemplateGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBankAdviceLetterTemplateGrid);
            return AccBankAdviceLetterTemplateGrid;
        }(Serenity.EntityGrid));
        Configurations.AccBankAdviceLetterTemplateGrid = AccBankAdviceLetterTemplateGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankBranchInformationDialog = (function (_super) {
            __extends(AccBankBranchInformationDialog, _super);
            function AccBankBranchInformationDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccBankBranchInformationForm(_this.idPrefix);
                return _this;
            }
            AccBankBranchInformationDialog.prototype.getFormKey = function () { return Configurations.AccBankBranchInformationForm.formKey; };
            AccBankBranchInformationDialog.prototype.getIdProperty = function () { return Configurations.AccBankBranchInformationRow.idProperty; };
            AccBankBranchInformationDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccBankBranchInformationRow.localTextPrefix; };
            AccBankBranchInformationDialog.prototype.getNameProperty = function () { return Configurations.AccBankBranchInformationRow.nameProperty; };
            AccBankBranchInformationDialog.prototype.getService = function () { return Configurations.AccBankBranchInformationService.baseUrl; };
            AccBankBranchInformationDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccBankBranchInformationDialog);
            return AccBankBranchInformationDialog;
        }(VistaGL.EntityDialogBase));
        Configurations.AccBankBranchInformationDialog = AccBankBranchInformationDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankBranchInformationEditor = (function (_super) {
            __extends(AccBankBranchInformationEditor, _super);
            function AccBankBranchInformationEditor(container) {
                return _super.call(this, container) || this;
            }
            AccBankBranchInformationEditor.prototype.getColumnsKey = function () { return 'Configurations.AccBankBranchInformation'; };
            AccBankBranchInformationEditor.prototype.getDialogType = function () { return Configurations.AccBankBranchInformationEditorDialog; };
            AccBankBranchInformationEditor.prototype.getLocalTextPrefix = function () { return Configurations.AccBankBranchInformationRow.localTextPrefix; };
            AccBankBranchInformationEditor = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBankBranchInformationEditor);
            return AccBankBranchInformationEditor;
        }(VistaGL.GridEditorBase));
        Configurations.AccBankBranchInformationEditor = AccBankBranchInformationEditor;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankBranchInformationEditorDialog = (function (_super) {
            __extends(AccBankBranchInformationEditorDialog, _super);
            function AccBankBranchInformationEditorDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccBankBranchInformationForm(_this.idPrefix);
                return _this;
            }
            AccBankBranchInformationEditorDialog.prototype.getFormKey = function () { return Configurations.AccBankBranchInformationForm.formKey; };
            AccBankBranchInformationEditorDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccBankBranchInformationRow.localTextPrefix; };
            AccBankBranchInformationEditorDialog.prototype.getNameProperty = function () { return Configurations.AccBankBranchInformationRow.nameProperty; };
            AccBankBranchInformationEditorDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccBankBranchInformationEditorDialog);
            return AccBankBranchInformationEditorDialog;
        }(VistaGL.GridEditorDialog));
        Configurations.AccBankBranchInformationEditorDialog = AccBankBranchInformationEditorDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankBranchInformationGrid = (function (_super) {
            __extends(AccBankBranchInformationGrid, _super);
            function AccBankBranchInformationGrid(container) {
                return _super.call(this, container) || this;
            }
            AccBankBranchInformationGrid.prototype.getColumnsKey = function () { return 'Configurations.AccBankBranchInformation'; };
            AccBankBranchInformationGrid.prototype.getDialogType = function () { return Configurations.AccBankBranchInformationDialog; };
            AccBankBranchInformationGrid.prototype.getIdProperty = function () { return Configurations.AccBankBranchInformationRow.idProperty; };
            AccBankBranchInformationGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccBankBranchInformationRow.localTextPrefix; };
            AccBankBranchInformationGrid.prototype.getService = function () { return Configurations.AccBankBranchInformationService.baseUrl; };
            AccBankBranchInformationGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBankBranchInformationGrid);
            return AccBankBranchInformationGrid;
        }(Serenity.EntityGrid));
        Configurations.AccBankBranchInformationGrid = AccBankBranchInformationGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankInformationDialog = (function (_super) {
            __extends(AccBankInformationDialog, _super);
            function AccBankInformationDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccBankInformationForm(_this.idPrefix);
                return _this;
            }
            AccBankInformationDialog.prototype.getFormKey = function () { return Configurations.AccBankInformationForm.formKey; };
            AccBankInformationDialog.prototype.getIdProperty = function () { return Configurations.AccBankInformationRow.idProperty; };
            AccBankInformationDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccBankInformationRow.localTextPrefix; };
            AccBankInformationDialog.prototype.getNameProperty = function () { return Configurations.AccBankInformationRow.nameProperty; };
            AccBankInformationDialog.prototype.getService = function () { return Configurations.AccBankInformationService.baseUrl; };
            AccBankInformationDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccBankInformationDialog);
            return AccBankInformationDialog;
        }(VistaGL.EntityDialogBase));
        Configurations.AccBankInformationDialog = AccBankInformationDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBankInformationGrid = (function (_super) {
            __extends(AccBankInformationGrid, _super);
            function AccBankInformationGrid(container) {
                return _super.call(this, container) || this;
            }
            AccBankInformationGrid.prototype.getColumnsKey = function () { return 'Configurations.AccBankInformation'; };
            AccBankInformationGrid.prototype.getDialogType = function () { return Configurations.AccBankInformationDialog; };
            AccBankInformationGrid.prototype.getIdProperty = function () { return Configurations.AccBankInformationRow.idProperty; };
            AccBankInformationGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccBankInformationRow.localTextPrefix; };
            AccBankInformationGrid.prototype.getService = function () { return Configurations.AccBankInformationService.baseUrl; };
            AccBankInformationGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBankInformationGrid);
            return AccBankInformationGrid;
        }(VistaGL.EntityGridBaseNew));
        Configurations.AccBankInformationGrid = AccBankInformationGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBudgetGroupDialog = (function (_super) {
            __extends(AccBudgetGroupDialog, _super);
            function AccBudgetGroupDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccBudgetGroupForm(_this.idPrefix);
                return _this;
            }
            AccBudgetGroupDialog.prototype.getFormKey = function () { return Configurations.AccBudgetGroupForm.formKey; };
            AccBudgetGroupDialog.prototype.getIdProperty = function () { return Configurations.AccBudgetGroupRow.idProperty; };
            AccBudgetGroupDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccBudgetGroupRow.localTextPrefix; };
            AccBudgetGroupDialog.prototype.getNameProperty = function () { return Configurations.AccBudgetGroupRow.nameProperty; };
            AccBudgetGroupDialog.prototype.getService = function () { return Configurations.AccBudgetGroupService.baseUrl; };
            AccBudgetGroupDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccBudgetGroupDialog);
            return AccBudgetGroupDialog;
        }(Serenity.EntityDialog));
        Configurations.AccBudgetGroupDialog = AccBudgetGroupDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBudgetGroupGrid = (function (_super) {
            __extends(AccBudgetGroupGrid, _super);
            function AccBudgetGroupGrid(container) {
                var _this = _super.call(this, container) || this;
                var tree = new Serenity.TreeGridMixin({
                    grid: _this,
                    getParentId: function (x) { return x.ParentId; },
                    toggleField: "GroupName" /* GroupName */,
                    initialCollapse: function () { return false; }
                });
                return _this;
            }
            AccBudgetGroupGrid.prototype.getColumnsKey = function () { return 'Configurations.AccBudgetGroup'; };
            AccBudgetGroupGrid.prototype.getDialogType = function () { return Configurations.AccBudgetGroupDialog; };
            AccBudgetGroupGrid.prototype.getIdProperty = function () { return Configurations.AccBudgetGroupRow.idProperty; };
            AccBudgetGroupGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccBudgetGroupRow.localTextPrefix; };
            AccBudgetGroupGrid.prototype.getService = function () { return Configurations.AccBudgetGroupService.baseUrl; };
            AccBudgetGroupGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBudgetGroupGrid);
            return AccBudgetGroupGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccBudgetGroupGrid = AccBudgetGroupGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBudgetZoneApproverDialog = (function (_super) {
            __extends(AccBudgetZoneApproverDialog, _super);
            function AccBudgetZoneApproverDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccBudgetZoneApproverForm(_this.idPrefix);
                return _this;
            }
            AccBudgetZoneApproverDialog.prototype.getFormKey = function () { return Configurations.AccBudgetZoneApproverForm.formKey; };
            AccBudgetZoneApproverDialog.prototype.getIdProperty = function () { return Configurations.AccBudgetZoneApproverRow.idProperty; };
            AccBudgetZoneApproverDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccBudgetZoneApproverRow.localTextPrefix; };
            AccBudgetZoneApproverDialog.prototype.getService = function () { return Configurations.AccBudgetZoneApproverService.baseUrl; };
            AccBudgetZoneApproverDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBudgetZoneApproverDialog);
            return AccBudgetZoneApproverDialog;
        }(Serenity.EntityDialog));
        Configurations.AccBudgetZoneApproverDialog = AccBudgetZoneApproverDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccBudgetZoneApproverGrid = (function (_super) {
            __extends(AccBudgetZoneApproverGrid, _super);
            function AccBudgetZoneApproverGrid(container) {
                return _super.call(this, container) || this;
            }
            AccBudgetZoneApproverGrid.prototype.getColumnsKey = function () { return 'Configurations.AccBudgetZoneApprover'; };
            AccBudgetZoneApproverGrid.prototype.getDialogType = function () { return Configurations.AccBudgetZoneApproverDialog; };
            AccBudgetZoneApproverGrid.prototype.getIdProperty = function () { return Configurations.AccBudgetZoneApproverRow.idProperty; };
            AccBudgetZoneApproverGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccBudgetZoneApproverRow.localTextPrefix; };
            AccBudgetZoneApproverGrid.prototype.getService = function () { return Configurations.AccBudgetZoneApproverService.baseUrl; };
            AccBudgetZoneApproverGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBudgetZoneApproverGrid);
            return AccBudgetZoneApproverGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccBudgetZoneApproverGrid = AccBudgetZoneApproverGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCashFlowAdvTaxReportDialog = (function (_super) {
            __extends(AccCashFlowAdvTaxReportDialog, _super);
            function AccCashFlowAdvTaxReportDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccCashFlowAdvTaxReportForm(_this.idPrefix);
                return _this;
            }
            AccCashFlowAdvTaxReportDialog.prototype.getFormKey = function () { return Configurations.AccCashFlowAdvTaxReportForm.formKey; };
            AccCashFlowAdvTaxReportDialog.prototype.getIdProperty = function () { return Configurations.AccCashFlowAdvTaxReportRow.idProperty; };
            AccCashFlowAdvTaxReportDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccCashFlowAdvTaxReportRow.localTextPrefix; };
            AccCashFlowAdvTaxReportDialog.prototype.getService = function () { return Configurations.AccCashFlowAdvTaxReportService.baseUrl; };
            AccCashFlowAdvTaxReportDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccCashFlowAdvTaxReportDialog);
            return AccCashFlowAdvTaxReportDialog;
        }(Serenity.EntityDialog));
        Configurations.AccCashFlowAdvTaxReportDialog = AccCashFlowAdvTaxReportDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCashFlowAdvTaxReportGrid = (function (_super) {
            __extends(AccCashFlowAdvTaxReportGrid, _super);
            function AccCashFlowAdvTaxReportGrid(container) {
                return _super.call(this, container) || this;
            }
            AccCashFlowAdvTaxReportGrid.prototype.getColumnsKey = function () { return 'Configurations.AccCashFlowAdvTaxReport'; };
            AccCashFlowAdvTaxReportGrid.prototype.getDialogType = function () { return Configurations.AccCashFlowAdvTaxReportDialog; };
            AccCashFlowAdvTaxReportGrid.prototype.getIdProperty = function () { return Configurations.AccCashFlowAdvTaxReportRow.idProperty; };
            AccCashFlowAdvTaxReportGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccCashFlowAdvTaxReportRow.localTextPrefix; };
            AccCashFlowAdvTaxReportGrid.prototype.getService = function () { return Configurations.AccCashFlowAdvTaxReportService.baseUrl; };
            AccCashFlowAdvTaxReportGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccCashFlowAdvTaxReportGrid);
            return AccCashFlowAdvTaxReportGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccCashFlowAdvTaxReportGrid = AccCashFlowAdvTaxReportGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccChartofAccountsDialog = (function (_super) {
            __extends(AccChartofAccountsDialog, _super);
            function AccChartofAccountsDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.isGroup = false;
                _this.form = new Configurations.AccChartofAccountsForm(_this.idPrefix);
                return _this;
            }
            AccChartofAccountsDialog.prototype.getFormKey = function () { return Configurations.AccChartofAccountsForm.formKey; };
            AccChartofAccountsDialog.prototype.getIdProperty = function () { return Configurations.AccChartofAccountsRow.idProperty; };
            AccChartofAccountsDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccChartofAccountsRow.localTextPrefix; };
            AccChartofAccountsDialog.prototype.getNameProperty = function () { return Configurations.AccChartofAccountsRow.nameProperty; };
            AccChartofAccountsDialog.prototype.getService = function () { return Configurations.AccChartofAccountsService.baseUrl; };
            AccChartofAccountsDialog.prototype.onDialogOpen = function () {
                var _this = this;
                _super.prototype.onDialogOpen.call(this);
                this.form.NoaAccTypeId2.element.hide();
                this.items_ChartofAccounts = Q.getLookup('Configurations.AccChartofAccounts_Lookup').items;
                Serenity.EditorUtils.setReadonly(this.element.find(this.form.IsControlhead.element), true);
                if (this.isNew()) {
                    this.form.IsControlhead.value = this.isGroup;
                    var items = this.items_ChartofAccounts.filter(function (f) { return f.IsControlhead == 1 && f.Level > 0; });
                }
                else {
                    if (this.form.Level.value == 0 || this.form.Level.value == 1) {
                        this.toolbar.findButton('delete-button').toggleClass('disabled');
                        var items = this.items_ChartofAccounts.filter(function (f) { return f.IsControlhead == 1 && f.Level < 1; });
                    }
                    else
                        var items = this.items_ChartofAccounts.filter(function (f) { return f.IsControlhead == 1 && f.Level > 0; });
                    if (this.entity.iSCoAUsed > 0) {
                        Serenity.EditorUtils.setReadonly(this.element.find(this.form.IsControlhead.element), true);
                    }
                }
                if (this.form.IsControlhead.value) {
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.AccOpeningBalance.element), true);
                }
                this.form.ParentAccountId.clearItems();
                for (var _i = 0, items_5 = items; _i < items_5.length; _i++) {
                    var item = items_5[_i];
                    this.form.ParentAccountId.addItem({ id: item.Id.toString(), text: item.AccountName, source: null, disabled: false });
                }
                this.form.FundControlId.value = VistaGL.Authorization.userDefinition.FundControlInformationId.toString();
                this.form.AccountName.element.focus();
                this.form.ParentAccountId.changeSelect2(function (p) {
                    var _items = _this.items_ChartofAccounts.filter(function (p) { return p.ParentAccountId == +_this.form.ParentAccountId.value; });
                    var max_ = Math.max.apply(Math, _items.map(function (o) { return o.AccountCodeCount; }));
                    if (max_.toString() == "NaN" || max_.toString() == "-Infinity")
                        max_ = 1;
                    else
                        max_++;
                    var _pitems = _this.items_ChartofAccounts.filter(function (p) { return p.Id == +_this.form.ParentAccountId.value; });
                    _this.form.AccountGroup.value = _pitems[0].AccountGroup;
                    _this.form.AccountCode.value = _pitems[0].AccountCode + "." + max_;
                    _this.form.AccountCodeCount.value = max_;
                    _this.form.Level.value = _pitems[0].Level + 1;
                });
            };
            AccChartofAccountsDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccChartofAccountsDialog);
            return AccChartofAccountsDialog;
        }(VistaGL.EntityDialogBase));
        Configurations.AccChartofAccountsDialog = AccChartofAccountsDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccChartofAccountsGrid = (function (_super) {
            __extends(AccChartofAccountsGrid, _super);
            function AccChartofAccountsGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.setTitle("Chart of Accounts (Ledger)");
                var tree = new Serenity.TreeGridMixin({
                    grid: _this,
                    getParentId: function (x) { return x.ParentAccountId; },
                    toggleField: "AccountName" /* AccountName */,
                    initialCollapse: function () { return false; }
                });
                return _this;
            }
            AccChartofAccountsGrid.prototype.getColumnsKey = function () { return 'Configurations.AccChartofAccounts'; };
            AccChartofAccountsGrid.prototype.getDialogType = function () { return Configurations.AccChartofAccountsDialog; };
            AccChartofAccountsGrid.prototype.getIdProperty = function () { return Configurations.AccChartofAccountsRow.idProperty; };
            AccChartofAccountsGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccChartofAccountsRow.localTextPrefix; };
            AccChartofAccountsGrid.prototype.getService = function () { return Configurations.AccChartofAccountsService.baseUrl; };
            AccChartofAccountsGrid.prototype.createSlickGrid = function () {
                var grid = _super.prototype.createSlickGrid.call(this);
                grid.registerPlugin(new Slick.Data.GroupItemMetadataProvider);
                return grid;
            };
            AccChartofAccountsGrid.prototype.subDialogDataChange = function () {
                _super.prototype.subDialogDataChange.call(this);
                Q.reloadLookup(Configurations.AccChartofAccountsRow.lookupKey);
            };
            AccChartofAccountsGrid.prototype.usePager = function () {
                return true;
            };
            AccChartofAccountsGrid.prototype.getViewOptions = function () {
                var opt = _super.prototype.getViewOptions.call(this);
                opt.rowsPerPage = 500;
                return opt;
            };
            AccChartofAccountsGrid.prototype.getColumns = function () {
                var columns = _super.prototype.getColumns.call(this);
                columns.splice(Q.indexOf(columns, function (x) { return x.name == "Account Head"; }) + 1, 0, {
                    field: 'Add Posting Head',
                    name: '',
                    format: function (ctx) { return '<a class="inline-action add-child-unit" title="add posting head"></a>'; },
                    width: 24,
                    minWidth: 24,
                    maxWidth: 24
                });
                Q.first(columns, function (x) { return x.field == "AccountName" /* AccountName */; }).cssClass += " col-account-head";
                return columns;
            };
            AccChartofAccountsGrid.prototype.onClick = function (e, row, cell) {
                _super.prototype.onClick.call(this, e, row, cell);
                if (e.isDefaultPrevented())
                    return;
                var item = this.itemAt(row);
                var target = $(e.target);
                if (target.parent().hasClass('inline-action'))
                    target = target.parent();
                if (target.hasClass('inline-action')) {
                    e.preventDefault();
                    if (target.hasClass('add-child-unit')) {
                        if (item.IsControlhead == 1 && item.AccountGroup != "Root") {
                            var _items = this.getItems().filter(function (p) { return p.ParentAccountId == item.Id; });
                            var max_ = Math.max.apply(Math, _items.map(function (o) { return o.AccountCodeCount; }));
                            if (max_.toString() == "NaN" || max_.toString() == "-Infinity")
                                max_ = 1;
                            else
                                max_++;
                            var dlg = new Configurations.AccChartofAccountsDialog();
                            this.initDialog(dlg);
                            dlg.loadEntityAndOpenDialog({
                                ParentAccountId: item.Id,
                                FundControlId: item.FundControlId,
                                AccountGroup: item.AccountGroup,
                                AccountCode: item.AccountCode,
                                AccountCodeCount: max_,
                                Level: item.Level + 1
                                //, AccountCodeClient: item.AccountCode + "." + max_
                            });
                        }
                        else {
                            Q.warning("it's not Control head");
                        }
                    }
                }
            };
            AccChartofAccountsGrid.prototype.getButtons = function () {
                var _this = this;
                var b = _super.prototype.getButtons.call(this);
                b.push({
                    title: 'Group By Account Group',
                    cssClass: 'expand-all-button',
                    onClick: function () { return _this.view.setGrouping([
                        {
                            getter: 'AccountGroup'
                        }
                    ]); }
                });
                b.push({
                    title: 'No Grouping',
                    cssClass: 'collapse-all-button',
                    onClick: function () { return _this.view.setGrouping([]); }
                });
                return b;
            };
            AccChartofAccountsGrid.prototype.getQuickSearchFields = function () {
                var txt = function (s) { return Q.text("Db." + Configurations.AccChartofAccountsRow.localTextPrefix + "." + s).toLowerCase(); };
                return [
                    { name: "", title: "all" },
                    { name: "UserCode" /* UserCode */, title: txt("UserCode" /* UserCode */) },
                    { name: "AccountGroup" /* AccountGroup */, title: txt("AccountGroup" /* AccountGroup */) },
                    { name: "AccountName" /* AccountName */, title: txt("AccountName" /* AccountName */) },
                    { name: "ParentAccountAccountName" /* ParentAccountAccountName */, title: txt("ParentAccountAccountName" /* ParentAccountAccountName */) }
                ];
            };
            AccChartofAccountsGrid.prototype.getItemCssClass = function (item, index) {
                var klass = "";
                if (item.IsControlhead) {
                    klass += " control-head";
                }
                return Q.trimToNull(klass);
            };
            AccChartofAccountsGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccChartofAccountsGrid);
            return AccChartofAccountsGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccChartofAccountsGrid = AccChartofAccountsGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccChartofAccountsGroupGrid = (function (_super) {
            __extends(AccChartofAccountsGroupGrid, _super);
            function AccChartofAccountsGroupGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.setTitle("Chart of Accounts Group");
                new Serenity.TreeGridMixin({
                    grid: _this,
                    getParentId: function (x) { return x.ParentAccountId; },
                    toggleField: "AccountName" /* AccountName */,
                    initialCollapse: function () { return false; }
                });
                return _this;
            }
            AccChartofAccountsGroupGrid.prototype.getColumnsKey = function () { return 'Configurations.AccChartofAccounts'; };
            AccChartofAccountsGroupGrid.prototype.getDialogType = function () { return Configurations.AccChartofAccountsDialog; };
            AccChartofAccountsGroupGrid.prototype.getIdProperty = function () { return Configurations.AccChartofAccountsRow.idProperty; };
            AccChartofAccountsGroupGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccChartofAccountsRow.localTextPrefix; };
            AccChartofAccountsGroupGrid.prototype.getService = function () { return Configurations.AccChartofAccountsService.baseUrl; };
            AccChartofAccountsGroupGrid.prototype.subDialogDataChange = function () {
                _super.prototype.subDialogDataChange.call(this);
                Q.reloadLookup(Configurations.AccChartofAccountsRow.lookupKey);
            };
            AccChartofAccountsGroupGrid.prototype.usePager = function () {
                return false;
            };
            AccChartofAccountsGroupGrid.prototype.getColumns = function () {
                var columns = _super.prototype.getColumns.call(this);
                columns.splice(Q.indexOf(columns, function (x) { return x.name == "Account Head"; }) + 1, 0, {
                    field: 'Add Child',
                    name: '',
                    format: function (ctx) { return '<a class="inline-action add-child-unit" title="add child"></a>'; },
                    width: 24,
                    minWidth: 24,
                    maxWidth: 24
                });
                //columns.splice(Q.indexOf(columns, x => x.name == AccChartofAccountsRow.Fields.AccountName) + 1, 0, {
                //    field: 'Add Child Unit',
                //    name: '',
                //    format: ctx => '<a class="inline-action add-child-unit" title="add child unit"></a>',
                //    width: 24,
                //    minWidth: 24,
                //    maxWidth: 24
                //});
                return columns;
            };
            AccChartofAccountsGroupGrid.prototype.addButtonClick = function () {
                //this.editItem(<AccChartofAccountsRow>{
                //    IsControlhead: true
                //});
                var dlg = new Configurations.AccChartofAccountsDialog();
                this.initDialog(dlg);
                dlg.isGroup = true;
                dlg.loadEntityAndOpenDialog({});
            };
            AccChartofAccountsGroupGrid.prototype.onClick = function (e, row, cell) {
                _super.prototype.onClick.call(this, e, row, cell);
                if (e.isDefaultPrevented())
                    return;
                var item = this.itemAt(row);
                var target = $(e.target);
                if (target.parent().hasClass('inline-action'))
                    target = target.parent();
                if (target.hasClass('inline-action')) {
                    e.preventDefault();
                    if (target.hasClass('add-child-unit')) {
                        if (item.IsControlhead == 1 && item.AccountGroup != "Root") {
                            var _items = this.getItems().filter(function (p) { return p.ParentAccountId == item.Id; });
                            var max_ = Math.max.apply(Math, _items.map(function (o) { return o.AccountCodeCount; }));
                            if (max_.toString() == "NaN" || max_.toString() == "-Infinity")
                                max_ = 1;
                            else
                                max_++;
                            var dlg = new Configurations.AccChartofAccountsDialog();
                            this.initDialog(dlg);
                            dlg.isGroup = true;
                            dlg.loadEntityAndOpenDialog({
                                ParentAccountId: item.Id,
                                FundControlId: item.FundControlId,
                                AccountGroup: item.AccountGroup,
                                AccountCode: item.AccountCode,
                                AccountCodeCount: max_, Level: item.Level + 1
                                //,                            AccountCodeClient: item.AccountCode + "." + max_
                            });
                        }
                        else {
                            Q.alert("it's not Controlhead");
                        }
                    }
                }
            };
            AccChartofAccountsGroupGrid.prototype.onViewSubmit = function () {
                // only continue if base class returns true (didn't cancel request)
                if (!_super.prototype.onViewSubmit.call(this)) {
                    return false;
                }
                // view object is the data source for grid (SlickRemoteView)
                // this is an EntityGrid so its Params object is a ListRequest
                var request = this.view.params;
                // list request has a Criteria parameter
                // we AND criteria here to existing one because
                // otherwise we might clear filter set by
                // an edit filter dialog if any.
                request.Criteria = Serenity.Criteria.and(request.Criteria, [['IsControlhead'], '=', 1]);
                // TypeScript doesn't support operator overloading
                // so we had to use array syntax above to build criteria.
                // Make sure you write
                // [['Field'], '>', 10] (which means field A is greater than 10)
                // not
                // ['A', '>', 10] (which means string 'A' is greater than 10
                return true;
            };
            AccChartofAccountsGroupGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccChartofAccountsGroupGrid);
            return AccChartofAccountsGroupGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccChartofAccountsGroupGrid = AccChartofAccountsGroupGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var CoAEditor = (function (_super) {
            __extends(CoAEditor, _super);
            function CoAEditor(container) {
                var _this = _super.call(this, container) || this;
                _this.DebitItems = [];
                _this.searchDebitInput = document.createElement('input');
                _this.searchDebitInput.type = 'text';
                _this.searchDebitInput.id = 'searchDebitInput';
                _this.searchDebitInput.style.width = '100%';
                // this.searchDebitInput.style.cssFloat = 'left';
                _this.jsTreeDebitDiv = document.createElement('div');
                //
                _this.jsTreeDebitDiv.id = 'jsTreeDebitDiv';
                //this.element.append(this.searchDebitInput);
                _this.element.append(_this.jsTreeDebitDiv);
                return _this;
            }
            CoAEditor.prototype.getEditValue = function (property, target) {
                target[property.name] = this.value;
            };
            CoAEditor.prototype.setEditValue = function (source, property) {
                this.value = source[property.name];
            };
            Object.defineProperty(CoAEditor.prototype, "value", {
                get: function () {
                    this.DebitItems = [];
                    //var b: AccTransactionTypeAssignRow;
                    //b = {};
                    //b.TrType = "ZZZ";
                    //this.DebitItems.push(b);
                    //    this.DebitItems.forEach(f => f.Level = 1);
                    var apps_me;
                    apps_me = Q.getLookup('Configurations.AccChartofAccounts_Lookup').items;
                    var selectedNodes = $('#jsTreeDebitDiv').jstree().get_checked(true);
                    //   var menuPermissionNodesOnly = selectedNodes.filter(f => f.id.startsWith('menuPermission_'));
                    for (var i = 0; i < selectedNodes.length; i++) {
                        var menuPermission = selectedNodes[i].data;
                        //   var DebitItems = this.DebitItems.filter(f => f.CoaId == menuPermission.Id)
                        //  if (DebitItems.length == 0) {
                        //  var isSelectedDebit = apps_me.filter(f => f.Id == menuPermission.Id && f.IsControlhead == 0).length > 0;
                        if (menuPermission.IsControlhead == 0) {
                            this.DebitItems.push({ CoaId: menuPermission.Id, TrType: menuPermission.iSCoAUsed, ParentId: this.TransactionTypeID });
                        }
                        //  }
                        //else if (DebitItems.length == 1) {
                        //    DebitItems[0].Granted = true;
                        //}
                        //else {
                        //    Q.alert('Invalid Data.');
                        //}
                    }
                    return this.DebitItems;
                },
                set: function (value) {
                    value = value || [];
                    this.DebitItems = value;
                    Q.reloadLookup('Configurations.AccChartofAccounts_Lookup');
                    var apps_me;
                    apps_me = Q.getLookup('Configurations.AccChartofAccounts_Lookup').items;
                    var apps;
                    apps = Configurations.AccChartofAccountsRow.getLookup().items;
                    //  Configurations.AccChartofAccountsRow.getLookup().items;
                    //var modules = ModuleRow.getLookup().items;
                    //var menus = MenuRow.getLookup().items;
                    //var menuPermissions = MenuPermissionRow.getLookup().items;
                    var treeData_Debit = [];
                    //Module
                    var appModules = apps; //.filter(f => f.ApplicationId == app.Id);
                    for (var _i = 0, appModules_1 = appModules; _i < appModules_1.length; _i++) {
                        var module = appModules_1[_i];
                        var moduleTreeId = 'debit_' + module.Id;
                        var CreditmoduleTreeId = 'credit_' + module.Id;
                        var moduleParentAccountId = "";
                        var isSelectedDebit = false;
                        isSelectedDebit = apps_me.filter(function (f) { return f.Id == module.Id && f.IsControlhead == 0; }).length > 0;
                        if (isSelectedDebit) {
                            module.iSCoAUsed = 1;
                        }
                        if (module.ParentAccountId != undefined) {
                            moduleParentAccountId = 'debit_' + module.ParentAccountId;
                            treeData_Debit.push({
                                id: moduleTreeId,
                                parent: moduleParentAccountId,
                                text: module.AccountName,
                                icon: false, state: { opened: false, selected: isSelectedDebit },
                                data: module
                            });
                        }
                        else {
                            treeData_Debit.push({
                                id: moduleTreeId,
                                text: module.AccountName,
                                parent: "#",
                                icon: false, state: { opened: false }, data: module
                            });
                        }
                    }
                    //  }
                    //    $('#searchDebitInput').keyup( (e) => {
                    //        var searchDebitString = (e.currentTarget as HTMLInputElement).value;
                    //        $('#jsTreeDebitDiv').jstree('search', searchDebitString);
                    //});
                    //$('#searchCreditInput').keyup((e) => {
                    //    var searchCreditString = (e.currentTarget as HTMLInputElement).value;
                    //    $('#jsTreeCreditDiv').jstree('search', searchCreditString);
                    //});
                    $('#jsTreeDebitDiv').jstree({
                        plugins: ['checkbox', "search"],
                        core: {
                            data: treeData_Debit
                        },
                    });
                },
                enumerable: true,
                configurable: true
            });
            CoAEditor = __decorate([
                Serenity.Decorators.registerClass([Serenity.IGetEditValue, Serenity.ISetEditValue]),
                Serenity.Decorators.editor(),
                Serenity.Decorators.element("<div/>")
            ], CoAEditor);
            return CoAEditor;
        }(Serenity.Widget));
        Configurations.CoAEditor = CoAEditor;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var ImportCoADialog = (function (_super) {
            __extends(ImportCoADialog, _super);
            function ImportCoADialog() {
                var _this = _super.call(this) || this;
                _this.form = new Configurations.ImportCoAForm(_this.idPrefix);
                Q.reloadLookup('Configurations.AccChartofAccounts_Lookup');
                _this.dialogTitle = "Please select Entity";
                return _this;
                //Authorization.userDefinition.FundControlInformationId
                //   this.form.FundControlInformationId.value = Authorization.userDefinition.FundControlInformationId.toString();
            }
            ImportCoADialog.prototype.getFormKey = function () { return Configurations.ImportCoAForm.formKey; };
            //  protected getFormKey() { return AccFundControlInformationForm.formKey; }
            ImportCoADialog.prototype.getIdProperty = function () { return Configurations.AccFundControlInformationRow.idProperty; };
            ImportCoADialog.prototype.getLocalTextPrefix = function () { return Configurations.AccFundControlInformationRow.localTextPrefix; };
            ImportCoADialog.prototype.getNameProperty = function () { return Configurations.AccFundControlInformationRow.nameProperty; };
            ImportCoADialog.prototype.getService = function () { return Configurations.AccFundControlInformationService.baseUrl; };
            ImportCoADialog.prototype.getToolbarButtons = function () {
                var _this = this;
                var buttons = [];
                buttons.push({
                    title: 'Import',
                    onClick: function () {
                        Configurations.AccChartofAccountsService.SaveCoAList({ List: _this.form.CoADebit.value }, function (response) {
                            Q.reloadLookup('Configurations.AccChartofAccounts_Lookup');
                            Q.notifySuccess('Save Success');
                        });
                    }
                });
                return buttons;
            };
            ImportCoADialog = __decorate([
                Serenity.Decorators.registerClass()
            ], ImportCoADialog);
            return ImportCoADialog;
        }(Serenity.EntityDialog));
        Configurations.ImportCoADialog = ImportCoADialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCoACostCenterOpeningBalanceDialog = (function (_super) {
            __extends(AccCoACostCenterOpeningBalanceDialog, _super);
            function AccCoACostCenterOpeningBalanceDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccCoACostCenterOpeningBalanceForm(_this.idPrefix);
                return _this;
            }
            AccCoACostCenterOpeningBalanceDialog.prototype.getFormKey = function () { return Configurations.AccCoACostCenterOpeningBalanceForm.formKey; };
            AccCoACostCenterOpeningBalanceDialog.prototype.getIdProperty = function () { return Configurations.AccCoACostCenterOpeningBalanceRow.idProperty; };
            AccCoACostCenterOpeningBalanceDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccCoACostCenterOpeningBalanceRow.localTextPrefix; };
            AccCoACostCenterOpeningBalanceDialog.prototype.getService = function () { return Configurations.AccCoACostCenterOpeningBalanceService.baseUrl; };
            AccCoACostCenterOpeningBalanceDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccCoACostCenterOpeningBalanceDialog);
            return AccCoACostCenterOpeningBalanceDialog;
        }(Serenity.EntityDialog));
        Configurations.AccCoACostCenterOpeningBalanceDialog = AccCoACostCenterOpeningBalanceDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCoACostCenterOpeningBalanceGrid = (function (_super) {
            __extends(AccCoACostCenterOpeningBalanceGrid, _super);
            function AccCoACostCenterOpeningBalanceGrid(container) {
                return _super.call(this, container) || this;
            }
            AccCoACostCenterOpeningBalanceGrid.prototype.getColumnsKey = function () { return 'Configurations.AccCoACostCenterOpeningBalance'; };
            AccCoACostCenterOpeningBalanceGrid.prototype.getDialogType = function () { return Configurations.AccCoACostCenterOpeningBalanceDialog; };
            AccCoACostCenterOpeningBalanceGrid.prototype.getIdProperty = function () { return Configurations.AccCoACostCenterOpeningBalanceRow.idProperty; };
            AccCoACostCenterOpeningBalanceGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccCoACostCenterOpeningBalanceRow.localTextPrefix; };
            AccCoACostCenterOpeningBalanceGrid.prototype.getService = function () { return Configurations.AccCoACostCenterOpeningBalanceService.baseUrl; };
            AccCoACostCenterOpeningBalanceGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccCoACostCenterOpeningBalanceGrid);
            return AccCoACostCenterOpeningBalanceGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccCoACostCenterOpeningBalanceGrid = AccCoACostCenterOpeningBalanceGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCommonDescriptionDialog = (function (_super) {
            __extends(AccCommonDescriptionDialog, _super);
            function AccCommonDescriptionDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccCommonDescriptionForm(_this.idPrefix);
                return _this;
            }
            AccCommonDescriptionDialog.prototype.getFormKey = function () { return Configurations.AccCommonDescriptionForm.formKey; };
            AccCommonDescriptionDialog.prototype.getIdProperty = function () { return Configurations.AccCommonDescriptionRow.idProperty; };
            AccCommonDescriptionDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccCommonDescriptionRow.localTextPrefix; };
            AccCommonDescriptionDialog.prototype.getNameProperty = function () { return Configurations.AccCommonDescriptionRow.nameProperty; };
            AccCommonDescriptionDialog.prototype.getService = function () { return Configurations.AccCommonDescriptionService.baseUrl; };
            AccCommonDescriptionDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccCommonDescriptionDialog);
            return AccCommonDescriptionDialog;
        }(VistaGL.EntityDialogBase));
        Configurations.AccCommonDescriptionDialog = AccCommonDescriptionDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCommonDescriptionGrid = (function (_super) {
            __extends(AccCommonDescriptionGrid, _super);
            function AccCommonDescriptionGrid(container) {
                return _super.call(this, container) || this;
            }
            AccCommonDescriptionGrid.prototype.getColumnsKey = function () { return 'Configurations.AccCommonDescription'; };
            AccCommonDescriptionGrid.prototype.getDialogType = function () { return Configurations.AccCommonDescriptionDialog; };
            AccCommonDescriptionGrid.prototype.getIdProperty = function () { return Configurations.AccCommonDescriptionRow.idProperty; };
            AccCommonDescriptionGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccCommonDescriptionRow.localTextPrefix; };
            AccCommonDescriptionGrid.prototype.getService = function () { return Configurations.AccCommonDescriptionService.baseUrl; };
            AccCommonDescriptionGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccCommonDescriptionGrid);
            return AccCommonDescriptionGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccCommonDescriptionGrid = AccCommonDescriptionGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCostCenterTypeDialog = (function (_super) {
            __extends(AccCostCenterTypeDialog, _super);
            function AccCostCenterTypeDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccCostCenterTypeForm(_this.idPrefix);
                return _this;
            }
            AccCostCenterTypeDialog.prototype.getFormKey = function () { return Configurations.AccCostCenterTypeForm.formKey; };
            AccCostCenterTypeDialog.prototype.getIdProperty = function () { return Configurations.AccCostCenterTypeRow.idProperty; };
            AccCostCenterTypeDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccCostCenterTypeRow.localTextPrefix; };
            AccCostCenterTypeDialog.prototype.getNameProperty = function () { return Configurations.AccCostCenterTypeRow.nameProperty; };
            AccCostCenterTypeDialog.prototype.getService = function () { return Configurations.AccCostCenterTypeService.baseUrl; };
            AccCostCenterTypeDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccCostCenterTypeDialog);
            return AccCostCenterTypeDialog;
        }(VistaGL.EntityDialogBase));
        Configurations.AccCostCenterTypeDialog = AccCostCenterTypeDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCostCenterTypeGrid = (function (_super) {
            __extends(AccCostCenterTypeGrid, _super);
            function AccCostCenterTypeGrid(container) {
                return _super.call(this, container) || this;
            }
            AccCostCenterTypeGrid.prototype.getColumnsKey = function () { return 'Configurations.AccCostCenterType'; };
            AccCostCenterTypeGrid.prototype.getDialogType = function () { return Configurations.AccCostCenterTypeDialog; };
            AccCostCenterTypeGrid.prototype.getIdProperty = function () { return Configurations.AccCostCenterTypeRow.idProperty; };
            AccCostCenterTypeGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccCostCenterTypeRow.localTextPrefix; };
            AccCostCenterTypeGrid.prototype.getService = function () { return Configurations.AccCostCenterTypeService.baseUrl; };
            AccCostCenterTypeGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccCostCenterTypeGrid);
            return AccCostCenterTypeGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccCostCenterTypeGrid = AccCostCenterTypeGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCostCentreDepreciationOpeningBalanceDialog = (function (_super) {
            __extends(AccCostCentreDepreciationOpeningBalanceDialog, _super);
            function AccCostCentreDepreciationOpeningBalanceDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccCostCentreDepreciationOpeningBalanceForm(_this.idPrefix);
                return _this;
            }
            AccCostCentreDepreciationOpeningBalanceDialog.prototype.getFormKey = function () { return Configurations.AccCostCentreDepreciationOpeningBalanceForm.formKey; };
            AccCostCentreDepreciationOpeningBalanceDialog.prototype.getIdProperty = function () { return Configurations.AccCostCentreDepreciationOpeningBalanceRow.idProperty; };
            AccCostCentreDepreciationOpeningBalanceDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccCostCentreDepreciationOpeningBalanceRow.localTextPrefix; };
            AccCostCentreDepreciationOpeningBalanceDialog.prototype.getService = function () { return Configurations.AccCostCentreDepreciationOpeningBalanceService.baseUrl; };
            AccCostCentreDepreciationOpeningBalanceDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccCostCentreDepreciationOpeningBalanceDialog);
            return AccCostCentreDepreciationOpeningBalanceDialog;
        }(Serenity.EntityDialog));
        Configurations.AccCostCentreDepreciationOpeningBalanceDialog = AccCostCentreDepreciationOpeningBalanceDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCostCentreDepreciationOpeningBalanceGrid = (function (_super) {
            __extends(AccCostCentreDepreciationOpeningBalanceGrid, _super);
            function AccCostCentreDepreciationOpeningBalanceGrid(container) {
                return _super.call(this, container) || this;
            }
            AccCostCentreDepreciationOpeningBalanceGrid.prototype.getColumnsKey = function () { return 'Configurations.AccCostCentreDepreciationOpeningBalance'; };
            AccCostCentreDepreciationOpeningBalanceGrid.prototype.getDialogType = function () { return Configurations.AccCostCentreDepreciationOpeningBalanceDialog; };
            AccCostCentreDepreciationOpeningBalanceGrid.prototype.getIdProperty = function () { return Configurations.AccCostCentreDepreciationOpeningBalanceRow.idProperty; };
            AccCostCentreDepreciationOpeningBalanceGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccCostCentreDepreciationOpeningBalanceRow.localTextPrefix; };
            AccCostCentreDepreciationOpeningBalanceGrid.prototype.getService = function () { return Configurations.AccCostCentreDepreciationOpeningBalanceService.baseUrl; };
            AccCostCentreDepreciationOpeningBalanceGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccCostCentreDepreciationOpeningBalanceGrid);
            return AccCostCentreDepreciationOpeningBalanceGrid;
        }(Serenity.EntityGrid));
        Configurations.AccCostCentreDepreciationOpeningBalanceGrid = AccCostCentreDepreciationOpeningBalanceGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCurrencyConversionDialog = (function (_super) {
            __extends(AccCurrencyConversionDialog, _super);
            function AccCurrencyConversionDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccCurrencyConversionForm(_this.idPrefix);
                return _this;
            }
            AccCurrencyConversionDialog.prototype.getFormKey = function () { return Configurations.AccCurrencyConversionForm.formKey; };
            AccCurrencyConversionDialog.prototype.getIdProperty = function () { return Configurations.AccCurrencyConversionRow.idProperty; };
            AccCurrencyConversionDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccCurrencyConversionRow.localTextPrefix; };
            AccCurrencyConversionDialog.prototype.getNameProperty = function () { return Configurations.AccCurrencyConversionRow.nameProperty; };
            AccCurrencyConversionDialog.prototype.getService = function () { return Configurations.AccCurrencyConversionService.baseUrl; };
            AccCurrencyConversionDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccCurrencyConversionDialog);
            return AccCurrencyConversionDialog;
        }(Serenity.EntityDialog));
        Configurations.AccCurrencyConversionDialog = AccCurrencyConversionDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCurrencyConversionGrid = (function (_super) {
            __extends(AccCurrencyConversionGrid, _super);
            function AccCurrencyConversionGrid(container) {
                return _super.call(this, container) || this;
            }
            AccCurrencyConversionGrid.prototype.getColumnsKey = function () { return 'Configurations.AccCurrencyConversion'; };
            AccCurrencyConversionGrid.prototype.getDialogType = function () { return Configurations.AccCurrencyConversionDialog; };
            AccCurrencyConversionGrid.prototype.getIdProperty = function () { return Configurations.AccCurrencyConversionRow.idProperty; };
            AccCurrencyConversionGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccCurrencyConversionRow.localTextPrefix; };
            AccCurrencyConversionGrid.prototype.getService = function () { return Configurations.AccCurrencyConversionService.baseUrl; };
            AccCurrencyConversionGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccCurrencyConversionGrid);
            return AccCurrencyConversionGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccCurrencyConversionGrid = AccCurrencyConversionGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCurrencyConversionRateDialog = (function (_super) {
            __extends(AccCurrencyConversionRateDialog, _super);
            function AccCurrencyConversionRateDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccCurrencyConversionRateForm(_this.idPrefix);
                return _this;
            }
            AccCurrencyConversionRateDialog.prototype.getFormKey = function () { return Configurations.AccCurrencyConversionRateForm.formKey; };
            AccCurrencyConversionRateDialog.prototype.getIdProperty = function () { return Configurations.AccCurrencyConversionRateRow.idProperty; };
            AccCurrencyConversionRateDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccCurrencyConversionRateRow.localTextPrefix; };
            AccCurrencyConversionRateDialog.prototype.getService = function () { return Configurations.AccCurrencyConversionRateService.baseUrl; };
            AccCurrencyConversionRateDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccCurrencyConversionRateDialog);
            return AccCurrencyConversionRateDialog;
        }(Serenity.EntityDialog));
        Configurations.AccCurrencyConversionRateDialog = AccCurrencyConversionRateDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccCurrencyConversionRateGrid = (function (_super) {
            __extends(AccCurrencyConversionRateGrid, _super);
            function AccCurrencyConversionRateGrid(container) {
                return _super.call(this, container) || this;
            }
            AccCurrencyConversionRateGrid.prototype.getColumnsKey = function () { return 'Configurations.AccCurrencyConversionRate'; };
            AccCurrencyConversionRateGrid.prototype.getDialogType = function () { return Configurations.AccCurrencyConversionRateDialog; };
            AccCurrencyConversionRateGrid.prototype.getIdProperty = function () { return Configurations.AccCurrencyConversionRateRow.idProperty; };
            AccCurrencyConversionRateGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccCurrencyConversionRateRow.localTextPrefix; };
            AccCurrencyConversionRateGrid.prototype.getService = function () { return Configurations.AccCurrencyConversionRateService.baseUrl; };
            AccCurrencyConversionRateGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccCurrencyConversionRateGrid);
            return AccCurrencyConversionRateGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccCurrencyConversionRateGrid = AccCurrencyConversionRateGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccFinancialReportsDetailsDialog = (function (_super) {
            __extends(AccFinancialReportsDetailsDialog, _super);
            function AccFinancialReportsDetailsDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccFinancialReportsDetailsForm(_this.idPrefix);
                return _this;
            }
            AccFinancialReportsDetailsDialog.prototype.getFormKey = function () { return Configurations.AccFinancialReportsDetailsForm.formKey; };
            AccFinancialReportsDetailsDialog.prototype.getIdProperty = function () { return Configurations.AccFinancialReportsDetailsRow.idProperty; };
            AccFinancialReportsDetailsDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccFinancialReportsDetailsRow.localTextPrefix; };
            AccFinancialReportsDetailsDialog.prototype.getService = function () { return Configurations.AccFinancialReportsDetailsService.baseUrl; };
            AccFinancialReportsDetailsDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccFinancialReportsDetailsDialog);
            return AccFinancialReportsDetailsDialog;
        }(VistaGL.EntityDialogBase));
        Configurations.AccFinancialReportsDetailsDialog = AccFinancialReportsDetailsDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccFinancialReportsDetailsGrid = (function (_super) {
            __extends(AccFinancialReportsDetailsGrid, _super);
            function AccFinancialReportsDetailsGrid(container) {
                return _super.call(this, container) || this;
            }
            AccFinancialReportsDetailsGrid.prototype.getColumnsKey = function () { return 'Configurations.AccFinancialReportsDetails'; };
            AccFinancialReportsDetailsGrid.prototype.getDialogType = function () { return Configurations.AccFinancialReportsDetailsDialog; };
            AccFinancialReportsDetailsGrid.prototype.getIdProperty = function () { return Configurations.AccFinancialReportsDetailsRow.idProperty; };
            AccFinancialReportsDetailsGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccFinancialReportsDetailsRow.localTextPrefix; };
            AccFinancialReportsDetailsGrid.prototype.getService = function () { return Configurations.AccFinancialReportsDetailsService.baseUrl; };
            AccFinancialReportsDetailsGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccFinancialReportsDetailsGrid);
            return AccFinancialReportsDetailsGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccFinancialReportsDetailsGrid = AccFinancialReportsDetailsGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccFundControlInformationDialog = (function (_super) {
            __extends(AccFundControlInformationDialog, _super);
            function AccFundControlInformationDialog(container) {
                var _this = _super.call(this, container) || this;
                _this.form = new Configurations.AccFundControlInformationForm(_this.idPrefix);
                return _this;
                //this.form.ZoneInfoId.value = Authorization.userDefinition.ZoneID;
                //this.form.ZoneInfoId.value = 1;
            }
            AccFundControlInformationDialog.prototype.getFormKey = function () { return Configurations.AccFundControlInformationForm.formKey; };
            AccFundControlInformationDialog.prototype.getIdProperty = function () { return Configurations.AccFundControlInformationRow.idProperty; };
            AccFundControlInformationDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccFundControlInformationRow.localTextPrefix; };
            AccFundControlInformationDialog.prototype.getNameProperty = function () { return Configurations.AccFundControlInformationRow.nameProperty; };
            AccFundControlInformationDialog.prototype.getService = function () { return Configurations.AccFundControlInformationService.baseUrl; };
            AccFundControlInformationDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccFundControlInformationDialog);
            return AccFundControlInformationDialog;
        }(Serenity.EntityDialog));
        Configurations.AccFundControlInformationDialog = AccFundControlInformationDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccFundControlInformationGrid = (function (_super) {
            __extends(AccFundControlInformationGrid, _super);
            function AccFundControlInformationGrid(container) {
                return _super.call(this, container) || this;
            }
            AccFundControlInformationGrid.prototype.getColumnsKey = function () { return 'Configurations.AccFundControlInformation'; };
            AccFundControlInformationGrid.prototype.getDialogType = function () { return Configurations.AccFundControlInformationDialog; };
            AccFundControlInformationGrid.prototype.getIdProperty = function () { return Configurations.AccFundControlInformationRow.idProperty; };
            AccFundControlInformationGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccFundControlInformationRow.localTextPrefix; };
            AccFundControlInformationGrid.prototype.getService = function () { return Configurations.AccFundControlInformationService.baseUrl; };
            AccFundControlInformationGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccFundControlInformationGrid);
            return AccFundControlInformationGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccFundControlInformationGrid = AccFundControlInformationGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var selectFundControlInformationsDialog = (function (_super) {
            __extends(selectFundControlInformationsDialog, _super);
            function selectFundControlInformationsDialog() {
                var _this = _super.call(this) || this;
                var form = new Configurations.selectFundControlInformationsForm(_this.idPrefix);
                _this.dialogTitle = "Please select Entity";
                //Authorization.userDefinition.FundControlInformationId
                //       console.log("1. "+ Authorization.userDefinition.FundControlInformationId);
                form.FundControlInformationId.value = VistaGL.Authorization.userDefinition.FundControlInformationId.toString();
                form.FundControlInformationId.changeSelect2(function (e) {
                    var entity = Configurations.AccFundControlInformationRow.getLookup().items.filter(function (p) { return p.Id == +form.FundControlInformationId.value; });
                    //  console.log(entity);
                    VistaGL.Authorization.userDefinition.FundControlInformationId = +form.FundControlInformationId.value;
                    VistaGL.Authorization.userDefinition.BaseCurrencyId = entity[0].CurrencyId;
                    VistaGL.Authorization.userDefinition.BaseCurrency = entity[0].CurrencyCurrency;
                    VistaGL.Authorization.userDefinition.FundControlName = entity[0].FundControlName;
                    Configurations.AccFundControlInformationService.SetFundControl({ EntityId: form.FundControlInformationId.value }, function (p) {
                        Q.notifySuccess("You selected Entity: " + form.FundControlInformationId.get_text());
                        setTimeout(function () {
                            window.location.reload();
                        }, 100);
                    });
                    // AccFundControlInformationService.baseUrl
                    //   console.log("2. " + Authorization.userDefinition.FundControlInformationId);
                    // location.reload();
                    //   this.dialogClose();
                });
                return _this;
            }
            selectFundControlInformationsDialog.prototype.getFormKey = function () { return Configurations.selectFundControlInformationsForm.formKey; };
            selectFundControlInformationsDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], selectFundControlInformationsDialog);
            return selectFundControlInformationsDialog;
        }(Serenity.PropertyDialog));
        Configurations.selectFundControlInformationsDialog = selectFundControlInformationsDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccFundControlZoneWiseApproverDialog = (function (_super) {
            __extends(AccFundControlZoneWiseApproverDialog, _super);
            function AccFundControlZoneWiseApproverDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccFundControlZoneWiseApproverForm(_this.idPrefix);
                return _this;
            }
            AccFundControlZoneWiseApproverDialog.prototype.getFormKey = function () { return Configurations.AccFundControlZoneWiseApproverForm.formKey; };
            AccFundControlZoneWiseApproverDialog.prototype.getIdProperty = function () { return Configurations.AccFundControlZoneWiseApproverRow.idProperty; };
            AccFundControlZoneWiseApproverDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccFundControlZoneWiseApproverRow.localTextPrefix; };
            AccFundControlZoneWiseApproverDialog.prototype.getService = function () { return Configurations.AccFundControlZoneWiseApproverService.baseUrl; };
            AccFundControlZoneWiseApproverDialog.prototype.onDialogOpen = function () {
                _super.prototype.onDialogOpen.call(this);
                var userinfo = VistaGL.Authorization.userDefinition;
                this.form.FundControlId.value = userinfo.FundControlInformationId.toString();
                this.form.ZoneInfoId.value = userinfo.ZoneID.toString();
                Serenity.EditorUtils.setReadonly(this.element.find(this.form.FundControlId.element), true);
                Serenity.EditorUtils.setReadonly(this.element.find(this.form.ZoneInfoId.element), true);
            };
            AccFundControlZoneWiseApproverDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccFundControlZoneWiseApproverDialog);
            return AccFundControlZoneWiseApproverDialog;
        }(Serenity.EntityDialog));
        Configurations.AccFundControlZoneWiseApproverDialog = AccFundControlZoneWiseApproverDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccFundControlZoneWiseApproverGrid = (function (_super) {
            __extends(AccFundControlZoneWiseApproverGrid, _super);
            function AccFundControlZoneWiseApproverGrid(container) {
                return _super.call(this, container) || this;
            }
            AccFundControlZoneWiseApproverGrid.prototype.getColumnsKey = function () { return 'Configurations.AccFundControlZoneWiseApprover'; };
            AccFundControlZoneWiseApproverGrid.prototype.getDialogType = function () { return Configurations.AccFundControlZoneWiseApproverDialog; };
            AccFundControlZoneWiseApproverGrid.prototype.getIdProperty = function () { return Configurations.AccFundControlZoneWiseApproverRow.idProperty; };
            AccFundControlZoneWiseApproverGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccFundControlZoneWiseApproverRow.localTextPrefix; };
            AccFundControlZoneWiseApproverGrid.prototype.getService = function () { return Configurations.AccFundControlZoneWiseApproverService.baseUrl; };
            AccFundControlZoneWiseApproverGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccFundControlZoneWiseApproverGrid);
            return AccFundControlZoneWiseApproverGrid;
        }(Serenity.EntityGrid));
        Configurations.AccFundControlZoneWiseApproverGrid = AccFundControlZoneWiseApproverGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccGovtLoanReportDialog = (function (_super) {
            __extends(AccGovtLoanReportDialog, _super);
            function AccGovtLoanReportDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccGovtLoanReportForm(_this.idPrefix);
                return _this;
            }
            AccGovtLoanReportDialog.prototype.getFormKey = function () { return Configurations.AccGovtLoanReportForm.formKey; };
            AccGovtLoanReportDialog.prototype.getIdProperty = function () { return Configurations.AccGovtLoanReportRow.idProperty; };
            AccGovtLoanReportDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccGovtLoanReportRow.localTextPrefix; };
            AccGovtLoanReportDialog.prototype.getService = function () { return Configurations.AccGovtLoanReportService.baseUrl; };
            AccGovtLoanReportDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccGovtLoanReportDialog);
            return AccGovtLoanReportDialog;
        }(Serenity.EntityDialog));
        Configurations.AccGovtLoanReportDialog = AccGovtLoanReportDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccGovtLoanReportGrid = (function (_super) {
            __extends(AccGovtLoanReportGrid, _super);
            function AccGovtLoanReportGrid(container) {
                return _super.call(this, container) || this;
            }
            AccGovtLoanReportGrid.prototype.getColumnsKey = function () { return 'Configurations.AccGovtLoanReport'; };
            AccGovtLoanReportGrid.prototype.getDialogType = function () { return Configurations.AccGovtLoanReportDialog; };
            AccGovtLoanReportGrid.prototype.getIdProperty = function () { return Configurations.AccGovtLoanReportRow.idProperty; };
            AccGovtLoanReportGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccGovtLoanReportRow.localTextPrefix; };
            AccGovtLoanReportGrid.prototype.getService = function () { return Configurations.AccGovtLoanReportService.baseUrl; };
            AccGovtLoanReportGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccGovtLoanReportGrid);
            return AccGovtLoanReportGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccGovtLoanReportGrid = AccGovtLoanReportGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccPriorYearAdjustmentDialog = (function (_super) {
            __extends(AccPriorYearAdjustmentDialog, _super);
            function AccPriorYearAdjustmentDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccPriorYearAdjustmentForm(_this.idPrefix);
                return _this;
            }
            AccPriorYearAdjustmentDialog.prototype.getFormKey = function () { return Configurations.AccPriorYearAdjustmentForm.formKey; };
            AccPriorYearAdjustmentDialog.prototype.getIdProperty = function () { return Configurations.AccPriorYearAdjustmentRow.idProperty; };
            AccPriorYearAdjustmentDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccPriorYearAdjustmentRow.localTextPrefix; };
            AccPriorYearAdjustmentDialog.prototype.getService = function () { return Configurations.AccPriorYearAdjustmentService.baseUrl; };
            AccPriorYearAdjustmentDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccPriorYearAdjustmentDialog);
            return AccPriorYearAdjustmentDialog;
        }(Serenity.EntityDialog));
        Configurations.AccPriorYearAdjustmentDialog = AccPriorYearAdjustmentDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccPriorYearAdjustmentGrid = (function (_super) {
            __extends(AccPriorYearAdjustmentGrid, _super);
            function AccPriorYearAdjustmentGrid(container) {
                return _super.call(this, container) || this;
            }
            AccPriorYearAdjustmentGrid.prototype.getColumnsKey = function () { return 'Configurations.AccPriorYearAdjustment'; };
            AccPriorYearAdjustmentGrid.prototype.getDialogType = function () { return Configurations.AccPriorYearAdjustmentDialog; };
            AccPriorYearAdjustmentGrid.prototype.getIdProperty = function () { return Configurations.AccPriorYearAdjustmentRow.idProperty; };
            AccPriorYearAdjustmentGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccPriorYearAdjustmentRow.localTextPrefix; };
            AccPriorYearAdjustmentGrid.prototype.getService = function () { return Configurations.AccPriorYearAdjustmentService.baseUrl; };
            AccPriorYearAdjustmentGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccPriorYearAdjustmentGrid);
            return AccPriorYearAdjustmentGrid;
        }(Serenity.EntityGrid));
        Configurations.AccPriorYearAdjustmentGrid = AccPriorYearAdjustmentGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeDialog = (function (_super) {
            __extends(AccReportTypeDialog, _super);
            function AccReportTypeDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccReportTypeForm(_this.idPrefix);
                return _this;
            }
            AccReportTypeDialog.prototype.getFormKey = function () { return Configurations.AccReportTypeForm.formKey; };
            AccReportTypeDialog.prototype.getIdProperty = function () { return Configurations.AccReportTypeRow.idProperty; };
            AccReportTypeDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccReportTypeRow.localTextPrefix; };
            AccReportTypeDialog.prototype.getNameProperty = function () { return Configurations.AccReportTypeRow.nameProperty; };
            AccReportTypeDialog.prototype.getService = function () { return Configurations.AccReportTypeService.baseUrl; };
            AccReportTypeDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccReportTypeDialog);
            return AccReportTypeDialog;
        }(Serenity.EntityDialog));
        Configurations.AccReportTypeDialog = AccReportTypeDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeGrid = (function (_super) {
            __extends(AccReportTypeGrid, _super);
            function AccReportTypeGrid(container) {
                return _super.call(this, container) || this;
            }
            AccReportTypeGrid.prototype.getColumnsKey = function () { return 'Configurations.AccReportType'; };
            AccReportTypeGrid.prototype.getDialogType = function () { return Configurations.AccReportTypeDialog; };
            AccReportTypeGrid.prototype.getIdProperty = function () { return Configurations.AccReportTypeRow.idProperty; };
            AccReportTypeGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccReportTypeRow.localTextPrefix; };
            AccReportTypeGrid.prototype.getService = function () { return Configurations.AccReportTypeService.baseUrl; };
            AccReportTypeGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccReportTypeGrid);
            return AccReportTypeGrid;
        }(Serenity.EntityGrid));
        Configurations.AccReportTypeGrid = AccReportTypeGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeCoaMappingDialog = (function (_super) {
            __extends(AccReportTypeCoaMappingDialog, _super);
            function AccReportTypeCoaMappingDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccReportTypeCoaMappingForm(_this.idPrefix);
                return _this;
            }
            AccReportTypeCoaMappingDialog.prototype.getFormKey = function () { return Configurations.AccReportTypeCoaMappingForm.formKey; };
            AccReportTypeCoaMappingDialog.prototype.getIdProperty = function () { return Configurations.AccReportTypeCoaMappingRow.idProperty; };
            AccReportTypeCoaMappingDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccReportTypeCoaMappingRow.localTextPrefix; };
            AccReportTypeCoaMappingDialog.prototype.getService = function () { return Configurations.AccReportTypeCoaMappingService.baseUrl; };
            AccReportTypeCoaMappingDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccReportTypeCoaMappingDialog);
            return AccReportTypeCoaMappingDialog;
        }(Serenity.EntityDialog));
        Configurations.AccReportTypeCoaMappingDialog = AccReportTypeCoaMappingDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeCoaMappingGrid = (function (_super) {
            __extends(AccReportTypeCoaMappingGrid, _super);
            function AccReportTypeCoaMappingGrid(container) {
                return _super.call(this, container) || this;
            }
            AccReportTypeCoaMappingGrid.prototype.getColumnsKey = function () { return 'Configurations.AccReportTypeCoaMapping'; };
            AccReportTypeCoaMappingGrid.prototype.getDialogType = function () { return Configurations.AccReportTypeCoaMappingDialog; };
            AccReportTypeCoaMappingGrid.prototype.getIdProperty = function () { return Configurations.AccReportTypeCoaMappingRow.idProperty; };
            AccReportTypeCoaMappingGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccReportTypeCoaMappingRow.localTextPrefix; };
            AccReportTypeCoaMappingGrid.prototype.getService = function () { return Configurations.AccReportTypeCoaMappingService.baseUrl; };
            AccReportTypeCoaMappingGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccReportTypeCoaMappingGrid);
            return AccReportTypeCoaMappingGrid;
        }(Serenity.EntityGrid));
        Configurations.AccReportTypeCoaMappingGrid = AccReportTypeCoaMappingGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeCostCenterMappingDialog = (function (_super) {
            __extends(AccReportTypeCostCenterMappingDialog, _super);
            function AccReportTypeCostCenterMappingDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccReportTypeCostCenterMappingForm(_this.idPrefix);
                return _this;
            }
            AccReportTypeCostCenterMappingDialog.prototype.getFormKey = function () { return Configurations.AccReportTypeCostCenterMappingForm.formKey; };
            AccReportTypeCostCenterMappingDialog.prototype.getIdProperty = function () { return Configurations.AccReportTypeCostCenterMappingRow.idProperty; };
            AccReportTypeCostCenterMappingDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccReportTypeCostCenterMappingRow.localTextPrefix; };
            AccReportTypeCostCenterMappingDialog.prototype.getService = function () { return Configurations.AccReportTypeCostCenterMappingService.baseUrl; };
            AccReportTypeCostCenterMappingDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccReportTypeCostCenterMappingDialog);
            return AccReportTypeCostCenterMappingDialog;
        }(Serenity.EntityDialog));
        Configurations.AccReportTypeCostCenterMappingDialog = AccReportTypeCostCenterMappingDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeCostCenterMappingGrid = (function (_super) {
            __extends(AccReportTypeCostCenterMappingGrid, _super);
            function AccReportTypeCostCenterMappingGrid(container) {
                return _super.call(this, container) || this;
            }
            AccReportTypeCostCenterMappingGrid.prototype.getColumnsKey = function () { return 'Configurations.AccReportTypeCostCenterMapping'; };
            AccReportTypeCostCenterMappingGrid.prototype.getDialogType = function () { return Configurations.AccReportTypeCostCenterMappingDialog; };
            AccReportTypeCostCenterMappingGrid.prototype.getIdProperty = function () { return Configurations.AccReportTypeCostCenterMappingRow.idProperty; };
            AccReportTypeCostCenterMappingGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccReportTypeCostCenterMappingRow.localTextPrefix; };
            AccReportTypeCostCenterMappingGrid.prototype.getService = function () { return Configurations.AccReportTypeCostCenterMappingService.baseUrl; };
            AccReportTypeCostCenterMappingGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccReportTypeCostCenterMappingGrid);
            return AccReportTypeCostCenterMappingGrid;
        }(Serenity.EntityGrid));
        Configurations.AccReportTypeCostCenterMappingGrid = AccReportTypeCostCenterMappingGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeGroupOpeningBalanceDialog = (function (_super) {
            __extends(AccReportTypeGroupOpeningBalanceDialog, _super);
            function AccReportTypeGroupOpeningBalanceDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccReportTypeGroupOpeningBalanceForm(_this.idPrefix);
                return _this;
            }
            AccReportTypeGroupOpeningBalanceDialog.prototype.getFormKey = function () { return Configurations.AccReportTypeGroupOpeningBalanceForm.formKey; };
            AccReportTypeGroupOpeningBalanceDialog.prototype.getIdProperty = function () { return Configurations.AccReportTypeGroupOpeningBalanceRow.idProperty; };
            AccReportTypeGroupOpeningBalanceDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccReportTypeGroupOpeningBalanceRow.localTextPrefix; };
            AccReportTypeGroupOpeningBalanceDialog.prototype.getService = function () { return Configurations.AccReportTypeGroupOpeningBalanceService.baseUrl; };
            AccReportTypeGroupOpeningBalanceDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccReportTypeGroupOpeningBalanceDialog);
            return AccReportTypeGroupOpeningBalanceDialog;
        }(Serenity.EntityDialog));
        Configurations.AccReportTypeGroupOpeningBalanceDialog = AccReportTypeGroupOpeningBalanceDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeGroupOpeningBalanceGrid = (function (_super) {
            __extends(AccReportTypeGroupOpeningBalanceGrid, _super);
            function AccReportTypeGroupOpeningBalanceGrid(container) {
                return _super.call(this, container) || this;
            }
            AccReportTypeGroupOpeningBalanceGrid.prototype.getColumnsKey = function () { return 'Configurations.AccReportTypeGroupOpeningBalance'; };
            AccReportTypeGroupOpeningBalanceGrid.prototype.getDialogType = function () { return Configurations.AccReportTypeGroupOpeningBalanceDialog; };
            AccReportTypeGroupOpeningBalanceGrid.prototype.getIdProperty = function () { return Configurations.AccReportTypeGroupOpeningBalanceRow.idProperty; };
            AccReportTypeGroupOpeningBalanceGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccReportTypeGroupOpeningBalanceRow.localTextPrefix; };
            AccReportTypeGroupOpeningBalanceGrid.prototype.getService = function () { return Configurations.AccReportTypeGroupOpeningBalanceService.baseUrl; };
            AccReportTypeGroupOpeningBalanceGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccReportTypeGroupOpeningBalanceGrid);
            return AccReportTypeGroupOpeningBalanceGrid;
        }(Serenity.EntityGrid));
        Configurations.AccReportTypeGroupOpeningBalanceGrid = AccReportTypeGroupOpeningBalanceGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeGroupSetupDialog = (function (_super) {
            __extends(AccReportTypeGroupSetupDialog, _super);
            function AccReportTypeGroupSetupDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccReportTypeGroupSetupForm(_this.idPrefix);
                return _this;
            }
            AccReportTypeGroupSetupDialog.prototype.getFormKey = function () { return Configurations.AccReportTypeGroupSetupForm.formKey; };
            AccReportTypeGroupSetupDialog.prototype.getIdProperty = function () { return Configurations.AccReportTypeGroupSetupRow.idProperty; };
            AccReportTypeGroupSetupDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccReportTypeGroupSetupRow.localTextPrefix; };
            AccReportTypeGroupSetupDialog.prototype.getNameProperty = function () { return Configurations.AccReportTypeGroupSetupRow.nameProperty; };
            AccReportTypeGroupSetupDialog.prototype.getService = function () { return Configurations.AccReportTypeGroupSetupService.baseUrl; };
            AccReportTypeGroupSetupDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccReportTypeGroupSetupDialog);
            return AccReportTypeGroupSetupDialog;
        }(Serenity.EntityDialog));
        Configurations.AccReportTypeGroupSetupDialog = AccReportTypeGroupSetupDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccReportTypeGroupSetupGrid = (function (_super) {
            __extends(AccReportTypeGroupSetupGrid, _super);
            function AccReportTypeGroupSetupGrid(container) {
                var _this = _super.call(this, container) || this;
                var tree = new Serenity.TreeGridMixin({
                    grid: _this,
                    getParentId: function (x) { return x.ParentId; },
                    toggleField: "GroupName" /* GroupName */,
                    initialCollapse: function () { return false; }
                });
                return _this;
            }
            AccReportTypeGroupSetupGrid.prototype.getColumnsKey = function () { return 'Configurations.AccReportTypeGroupSetup'; };
            AccReportTypeGroupSetupGrid.prototype.getDialogType = function () { return Configurations.AccReportTypeGroupSetupDialog; };
            AccReportTypeGroupSetupGrid.prototype.getIdProperty = function () { return Configurations.AccReportTypeGroupSetupRow.idProperty; };
            AccReportTypeGroupSetupGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccReportTypeGroupSetupRow.localTextPrefix; };
            AccReportTypeGroupSetupGrid.prototype.getService = function () { return Configurations.AccReportTypeGroupSetupService.baseUrl; };
            AccReportTypeGroupSetupGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccReportTypeGroupSetupGrid);
            return AccReportTypeGroupSetupGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccReportTypeGroupSetupGrid = AccReportTypeGroupSetupGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccSetupForBankAdviceLetterDialog = (function (_super) {
            __extends(AccSetupForBankAdviceLetterDialog, _super);
            function AccSetupForBankAdviceLetterDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Configurations.AccSetupForBankAdviceLetterForm(_this.idPrefix);
                _this.LoanAccountHeadBank();
                return _this;
            }
            AccSetupForBankAdviceLetterDialog.prototype.getFormKey = function () { return Configurations.AccSetupForBankAdviceLetterForm.formKey; };
            AccSetupForBankAdviceLetterDialog.prototype.getIdProperty = function () { return Configurations.AccSetupForBankAdviceLetterRow.idProperty; };
            AccSetupForBankAdviceLetterDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccSetupForBankAdviceLetterRow.localTextPrefix; };
            AccSetupForBankAdviceLetterDialog.prototype.getNameProperty = function () { return Configurations.AccSetupForBankAdviceLetterRow.nameProperty; };
            AccSetupForBankAdviceLetterDialog.prototype.getService = function () { return Configurations.AccSetupForBankAdviceLetterService.baseUrl; };
            AccSetupForBankAdviceLetterDialog.prototype.LoanAccountHeadBank = function () {
                this.form.CoaId.clearItems();
                var coaMapping = "BANK";
                var _zoneWiseBankAccInfoList;
                _zoneWiseBankAccInfoList = Q.getLookup("Configurations.AccBankAccountInformation_Lookup").items;
                for (var _i = 0, _zoneWiseBankAccInfoList_1 = _zoneWiseBankAccInfoList; _i < _zoneWiseBankAccInfoList_1.length; _i++) {
                    var bank = _zoneWiseBankAccInfoList_1[_i];
                    var coa = Configurations.AccChartofAccountsRow.getLookup().items.filter(function (f) { return f.Id == bank.CoaId; });
                    if (coa.length > 0) {
                        this.form.CoaId.addItem({ id: coa[0].Id.toString(), text: coa[0].AccountName, source: null, disabled: false });
                    }
                }
            };
            AccSetupForBankAdviceLetterDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccSetupForBankAdviceLetterDialog);
            return AccSetupForBankAdviceLetterDialog;
        }(Serenity.EntityDialog));
        Configurations.AccSetupForBankAdviceLetterDialog = AccSetupForBankAdviceLetterDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccSetupForBankAdviceLetterGrid = (function (_super) {
            __extends(AccSetupForBankAdviceLetterGrid, _super);
            function AccSetupForBankAdviceLetterGrid(container) {
                return _super.call(this, container) || this;
            }
            AccSetupForBankAdviceLetterGrid.prototype.getColumnsKey = function () { return 'Configurations.AccSetupForBankAdviceLetter'; };
            AccSetupForBankAdviceLetterGrid.prototype.getDialogType = function () { return Configurations.AccSetupForBankAdviceLetterDialog; };
            AccSetupForBankAdviceLetterGrid.prototype.getIdProperty = function () { return Configurations.AccSetupForBankAdviceLetterRow.idProperty; };
            AccSetupForBankAdviceLetterGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccSetupForBankAdviceLetterRow.localTextPrefix; };
            AccSetupForBankAdviceLetterGrid.prototype.getService = function () { return Configurations.AccSetupForBankAdviceLetterService.baseUrl; };
            AccSetupForBankAdviceLetterGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccSetupForBankAdviceLetterGrid);
            return AccSetupForBankAdviceLetterGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccSetupForBankAdviceLetterGrid = AccSetupForBankAdviceLetterGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccTransactionTypeDialog = (function (_super) {
            __extends(AccTransactionTypeDialog, _super);
            function AccTransactionTypeDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccTransactionTypeForm(_this.idPrefix);
                return _this;
            }
            AccTransactionTypeDialog.prototype.getFormKey = function () { return Configurations.AccTransactionTypeForm.formKey; };
            AccTransactionTypeDialog.prototype.getIdProperty = function () { return Configurations.AccTransactionTypeRow.idProperty; };
            AccTransactionTypeDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccTransactionTypeRow.localTextPrefix; };
            AccTransactionTypeDialog.prototype.getNameProperty = function () { return Configurations.AccTransactionTypeRow.nameProperty; };
            AccTransactionTypeDialog.prototype.getService = function () { return Configurations.AccTransactionTypeService.baseUrl; };
            AccTransactionTypeDialog.prototype.validateBeforeSave = function () {
                var _this = this;
                var data = Configurations.AccTransactionTypeRow.getLookup().items.filter(function (q) { return q.VoucherTypeId == +_this.form.VoucherTypeId.value && q.IsbyDefault == true; });
                //console.log(data);
                if (data.length > 0 && this.form.IsbyDefault.value == true) {
                    Q.alert("Default is not valid for this Voucher Type");
                    return false;
                }
                return true;
            };
            AccTransactionTypeDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccTransactionTypeDialog);
            return AccTransactionTypeDialog;
        }(VistaGL.EntityDialogBase));
        Configurations.AccTransactionTypeDialog = AccTransactionTypeDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccTransactionTypeGrid = (function (_super) {
            __extends(AccTransactionTypeGrid, _super);
            function AccTransactionTypeGrid(container) {
                return _super.call(this, container) || this;
            }
            AccTransactionTypeGrid.prototype.getColumnsKey = function () { return 'Configurations.AccTransactionType'; };
            AccTransactionTypeGrid.prototype.getDialogType = function () { return Configurations.AccTransactionTypeDialog; };
            AccTransactionTypeGrid.prototype.getIdProperty = function () { return Configurations.AccTransactionTypeRow.idProperty; };
            AccTransactionTypeGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccTransactionTypeRow.localTextPrefix; };
            AccTransactionTypeGrid.prototype.getService = function () { return Configurations.AccTransactionTypeService.baseUrl; };
            AccTransactionTypeGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccTransactionTypeGrid);
            return AccTransactionTypeGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccTransactionTypeGrid = AccTransactionTypeGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccUnitTypeDialog = (function (_super) {
            __extends(AccUnitTypeDialog, _super);
            function AccUnitTypeDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccUnitTypeForm(_this.idPrefix);
                return _this;
            }
            AccUnitTypeDialog.prototype.getFormKey = function () { return Configurations.AccUnitTypeForm.formKey; };
            AccUnitTypeDialog.prototype.getIdProperty = function () { return Configurations.AccUnitTypeRow.idProperty; };
            AccUnitTypeDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccUnitTypeRow.localTextPrefix; };
            AccUnitTypeDialog.prototype.getNameProperty = function () { return Configurations.AccUnitTypeRow.nameProperty; };
            AccUnitTypeDialog.prototype.getService = function () { return Configurations.AccUnitTypeService.baseUrl; };
            AccUnitTypeDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccUnitTypeDialog);
            return AccUnitTypeDialog;
        }(Serenity.EntityDialog));
        Configurations.AccUnitTypeDialog = AccUnitTypeDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccUnitTypeGrid = (function (_super) {
            __extends(AccUnitTypeGrid, _super);
            function AccUnitTypeGrid(container) {
                return _super.call(this, container) || this;
            }
            AccUnitTypeGrid.prototype.getColumnsKey = function () { return 'Configurations.AccUnitType'; };
            AccUnitTypeGrid.prototype.getDialogType = function () { return Configurations.AccUnitTypeDialog; };
            AccUnitTypeGrid.prototype.getIdProperty = function () { return Configurations.AccUnitTypeRow.idProperty; };
            AccUnitTypeGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccUnitTypeRow.localTextPrefix; };
            AccUnitTypeGrid.prototype.getService = function () { return Configurations.AccUnitTypeService.baseUrl; };
            AccUnitTypeGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccUnitTypeGrid);
            return AccUnitTypeGrid;
        }(VistaGL.EntityGridBase));
        Configurations.AccUnitTypeGrid = AccUnitTypeGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiDialog = (function (_super) {
            __extends(AccVoucherApiDialog, _super);
            function AccVoucherApiDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccVoucherApiForm(_this.idPrefix);
                return _this;
            }
            AccVoucherApiDialog.prototype.getFormKey = function () { return Configurations.AccVoucherApiForm.formKey; };
            AccVoucherApiDialog.prototype.getIdProperty = function () { return Configurations.AccVoucherApiRow.idProperty; };
            AccVoucherApiDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherApiRow.localTextPrefix; };
            AccVoucherApiDialog.prototype.getNameProperty = function () { return Configurations.AccVoucherApiRow.nameProperty; };
            AccVoucherApiDialog.prototype.getService = function () { return Configurations.AccVoucherApiService.baseUrl; };
            AccVoucherApiDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherApiDialog);
            return AccVoucherApiDialog;
        }(Serenity.EntityDialog));
        Configurations.AccVoucherApiDialog = AccVoucherApiDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiEditor = (function (_super) {
            __extends(AccVoucherApiEditor, _super);
            function AccVoucherApiEditor(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherApiEditor.prototype.getColumnsKey = function () { return 'Configurations.AccVoucherApi'; };
            AccVoucherApiEditor.prototype.getDialogType = function () { return Configurations.AccVoucherApiEditorDialog; };
            AccVoucherApiEditor.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherApiRow.localTextPrefix; };
            AccVoucherApiEditor = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherApiEditor);
            return AccVoucherApiEditor;
        }(VistaGL.GridEditorBase));
        Configurations.AccVoucherApiEditor = AccVoucherApiEditor;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiEditorDialog = (function (_super) {
            __extends(AccVoucherApiEditorDialog, _super);
            function AccVoucherApiEditorDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccVoucherApiForm(_this.idPrefix);
                return _this;
            }
            AccVoucherApiEditorDialog.prototype.getFormKey = function () { return Configurations.AccVoucherApiForm.formKey; };
            AccVoucherApiEditorDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherApiRow.localTextPrefix; };
            AccVoucherApiEditorDialog.prototype.getNameProperty = function () { return Configurations.AccVoucherApiRow.nameProperty; };
            AccVoucherApiEditorDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherApiEditorDialog);
            return AccVoucherApiEditorDialog;
        }(VistaGL.GridEditorDialog));
        Configurations.AccVoucherApiEditorDialog = AccVoucherApiEditorDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiGrid = (function (_super) {
            __extends(AccVoucherApiGrid, _super);
            function AccVoucherApiGrid(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherApiGrid.prototype.getColumnsKey = function () { return 'Configurations.AccVoucherApi'; };
            AccVoucherApiGrid.prototype.getDialogType = function () { return Configurations.AccVoucherApiDialog; };
            AccVoucherApiGrid.prototype.getIdProperty = function () { return Configurations.AccVoucherApiRow.idProperty; };
            AccVoucherApiGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherApiRow.localTextPrefix; };
            AccVoucherApiGrid.prototype.getService = function () { return Configurations.AccVoucherApiService.baseUrl; };
            AccVoucherApiGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherApiGrid);
            return AccVoucherApiGrid;
        }(Serenity.EntityGrid));
        Configurations.AccVoucherApiGrid = AccVoucherApiGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiConfigDialog = (function (_super) {
            __extends(AccVoucherApiConfigDialog, _super);
            function AccVoucherApiConfigDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccVoucherApiConfigForm(_this.idPrefix);
                return _this;
            }
            AccVoucherApiConfigDialog.prototype.getFormKey = function () { return Configurations.AccVoucherApiConfigForm.formKey; };
            AccVoucherApiConfigDialog.prototype.getIdProperty = function () { return Configurations.AccVoucherApiConfigRow.idProperty; };
            AccVoucherApiConfigDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherApiConfigRow.localTextPrefix; };
            AccVoucherApiConfigDialog.prototype.getNameProperty = function () { return Configurations.AccVoucherApiConfigRow.nameProperty; };
            AccVoucherApiConfigDialog.prototype.getService = function () { return Configurations.AccVoucherApiConfigService.baseUrl; };
            AccVoucherApiConfigDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherApiConfigDialog);
            return AccVoucherApiConfigDialog;
        }(Serenity.EntityDialog));
        Configurations.AccVoucherApiConfigDialog = AccVoucherApiConfigDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiConfigEditor = (function (_super) {
            __extends(AccVoucherApiConfigEditor, _super);
            function AccVoucherApiConfigEditor(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherApiConfigEditor.prototype.getColumnsKey = function () { return 'Configurations.AccVoucherApiConfig'; };
            AccVoucherApiConfigEditor.prototype.getDialogType = function () { return Configurations.AccVoucherApiConfigEditorDialog; };
            AccVoucherApiConfigEditor.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherApiConfigRow.localTextPrefix; };
            AccVoucherApiConfigEditor = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherApiConfigEditor);
            return AccVoucherApiConfigEditor;
        }(VistaGL.GridEditorBase));
        Configurations.AccVoucherApiConfigEditor = AccVoucherApiConfigEditor;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiConfigEditorDialog = (function (_super) {
            __extends(AccVoucherApiConfigEditorDialog, _super);
            function AccVoucherApiConfigEditorDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccVoucherApiConfigForm(_this.idPrefix);
                return _this;
            }
            AccVoucherApiConfigEditorDialog.prototype.getFormKey = function () { return Configurations.AccVoucherApiConfigForm.formKey; };
            AccVoucherApiConfigEditorDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherApiConfigRow.localTextPrefix; };
            AccVoucherApiConfigEditorDialog.prototype.getNameProperty = function () { return Configurations.AccVoucherApiConfigRow.nameProperty; };
            AccVoucherApiConfigEditorDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherApiConfigEditorDialog);
            return AccVoucherApiConfigEditorDialog;
        }(VistaGL.GridEditorDialog));
        Configurations.AccVoucherApiConfigEditorDialog = AccVoucherApiConfigEditorDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiConfigGrid = (function (_super) {
            __extends(AccVoucherApiConfigGrid, _super);
            function AccVoucherApiConfigGrid(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherApiConfigGrid.prototype.getColumnsKey = function () { return 'Configurations.AccVoucherApiConfig'; };
            AccVoucherApiConfigGrid.prototype.getDialogType = function () { return Configurations.AccVoucherApiConfigDialog; };
            AccVoucherApiConfigGrid.prototype.getIdProperty = function () { return Configurations.AccVoucherApiConfigRow.idProperty; };
            AccVoucherApiConfigGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherApiConfigRow.localTextPrefix; };
            AccVoucherApiConfigGrid.prototype.getService = function () { return Configurations.AccVoucherApiConfigService.baseUrl; };
            AccVoucherApiConfigGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherApiConfigGrid);
            return AccVoucherApiConfigGrid;
        }(Serenity.EntityGrid));
        Configurations.AccVoucherApiConfigGrid = AccVoucherApiConfigGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiConfigDetailsDialog = (function (_super) {
            __extends(AccVoucherApiConfigDetailsDialog, _super);
            function AccVoucherApiConfigDetailsDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccVoucherApiConfigDetailsForm(_this.idPrefix);
                return _this;
            }
            AccVoucherApiConfigDetailsDialog.prototype.getFormKey = function () { return Configurations.AccVoucherApiConfigDetailsForm.formKey; };
            AccVoucherApiConfigDetailsDialog.prototype.getIdProperty = function () { return Configurations.AccVoucherApiConfigDetailsRow.idProperty; };
            AccVoucherApiConfigDetailsDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherApiConfigDetailsRow.localTextPrefix; };
            AccVoucherApiConfigDetailsDialog.prototype.getNameProperty = function () { return Configurations.AccVoucherApiConfigDetailsRow.nameProperty; };
            AccVoucherApiConfigDetailsDialog.prototype.getService = function () { return Configurations.AccVoucherApiConfigDetailsService.baseUrl; };
            AccVoucherApiConfigDetailsDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherApiConfigDetailsDialog);
            return AccVoucherApiConfigDetailsDialog;
        }(Serenity.EntityDialog));
        Configurations.AccVoucherApiConfigDetailsDialog = AccVoucherApiConfigDetailsDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiConfigDetailsEditor = (function (_super) {
            __extends(AccVoucherApiConfigDetailsEditor, _super);
            function AccVoucherApiConfigDetailsEditor(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherApiConfigDetailsEditor.prototype.getColumnsKey = function () { return 'Configurations.AccVoucherApiConfigDetails'; };
            AccVoucherApiConfigDetailsEditor.prototype.getDialogType = function () { return Configurations.AccVoucherApiConfigDetailsEditorDialog; };
            AccVoucherApiConfigDetailsEditor.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherApiConfigDetailsRow.localTextPrefix; };
            AccVoucherApiConfigDetailsEditor = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherApiConfigDetailsEditor);
            return AccVoucherApiConfigDetailsEditor;
        }(VistaGL.GridEditorBase));
        Configurations.AccVoucherApiConfigDetailsEditor = AccVoucherApiConfigDetailsEditor;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiConfigDetailsEditorDialog = (function (_super) {
            __extends(AccVoucherApiConfigDetailsEditorDialog, _super);
            function AccVoucherApiConfigDetailsEditorDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccVoucherApiConfigDetailsForm(_this.idPrefix);
                return _this;
            }
            AccVoucherApiConfigDetailsEditorDialog.prototype.getFormKey = function () { return Configurations.AccVoucherApiConfigDetailsForm.formKey; };
            AccVoucherApiConfigDetailsEditorDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherApiConfigDetailsRow.localTextPrefix; };
            AccVoucherApiConfigDetailsEditorDialog.prototype.getNameProperty = function () { return Configurations.AccVoucherApiConfigDetailsRow.nameProperty; };
            AccVoucherApiConfigDetailsEditorDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherApiConfigDetailsEditorDialog);
            return AccVoucherApiConfigDetailsEditorDialog;
        }(VistaGL.GridEditorDialog));
        Configurations.AccVoucherApiConfigDetailsEditorDialog = AccVoucherApiConfigDetailsEditorDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiConfigDetailsGrid = (function (_super) {
            __extends(AccVoucherApiConfigDetailsGrid, _super);
            function AccVoucherApiConfigDetailsGrid(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherApiConfigDetailsGrid.prototype.getColumnsKey = function () { return 'Configurations.AccVoucherApiConfigDetails'; };
            AccVoucherApiConfigDetailsGrid.prototype.getDialogType = function () { return Configurations.AccVoucherApiConfigDetailsDialog; };
            AccVoucherApiConfigDetailsGrid.prototype.getIdProperty = function () { return Configurations.AccVoucherApiConfigDetailsRow.idProperty; };
            AccVoucherApiConfigDetailsGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherApiConfigDetailsRow.localTextPrefix; };
            AccVoucherApiConfigDetailsGrid.prototype.getService = function () { return Configurations.AccVoucherApiConfigDetailsService.baseUrl; };
            AccVoucherApiConfigDetailsGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherApiConfigDetailsGrid);
            return AccVoucherApiConfigDetailsGrid;
        }(Serenity.EntityGrid));
        Configurations.AccVoucherApiConfigDetailsGrid = AccVoucherApiConfigDetailsGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiDetailsDialog = (function (_super) {
            __extends(AccVoucherApiDetailsDialog, _super);
            function AccVoucherApiDetailsDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccVoucherApiDetailsForm(_this.idPrefix);
                return _this;
            }
            AccVoucherApiDetailsDialog.prototype.getFormKey = function () { return Configurations.AccVoucherApiDetailsForm.formKey; };
            AccVoucherApiDetailsDialog.prototype.getIdProperty = function () { return Configurations.AccVoucherApiDetailsRow.idProperty; };
            AccVoucherApiDetailsDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherApiDetailsRow.localTextPrefix; };
            AccVoucherApiDetailsDialog.prototype.getNameProperty = function () { return Configurations.AccVoucherApiDetailsRow.nameProperty; };
            AccVoucherApiDetailsDialog.prototype.getService = function () { return Configurations.AccVoucherApiDetailsService.baseUrl; };
            AccVoucherApiDetailsDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherApiDetailsDialog);
            return AccVoucherApiDetailsDialog;
        }(Serenity.EntityDialog));
        Configurations.AccVoucherApiDetailsDialog = AccVoucherApiDetailsDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiDetailsEditor = (function (_super) {
            __extends(AccVoucherApiDetailsEditor, _super);
            function AccVoucherApiDetailsEditor(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherApiDetailsEditor.prototype.getColumnsKey = function () { return 'Configurations.AccVoucherApiDetails'; };
            AccVoucherApiDetailsEditor.prototype.getDialogType = function () { return Configurations.AccVoucherApiDetailsEditorDialog; };
            AccVoucherApiDetailsEditor.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherApiDetailsRow.localTextPrefix; };
            AccVoucherApiDetailsEditor = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherApiDetailsEditor);
            return AccVoucherApiDetailsEditor;
        }(VistaGL.GridEditorBase));
        Configurations.AccVoucherApiDetailsEditor = AccVoucherApiDetailsEditor;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiDetailsEditorDialog = (function (_super) {
            __extends(AccVoucherApiDetailsEditorDialog, _super);
            function AccVoucherApiDetailsEditorDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccVoucherApiDetailsForm(_this.idPrefix);
                return _this;
            }
            AccVoucherApiDetailsEditorDialog.prototype.getFormKey = function () { return Configurations.AccVoucherApiDetailsForm.formKey; };
            AccVoucherApiDetailsEditorDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherApiDetailsRow.localTextPrefix; };
            AccVoucherApiDetailsEditorDialog.prototype.getNameProperty = function () { return Configurations.AccVoucherApiDetailsRow.nameProperty; };
            AccVoucherApiDetailsEditorDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherApiDetailsEditorDialog);
            return AccVoucherApiDetailsEditorDialog;
        }(VistaGL.GridEditorDialog));
        Configurations.AccVoucherApiDetailsEditorDialog = AccVoucherApiDetailsEditorDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherApiDetailsGrid = (function (_super) {
            __extends(AccVoucherApiDetailsGrid, _super);
            function AccVoucherApiDetailsGrid(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherApiDetailsGrid.prototype.getColumnsKey = function () { return 'Configurations.AccVoucherApiDetails'; };
            AccVoucherApiDetailsGrid.prototype.getDialogType = function () { return Configurations.AccVoucherApiDetailsDialog; };
            AccVoucherApiDetailsGrid.prototype.getIdProperty = function () { return Configurations.AccVoucherApiDetailsRow.idProperty; };
            AccVoucherApiDetailsGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherApiDetailsRow.localTextPrefix; };
            AccVoucherApiDetailsGrid.prototype.getService = function () { return Configurations.AccVoucherApiDetailsService.baseUrl; };
            AccVoucherApiDetailsGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherApiDetailsGrid);
            return AccVoucherApiDetailsGrid;
        }(Serenity.EntityGrid));
        Configurations.AccVoucherApiDetailsGrid = AccVoucherApiDetailsGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherTypeDialog = (function (_super) {
            __extends(AccVoucherTypeDialog, _super);
            function AccVoucherTypeDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Configurations.AccVoucherTypeForm(_this.idPrefix);
                return _this;
            }
            AccVoucherTypeDialog.prototype.getFormKey = function () { return Configurations.AccVoucherTypeForm.formKey; };
            AccVoucherTypeDialog.prototype.getIdProperty = function () { return Configurations.AccVoucherTypeRow.idProperty; };
            AccVoucherTypeDialog.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherTypeRow.localTextPrefix; };
            AccVoucherTypeDialog.prototype.getNameProperty = function () { return Configurations.AccVoucherTypeRow.nameProperty; };
            AccVoucherTypeDialog.prototype.getService = function () { return Configurations.AccVoucherTypeService.baseUrl; };
            AccVoucherTypeDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherTypeDialog);
            return AccVoucherTypeDialog;
        }(VistaGL.EntityDialogBase));
        Configurations.AccVoucherTypeDialog = AccVoucherTypeDialog;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Configurations;
    (function (Configurations) {
        var AccVoucherTypeGrid = (function (_super) {
            __extends(AccVoucherTypeGrid, _super);
            function AccVoucherTypeGrid(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherTypeGrid.prototype.getColumnsKey = function () { return 'Configurations.AccVoucherType'; };
            AccVoucherTypeGrid.prototype.getDialogType = function () { return Configurations.AccVoucherTypeDialog; };
            AccVoucherTypeGrid.prototype.getIdProperty = function () { return Configurations.AccVoucherTypeRow.idProperty; };
            AccVoucherTypeGrid.prototype.getLocalTextPrefix = function () { return Configurations.AccVoucherTypeRow.localTextPrefix; };
            AccVoucherTypeGrid.prototype.getService = function () { return Configurations.AccVoucherTypeService.baseUrl; };
            AccVoucherTypeGrid.prototype.getButtons = function () {
                var b = _super.prototype.getButtons.call(this);
                b.shift();
                return b;
            };
            AccVoucherTypeGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherTypeGrid);
            return AccVoucherTypeGrid;
        }(Serenity.EntityGrid));
        Configurations.AccVoucherTypeGrid = AccVoucherTypeGrid;
    })(Configurations = VistaGL.Configurations || (VistaGL.Configurations = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Default;
    (function (Default) {
        var AuditLogDialog = (function (_super) {
            __extends(AuditLogDialog, _super);
            function AuditLogDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Default.AuditLogForm(_this.idPrefix);
                return _this;
            }
            AuditLogDialog.prototype.getFormKey = function () { return Default.AuditLogForm.formKey; };
            AuditLogDialog.prototype.getIdProperty = function () { return Default.AuditLogRow.idProperty; };
            AuditLogDialog.prototype.getLocalTextPrefix = function () { return Default.AuditLogRow.localTextPrefix; };
            AuditLogDialog.prototype.getNameProperty = function () { return Default.AuditLogRow.nameProperty; };
            AuditLogDialog.prototype.getService = function () { return Default.AuditLogService.baseUrl; };
            AuditLogDialog.prototype.getToolbarButtons = function () {
                var buttons = _super.prototype.getToolbarButtons.call(this);
                buttons.splice(Q.indexOf(buttons, function (x) { return x.cssClass == "save-and-close-button"; }), 1);
                buttons.splice(Q.indexOf(buttons, function (x) { return x.cssClass == "apply-changes-button"; }), 1);
                buttons.splice(Q.indexOf(buttons, function (x) { return x.cssClass == "delete-button"; }), 1);
                return buttons;
            };
            AuditLogDialog.prototype.updateInterface = function () {
                _super.prototype.updateInterface.call(this);
                Serenity.EditorUtils.setReadonly(this.element.find('.editor'), true);
                // remove required asterisk (*)
                this.element.find('sup').hide();
                this.deleteButton.hide();
            };
            AuditLogDialog.prototype.getEntityTitle = function () {
                if (!this.isEditMode()) {
                    // we shouldn't hit here, but anyway for demo...
                    return "How did you manage to open this dialog in new record mode?";
                }
                else {
                    var entityType = _super.prototype.getEntitySingular.call(this);
                    // get name field value of record this dialog edits
                    var name_1 = this.getEntityNameFieldValue() || "";
                    return 'View ' + entityType + " (" + name_1 + ")";
                }
            };
            AuditLogDialog.prototype.onDialogOpen = function () {
                var _this = this;
                _super.prototype.onDialogOpen.call(this);
                var emp = VistaGL.Configurations.PrmEmploymentInfoRow.getLookup().items.filter(function (f) { return f.EmpId == _this.form.UserName.value; });
                console.log(emp);
                if (emp != undefined && emp.length > 0) {
                    this.form.UserFullName.value = emp[0].FullName;
                    this.form.ZoneName.value = emp[0].ZoneInfoZoneName;
                }
            };
            AuditLogDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AuditLogDialog);
            return AuditLogDialog;
        }(Serenity.EntityDialog));
        Default.AuditLogDialog = AuditLogDialog;
    })(Default = VistaGL.Default || (VistaGL.Default = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Default;
    (function (Default) {
        var AuditLogGrid = (function (_super) {
            __extends(AuditLogGrid, _super);
            function AuditLogGrid(container) {
                return _super.call(this, container) || this;
            }
            AuditLogGrid.prototype.getColumnsKey = function () { return 'Default.AuditLog'; };
            AuditLogGrid.prototype.getDialogType = function () { return Default.AuditLogDialog; };
            AuditLogGrid.prototype.getIdProperty = function () { return Default.AuditLogRow.idProperty; };
            AuditLogGrid.prototype.getLocalTextPrefix = function () { return Default.AuditLogRow.localTextPrefix; };
            AuditLogGrid.prototype.getService = function () { return Default.AuditLogService.baseUrl; };
            AuditLogGrid.prototype.getButtons = function () {
                var buttons = _super.prototype.getButtons.call(this);
                buttons.splice(Q.indexOf(buttons, function (x) { return x.cssClass == "add-button"; }), 1);
                return buttons;
            };
            //createQuickFilters(): void {
            //    super.createQuickFilters();
            //    this.addQuickFilter({
            //        type: Serenity.TimeEditor,
            //        field: AuditLogRow.Fields.ChangedOn
            //    });
            //}
            AuditLogGrid.prototype.getQuickSearchFields = function () {
                var txt = function (s) { return Q.text("Db." + Default.AuditLogRow.localTextPrefix + "." + s).toLowerCase(); };
                return [
                    { name: "", title: "all" },
                    { name: "Action" /* Action */, title: txt("Action" /* Action */) },
                    { name: "DBTableName" /* DBTableName */, title: txt("DBTableName" /* DBTableName */) },
                    { name: "Changes" /* Changes */, title: txt("Changes" /* Changes */) }
                ];
            };
            AuditLogGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AuditLogGrid);
            return AuditLogGrid;
        }(VistaGL.EntityGridBaseNew));
        Default.AuditLogGrid = AuditLogGrid;
    })(Default = VistaGL.Default || (VistaGL.Default = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Membership;
    (function (Membership) {
        var LoginPanel = (function (_super) {
            __extends(LoginPanel, _super);
            function LoginPanel(container) {
                var _this = _super.call(this, container) || this;
                $(function () {
                    $('body').vegas({
                        delay: 10000,
                        cover: true,
                        overlay: Q.resolveUrl("~/scripts/vegas/overlays/01.png"),
                        slides: [
                            { src: Q.resolveUrl('~/content/site/slides/slide1.jpg'), transition: 'fade' },
                            { src: Q.resolveUrl('~/content/site/slides/slide2.jpg'), transition: 'fade' },
                            { src: Q.resolveUrl('~/content/site/slides/slide3.jpg'), transition: 'zoomOut' },
                            { src: Q.resolveUrl('~/content/site/slides/slide4.jpg'), transition: 'blur' },
                            { src: Q.resolveUrl('~/content/site/slides/slide5.jpg'), transition: 'swirlLeft' }
                        ]
                    });
                });
                _this.form = new Membership.LoginForm(_this.idPrefix);
                _this.byId('LoginButton').click(function (e) {
                    e.preventDefault();
                    if (!_this.validateForm()) {
                        return;
                    }
                    var request = _this.getSaveEntity();
                    Q.serviceCall({
                        url: Q.resolveUrl('~/Account/Login'),
                        request: request,
                        onSuccess: function (response) {
                            var q = Q.parseQueryString();
                            var returnUrl = q['returnUrl'] || q['ReturnUrl'];
                            if (returnUrl) {
                                window.location.href = returnUrl;
                            }
                            else {
                                window.location.href = Q.resolveUrl('~/');
                            }
                        }
                    });
                });
                return _this;
            }
            LoginPanel.prototype.getFormKey = function () { return Membership.LoginForm.formKey; };
            LoginPanel = __decorate([
                Serenity.Decorators.registerClass()
            ], LoginPanel);
            return LoginPanel;
        }(Serenity.PropertyPanel));
        Membership.LoginPanel = LoginPanel;
    })(Membership = VistaGL.Membership || (VistaGL.Membership = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Membership;
    (function (Membership) {
        var ChangePasswordPanel = (function (_super) {
            __extends(ChangePasswordPanel, _super);
            function ChangePasswordPanel(container) {
                var _this = _super.call(this, container) || this;
                _this.form = new Membership.ChangePasswordForm(_this.idPrefix);
                _this.form.NewPassword.addValidationRule(_this.uniqueName, function (e) {
                    if (_this.form.w('ConfirmPassword', Serenity.PasswordEditor).value.length < 7) {
                        return Q.format(Q.text('Validation.MinRequiredPasswordLength'), 7);
                    }
                });
                _this.form.ConfirmPassword.addValidationRule(_this.uniqueName, function (e) {
                    if (_this.form.ConfirmPassword.value !== _this.form.NewPassword.value) {
                        return Q.text('Validation.PasswordConfirm');
                    }
                });
                _this.byId('SubmitButton').click(function (e) {
                    e.preventDefault();
                    if (!_this.validateForm()) {
                        return;
                    }
                    var request = _this.getSaveEntity();
                    Q.serviceCall({
                        url: Q.resolveUrl('~/Account/ChangePassword'),
                        request: request,
                        onSuccess: function (response) {
                            Q.information(Q.text('Forms.Membership.ChangePassword.Success'), function () {
                                window.location.href = Q.resolveUrl('~/');
                            });
                        }
                    });
                });
                return _this;
            }
            ChangePasswordPanel.prototype.getFormKey = function () { return Membership.ChangePasswordForm.formKey; };
            ChangePasswordPanel = __decorate([
                Serenity.Decorators.registerClass()
            ], ChangePasswordPanel);
            return ChangePasswordPanel;
        }(Serenity.PropertyPanel));
        Membership.ChangePasswordPanel = ChangePasswordPanel;
    })(Membership = VistaGL.Membership || (VistaGL.Membership = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Membership;
    (function (Membership) {
        var ForgotPasswordPanel = (function (_super) {
            __extends(ForgotPasswordPanel, _super);
            function ForgotPasswordPanel(container) {
                var _this = _super.call(this, container) || this;
                _this.form = new Membership.ForgotPasswordForm(_this.idPrefix);
                _this.byId('SubmitButton').click(function (e) {
                    e.preventDefault();
                    if (!_this.validateForm()) {
                        return;
                    }
                    var request = _this.getSaveEntity();
                    Q.serviceCall({
                        url: Q.resolveUrl('~/Account/ForgotPassword'),
                        request: request,
                        onSuccess: function (response) {
                            Q.information(Q.text('Forms.Membership.ForgotPassword.Success'), function () {
                                window.location.href = Q.resolveUrl('~/');
                            });
                        }
                    });
                });
                return _this;
            }
            ForgotPasswordPanel.prototype.getFormKey = function () { return Membership.ForgotPasswordForm.formKey; };
            ForgotPasswordPanel = __decorate([
                Serenity.Decorators.registerClass()
            ], ForgotPasswordPanel);
            return ForgotPasswordPanel;
        }(Serenity.PropertyPanel));
        Membership.ForgotPasswordPanel = ForgotPasswordPanel;
    })(Membership = VistaGL.Membership || (VistaGL.Membership = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Membership;
    (function (Membership) {
        var ResetPasswordPanel = (function (_super) {
            __extends(ResetPasswordPanel, _super);
            function ResetPasswordPanel(container) {
                var _this = _super.call(this, container) || this;
                _this.form = new Membership.ResetPasswordForm(_this.idPrefix);
                _this.form.NewPassword.addValidationRule(_this.uniqueName, function (e) {
                    if (_this.form.ConfirmPassword.value.length < 7) {
                        return Q.format(Q.text('Validation.MinRequiredPasswordLength'), 7);
                    }
                });
                _this.form.ConfirmPassword.addValidationRule(_this.uniqueName, function (e) {
                    if (_this.form.ConfirmPassword.value !== _this.form.NewPassword.value) {
                        return Q.text('Validation.PasswordConfirm');
                    }
                });
                _this.byId('SubmitButton').click(function (e) {
                    e.preventDefault();
                    if (!_this.validateForm()) {
                        return;
                    }
                    var request = _this.getSaveEntity();
                    request.Token = _this.byId('Token').val();
                    Q.serviceCall({
                        url: Q.resolveUrl('~/Account/ResetPassword'),
                        request: request,
                        onSuccess: function (response) {
                            Q.information(Q.text('Forms.Membership.ResetPassword.Success'), function () {
                                window.location.href = Q.resolveUrl('~/Account/Login');
                            });
                        }
                    });
                });
                return _this;
            }
            ResetPasswordPanel.prototype.getFormKey = function () { return Membership.ResetPasswordForm.formKey; };
            ResetPasswordPanel = __decorate([
                Serenity.Decorators.registerClass()
            ], ResetPasswordPanel);
            return ResetPasswordPanel;
        }(Serenity.PropertyPanel));
        Membership.ResetPasswordPanel = ResetPasswordPanel;
    })(Membership = VistaGL.Membership || (VistaGL.Membership = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Membership;
    (function (Membership) {
        var SignUpPanel = (function (_super) {
            __extends(SignUpPanel, _super);
            function SignUpPanel(container) {
                var _this = _super.call(this, container) || this;
                _this.form = new Membership.SignUpForm(_this.idPrefix);
                _this.form.ConfirmEmail.addValidationRule(_this.uniqueName, function (e) {
                    if (_this.form.ConfirmEmail.value !== _this.form.Email.value) {
                        return Q.text('Validation.EmailConfirm');
                    }
                });
                _this.form.ConfirmPassword.addValidationRule(_this.uniqueName, function (e) {
                    if (_this.form.ConfirmPassword.value !== _this.form.Password.value) {
                        return Q.text('Validation.PasswordConfirm');
                    }
                });
                _this.byId('SubmitButton').click(function (e) {
                    e.preventDefault();
                    if (!_this.validateForm()) {
                        return;
                    }
                    Q.serviceCall({
                        url: Q.resolveUrl('~/Account/SignUp'),
                        request: {
                            DisplayName: _this.form.DisplayName.value,
                            Email: _this.form.Email.value,
                            Password: _this.form.Password.value
                        },
                        onSuccess: function (response) {
                            Q.information(Q.text('Forms.Membership.SignUp.Success'), function () {
                                window.location.href = Q.resolveUrl('~/');
                            });
                        }
                    });
                });
                return _this;
            }
            SignUpPanel.prototype.getFormKey = function () { return Membership.SignUpForm.formKey; };
            SignUpPanel = __decorate([
                Serenity.Decorators.registerClass()
            ], SignUpPanel);
            return SignUpPanel;
        }(Serenity.PropertyPanel));
        Membership.SignUpPanel = SignUpPanel;
    })(Membership = VistaGL.Membership || (VistaGL.Membership = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var VoucherPreviewDialog = (function (_super) {
            __extends(VoucherPreviewDialog, _super);
            function VoucherPreviewDialog() {
                var _this = 
                //
                _super.call(this) || this;
                $('.s-Transaction-VoucherPreviewDialog .ui-dialog-titlebar-maximize').click();
                _this.byId('Loading').show();
                _this.byId('Loading').fadeOut(3000);
                return _this;
            }
            VoucherPreviewDialog.initializePage = function () {
                //
            };
            VoucherPreviewDialog.prototype.onDialogOpen = function () {
                //
                _super.prototype.onDialogOpen.call(this);
                this.byId('Preview').html("<iframe src='" + this._url + "' width='100%' style='border:none; height: 99%;'></iframe>");
            };
            VoucherPreviewDialog.prototype.arrange = function () {
                //
                _super.prototype.arrange.call(this);
            };
            VoucherPreviewDialog.prototype.getTemplate = function () {
                //
                return "<div id='~_Loading' style='display: none; font-size: 18px; font-weight: bold; padding-left: 10px;'>Loading.. Please wait...</div><div id='~_Preview' style='height: 100%;'></div>";
            };
            VoucherPreviewDialog.prototype.getDialogOptions = function () {
                var _this = this;
                //
                var opt = _super.prototype.getDialogOptions.call(this);
                opt.title = 'Preview';
                opt.buttons = [{
                        text: "Close",
                        click: function () { return _this.dialogClose(); }
                    }
                ];
                return opt;
            };
            VoucherPreviewDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.resizable(),
                Serenity.Decorators.maximizable()
            ], VoucherPreviewDialog);
            return VoucherPreviewDialog;
        }(Serenity.TemplatedDialog));
        Transaction.VoucherPreviewDialog = VoucherPreviewDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBankAdviceLetterGrid = (function (_super) {
            __extends(AccBankAdviceLetterGrid, _super);
            function AccBankAdviceLetterGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.pendingChanges = {};
                _this.setTitle("Bank Advice Letter");
                _this.slickContainer.on('change', '.edit:input', function (e) { return _this.inputsChange(e); });
                return _this;
            }
            AccBankAdviceLetterGrid.prototype.getColumnsKey = function () { return 'Transaction.AccBankAdviceLetter'; };
            AccBankAdviceLetterGrid.prototype.getIdProperty = function () { return Transaction.AccChequeRegisterRow.idProperty; };
            AccBankAdviceLetterGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccChequeRegisterRow.localTextPrefix; };
            AccBankAdviceLetterGrid.prototype.getService = function () { return Transaction.AccBankAdviceLetterService.baseUrl; };
            AccBankAdviceLetterGrid.prototype.createToolbarExtensions = function () {
                _super.prototype.createToolbarExtensions.call(this);
            };
            AccBankAdviceLetterGrid.prototype.markupReady = function () {
                _super.prototype.markupReady.call(this);
                setTimeout(function () {
                    $('.date-editor').unbind("datepicker").datepicker({
                        buttonImage: Q.resolveUrl("~/Content/serenity/images/calendar-blue.png"),
                        dateFormat: 'dd-mm-yy'
                    });
                }, 100);
            };
            AccBankAdviceLetterGrid.prototype.getItemCssClass = function (item, index) {
                $('.date-editor').unbind("datepicker").datepicker({
                    buttonImage: Q.resolveUrl("~/Content/serenity/images/calendar-blue.png"),
                    dateFormat: 'dd-mm-yy'
                });
                return "";
            };
            AccBankAdviceLetterGrid.prototype.getButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getButtons.call(this);
                buttons.shift();
                buttons.push({
                    title: 'Save Changes',
                    cssClass: 'apply-changes-button disabled',
                    onClick: function (e) { return _this.saveClick(); },
                    separator: true
                });
                buttons.push({
                    title: 'Print',
                    cssClass: 'print-preview-button',
                    onClick: function () {
                        if (!_this.onViewSubmit()) {
                            return;
                        }
                        var selected = _this.rowSelection.getSelectedKeys();
                        if (selected.length == 0) {
                            var rv = Q.warning("No row is selected!");
                        }
                        else {
                            var selectedOutput = [];
                            var items;
                            var _loop_3 = function () {
                                var id = selected[i];
                                items = Transaction.AccChequeRegisterRow.getLookup().items.filter(function (x) { return x.Id == +id; })[0];
                                if (items.BankAdviceDate == undefined || items.BankAdviceDate == "") {
                                    Q.warning("No bank advice date found!");
                                    return { value: void 0 };
                                }
                                selectedOutput.push(+selected[i]);
                            };
                            for (var i = 0; i < selected.length; i++) {
                                var state_1 = _loop_3();
                                if (typeof state_1 === "object")
                                    return state_1.value;
                            }
                            var _url = "~/Reports/BankAdviceLetterTemplateInfo/GenerateReport?id=" + selectedOutput + "&COAId=" + items.BankAccountInformationCoaId;
                            Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                        }
                    } // *** End onClick() ***
                }); // *** End Button.push ***
                return buttons;
            };
            AccBankAdviceLetterGrid.prototype.onViewProcessData = function (response) {
                this.pendingChanges = {};
                this.setSaveButtonState();
                return _super.prototype.onViewProcessData.call(this, response);
            };
            //protected getSlickOptions() {
            //    let opt = super.getSlickOptions();
            //    opt.frozenColumn = 5;
            //    return opt;
            //}
            AccBankAdviceLetterGrid.prototype.getQuickFilters = function () {
                var filters = _super.prototype.getQuickFilters.call(this);
                Q.first(filters, function (x) { return x.field == "IsBankAdvice" /* IsBankAdvice */; }).init = function (w) {
                    w.value = 'false';
                };
                return filters;
            };
            AccBankAdviceLetterGrid.prototype.getColumns = function () {
                var _this = this;
                var columns = _super.prototype.getColumns.call(this);
                var rowSelectionCol = Serenity.GridRowSelectionMixin.createSelectColumn(function () { return _this.rowSelection; });
                rowSelectionCol.width = rowSelectionCol.minWidth = rowSelectionCol.maxWidth = 25;
                columns.unshift(rowSelectionCol);
                var str = function (ctx) { return _this.dateInputFormatter(ctx); };
                Q.first(columns, function (x) { return x.field === "BankAdviceDate" /* BankAdviceDate */; }).format = str;
                Q.first(columns, function (x) { return x.field === "BankAdviceDate" /* BankAdviceDate */; }).width = 220;
                Q.first(columns, function (x) { return x.field == "inline-actions"; }).visible = false;
                //Q.first(columns, x => x.field == "_select__").width = 50;
                //columns.unshift();
                return columns;
            };
            AccBankAdviceLetterGrid.prototype.inputsChange = function (e) {
                var cell = this.slickGrid.getCellFromEvent(e);
                var item = this.itemAt(cell.row);
                var input = $(e.target);
                var field = input.data('field');
                var text = Q.coalesce(Q.trimToNull(input.val()), null);
                var pending = this.pendingChanges[item.Id];
                var effective = this.getEffectiveValue(item, field);
                var oldText;
                if (input.hasClass("date-editor"))
                    oldText = Q.formatDate(effective, 'dd-MM-yyyy');
                else
                    oldText = effective;
                var value;
                if (field === 'BankAdviceDate') {
                    value = Q.formatDate(text, 'yyyy-MM-ddTHH:mm');
                }
                else if (input.hasClass("numeric")) {
                    var i = Q.parseInteger(text);
                    if (isNaN(i) || i > 32767 || i < 0) {
                        Q.notifyError(Q.text('Validation.Integer'), '', null);
                        input.val(oldText);
                        input.focus();
                        return;
                    }
                    value = i;
                }
                else
                    value = text;
                if (!pending) {
                    this.pendingChanges[item.Id] = pending = {};
                }
                pending[field] = value;
                item[field] = value;
                this.view.refresh();
                //console.log(value);
                if (input.hasClass("date-editor"))
                    value = Q.formatDate(value, 'dd-MM-yyyy');
                input.val(value).addClass('dirty');
                this.setSaveButtonState();
            };
            AccBankAdviceLetterGrid.prototype.setSaveButtonState = function () {
                this.toolbar.findButton('apply-changes-button').toggleClass('disabled', Object.keys(this.pendingChanges).length === 0);
            };
            AccBankAdviceLetterGrid.prototype.saveClick = function () {
                if (Object.keys(this.pendingChanges).length === 0) {
                    return;
                }
                // this calls save service for all modified rows, one by one
                // you could write a batch update service
                var keys = Object.keys(this.pendingChanges);
                var current = -1;
                var self = this;
                (function saveNext() {
                    if (++current >= keys.length) {
                        self.refresh();
                        return;
                    }
                    var key = keys[current];
                    var entity = Q.deepClone(self.pendingChanges[key]);
                    entity.Id = key;
                    Q.serviceRequest('Transaction/AccBankAdviceLetter/Update', {
                        EntityId: key,
                        Entity: entity
                    }, function (response) {
                        delete self.pendingChanges[key];
                        saveNext();
                    });
                })();
            };
            AccBankAdviceLetterGrid.prototype.dateInputFormatter = function (ctx) {
                var klass = 'edit date-editor ';
                var item = ctx.item;
                var pending = this.pendingChanges[item.Id];
                var column = ctx.column;
                if (pending && pending[column.field] !== undefined) {
                    klass += ' dirty';
                }
                var value = this.getEffectiveValue(item, column.field);
                return "<input type='text' class='" + klass +
                    "' data-field='" + column.field +
                    "' value='" + Q.formatDate(value, 'dd-MM-yyyy') +
                    "' maxlength='" + column.sourceItem.maxLength + "'/>";
            };
            AccBankAdviceLetterGrid.prototype.getEffectiveValue = function (item, field) {
                var pending = this.pendingChanges[item.Id];
                if (pending && pending[field] !== undefined) {
                    return pending[field];
                }
                return item[field];
            };
            AccBankAdviceLetterGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBankAdviceLetterGrid);
            return AccBankAdviceLetterGrid;
        }(VistaGL.EntityGridBase));
        Transaction.AccBankAdviceLetterGrid = AccBankAdviceLetterGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBankReconciliationDirectDialog = (function (_super) {
            __extends(AccBankReconciliationDirectDialog, _super);
            function AccBankReconciliationDirectDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Transaction.AccBankReconciliationDirectForm(_this.idPrefix);
                return _this;
            }
            AccBankReconciliationDirectDialog.prototype.getFormKey = function () { return Transaction.AccBankReconciliationDirectForm.formKey; };
            AccBankReconciliationDirectDialog.prototype.getIdProperty = function () { return Transaction.AccBankReconciliationDirectRow.idProperty; };
            AccBankReconciliationDirectDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccBankReconciliationDirectRow.localTextPrefix; };
            AccBankReconciliationDirectDialog.prototype.getNameProperty = function () { return Transaction.AccBankReconciliationDirectRow.nameProperty; };
            AccBankReconciliationDirectDialog.prototype.getService = function () { return Transaction.AccBankReconciliationDirectService.baseUrl; };
            AccBankReconciliationDirectDialog.prototype.onDialogOpen = function () {
                _super.prototype.onDialogOpen.call(this);
                this.form.FundControlInformationId.element.hide();
            };
            AccBankReconciliationDirectDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccBankReconciliationDirectDialog);
            return AccBankReconciliationDirectDialog;
        }(VistaGL.EntityDialogBase));
        Transaction.AccBankReconciliationDirectDialog = AccBankReconciliationDirectDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBankReconciliationDirectGrid = (function (_super) {
            __extends(AccBankReconciliationDirectGrid, _super);
            //private rowSelection: Serenity.GridRowSelectionMixin;
            function AccBankReconciliationDirectGrid(container) {
                return _super.call(this, container) || this;
            }
            AccBankReconciliationDirectGrid.prototype.getColumnsKey = function () { return 'Transaction.AccBankReconciliationDirect'; };
            AccBankReconciliationDirectGrid.prototype.getDialogType = function () { return Transaction.AccBankReconciliationDirectDialog; };
            AccBankReconciliationDirectGrid.prototype.getIdProperty = function () { return Transaction.AccBankReconciliationDirectRow.idProperty; };
            AccBankReconciliationDirectGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccBankReconciliationDirectRow.localTextPrefix; };
            AccBankReconciliationDirectGrid.prototype.getService = function () { return Transaction.AccBankReconciliationDirectService.baseUrl; };
            //usePager(): boolean { return false; }
            //protected createToolbarExtensions() {
            //    super.createToolbarExtensions();
            //    this.rowSelection = new Serenity.GridRowSelectionMixin(this);
            //}
            //protected getButtons() {
            //    var b = super.getButtons();
            //    b.shift();
            //    b.push({
            //        title: 'Perform Voucher Posting',
            //        cssClass: 'send-button',
            //        onClick: () => {
            //            if (!this.onViewSubmit()) {
            //                return;
            //            }
            //            var action = new BankReconciliationBulkAction();
            //            action.done = () => this.rowSelection.resetCheckedAndRefresh();
            //            action.execute(this.rowSelection.getSelectedKeys());
            //        }
            //    });
            //    return b;
            //}
            //protected getColumns() {
            //    var columns = super.getColumns();
            //    columns.splice(0, 0, Serenity.GridRowSelectionMixin.createSelectColumn(() => this.rowSelection));
            //    return columns;
            //}
            //protected getViewOptions() {
            //    var opt = super.getViewOptions();
            //    opt.rowsPerPage = 100;
            //    return opt;
            //}
            AccBankReconciliationDirectGrid.prototype.getQuickFilters = function () {
                var filters = _super.prototype.getQuickFilters.call(this);
                Q.first(filters, function (x) { return x.field == "IsBankReconcile" /* IsBankReconcile */; }).init = function (w) {
                    w.value = "false";
                };
                // --
                var filterByChequeNo = Q.tryFirst(filters, function (x) { return x.field == "ChequeNo" /* ChequeNo */; });
                if (filterByChequeNo != null) {
                    filterByChequeNo.title = "Cheque No..";
                    filterByChequeNo.type = Serenity.StringEditor;
                    filterByChequeNo.handler = function (h) {
                        if (h.active) {
                            h.request.Criteria = Serenity.Criteria.and(h.request.Criteria, [["ChequeNo" /* ChequeNo */], 'like', '%' + h.value + '%']);
                        }
                    };
                }
                return filters;
            };
            AccBankReconciliationDirectGrid.prototype.getSlickOptions = function () {
                //
                var opt = _super.prototype.getSlickOptions.call(this);
                opt.enableTextSelectionOnCells = true;
                opt.selectedCellCssClass = "slick-row-selected";
                opt.enableCellNavigation = true;
                return opt;
            };
            AccBankReconciliationDirectGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBankReconciliationDirectGrid);
            return AccBankReconciliationDirectGrid;
        }(VistaGL.EntityGridBase));
        Transaction.AccBankReconciliationDirectGrid = AccBankReconciliationDirectGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var BankReconciliationVoucherGrid = (function (_super) {
            __extends(BankReconciliationVoucherGrid, _super);
            function BankReconciliationVoucherGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.pendingChanges = {};
                _this.setTitle("Bank Reconciliation");
                _this.slickContainer.on('change', '.edit:input', function (e) { return _this.inputsChange(e); });
                return _this;
            }
            BankReconciliationVoucherGrid.prototype.getColumnsKey = function () { return 'Transaction.BankReconciliationVoucher'; };
            BankReconciliationVoucherGrid.prototype.getIdProperty = function () { return Transaction.AccVoucherDetailsRow.idProperty; };
            BankReconciliationVoucherGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherDetailsRow.localTextPrefix; };
            BankReconciliationVoucherGrid.prototype.getService = function () { return Transaction.BankReconciliationVoucherService.baseUrl; };
            BankReconciliationVoucherGrid.prototype.createSlickGrid = function () {
                //
                var grid = _super.prototype.createSlickGrid.call(this);
                grid.setSelectionModel(new Slick.RowSelectionModel());
                return grid;
            };
            BankReconciliationVoucherGrid.prototype.markupReady = function () {
                _super.prototype.markupReady.call(this);
                var $dd = this.slickContainer.find('.date-editor');
                $dd.datepicker({
                    showOn: "button",
                    buttonImageOnly: true,
                    buttonImage: Q.resolveUrl("~/Content/serenity/images/calendar-blue.png"),
                    dateFormat: 'dd-mm-yy'
                    //beforeShow: function () {
                    //    calendarOpen = true
                    //},
                    //onClose: function () {
                    //    calendarOpen = false
                    //}
                });
            };
            BankReconciliationVoucherGrid.prototype.getButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getButtons.call(this);
                buttons.shift();
                buttons.push({
                    title: 'Save Changes',
                    cssClass: 'apply-changes-button disabled',
                    onClick: function (e) { return _this.saveClick(); },
                    separator: true
                });
                return buttons;
            };
            BankReconciliationVoucherGrid.prototype.onViewProcessData = function (response) {
                //
                this.pendingChanges = {};
                this.setSaveButtonState();
                return _super.prototype.onViewProcessData.call(this, response);
            };
            BankReconciliationVoucherGrid.prototype.getSlickOptions = function () {
                var opt = _super.prototype.getSlickOptions.call(this);
                opt.enableTextSelectionOnCells = true;
                opt.selectedCellCssClass = "slick-row-selected";
                opt.enableCellNavigation = true;
                return opt;
            };
            BankReconciliationVoucherGrid.prototype.getQuickFilters = function () {
                var filters = _super.prototype.getQuickFilters.call(this);
                Q.first(filters, function (x) { return x.field == "IsClearDate" /* IsClearDate */; }).init = function (w) {
                    w.value = "0";
                };
                // --
                var filterByChequeNo = Q.tryFirst(filters, function (x) { return x.field == "VoucherInformationChequeRegisterNo" /* VoucherInformationChequeRegisterNo */; });
                if (filterByChequeNo != null) {
                    filterByChequeNo.title = "Cheque No..";
                    filterByChequeNo.type = Serenity.StringEditor;
                    filterByChequeNo.handler = function (h) {
                        if (h.active) {
                            h.request.Criteria = Serenity.Criteria.and(h.request.Criteria, [["VoucherInformationChequeRegisterNo" /* VoucherInformationChequeRegisterNo */], 'like', '%' + h.value + '%']);
                        }
                    };
                }
                return filters;
            };
            BankReconciliationVoucherGrid.prototype.getQuickSearchFields = function () {
                var txt = function (s) { return Q.text("Db." + Transaction.AccVoucherDetailsRow.localTextPrefix + "." + s).toLowerCase(); };
                return [
                    { name: "", title: "all" },
                    { name: "VoucherInformationVoucherNo" /* VoucherInformationVoucherNo */, title: txt("VoucherInformationVoucherNo" /* VoucherInformationVoucherNo */) },
                    { name: "PaytoOrReciveFrom" /* PaytoOrReciveFrom */, title: txt("PaytoOrReciveFrom" /* PaytoOrReciveFrom */) },
                    { name: "VoucherInformationChequeRegisterNo" /* VoucherInformationChequeRegisterNo */, title: txt("VoucherInformationChequeRegisterNo" /* VoucherInformationChequeRegisterNo */) },
                ];
            };
            BankReconciliationVoucherGrid.prototype.getColumns = function () {
                var _this = this;
                var columns = _super.prototype.getColumns.call(this);
                var str = function (ctx) { return _this.dateInputFormatter(ctx); };
                Q.first(columns, function (x) { return x.field === "ClearDate" /* ClearDate */; }).format = str;
                Q.first(columns, function (x) { return x.field === "ClearDate" /* ClearDate */; }).width = 120;
                columns.unshift({
                    field: 'Print Voucher',
                    name: '',
                    format: function (ctx) { return '<a class="inline-action Print-link" title="Print Voucher">' +
                        '<i class="fa fa-print text-blue"></i></a>'; },
                    width: 24,
                    minWidth: 24,
                    maxWidth: 24
                });
                Q.first(columns, function (x) { return x.field == "inline-actions"; }).visible = false;
                return columns;
            };
            BankReconciliationVoucherGrid.prototype.onClick = function (e, row, cell) {
                _super.prototype.onClick.call(this, e, row, cell);
                if (e.isDefaultPrevented()) {
                    return;
                }
                var item = this.itemAt(row);
                var target = $(e.target);
                if (target.parent().hasClass('Print-link'))
                    target = target.parent();
                var voucher = Q.tryFirst(Transaction.AccVoucherInformationRow.getLookup().items, function (x) { return x.Id == item.VoucherInformationId; });
                if (target.hasClass("Print-link")) {
                    e.preventDefault();
                    if (voucher.LinkedWithAutoJV == true && voucher.LinkedWithAutoJV != null) {
                        var _url = "~/Reports/VoucherPreview/IndexCombineVoucher?id=" + item.VoucherInformationId + "&isCombineVoucher=" + true;
                    }
                    else {
                        var _url = "~/Reports/VoucherPreview?id=" + item.VoucherInformationId;
                    }
                    Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                }
            };
            BankReconciliationVoucherGrid.prototype.inputsChange = function (e) {
                var cell = this.slickGrid.getCellFromEvent(e);
                var item = this.itemAt(cell.row);
                var input = $(e.target);
                var field = input.data('field');
                var text = Q.coalesce(Q.trimToNull(input.val()), '');
                var pending = this.pendingChanges[item.Id];
                var effective = this.getEffectiveValue(item, field);
                var oldText;
                if (input.hasClass("date-editor"))
                    oldText = Q.formatDate(effective, 'dd-MM-yyyy');
                else
                    oldText = effective;
                var value;
                if (field === 'ClearDate') {
                    value = Q.formatDate(text, 'yyyy-MM-ddTHH:mm');
                    // value = Q.parseDate(value);
                    //console.log(value);
                    //if (value == null || isNaN(value)) {
                    //    Q.notifyError(Q.text('Validation.DateInvalid'), '', null);
                    //    input.val(oldText);
                    //    input.focus();
                    //    return;
                    //}
                }
                else if (input.hasClass("numeric")) {
                    var i = Q.parseInteger(text);
                    if (isNaN(i) || i > 32767 || i < 0) {
                        Q.notifyError(Q.text('Validation.Integer'), '', null);
                        input.val(oldText);
                        input.focus();
                        return;
                    }
                    value = i;
                }
                else
                    value = text;
                if (!pending) {
                    this.pendingChanges[item.Id] = pending = {};
                }
                pending[field] = value;
                item[field] = value;
                this.view.refresh();
                if (input.hasClass("date-editor"))
                    value = Q.formatDate(value, 'dd-MM-yyyy');
                input.val(value).addClass('dirty');
                this.setSaveButtonState();
            };
            BankReconciliationVoucherGrid.prototype.setSaveButtonState = function () {
                this.toolbar.findButton('apply-changes-button').toggleClass('disabled', Object.keys(this.pendingChanges).length === 0);
            };
            BankReconciliationVoucherGrid.prototype.saveClick = function () {
                if (Object.keys(this.pendingChanges).length === 0) {
                    return;
                }
                // this calls save service for all modified rows, one by one
                // you could write a batch update service
                var keys = Object.keys(this.pendingChanges);
                var current = -1;
                var self = this;
                (function saveNext() {
                    if (++current >= keys.length) {
                        self.refresh();
                        return;
                    }
                    var key = keys[current];
                    var entity = Q.deepClone(self.pendingChanges[key]);
                    entity.Id = key;
                    entity.IsClearDate = 1;
                    Q.serviceRequest('Transaction/AccVoucherDetails/Update', {
                        EntityId: key,
                        Entity: entity
                    }, function (response) {
                        delete self.pendingChanges[key];
                        saveNext();
                    });
                })();
            };
            BankReconciliationVoucherGrid.prototype.dateInputFormatter = function (ctx) {
                var klass = 'edit date-editor ';
                var item = ctx.item;
                var pending = this.pendingChanges[item.Id];
                var column = ctx.column;
                if (pending && pending[column.field] !== undefined) {
                    klass += ' dirty';
                }
                var value = this.getEffectiveValue(item, column.field);
                return "<input type='text' class='" + klass +
                    "' data-field='" + column.field +
                    "' value='" + Q.formatDate(value, 'dd-MM-yyyy') +
                    "' maxlength='" + column.sourceItem.maxLength + "'/>";
            };
            BankReconciliationVoucherGrid.prototype.getEffectiveValue = function (item, field) {
                var pending = this.pendingChanges[item.Id];
                if (pending && pending[field] !== undefined) {
                    return pending[field];
                }
                return item[field];
            };
            BankReconciliationVoucherGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], BankReconciliationVoucherGrid);
            return BankReconciliationVoucherGrid;
        }(VistaGL.EntityGridBase));
        Transaction.BankReconciliationVoucherGrid = BankReconciliationVoucherGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetDialog = (function (_super) {
            __extends(AccBudgetDialog, _super);
            function AccBudgetDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccBudgetForm(_this.idPrefix);
                return _this;
            }
            AccBudgetDialog.prototype.getFormKey = function () { return Transaction.AccBudgetForm.formKey; };
            AccBudgetDialog.prototype.getIdProperty = function () { return Transaction.AccBudgetRow.idProperty; };
            AccBudgetDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetRow.localTextPrefix; };
            AccBudgetDialog.prototype.getNameProperty = function () { return Transaction.AccBudgetRow.nameProperty; };
            AccBudgetDialog.prototype.getService = function () { return Transaction.AccBudgetService.baseUrl; };
            AccBudgetDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccBudgetDialog);
            return AccBudgetDialog;
        }(VistaGL.EntityDialogBase));
        Transaction.AccBudgetDialog = AccBudgetDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetGrid = (function (_super) {
            __extends(AccBudgetGrid, _super);
            function AccBudgetGrid(container) {
                return _super.call(this, container) || this;
            }
            AccBudgetGrid.prototype.getColumnsKey = function () { return 'Transaction.AccBudget'; };
            AccBudgetGrid.prototype.getDialogType = function () { return Transaction.AccBudgetDialog; };
            AccBudgetGrid.prototype.getIdProperty = function () { return Transaction.AccBudgetRow.idProperty; };
            AccBudgetGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetRow.localTextPrefix; };
            AccBudgetGrid.prototype.getService = function () { return Transaction.AccBudgetService.baseUrl; };
            AccBudgetGrid = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccBudgetGrid);
            return AccBudgetGrid;
        }(VistaGL.EntityGridBaseNew));
        Transaction.AccBudgetGrid = AccBudgetGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetApprovalHistoryDialog = (function (_super) {
            __extends(AccBudgetApprovalHistoryDialog, _super);
            function AccBudgetApprovalHistoryDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccBudgetApprovalHistoryForm(_this.idPrefix);
                return _this;
            }
            AccBudgetApprovalHistoryDialog.prototype.getFormKey = function () { return Transaction.AccBudgetApprovalHistoryForm.formKey; };
            AccBudgetApprovalHistoryDialog.prototype.getIdProperty = function () { return Transaction.AccBudgetApprovalHistoryRow.idProperty; };
            AccBudgetApprovalHistoryDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetApprovalHistoryRow.localTextPrefix; };
            AccBudgetApprovalHistoryDialog.prototype.getService = function () { return Transaction.AccBudgetApprovalHistoryService.baseUrl; };
            AccBudgetApprovalHistoryDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBudgetApprovalHistoryDialog);
            return AccBudgetApprovalHistoryDialog;
        }(Serenity.EntityDialog));
        Transaction.AccBudgetApprovalHistoryDialog = AccBudgetApprovalHistoryDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetApprovalHistoryGrid = (function (_super) {
            __extends(AccBudgetApprovalHistoryGrid, _super);
            function AccBudgetApprovalHistoryGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.BudgetForDepartmentId = 0;
                return _this;
                //$('.buttons-inner').hide();
            }
            AccBudgetApprovalHistoryGrid.prototype.getColumnsKey = function () { return 'Transaction.AccBudgetApprovalHistory'; };
            AccBudgetApprovalHistoryGrid.prototype.getDialogType = function () { return Transaction.AccBudgetApprovalHistoryDialog; };
            AccBudgetApprovalHistoryGrid.prototype.getIdProperty = function () { return Transaction.AccBudgetApprovalHistoryRow.idProperty; };
            AccBudgetApprovalHistoryGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetApprovalHistoryRow.localTextPrefix; };
            AccBudgetApprovalHistoryGrid.prototype.getService = function () { return Transaction.AccBudgetApprovalHistoryService.baseUrl; };
            AccBudgetApprovalHistoryGrid.prototype.loadByBudgetForDepartmentId = function (budgetForDeptId) {
                this.BudgetForDepartmentId = budgetForDeptId;
                this.refresh();
            };
            AccBudgetApprovalHistoryGrid.prototype.getColumns = function () {
                return _super.prototype.getColumns.call(this).filter(function (x) { return x.field != "inline-actions"; });
            };
            AccBudgetApprovalHistoryGrid.prototype.onViewSubmit = function () {
                if (!_super.prototype.onViewSubmit.call(this)) {
                    return false;
                }
                var request = this.view.params;
                //if (this.BudgetForDepartmentId > 0)
                request.Criteria = Serenity.Criteria.and(request.Criteria, [["BudgetForDepartmentId" /* BudgetForDepartmentId */], '=', this.BudgetForDepartmentId]);
                return true;
            };
            AccBudgetApprovalHistoryGrid.prototype.getButtons = function () {
                var buttons = _super.prototype.getButtons.call(this);
                buttons.shift();
                return buttons;
            };
            AccBudgetApprovalHistoryGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBudgetApprovalHistoryGrid);
            return AccBudgetApprovalHistoryGrid;
        }(VistaGL.EntityGridBase));
        Transaction.AccBudgetApprovalHistoryGrid = AccBudgetApprovalHistoryGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetCircularDialog = (function (_super) {
            __extends(AccBudgetCircularDialog, _super);
            function AccBudgetCircularDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccBudgetCircularForm(_this.idPrefix);
                return _this;
            }
            AccBudgetCircularDialog.prototype.getFormKey = function () { return Transaction.AccBudgetCircularForm.formKey; };
            AccBudgetCircularDialog.prototype.getIdProperty = function () { return Transaction.AccBudgetCircularRow.idProperty; };
            AccBudgetCircularDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetCircularRow.localTextPrefix; };
            AccBudgetCircularDialog.prototype.getService = function () { return Transaction.AccBudgetCircularService.baseUrl; };
            AccBudgetCircularDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBudgetCircularDialog);
            return AccBudgetCircularDialog;
        }(Serenity.EntityDialog));
        Transaction.AccBudgetCircularDialog = AccBudgetCircularDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetCircularGrid = (function (_super) {
            __extends(AccBudgetCircularGrid, _super);
            function AccBudgetCircularGrid(container) {
                return _super.call(this, container) || this;
            }
            AccBudgetCircularGrid.prototype.getColumnsKey = function () { return 'Transaction.AccBudgetCircular'; };
            AccBudgetCircularGrid.prototype.getDialogType = function () { return Transaction.AccBudgetCircularDialog; };
            AccBudgetCircularGrid.prototype.getIdProperty = function () { return Transaction.AccBudgetCircularRow.idProperty; };
            AccBudgetCircularGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetCircularRow.localTextPrefix; };
            AccBudgetCircularGrid.prototype.getService = function () { return Transaction.AccBudgetCircularService.baseUrl; };
            AccBudgetCircularGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBudgetCircularGrid);
            return AccBudgetCircularGrid;
        }(Serenity.EntityGrid));
        Transaction.AccBudgetCircularGrid = AccBudgetCircularGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetCreationDialog = (function (_super) {
            __extends(AccBudgetCreationDialog, _super);
            function AccBudgetCreationDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Transaction.AccBudgetCreationForm(_this.idPrefix);
                return _this;
            }
            AccBudgetCreationDialog.prototype.getFormKey = function () { return Transaction.AccBudgetCreationForm.formKey; };
            AccBudgetCreationDialog.prototype.getIdProperty = function () { return Transaction.AccBudgetForDepartmentDetailRow.idProperty; };
            AccBudgetCreationDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetForDepartmentDetailRow.localTextPrefix; };
            AccBudgetCreationDialog.prototype.getService = function () { return Transaction.AccBudgetForDepartmentDetailService.baseUrl; };
            AccBudgetCreationDialog.prototype.onDialogOpen = function () {
                if (this.isEditMode()) {
                    console.log(this.entity);
                }
            };
            AccBudgetCreationDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBudgetCreationDialog);
            return AccBudgetCreationDialog;
        }(Serenity.EntityDialog));
        Transaction.AccBudgetCreationDialog = AccBudgetCreationDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetCreationGrid = (function (_super) {
            __extends(AccBudgetCreationGrid, _super);
            function AccBudgetCreationGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.isEditedFlag = 'isEdited';
                _this.userInfo = VistaGL.Authorization.userDefinition;
                _this.setTitle("Budget Preparation");
                var employeeId = _this.userInfo.EmpId;
                var tree = new _Ext.TreeGridMixin({
                    grid: _this,
                    getParentId: function (x) { return x.ParentId; },
                    idField: "BudgetHeadId" /* BudgetHeadId */,
                    toggleField: "BudgetHeadName" /* BudgetHeadName */,
                    initialCollapse: function () { return false; }
                });
                _this.slickGrid.onCellChange.subscribe(function (e, args) {
                    var item = args.item;
                    item[_this.isEditedFlag] = true;
                    _this.view.updateItem(item[_this.getIdProperty()], item);
                });
                _this.slickGrid.onBeforeEditCell.subscribe(function (e, args) {
                    var item = args.item;
                    console.log(item.BudgetForDepartmentForwardToEmployeeId);
                    var column = args.column;
                    if (!item.IsBudgetHead)
                        return false;
                    if (!item.CircularIsActive)
                        return false;
                    if (item.BudgetForDepartmentForwardToEmployeeId == +'' || item.BudgetForDepartmentForwardToEmployeeId == undefined)
                        return true;
                    else if (employeeId != item.BudgetForDepartmentForwardToEmployeeId)
                        return false;
                });
                return _this;
            }
            AccBudgetCreationGrid.prototype.getColumnsKey = function () { return 'Transaction.AccBudgetCreation'; };
            AccBudgetCreationGrid.prototype.getDialogType = function () { return Transaction.AccBudgetCreationDialog; };
            AccBudgetCreationGrid.prototype.getIdProperty = function () { return Transaction.AccBudgetForDepartmentDetailRow.idProperty; };
            AccBudgetCreationGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetForDepartmentDetailRow.localTextPrefix; };
            AccBudgetCreationGrid.prototype.getService = function () { return Transaction.AccBudgetCreationService.baseUrl; };
            AccBudgetCreationGrid.prototype.getItemCssClass = function (item, index) {
                var klass = "";
                var IsEdited = item[this.isEditedFlag];
                if (!IsEdited) {
                    IsEdited = false;
                }
                if (IsEdited == true) {
                    klass += " text-bold";
                }
                if (item.IsBudgetHead == true)
                    klass += " budget-heads";
                else
                    klass += " non-budget-heads";
                return Q.trimToNull(klass);
            };
            AccBudgetCreationGrid.prototype.getSlickOptions = function () {
                var opt = _super.prototype.getSlickOptions.call(this);
                opt.editable = true;
                opt.autoEdit = true;
                return opt;
            };
            AccBudgetCreationGrid.prototype.getColumns = function () {
                return _super.prototype.getColumns.call(this).filter(function (x) { return x.field != "inline-actions"; });
            };
            AccBudgetCreationGrid.prototype.getButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getButtons.call(this);
                buttons.shift();
                buttons.push({
                    title: 'Draft',
                    cssClass: 'apply-changes-button',
                    onClick: function (e) {
                        _this.slickGrid.getEditController().commitCurrentEdit();
                        var success;
                        success = false;
                        var items = _this.view.getItems().filter(function (q) { return q[_this.isEditedFlag] == true; });
                        items.forEach(function (item) {
                            if (item['RowNum'])
                                delete item['RowNum'];
                            if (item['_indent'])
                                delete item['_indent'];
                            if (item['_collapsed'])
                                delete item['_collapsed'];
                            if (item[_this.isEditedFlag])
                                delete item[_this.isEditedFlag];
                            item.BudgetForDepartmentApprovalStatusId = VistaGL.ApprovalStatus.Draft;
                            Transaction.AccBudgetCreationService.Update({ EntityId: item.Id, Entity: item }, function (response) {
                            }, { async: false });
                            success = true;
                        });
                        if (success)
                            Q.notifySuccess("Draft Success !");
                    },
                    separator: true
                });
                buttons.push({
                    title: "Submit", cssClass: "send-button",
                    onClick: function (x) {
                        var message = "Are you want to submit this budget?";
                        Q.confirm(message, function () {
                            if ($('.selectApprover').select2("val") == "") {
                                Q.notifyError("Select submit to from dropdown please!");
                                return;
                            }
                            _this.slickGrid.getEditController().commitCurrentEdit();
                            var success;
                            success = false;
                            var items = _this.view.getItems().filter(function (q) { return q[_this.isEditedFlag] == true; });
                            var i = 0;
                            items.forEach(function (item) {
                                i++;
                                if (item['RowNum'])
                                    delete item['RowNum'];
                                if (item['_indent'])
                                    delete item['_indent'];
                                if (item['_collapsed'])
                                    delete item['_collapsed'];
                                if (item[_this.isEditedFlag])
                                    delete item[_this.isEditedFlag];
                                if (items.length == i) {
                                    item.BudgetForDepartmentApprovalStatusId = VistaGL.ApprovalStatus.Submit;
                                    item.BudgetForDepartmentForwardToEmployeeId = $('.selectApprover').select2("val");
                                }
                                Transaction.AccBudgetCreationService.Update({ EntityId: item.Id, Entity: item }, function (response) {
                                }, { async: false });
                                success = true;
                            });
                            if (items.length == 0) {
                                items = _this.view.getItems();
                                console.log(items[0]);
                                if (items[0]['RowNum'])
                                    delete items[0]['RowNum'];
                                if (items[0]['_indent'])
                                    delete items[0]['_indent'];
                                if (items[0]['_collapsed'])
                                    delete items[0]['_collapsed'];
                                items[0].BudgetForDepartmentApprovalStatusId = VistaGL.ApprovalStatus.Submit;
                                items[0].BudgetForDepartmentForwardToEmployeeId = $('.selectApprover').select2("val");
                                Transaction.AccBudgetCreationService.Update({ EntityId: items[0].Id, Entity: items[0] }, function (response) {
                                }, { async: false });
                                success = true;
                            }
                            if (success)
                                Q.notifySuccess("Application has been submitted successfully!");
                        });
                    },
                    separator: true
                });
                return buttons;
            };
            AccBudgetCreationGrid.prototype.onViewProcessData = function (response) {
                var budgetForDeptId = response.Entities[0] == undefined ? 0 : response.Entities[0].BudgetForDepartmentId;
                var budgetForDept = Transaction.AccBudgetForDepartmentRow.getLookup().items.filter(function (x) { return x.Id == budgetForDeptId; })[0];
                this.updateColumnHeader(budgetForDept == undefined ? 0 : budgetForDept.BudgetCircularFinancialYearId);
                //let entity = response.Entities[0];
                //console.log(entity);
                var approvalActionLookup = $('#ddl11');
                if (approvalActionLookup.length == 0) {
                    $('.buttons-inner').append('');
                    var ddl = $('<select />');
                    ddl.addClass('selectApprover');
                    ddl.attr('id', 'ddl11');
                    ddl.css("width", 250);
                    var currentApproverType = "Recommender";
                    var defaultTextinDDL = '';
                    defaultTextinDDL = '--- Submit To ---';
                    //$('.approve-button').show();
                    //$('.recommend-button').show();
                    $('<option />', { value: '', text: defaultTextinDDL }).appendTo(ddl);
                    Transaction.AccBudgetCreationService.GetBudgetApproverList({ ZoneId: budgetForDept.ZoneId, DepartmentId: budgetForDept.DepartmentId }, function (r) {
                        var items = r.Entities;
                        for (var _i = 0, items_6 = items; _i < items_6.length; _i++) {
                            var item = items_6[_i];
                            $('<option />', { value: item.Id.toString(), text: item.LookupText }).appendTo(ddl);
                        }
                    });
                    ddl.appendTo('.buttons-inner');
                    $('select.selectApprover').select2();
                    $('select.selectApprover').select2('data', { id: '', text: defaultTextinDDL });
                }
                return _super.prototype.onViewProcessData.call(this, response);
            };
            AccBudgetCreationGrid.prototype.updateColumnHeader = function (Id) {
                var _this = this;
                if (Id == 0 || Id == null) {
                    Q.warning("You may not have permission or no budget is setup for your department of this financial year. Please check.");
                    return;
                }
                else {
                    Transaction.AccBudgetCreationService.GetFinancialYearName({ Id: Id }, function (r) {
                        var items = r.Entities[0];
                        _this.slickGrid.updateColumnHeader("ProposedBudgetAmount" /* ProposedBudgetAmount */, 'Proposed Budget </br>' + items.NextYearName, 'Proposed Budget ' + items.NextYearName);
                        _this.slickGrid.updateColumnHeader("RevisedEstimateAmount" /* RevisedEstimateAmount */, 'Revised Estimate </br>' + items.CurrentYearName, 'Revised Estimate ' + items.CurrentYearName);
                        _this.slickGrid.updateColumnHeader("ActualFirstSixMonths" /* ActualFirstSixMonths */, 'Actual 1st Six Months </br>' + items.CurrentYearName, 'Actual 1st Six Months ' + items.CurrentYearName);
                        _this.slickGrid.updateColumnHeader("BudgetApproved" /* BudgetApproved */, 'Budget (Approved) </br>' + items.CurrentYearName, 'Budget (Approved) ' + items.CurrentYearName);
                        _this.slickGrid.updateColumnHeader("ActualDuring" /* ActualDuring */, 'Actual During </br>' + items.PreviousYearName, 'Actual During ' + items.PreviousYearName);
                    });
                }
            };
            AccBudgetCreationGrid.prototype.getQuickFilters = function () {
                var ur = VistaGL.Authorization.userDefinition;
                var filters = _super.prototype.getQuickFilters.call(this);
                Q.first(filters, function (x) { return x.field == "CircularFinancialYearId" /* CircularFinancialYearId */; }).init = function (w) {
                    w.value = Transaction.AccBudgetCircularRow.getLookup().items.filter(function (x) { return x.IsActive == true; })[0].FinancialYearId.toString();
                };
                Q.first(filters, function (x) { return x.field == "BudgetForDepartmentDepartmentId" /* BudgetForDepartmentDepartmentId */; }).init = function (w) {
                    w.value = VistaGL.Configurations.PrmEmploymentInfoRow.getLookup().items.filter(function (x) { return x.Id == ur.EmpId; })[0].DivisionId.toString();
                };
                return filters;
            };
            AccBudgetCreationGrid.prototype.createQuickFilters = function () {
                _super.prototype.createQuickFilters.call(this);
                this.departmentFilter = this.findQuickFilter(Serenity.LookupEditor, "BudgetForDepartmentDepartmentId" /* BudgetForDepartmentDepartmentId */);
                this.zoneFilter = this.findQuickFilter(Serenity.LookupEditor, "BudgetForDepartmentZoneId" /* BudgetForDepartmentZoneId */);
            };
            AccBudgetCreationGrid.prototype.set_shippingState = function (value) {
                this.departmentFilter.value = value == null ? '' : value.toString();
            };
            AccBudgetCreationGrid.prototype.set_zone = function (value) {
                this.zoneFilter.value = value == null ? '' : value.toString();
            };
            AccBudgetCreationGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBudgetCreationGrid);
            return AccBudgetCreationGrid;
        }(VistaGL.EntityGridBase));
        Transaction.AccBudgetCreationGrid = AccBudgetCreationGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var BudgetCreationApprovalDialog = (function (_super) {
            __extends(BudgetCreationApprovalDialog, _super);
            function BudgetCreationApprovalDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.BudgetCreationApprovalForm(_this.idPrefix);
                return _this;
            }
            BudgetCreationApprovalDialog.prototype.getFormKey = function () { return Transaction.BudgetCreationApprovalForm.formKey; };
            BudgetCreationApprovalDialog.prototype.getIdProperty = function () { return Transaction.AccBudgetForDepartmentRow.idProperty; };
            BudgetCreationApprovalDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetForDepartmentRow.localTextPrefix; };
            BudgetCreationApprovalDialog.prototype.getService = function () { return Transaction.BudgetCreationApprovalService.baseUrl; };
            BudgetCreationApprovalDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], BudgetCreationApprovalDialog);
            return BudgetCreationApprovalDialog;
        }(Serenity.EntityDialog));
        Transaction.BudgetCreationApprovalDialog = BudgetCreationApprovalDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var BudgetCreationApprovalGrid = (function (_super) {
            __extends(BudgetCreationApprovalGrid, _super);
            function BudgetCreationApprovalGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.setTitle("Budget Approval");
                $('<div class="approver"></div>').appendTo('.buttons-inner');
                return _this;
            }
            BudgetCreationApprovalGrid.prototype.getColumnsKey = function () { return 'Transaction.BudgetCreationApproval'; };
            BudgetCreationApprovalGrid.prototype.getDialogType = function () { return Transaction.BudgetCreationApprovalDialog; };
            BudgetCreationApprovalGrid.prototype.getIdProperty = function () { return Transaction.AccBudgetForDepartmentRow.idProperty; };
            BudgetCreationApprovalGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetForDepartmentRow.localTextPrefix; };
            BudgetCreationApprovalGrid.prototype.getService = function () { return Transaction.BudgetCreationApprovalService.baseUrl; };
            BudgetCreationApprovalGrid.prototype.getColumns = function () {
                var _this = this;
                var columns = _super.prototype.getColumns.call(this);
                var rowSelectionCol = Serenity.GridRowSelectionMixin.createSelectColumn(function () { return _this.rowSelection; });
                rowSelectionCol.width = rowSelectionCol.minWidth = rowSelectionCol.maxWidth = 25;
                columns.unshift(rowSelectionCol);
                columns.splice(1, 0, {
                    field: 'Print',
                    name: 'Print',
                    format: function (ctx) { return '<a class="inline-action Print-link" title="Print">' +
                        '<i class="fa fa-print text-blue"></i></a>'; },
                    width: 50,
                    minWidth: 50,
                    maxWidth: 50
                });
                columns.splice(1, 0, {
                    field: 'Edit',
                    name: 'Edit',
                    format: function (ctx) { return '<a class="inline-action Edit-link" title="Edit">' +
                        '<i class="fa fa-edit text-red"></i></a>'; },
                    width: 50,
                    minWidth: 50,
                    maxWidth: 50
                });
                columns.splice(1, 0, {
                    field: 'History',
                    name: 'History',
                    format: function (ctx) { return '<a class="inline-action History-link" title="History">' +
                        '<i class="fa fa-history text-green"></i></a>'; },
                    width: 70,
                    minWidth: 70,
                    maxWidth: 70
                });
                columns = columns.filter(function (x) { return x.field != "inline-actions"; });
                return columns;
            };
            BudgetCreationApprovalGrid.prototype.getButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getButtons.call(this);
                buttons.shift();
                buttons.push({
                    title: 'Regret',
                    cssClass: 'send-button regret-button',
                    onClick: function (x) {
                        if ($('.selectApprover').select2("val") == "") {
                            Q.notifyError("Select forward to Please!");
                            return;
                        }
                        var message = "Are you sure want to regret this budget?";
                        Q.confirm(message, function () {
                            if ($('.selectApprover').select2("val") == "") {
                                Q.notifyError("Select submit to from dropdown please!");
                                return;
                            }
                            var selected = _this.rowSelection.getSelectedKeys();
                            if (selected.length == 0) {
                                var rv = Q.warning("No row is selected!");
                                return;
                            }
                            else {
                                for (var i = 0; i < selected.length; i++) {
                                    var id = selected[i];
                                    var item = {};
                                    item.ApprovalStatusId = +VistaGL.ApprovalStatus.Regret;
                                    item.ForwardToEmployeeId = $('.selectApprover').select2("val");
                                    Transaction.BudgetCreationApprovalService.Update({ EntityId: id, Entity: item }, function (response) {
                                    }, { async: false });
                                }
                                Q.notifySuccess("Application has been Regreted successfully!");
                            }
                        });
                    },
                    separator: true
                });
                buttons.push({
                    title: 'Recommend',
                    cssClass: 'send-button recommend-button',
                    onClick: function (e) {
                        var message = "Are you sure want to recommend this budget?";
                        Q.confirm(message, function () {
                            if ($('.selectApprover').select2("val") == "") {
                                Q.notifyError("Select submit to from dropdown please!");
                                return;
                            }
                            var selected = _this.rowSelection.getSelectedKeys();
                            if (selected.length == 0) {
                                var rv = Q.warning("No row is selected!");
                                return;
                            }
                            else {
                                for (var i = 0; i < selected.length; i++) {
                                    var id = selected[i];
                                    var item = {};
                                    item.ApprovalStatusId = +VistaGL.ApprovalStatus.Recommend;
                                    item.ForwardToEmployeeId = $('.selectApprover').select2("val");
                                    Transaction.BudgetCreationApprovalService.Update({ EntityId: id, Entity: item }, function (response) {
                                    }, { async: false });
                                }
                                Q.notifySuccess("Budget has been recommended successfully!");
                            }
                        });
                    },
                    separator: true
                });
                buttons.push({
                    title: 'Approve',
                    cssClass: 'approve-button',
                    onClick: function (x) {
                        var message = "Are you sure want to Approve this budget?";
                        Q.confirm(message, function () {
                            var selected = _this.rowSelection.getSelectedKeys();
                            if (selected.length == 0) {
                                var rv = Q.warning("No row is selected!");
                                return;
                            }
                            else {
                                for (var i = 0; i < selected.length; i++) {
                                    var id = selected[i];
                                    var item = {};
                                    item.ApprovalStatusId = +VistaGL.ApprovalStatus.Approved;
                                    Transaction.BudgetCreationApprovalService.Update({ EntityId: id, Entity: item }, function (response) {
                                    }, { async: false });
                                }
                                Q.notifySuccess("Application has been Approved successfully!");
                            }
                        });
                    },
                    separator: true
                });
                return buttons;
            };
            BudgetCreationApprovalGrid.prototype.onViewProcessData = function (response) {
                var _this = this;
                $('.export-pdf-button').hide();
                this.budgetforDeptId = response.Entities[0] == undefined ? 0 : response.Entities[0].Id;
                var budgetForDept = Transaction.AccBudgetForDepartmentRow.getLookup().items.filter(function (x) { return x.Id == _this.budgetforDeptId; })[0];
                var approvalActionLookup = $('#ddl11');
                if (approvalActionLookup.length == 0) {
                    $('.buttons-inner').append('');
                    var ddl = $('<select />');
                    ddl.addClass('selectApprover');
                    ddl.attr('id', 'ddl11');
                    ddl.css("width", 250);
                    var currentApproverType = "Recommender";
                    var defaultTextinDDL = '';
                    defaultTextinDDL = '--- Submit To ---';
                    //$('.approve-button').show();
                    //$('.recommend-button').show();
                    $('<option />', { value: '', text: defaultTextinDDL }).appendTo(ddl);
                    Transaction.AccBudgetCreationService.GetBudgetApproverList({ ZoneId: budgetForDept.ZoneId, DepartmentId: budgetForDept.DepartmentId }, function (r) {
                        var items = r.Entities;
                        for (var _i = 0, items_7 = items; _i < items_7.length; _i++) {
                            var item = items_7[_i];
                            $('<option />', { value: item.Id.toString(), text: item.LookupText }).appendTo(ddl);
                        }
                    });
                    ddl.appendTo('.approver');
                    $('select.selectApprover').select2();
                    $('select.selectApprover').select2('data', { id: '', text: defaultTextinDDL });
                }
                if (this.AccBudgetApprovalHistoryGrid) {
                    this.AccBudgetApprovalHistoryGrid.loadByBudgetForDepartmentId(this.budgetforDeptId);
                }
                return _super.prototype.onViewProcessData.call(this, response);
            };
            BudgetCreationApprovalGrid.prototype.onClick = function (e, row, cell) {
                _super.prototype.onClick.call(this, e, row, cell);
                if (e.isDefaultPrevented()) {
                    return;
                }
                var item = this.itemAt(row);
                var target = $(e.target);
                //-- History
                if (target.parent().hasClass('History-link'))
                    target = target.parent();
                if (target.hasClass("History-link")) {
                    e.preventDefault();
                    var _url = "~/Reports/BudgetApprovalInfo/BudgetHistory?financialPeriodId=" + item.BudgetCircularFinancialYearId + "&zoneInfoId=" + +item.ZoneId + "&departmentId=" + item.DepartmentId;
                    Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                }
                //-- Print
                if (target.parent().hasClass('Print-link'))
                    target = target.parent();
                if (target.hasClass("Print-link")) {
                    e.preventDefault();
                    var _url = "~/Reports/ConsolidatedBudget/GetBudget?financialPeriodId=" + item.BudgetCircularFinancialYearId + "&zoneInfoId=" + +item.ZoneId + "&departmentId=" + item.DepartmentId;
                    Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                }
                //-- Edit
                if (target.parent().hasClass('Edit-link'))
                    target = target.parent();
                if (target.hasClass("Edit-link")) {
                    e.preventDefault();
                    var _url = "~/Transaction/AccBudgetCreation?BudgetForDepartmentDepartmentId=" + item.DepartmentId + "&BudgetForDepartmentZoneId=" + item.ZoneId;
                    Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                }
            };
            BudgetCreationApprovalGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], BudgetCreationApprovalGrid);
            return BudgetCreationApprovalGrid;
        }(VistaGL.EntityGridBase));
        Transaction.BudgetCreationApprovalGrid = BudgetCreationApprovalGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetDetailsDialog = (function (_super) {
            __extends(AccBudgetDetailsDialog, _super);
            function AccBudgetDetailsDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccBudgetDetailsForm(_this.idPrefix);
                return _this;
            }
            AccBudgetDetailsDialog.prototype.getFormKey = function () { return Transaction.AccBudgetDetailsForm.formKey; };
            AccBudgetDetailsDialog.prototype.getIdProperty = function () { return Transaction.AccBudgetDetailsRow.idProperty; };
            AccBudgetDetailsDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetDetailsRow.localTextPrefix; };
            AccBudgetDetailsDialog.prototype.getNameProperty = function () { return Transaction.AccBudgetDetailsRow.nameProperty; };
            AccBudgetDetailsDialog.prototype.getService = function () { return Transaction.AccBudgetDetailsService.baseUrl; };
            AccBudgetDetailsDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBudgetDetailsDialog);
            return AccBudgetDetailsDialog;
        }(Serenity.EntityDialog));
        Transaction.AccBudgetDetailsDialog = AccBudgetDetailsDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetDetailsEditor = (function (_super) {
            __extends(AccBudgetDetailsEditor, _super);
            function AccBudgetDetailsEditor(container) {
                return _super.call(this, container) || this;
            }
            AccBudgetDetailsEditor.prototype.getColumnsKey = function () { return 'Transaction.AccBudgetDetails'; };
            AccBudgetDetailsEditor.prototype.getDialogType = function () { return Transaction.AccBudgetDetailsEditorDialog; };
            AccBudgetDetailsEditor.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetDetailsRow.localTextPrefix; };
            AccBudgetDetailsEditor = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBudgetDetailsEditor);
            return AccBudgetDetailsEditor;
        }(VistaGL.GridEditorBase));
        Transaction.AccBudgetDetailsEditor = AccBudgetDetailsEditor;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetDetailsEditorDialog = (function (_super) {
            __extends(AccBudgetDetailsEditorDialog, _super);
            function AccBudgetDetailsEditorDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccBudgetDetailsForm(_this.idPrefix);
                return _this;
            }
            AccBudgetDetailsEditorDialog.prototype.getFormKey = function () { return Transaction.AccBudgetDetailsForm.formKey; };
            AccBudgetDetailsEditorDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetDetailsRow.localTextPrefix; };
            AccBudgetDetailsEditorDialog.prototype.getNameProperty = function () { return Transaction.AccBudgetDetailsRow.nameProperty; };
            AccBudgetDetailsEditorDialog.prototype.onDialogOpen = function () {
                var _this = this;
                _super.prototype.onDialogOpen.call(this);
                this.form.BudgetHeadId.changeSelect2(function (p) {
                    console.log(_this.form.BudgetHeadId.value);
                    _this.budgetHeadList = Q.getLookup("Transaction.AccBudgetHeads_Lookup").items;
                    var budgetDetail = _this.budgetHeadList.filter(function (x) { return x.BudgetHeadId == +_this.form.BudgetHeadId.value; })[0];
                    _this.form.BudgetHeadId.value = String(budgetDetail.BudgetHeadId);
                    _this.form.IsCoa.value = budgetDetail.IsCoa;
                    _this.form.IsCostCenter.value = budgetDetail.IsCostCenter;
                    _this.form.IsBudgetHead.value = budgetDetail.IsBudgetHead;
                    _this.form.BudgetCode.value = budgetDetail.BudgetCode;
                    _this.form.BgSortOrder.value = budgetDetail.BgSortOrder;
                    _this.form.ParentId.value = budgetDetail.ParentId;
                    if (budgetDetail.IsCoa) {
                        _this.items_ChartofAccounts = Q.getLookup('Configurations.AccChartofAccounts_Lookup').items;
                        var groupId = _this.items_ChartofAccounts.filter(function (x) { return x.Id == budgetDetail.BudgetHeadId; })[0].BudgetGroupId;
                        _this.form.BudgetGroupId.value = groupId;
                    }
                    else {
                        _this.items_CostCenter = Q.getLookup('Transaction.AccCostCentreOrInstituteInformation_Lookup').items;
                        var groupId = _this.items_CostCenter.filter(function (x) { return x.Id == budgetDetail.BudgetHeadId; })[0].BudgetGroupId;
                        _this.form.BudgetGroupId.value = groupId;
                    }
                });
            };
            AccBudgetDetailsEditorDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccBudgetDetailsEditorDialog);
            return AccBudgetDetailsEditorDialog;
        }(VistaGL.GridEditorDialog));
        Transaction.AccBudgetDetailsEditorDialog = AccBudgetDetailsEditorDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetDetailsGrid = (function (_super) {
            __extends(AccBudgetDetailsGrid, _super);
            function AccBudgetDetailsGrid(container) {
                return _super.call(this, container) || this;
            }
            AccBudgetDetailsGrid.prototype.getColumnsKey = function () { return 'Transaction.AccBudgetDetails'; };
            AccBudgetDetailsGrid.prototype.getDialogType = function () { return Transaction.AccBudgetDetailsDialog; };
            AccBudgetDetailsGrid.prototype.getIdProperty = function () { return Transaction.AccBudgetDetailsRow.idProperty; };
            AccBudgetDetailsGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetDetailsRow.localTextPrefix; };
            AccBudgetDetailsGrid.prototype.getService = function () { return Transaction.AccBudgetDetailsService.baseUrl; };
            AccBudgetDetailsGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBudgetDetailsGrid);
            return AccBudgetDetailsGrid;
        }(Serenity.EntityGrid));
        Transaction.AccBudgetDetailsGrid = AccBudgetDetailsGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetForDepartmentDialog = (function (_super) {
            __extends(AccBudgetForDepartmentDialog, _super);
            function AccBudgetForDepartmentDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccBudgetForDepartmentForm(_this.idPrefix);
                return _this;
            }
            AccBudgetForDepartmentDialog.prototype.getFormKey = function () { return Transaction.AccBudgetForDepartmentForm.formKey; };
            AccBudgetForDepartmentDialog.prototype.getIdProperty = function () { return Transaction.AccBudgetForDepartmentRow.idProperty; };
            AccBudgetForDepartmentDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetForDepartmentRow.localTextPrefix; };
            AccBudgetForDepartmentDialog.prototype.getService = function () { return Transaction.AccBudgetForDepartmentService.baseUrl; };
            AccBudgetForDepartmentDialog.prototype.onDialogOpen = function () {
                _super.prototype.onDialogOpen.call(this);
                // Maximize the dialog
                this.element.closest('.ui-dialog').find('.ui-dialog-titlebar-maximize').click();
                if (this.isNew) {
                    var activeBudgetId = Transaction.AccBudgetCircularRow.getLookup().items.filter(function (x) { return x.IsActive == true; })[0].Id;
                    this.form.BudgetCircularId.value = activeBudgetId.toString();
                }
            };
            AccBudgetForDepartmentDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive(),
                Serenity.Decorators.maximizable()
            ], AccBudgetForDepartmentDialog);
            return AccBudgetForDepartmentDialog;
        }(Serenity.EntityDialog));
        Transaction.AccBudgetForDepartmentDialog = AccBudgetForDepartmentDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetForDepartmentGrid = (function (_super) {
            __extends(AccBudgetForDepartmentGrid, _super);
            function AccBudgetForDepartmentGrid(container) {
                return _super.call(this, container) || this;
            }
            AccBudgetForDepartmentGrid.prototype.getColumnsKey = function () { return 'Transaction.AccBudgetForDepartment'; };
            AccBudgetForDepartmentGrid.prototype.getDialogType = function () { return Transaction.AccBudgetForDepartmentDialog; };
            AccBudgetForDepartmentGrid.prototype.getIdProperty = function () { return Transaction.AccBudgetForDepartmentRow.idProperty; };
            AccBudgetForDepartmentGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetForDepartmentRow.localTextPrefix; };
            AccBudgetForDepartmentGrid.prototype.getService = function () { return Transaction.AccBudgetForDepartmentService.baseUrl; };
            AccBudgetForDepartmentGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBudgetForDepartmentGrid);
            return AccBudgetForDepartmentGrid;
        }(Serenity.EntityGrid));
        Transaction.AccBudgetForDepartmentGrid = AccBudgetForDepartmentGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetForDepartmentDetailDialog = (function (_super) {
            __extends(AccBudgetForDepartmentDetailDialog, _super);
            function AccBudgetForDepartmentDetailDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccBudgetForDepartmentDetailForm(_this.idPrefix);
                return _this;
            }
            AccBudgetForDepartmentDetailDialog.prototype.getFormKey = function () { return Transaction.AccBudgetForDepartmentDetailForm.formKey; };
            AccBudgetForDepartmentDetailDialog.prototype.getIdProperty = function () { return Transaction.AccBudgetForDepartmentDetailRow.idProperty; };
            AccBudgetForDepartmentDetailDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetForDepartmentDetailRow.localTextPrefix; };
            AccBudgetForDepartmentDetailDialog.prototype.getService = function () { return Transaction.AccBudgetForDepartmentDetailService.baseUrl; };
            AccBudgetForDepartmentDetailDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBudgetForDepartmentDetailDialog);
            return AccBudgetForDepartmentDetailDialog;
        }(Serenity.EntityDialog));
        Transaction.AccBudgetForDepartmentDetailDialog = AccBudgetForDepartmentDetailDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetForDepartmentDetailEditor = (function (_super) {
            __extends(AccBudgetForDepartmentDetailEditor, _super);
            function AccBudgetForDepartmentDetailEditor(container) {
                var _this = _super.call(this, container) || this;
                _this.budgetHeads = [];
                _this.searchInput = document.createElement('input');
                _this.searchInput.type = 'text';
                _this.searchInput.id = 'searchInput';
                _this.searchInput.style.width = '100%';
                _this.jsTreeDiv = document.createElement('div');
                _this.jsTreeDiv.id = 'jsTreeDiv';
                _this.element.append(_this.searchInput);
                _this.element.append(_this.jsTreeDiv);
                return _this;
            }
            AccBudgetForDepartmentDetailEditor.prototype.getEditValue = function (property, target) {
                target[property.name] = this.value;
            };
            AccBudgetForDepartmentDetailEditor.prototype.setEditValue = function (source, property) {
                this.value = source[property.name];
            };
            Object.defineProperty(AccBudgetForDepartmentDetailEditor.prototype, "value", {
                get: function () {
                    this.budgetHeads = [];
                    var selectedNodes = $('#jsTreeDiv').jstree().get_checked(true);
                    for (var i = 0; i < selectedNodes.length; i++) {
                        var budget = selectedNodes[i].data;
                        if (this.budgetHeads.some(function (f) { return f == budget.Id; }) == false) {
                            this.budgetHeads.push({ BudgetHeadId: budget.BudgetHeadId, ParentId: budget.ParentId, IsCoa: budget.IsCoa, BudgetGroupId: budget.IsBudgetHead == false ? budget.BudgetHeadId : null, IsBudgetHead: budget.IsBudgetHead, IsCostCenter: budget.IsCostCenter, BGSortOrder: budget.BGSortOrder, BudgetCode: budget.BudgetCode });
                            ;
                        }
                    }
                    return this.budgetHeads;
                },
                set: function (value) {
                    var _this = this;
                    value = value || [];
                    this.budgetHeads = value;
                    Transaction.AccBudgetForDepartmentService.BudgetHeadList({}, function (r) {
                        _this.budgetDetails = r.Entities;
                        var treeData = [];
                        for (var _i = 0, _a = _this.budgetDetails; _i < _a.length; _i++) {
                            var budgetItem = _a[_i];
                            //var bHeads = AccBudgetForDepartmentRow.getLookup().items;
                            var isSelected = value.some(function (f) { return f.BudgetHeadId == budgetItem.BudgetHeadId; });
                            treeData.push({
                                id: budgetItem.BudgetHeadId,
                                parent: budgetItem.ParentId || '#',
                                text: budgetItem.BudgetHeadName,
                                icon: false, state: { opened: false, selected: isSelected },
                                data: budgetItem
                            });
                        }
                        //to enable searching
                        $('#searchInput').keyup(function (e) {
                            var searchString = e.currentTarget.value;
                            $('#jsTreeDiv').jstree('search', searchString, true, true);
                        });
                        $('#jsTreeDiv').jstree({
                            plugins: ['checkbox', "search"],
                            core: {
                                data: treeData
                            },
                            search: {
                                case_insensitive: true,
                                show_only_matches: true
                            },
                            checkbox: {
                                three_state: false
                            }
                        }).on('search.jstree before_open.jstree', function (e, data) {
                            if (data.instance.settings.search.show_only_matches) {
                                data.instance._data.search.dom.find('.jstree-node')
                                    .show().filter('.jstree-last').filter(function () { return this.nextSibling; }).removeClass('jstree-last')
                                    .end().end().end().find(".jstree-children").each(function () { $(this).children(".jstree-node:visible").eq(-1).addClass("jstree-last"); });
                            }
                        });
                        $('#jsTreeDiv').on('click', '.jstree-anchor', function (e) {
                            var anchorId = $(this).parent().attr('id');
                            var parent = $('#jsTreeDiv').jstree().get_node(anchorId).parents;
                            var isSelected = $('#jsTreeDiv').jstree(true).get_node(anchorId).state.selected;
                            if (isSelected) {
                                for (var i = 0; i < parent.length; i++) {
                                    $('#jsTreeDiv').jstree(true).select_node(parent[i]);
                                }
                            }
                            var allChildren = $('#jsTreeDiv').jstree(true).get_children_dom(this);
                            if (isSelected) {
                                for (var i = 0; i < allChildren.length; i++) {
                                    $('#jsTreeDiv').jstree(true).select_node(allChildren[i].id);
                                }
                            }
                            else {
                                for (var i = 0; i < allChildren.length; i++) {
                                    $('#jsTreeDiv').jstree(true).deselect_node(allChildren[i].id);
                                }
                            }
                        });
                    }, { async: false });
                },
                enumerable: true,
                configurable: true
            });
            AccBudgetForDepartmentDetailEditor = __decorate([
                Serenity.Decorators.registerClass([Serenity.IGetEditValue, Serenity.ISetEditValue]),
                Serenity.Decorators.editor(),
                Serenity.Decorators.element("<div/>")
            ], AccBudgetForDepartmentDetailEditor);
            return AccBudgetForDepartmentDetailEditor;
        }(Serenity.Widget));
        Transaction.AccBudgetForDepartmentDetailEditor = AccBudgetForDepartmentDetailEditor;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccBudgetForDepartmentDetailGrid = (function (_super) {
            __extends(AccBudgetForDepartmentDetailGrid, _super);
            function AccBudgetForDepartmentDetailGrid(container) {
                return _super.call(this, container) || this;
            }
            AccBudgetForDepartmentDetailGrid.prototype.getColumnsKey = function () { return 'Transaction.AccBudgetForDepartmentDetail'; };
            AccBudgetForDepartmentDetailGrid.prototype.getDialogType = function () { return Transaction.AccBudgetForDepartmentDetailDialog; };
            AccBudgetForDepartmentDetailGrid.prototype.getIdProperty = function () { return Transaction.AccBudgetForDepartmentDetailRow.idProperty; };
            AccBudgetForDepartmentDetailGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccBudgetForDepartmentDetailRow.localTextPrefix; };
            AccBudgetForDepartmentDetailGrid.prototype.getService = function () { return Transaction.AccBudgetForDepartmentDetailService.baseUrl; };
            AccBudgetForDepartmentDetailGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccBudgetForDepartmentDetailGrid);
            return AccBudgetForDepartmentDetailGrid;
        }(Serenity.EntityGrid));
        Transaction.AccBudgetForDepartmentDetailGrid = AccBudgetForDepartmentDetailGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequeBookDialog = (function (_super) {
            __extends(AccChequeBookDialog, _super);
            function AccChequeBookDialog(container) {
                var _this = _super.call(this) || this;
                _this.form = new Transaction.AccChequeBookForm(_this.idPrefix);
                _this.form.BankAccountInformationId.changeSelect2(function (e) {
                    _this.BankAccountInformation_Change();
                });
                //this.form.StartingNo.change(e => {
                //    this.CalculateEndingPageNo_Change();
                //});
                //this.form.PageNo.change(e => {
                //    this.CalculateEndingPageNo_Change();
                //});
                _this.form.StartingNo.element.on('change keyup blur', function () {
                    _this.CalculateEndingPageNo_Change();
                });
                _this.form.PageNo.element.on('change keyup blur', function () {
                    _this.CalculateEndingPageNo_Change();
                });
                return _this;
            }
            AccChequeBookDialog.prototype.getFormKey = function () { return Transaction.AccChequeBookForm.formKey; };
            AccChequeBookDialog.prototype.getIdProperty = function () { return Transaction.AccChequeBookRow.idProperty; };
            AccChequeBookDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccChequeBookRow.localTextPrefix; };
            AccChequeBookDialog.prototype.getNameProperty = function () { return Transaction.AccChequeBookRow.nameProperty; };
            AccChequeBookDialog.prototype.getService = function () { return Transaction.AccChequeBookService.baseUrl; };
            AccChequeBookDialog.prototype.CalculateEndingPageNo_Change = function () {
                var strpagNo = +this.form.StartingNo.value;
                var pagNo = this.form.PageNo.value;
                if (strpagNo != NaN && strpagNo > 0 && pagNo != NaN && pagNo > 0) {
                    this.form.EndingNo.value = ((strpagNo + pagNo) - 1);
                }
            };
            AccChequeBookDialog.prototype.BankAccountInformation_Change = function () {
                //   console.log(this.form.BankAccountInformationId.value);
                if (this.form.BankAccountInformationId.value == "") {
                    this.form.AccountName.value = "";
                    this.form.BankName.value = "";
                    this.form.BranchName.value = "";
                }
                else {
                    var selectedItem = VistaGL.Configurations.AccBankAccountInformationRow.getLookup().itemById[this.form.BankAccountInformationId.value];
                    this.form.AccountName.value = selectedItem.AccountName;
                    this.form.BankName.value = selectedItem.BankBankName;
                    this.form.BranchName.value = selectedItem.BankBranchBranchName;
                    //  this.form.DistrictId.value = selectedItem.DistrictId.toString();
                }
            };
            AccChequeBookDialog.prototype.onDialogOpen = function () {
                var _this = this;
                if (this.isEditMode()) {
                    this.BankAccountInformation_Change();
                    this.CalculateEndingPageNo_Change();
                    var chequeRegister = Transaction.AccChequeReceiveRegisterRow.getLookup().items.filter(function (x) { return x.Id == _this.entityId; });
                    if (chequeRegister.length > 0) {
                        Serenity.EditorUtils.setReadonly($('.BankAccountInformationId input'), true);
                    }
                }
            };
            AccChequeBookDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccChequeBookDialog);
            return AccChequeBookDialog;
        }(Serenity.EntityDialog));
        Transaction.AccChequeBookDialog = AccChequeBookDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequeBookGrid = (function (_super) {
            __extends(AccChequeBookGrid, _super);
            function AccChequeBookGrid(container) {
                return _super.call(this, container) || this;
            }
            AccChequeBookGrid.prototype.getColumnsKey = function () { return 'Transaction.AccChequeBook'; };
            AccChequeBookGrid.prototype.getDialogType = function () { return Transaction.AccChequeBookDialog; };
            AccChequeBookGrid.prototype.getIdProperty = function () { return Transaction.AccChequeBookRow.idProperty; };
            AccChequeBookGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccChequeBookRow.localTextPrefix; };
            AccChequeBookGrid.prototype.getService = function () { return Transaction.AccChequeBookService.baseUrl; };
            AccChequeBookGrid.prototype.getViewOptions = function () {
                var opt = _super.prototype.getViewOptions.call(this);
                opt.rowsPerPage = 20;
                return opt;
            };
            AccChequeBookGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccChequeBookGrid);
            return AccChequeBookGrid;
        }(VistaGL.EntityGridBaseNew));
        Transaction.AccChequeBookGrid = AccChequeBookGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequePreparationGrid = (function (_super) {
            __extends(AccChequePreparationGrid, _super);
            function AccChequePreparationGrid(container) {
                return _super.call(this, container) || this;
            }
            AccChequePreparationGrid.prototype.getColumnsKey = function () { return 'Transaction.AccChequePreparation'; };
            //protected getDialogType() { return AccChequePreparationDialog; }
            AccChequePreparationGrid.prototype.getIdProperty = function () { return Transaction.AccVoucherInformationRow.idProperty; };
            AccChequePreparationGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherInformationRow.localTextPrefix; };
            AccChequePreparationGrid.prototype.getService = function () { return Transaction.AccChequePreparationService.baseUrl; };
            AccChequePreparationGrid.prototype.getQuickFilters = function () {
                var filters = _super.prototype.getQuickFilters.call(this);
                Q.tryFirst(filters, function (x) { return x.field == "IsChequePrepared" /* IsChequePrepared */; }).init = function (w) {
                    w.value = "false";
                };
                return filters;
            };
            AccChequePreparationGrid.prototype.getButtons = function () {
                var buttons = _super.prototype.getButtons.call(this);
                buttons.splice(Q.indexOf(buttons, function (x) { return x.cssClass == "add-button"; }));
                return buttons;
            };
            AccChequePreparationGrid.prototype.getColumns = function () {
                var columns = _super.prototype.getColumns.call(this);
                columns.unshift({
                    field: 'Prepare Cheque',
                    name: '',
                    format: function (ctx) { return '<a class="inline-action Prepare-Cheque" title="Prepare Cheque">' +
                        '<i class="fa fa-check-square-o text-green"></i></a>'; },
                    width: 24,
                    minWidth: 24,
                    maxWidth: 24
                });
                columns.splice(1, 0, {
                    field: 'Print Cheque',
                    name: '',
                    format: function (ctx) { return '<a class="inline-action Print-Cheque" title="Print Cheque">' +
                        '<i class="fa fa-print text-red"></i></a>'; },
                    width: 24,
                    minWidth: 24,
                    maxWidth: 24
                });
                return columns;
            };
            AccChequePreparationGrid.prototype.getSlickOptions = function () {
                var opt = _super.prototype.getSlickOptions.call(this);
                opt.frozenColumn = 3;
                return opt;
            };
            AccChequePreparationGrid.prototype.onClick = function (e, row, cell) {
                var _this = this;
                _super.prototype.onClick.call(this, e, row, cell);
                if (e.isDefaultPrevented())
                    return;
                var item = this.itemAt(row);
                var target = $(e.target);
                if (target.parent().hasClass('inline-action'))
                    target = target.parent();
                if (target.hasClass('inline-action')) {
                    e.preventDefault();
                    var voucher = Q.first(Transaction.AccVoucherInformationRow.getLookup().items, function (x) { return x.Id == item.Id; });
                    if (target.hasClass('Prepare-Cheque')) {
                        if (voucher.IsChequePrepared) {
                            Q.information('Cheque is already prepared for voucher# ' + item.VoucherNo, function () { });
                        }
                        else {
                            Q.confirm('Prepare this cheque for voucher# ' + item.VoucherNo + '?', function () {
                                Transaction.AccChequePreparationService.Update({
                                    EntityId: item.Id,
                                    Entity: voucher
                                }, function (response) {
                                    _this.refresh();
                                });
                            });
                        }
                    }
                    else if (target.hasClass('Print-Cheque')) {
                        VistaGL.Common.ReportHelper.execute({
                            reportKey: 'Transaction.AccChequePreparation.ChequePrint',
                            params: {
                                VoucherId: item.Id
                            }
                        });
                    }
                }
            };
            AccChequePreparationGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccChequePreparationGrid);
            return AccChequePreparationGrid;
        }(VistaGL.EntityGridBaseNew));
        Transaction.AccChequePreparationGrid = AccChequePreparationGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequeReceiveRegisterDialog = (function (_super) {
            __extends(AccChequeReceiveRegisterDialog, _super);
            function AccChequeReceiveRegisterDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Transaction.AccChequeReceiveRegisterForm(_this.idPrefix);
                _this.form.ReceiveType.changeSelect2(function (e) {
                    var chT = _this.form.ReceiveType.value;
                    var dd = $('.field .ChequeNo').val();
                });
                return _this;
            }
            AccChequeReceiveRegisterDialog.prototype.getFormKey = function () { return Transaction.AccChequeReceiveRegisterForm.formKey; };
            AccChequeReceiveRegisterDialog.prototype.getIdProperty = function () { return Transaction.AccChequeReceiveRegisterRow.idProperty; };
            AccChequeReceiveRegisterDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccChequeReceiveRegisterRow.localTextPrefix; };
            AccChequeReceiveRegisterDialog.prototype.getNameProperty = function () { return Transaction.AccChequeReceiveRegisterRow.nameProperty; };
            AccChequeReceiveRegisterDialog.prototype.getService = function () { return Transaction.AccChequeReceiveRegisterService.baseUrl; };
            //protected BankAccountInformation_Change() {
            //    //   console.log(this.form.BankAccountInformationId.value);
            //    if (this.form.BankAccountInformationId.value == "") {
            //        this.form.AccountName.value = "";
            //        this.form.BankName.value = "";
            //        this.form.BranchName.value = "";
            //    }
            //    else {
            //        var selectedItem = Configurations.AccBankAccountInformationRow.getLookup().itemById[this.form.BankAccountInformationId.value];
            //        this.form.AccountName.value = selectedItem.AccountName;
            //        this.form.BankName.value = selectedItem.BankBankName;
            //        this.form.BranchName.value = selectedItem.BankBranchBranchName;
            //        //  this.form.DistrictId.value = selectedItem.DistrictId.toString();
            //    }
            //}
            AccChequeReceiveRegisterDialog.prototype.onDialogOpen = function () {
                if (this._isFromVoucher) {
                    this.toolbar.findButton('save-and-close-button').hide();
                    this.toolbar.findButton('apply-changes-button').hide();
                }
                else {
                    this.toolbar.findButton('send-button').hide();
                }
                //if (this.isEditMode()) {
                //    this.BankAccountInformation_Change();
                //}
            };
            AccChequeReceiveRegisterDialog.prototype.getToolbarButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getToolbarButtons.call(this);
                buttons.push({
                    title: "Add", cssClass: "send-button",
                    onClick: function (x) {
                        _this.save(function (p) {
                            if (_this._isPaymentOrReceiptVoucherOnly) {
                                _this.digforOnlyPayment.form.PaytoOrReciveFrom.value = _this.form.RecieveFrom.value;
                                if (_this.digforOnlyPayment.form.VoucherTypeId.value == "1")
                                    _this.digforOnlyPayment.form.CreditAmount.value = _this.form.Amount.value;
                                else
                                    _this.digforOnlyPayment.form.DebitAmount.value = _this.form.Amount.value;
                                Q.reloadLookup("Transaction.AccChequeReceiveRegister_Lookup");
                                var data = void 0;
                                data = Q.getLookup('Transaction.AccChequeReceiveRegister_Lookup').items;
                                _this.digforOnlyPayment.form.ChequeRegisterId.clearItems();
                                for (var i = 0; i < data.length; i++) {
                                    var str = data[i];
                                    _this.digforOnlyPayment.form.ChequeRegisterId.addItem({ id: str.Id.toString(), text: str.ChequeNo.toString(), source: null, disabled: false });
                                    var l = data.length;
                                    if (l - 1 == i) {
                                        _this.digforOnlyPayment.form.ChequeRegisterId.value = str.Id.toString();
                                    }
                                }
                            }
                            else {
                                _this.dig.form.PaytoOrReciveFrom.value = _this.form.RecieveFrom.value;
                                _this.dig.form.BankAmount.value = _this.form.Amount.value;
                                if (_this.dig.form.VoucherTypeId.value == "1")
                                    _this.dig.form.DebitAmount.value = _this.form.Amount.value;
                                else
                                    _this.dig.form.CreditAmount.value = _this.form.Amount.value;
                                Q.reloadLookup("Transaction.AccChequeReceiveRegister_Lookup");
                                var data = void 0;
                                data = Q.getLookup('Transaction.AccChequeReceiveRegister_Lookup').items;
                                _this.dig.form.ChequeRegisterId.clearItems();
                                for (var i = 0; i < data.length; i++) {
                                    var str = data[i];
                                    _this.dig.form.ChequeRegisterId.addItem({ id: str.Id.toString(), text: str.ChequeNo.toString(), source: null, disabled: false });
                                    var l = data.length;
                                    if (l - 1 == i) {
                                        _this.dig.form.ChequeRegisterId.value = str.Id.toString();
                                    }
                                }
                            }
                            _this.dialogClose();
                        });
                    }
                });
                return buttons;
            };
            AccChequeReceiveRegisterDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccChequeReceiveRegisterDialog);
            return AccChequeReceiveRegisterDialog;
        }(Serenity.EntityDialog));
        Transaction.AccChequeReceiveRegisterDialog = AccChequeReceiveRegisterDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequeReceiveRegisterGrid = (function (_super) {
            __extends(AccChequeReceiveRegisterGrid, _super);
            function AccChequeReceiveRegisterGrid(container) {
                return _super.call(this, container) || this;
            }
            AccChequeReceiveRegisterGrid.prototype.getColumnsKey = function () { return 'Transaction.AccChequeReceiveRegister'; };
            AccChequeReceiveRegisterGrid.prototype.getDialogType = function () { return Transaction.AccChequeReceiveRegisterDialog; };
            AccChequeReceiveRegisterGrid.prototype.getIdProperty = function () { return Transaction.AccChequeReceiveRegisterRow.idProperty; };
            AccChequeReceiveRegisterGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccChequeReceiveRegisterRow.localTextPrefix; };
            AccChequeReceiveRegisterGrid.prototype.getService = function () { return Transaction.AccChequeReceiveRegisterService.baseUrl; };
            AccChequeReceiveRegisterGrid.prototype.getViewOptions = function () {
                var opt = _super.prototype.getViewOptions.call(this);
                opt.rowsPerPage = 20;
                return opt;
            };
            AccChequeReceiveRegisterGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccChequeReceiveRegisterGrid);
            return AccChequeReceiveRegisterGrid;
        }(VistaGL.EntityGridBase));
        Transaction.AccChequeReceiveRegisterGrid = AccChequeReceiveRegisterGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequeRegisterDialog = (function (_super) {
            __extends(AccChequeRegisterDialog, _super);
            function AccChequeRegisterDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Transaction.AccChequeRegisterForm(_this.idPrefix);
                //get bank account Info
                _this.form.BankAccountInformationId.changeSelect2(function (e) {
                    _this.BankAccountInformation_Change();
                });
                //get checkbook no
                _this.form.ChequeBookId.changeSelect2(function (e) {
                    _this.ChequeBookInformation_Change();
                });
                //Set ChequeNumhdn
                _this.form.ChequeNo.changeSelect2(function (e) {
                    _this.form.ChequeNoTemp.value = "";
                    _this.form.ChequeNumhdn.value = null;
                    _this.form.ChequeNumhdn.value = +_this.form.ChequeNo.value;
                    _this.form.ChequeNoTemp.value = _this.form.ChequeNo.get_text();
                });
                return _this;
            }
            AccChequeRegisterDialog.prototype.getFormKey = function () { return Transaction.AccChequeRegisterForm.formKey; };
            AccChequeRegisterDialog.prototype.getIdProperty = function () { return Transaction.AccChequeRegisterRow.idProperty; };
            AccChequeRegisterDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccChequeRegisterRow.localTextPrefix; };
            AccChequeRegisterDialog.prototype.getNameProperty = function () { return Transaction.AccChequeRegisterRow.nameProperty; };
            AccChequeRegisterDialog.prototype.getService = function () { return Transaction.AccChequeRegisterService.baseUrl; };
            AccChequeRegisterDialog.prototype.onDialogOpen = function () {
                var _this = this;
                //  let parentDialog = (this.parentEditor.parentDialog as AccVoucherInformationDialog);
                if (this._isFromVoucher) {
                    var data = VistaGL.Configurations.AccBankAccountInformationRow.getLookup().items;
                    if (this.form.Remarks.value != '' && this.form.Remarks.value != undefined) {
                        data = data.filter(function (x) { return x.CoaId == +_this.form.Remarks.value; });
                    }
                    this.form.BankAccountInformationId.clearItems();
                    this.form.Remarks.value = '';
                    for (var i = 0; i < data.length; i++) {
                        var str = data[i];
                        this.form.BankAccountInformationId.addItem({ id: str.Id.toString(), text: str.AccountNumber, source: null, disabled: false });
                        var l = data.length;
                        if (i == 0) {
                            this.form.BankAccountInformationId.value = str.Id.toString();
                        }
                    }
                    this.toolbar.findButton('save-and-close-button').hide();
                    this.toolbar.findButton('apply-changes-button').hide();
                    this.toolbar.findButton('print-preview-button').hide();
                    this.BankAccountInformation_Change();
                    this.ChequeBookInformation_Change();
                }
                else {
                    this.toolbar.findButton('send-button').hide();
                }
                if (this.isEditMode()) {
                    this.BankAccountInformation_Change();
                    this.ChequeBookInformation_Change();
                    if (this.entity.IsBankAdvice) {
                        Serenity.EditorUtils.setReadonly(this.element.find(this.form.IsCancelled.element), true);
                    }
                }
            };
            //bank account Info
            AccChequeRegisterDialog.prototype.BankAccountInformation_Change = function () {
                //   console.log(this.form.BankAccountInformationId.value);
                if (this.form.BankAccountInformationId.value == "") {
                    this.form.AccountName.value = "";
                    this.form.BankName.value = "";
                    this.form.BranchName.value = "";
                    this.form.ChequeNo.clearItems();
                    this.form.ChequeNoTemp.value = "";
                    this.form.ChequeNumhdn.value = null;
                }
                else {
                    var selectedItem = VistaGL.Configurations.AccBankAccountInformationRow.getLookup().itemById[this.form.BankAccountInformationId.value];
                    this.form.AccountName.value = selectedItem.AccountName;
                    this.form.BankName.value = selectedItem.BankBankName;
                    this.form.BranchName.value = selectedItem.BankBranchBranchName;
                }
            };
            //get checkbook info
            AccChequeRegisterDialog.prototype.ChequeBookInformation_Change = function () {
                var _this = this;
                this.form.ChequeNo.clearItems();
                this.form.IsFinished.value = false;
                //this.form.ChequeNo.value = '';
                var LastChqNo = 0;
                VistaGL.Transaction.AccChequeRegisterService.List({ Criteria: [['ChequeBookId'], '=', this.form.ChequeBookId.value] }, function (r) {
                    var chqReg;
                    chqReg = r.Entities;
                    if (chqReg.length > 0) {
                        var lstEntity = chqReg[chqReg.length - 1];
                        LastChqNo = lstEntity.ChequeNumhdn;
                        // console.log(LastChqNo);
                    }
                });
                //generate cheque no
                VistaGL.Transaction.AccChequeBookService.List({ Criteria: [['Id'], '=', this.form.ChequeBookId.value] }, function (r) {
                    var _Unionitems = r.Entities;
                    //var declare
                    var prefix = "";
                    var strNo = 0;
                    var endNo = 0;
                    var strNoLength = 0;
                    strNoLength = _Unionitems[0].StartingNo.length;
                    prefix = _Unionitems[0].Prefix;
                    strNo = +_Unionitems[0].StartingNo;
                    endNo = _Unionitems[0].EndingNo;
                    var strNumberPerfix = _Unionitems[0].StartingNo.toString();
                    //console.log("prefix: " + prefix);
                    //console.log("strNo: " + strNo);
                    //console.log("endNo: " + endNo);
                    //console.log("LastChqNo: " + LastChqNo);
                    var genChqNoWithPrefix = "";
                    var genNoWithOutPrefix;
                    if (LastChqNo > 0 && LastChqNo < endNo) {
                        if (prefix == undefined) {
                            genChqNoWithPrefix = (LastChqNo + 1).toString();
                        }
                        else {
                            genChqNoWithPrefix = prefix + (LastChqNo + 1);
                        }
                        genNoWithOutPrefix = LastChqNo + 1;
                        if (genNoWithOutPrefix == endNo) {
                            _this.form.IsFinished.value = true;
                        }
                    }
                    else if (LastChqNo == 0) {
                        if (prefix == undefined) {
                            genChqNoWithPrefix = strNo.toString();
                        }
                        else {
                            genChqNoWithPrefix = prefix + strNo;
                        }
                        genNoWithOutPrefix = strNo;
                    }
                    if (endNo == LastChqNo) {
                        Q.notifyWarning("there is no remaing cheque no.");
                    }
                    //this.form.ChequeNo.value = genChqNoWithPrefix;
                    //this.form.ChequeNumhdn.value = genNoWithOutPrefix;
                    //console.log("with= "+genChqNoWithPrefix);
                    //console.log("without= "+genNoWithOutPrefix);
                    function pad(n, width, z) { while (n.length < width)
                        n = '' + z + n; return n; }
                    var ChequeNoList = [];
                    for (strNo; strNo <= endNo; strNo++) {
                        var tempChequeNo = "";
                        if (prefix == undefined) {
                            tempChequeNo = pad(strNo.toString(), strNoLength, "0").toString();
                        }
                        else {
                            tempChequeNo = prefix + pad(strNo.toString(), strNoLength, "0");
                        }
                        var newChequeNo = {
                            text: tempChequeNo,
                            id: strNo.toString()
                        };
                        ChequeNoList.push(newChequeNo);
                    }
                    //Q.reloadLookup("Transaction.AccChequeRegister_Lookup");
                    var data;
                    //data = Q.getLookup('Transaction.AccChequeRegister_Lookup').items;
                    data = Transaction.AccChequeRegisterRow.getLookup().items;
                    if (!_this.isNew()) {
                        _this.form.ChequeNoTemp.value = _this.entity.ChequeNo;
                        data = data.filter(function (p) { return p.ChequeBookId == +_this.form.ChequeBookId.value && p.ChequeNo != _this.entity.ChequeNo; });
                        var _loop_4 = function () {
                            var ddloption = ChequeNoList[i];
                            if (Q.count(data, function (o) { return o.ChequeNo == ddloption.text; }) == 0) {
                                _this.form.ChequeNo.addItem({ id: ddloption.id.toString(), text: ddloption.text.toString(), source: null, disabled: false });
                            }
                        };
                        for (var i = 0, l = ChequeNoList.length; i < l; i++) {
                            _loop_4();
                        }
                        _this.form.ChequeNo.value = _this.entity.ChequeNumhdn.toString();
                    }
                    else {
                        //var data = AccChequeRegisterRow.getLookup().items.filter(p => p.ChequeBookId == +this.form.ChequeBookId.value);
                        //console.log(data);
                        data = data.filter(function (p) { return p.ChequeBookId == +_this.form.ChequeBookId.value; });
                        var _loop_5 = function () {
                            var ddloption = ChequeNoList[i];
                            if (Q.count(data, function (o) { return o.ChequeNo == ddloption.text; }) == 0) {
                                _this.form.ChequeNo.addItem({ id: ddloption.id.toString(), text: ddloption.text.toString(), source: null, disabled: false });
                            }
                        };
                        //console.log(data);
                        for (var i = 0, l = ChequeNoList.length; i < l; i++) {
                            _loop_5();
                        }
                    }
                });
            };
            AccChequeRegisterDialog.prototype.validateBeforeSave = function () {
                if (this.form.Amount.value <= 0 && this.form.IsCancelled.value == false) {
                    Q.alert("Amount must be greather than zero.");
                    return false;
                }
                return true;
            };
            AccChequeRegisterDialog.prototype.getToolbarButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getToolbarButtons.call(this);
                buttons.push({
                    title: "Add", cssClass: "send-button",
                    onClick: function (x) {
                        _this.save(function (p) {
                            if (_this._isPaymentOrReceiptVoucherOnly) {
                                _this.digforOnlyPayment.form.PaytoOrReciveFrom.value = _this.form.PayTo.value;
                                if (_this.digforOnlyPayment.form.VoucherTypeId.value == "1")
                                    _this.digforOnlyPayment.form.CreditAmount.value = _this.form.Amount.value;
                                else
                                    _this.digforOnlyPayment.form.DebitAmount.value = _this.form.Amount.value;
                                Q.reloadLookup("Transaction.AccChequeRegister_Lookup");
                                var data = void 0;
                                data = Q.getLookup('Transaction.AccChequeRegister_Lookup').items;
                                _this.digforOnlyPayment.form.ChequeRegisterId.clearItems();
                                for (var i = 0; i < data.length; i++) {
                                    var str = data[i];
                                    _this.digforOnlyPayment.form.ChequeRegisterId.addItem({ id: str.Id.toString(), text: str.ChequeNo.toString(), source: null, disabled: false });
                                    var l = data.length;
                                    if (l - 1 == i) {
                                        _this.digforOnlyPayment.form.ChequeRegisterId.value = str.Id.toString();
                                    }
                                }
                            }
                            else {
                                _this.dig.form.PaytoOrReciveFrom.value = _this.form.PayTo.value;
                                _this.dig.form.BankAmount.value = _this.form.Amount.value;
                                if (_this.dig.form.VoucherTypeId.value == "1")
                                    _this.dig.form.DebitAmount.value = _this.form.Amount.value;
                                else
                                    _this.dig.form.CreditAmount.value = _this.form.Amount.value;
                                Q.reloadLookup("Transaction.AccChequeRegister_Lookup");
                                var data = void 0;
                                data = Q.getLookup('Transaction.AccChequeRegister_Lookup').items;
                                _this.dig.form.ChequeRegisterId.clearItems();
                                for (var i = 0; i < data.length; i++) {
                                    var str = data[i];
                                    _this.dig.form.ChequeRegisterId.addItem({ id: str.Id.toString(), text: str.ChequeNo.toString(), source: null, disabled: false });
                                    var l = data.length;
                                    if (l - 1 == i) {
                                        _this.dig.form.ChequeRegisterId.value = str.Id.toString();
                                    }
                                }
                            }
                            _this.dialogClose();
                        });
                    }
                });
                buttons.push({
                    title: "Process", cssClass: "print-preview-button",
                    onClick: function (x) {
                        //            this.editItem(<AccVoucherInformationRow>{
                        //    VoucherTypeId: 1
                        //});
                        // console.log(this.entity.BankAccountInformationCoaId);
                        if (_this.entity.IsUsed) {
                            Q.alert("used.");
                            return;
                        }
                        if (_this.entityId != undefined) {
                            var b = (new Transaction.AccVoucherInformationDialog());
                            var entity_voucher;
                            entity_voucher = {};
                            entity_voucher.VoucherTypeId = 1;
                            //
                            entity_voucher.TransactionMode = "BANK";
                            b.loadEntityAndOpenDialog(entity_voucher);
                            //   b.form.VoucherTypeId.value = "1";
                            b.form.TransactionTypeEntityId.value = b.form.TransactionTypeEntityId.items[0].id;
                            b.setNewVoucherNumber();
                            b.loadAccountHead();
                            b.form.AccountHead.value = _this.entity.BankAccountInformationCoaId.toString();
                            b.form.CreditAmount.value = _this.form.Amount.value;
                            b.loadCheque();
                            b.form.ChequeRegisterId.value = _this.entityId;
                            b.setMultiCurrencyCurrency(null, null, false);
                            b.form.ConversionAmount.value = b.form.ConversionRate.value * _this.form.Amount.value;
                            b.form.PaytoOrReciveFrom.value = _this.form.PayTo.value;
                            b.form.Description.value = _this.form.Remarks.value;
                            b.addtoGrid();
                            //  b.dialogOpen()
                        }
                        else {
                            Q.alert("Id not found.");
                        }
                    }
                });
                return buttons;
            };
            AccChequeRegisterDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccChequeRegisterDialog);
            return AccChequeRegisterDialog;
        }(Serenity.EntityDialog));
        Transaction.AccChequeRegisterDialog = AccChequeRegisterDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccChequeRegisterGrid = (function (_super) {
            __extends(AccChequeRegisterGrid, _super);
            function AccChequeRegisterGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.pendingChanges = {};
                return _this;
                //    this.slickContainer.on('change', '.edit:input', (e) => this.inputsChange(e));
            }
            AccChequeRegisterGrid.prototype.getColumnsKey = function () { return 'Transaction.AccChequeRegister'; };
            AccChequeRegisterGrid.prototype.getDialogType = function () { return Transaction.AccChequeRegisterDialog; };
            AccChequeRegisterGrid.prototype.getIdProperty = function () { return Transaction.AccChequeRegisterRow.idProperty; };
            AccChequeRegisterGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccChequeRegisterRow.localTextPrefix; };
            AccChequeRegisterGrid.prototype.getService = function () { return Transaction.AccChequeRegisterService.baseUrl; };
            AccChequeRegisterGrid.prototype.subDialogDataChange = function () {
                _super.prototype.subDialogDataChange.call(this);
                Q.reloadLookup(Transaction.AccChequeRegisterRow.lookupKey);
            };
            //protected getButtons() {
            //    var buttons = super.getButtons();
            //    buttons.push({
            //        title: 'Save Changes',
            //        cssClass: 'apply-changes-button disabled',
            //        onClick: e => this.saveClick(),
            //        separator: true
            //    });
            //    return buttons;
            //}
            //protected onViewProcessData(response) {
            //    this.pendingChanges = {};
            //    this.setSaveButtonState();
            //    return super.onViewProcessData(response);
            //}
            //private numericInputFormatter(ctx) {
            //    var klass = 'edit numeric';
            //    var item = ctx.item as AccChequeRegisterRow;
            //    var pending = this.pendingChanges[item.IsCancelled];
            //    if (pending && pending[ctx.column.field] !== undefined) {
            //        klass += ' dirty';
            //    }
            //    var value = this.getEffectiveValue(item, ctx.column.field) as boolean;
            //    console.log(value);
            //    var checked = "";
            //    if (value) checked = "checked";
            //    return "<input type='checkbox' class='ChkClick " + klass +
            //        "' data-field='" + ctx.column.field + "' " + checked + "/>";
            //}
            //private getEffectiveValue(item, field): any {
            //    var pending = this.pendingChanges[item.ProductID];
            //    if (pending && pending[field] !== undefined) {
            //        return pending[field];
            //    }
            //    return item[field];
            //}
            //protected getColumns() {
            //    var columns = super.getColumns();
            //   var num = ctx => this.numericInputFormatter(ctx);
            //    //var fld = AccChequeRegisterRow.Fields;
            //    Q.first(columns, x => x.field === 'IsCancelled').format = num;
            //    return columns;
            //}
            //private inputsChange(e: JQueryEventObject) {
            //    var cell = this.slickGrid.getCellFromEvent(e);
            //    var item = this.itemAt(cell.row);
            //    var input = $(e.target);
            //    var field = input.data('field');
            //    var text = Q.coalesce(Q.trimToNull(input.val()), '0');
            //    var pending = this.pendingChanges[item.IsCancelled];
            //    var effective = this.getEffectiveValue(item, field);
            //    var oldText: string;
            //    if (input.hasClass("numeric"))
            //        oldText = Q.formatNumber(effective, '0');
            //    else
            //        oldText = effective as string;
            //    var value;
            //    if (field === 'IsCancelled') {
            //        value = Q.parseDecimal(text);
            //        if (value == null || isNaN(value)) {
            //            Q.notifyError(Q.text('Validation.Decimal'), '', null);
            //            input.val(oldText);
            //            input.focus();
            //            return;
            //        }
            //    }
            //    else if (input.hasClass("numeric")) {
            //        var i = Q.parseInteger(text);
            //        if (isNaN(i) || i > 32767 || i < 0) {
            //            Q.notifyError(Q.text('Validation.Integer'), '', null);
            //            input.val(oldText);
            //            input.focus();
            //            return;
            //        }
            //        value = i;
            //    }
            //    else
            //        value = text;
            //    if (!pending) {
            //        this.pendingChanges[item.IsCancelled] = pending = {};
            //    }
            //    pending[field] = value;
            //    item[field] = value;
            //    this.view.refresh();
            //    if (input.hasClass("numeric"))
            //        value = Q.formatNumber(value, '0');
            //    input.val(value).addClass('dirty');
            //    this.setSaveButtonState();
            //}
            //private setSaveButtonState() {
            //    this.toolbar.findButton('apply-changes-button').toggleClass('disabled',
            //        Object.keys(this.pendingChanges).length === 0);
            //}
            //private saveClick() {
            //    if (Object.keys(this.pendingChanges).length === 0) {
            //        return;
            //    }
            //    // this calls save service for all modified rows, one by one
            //    // you could write a batch update service
            //    var keys = Object.keys(this.pendingChanges);
            //    var current = -1;
            //    var self = this;
            //    (function saveNext() {
            //        if (++current >= keys.length) {
            //            self.refresh();
            //            return;
            //        }
            //        var key = keys[current];
            //        var entity = Q.deepClone(self.pendingChanges[key]);
            //        entity.ProductID = key;
            //        Q.serviceRequest('Transaction/AccChequeRegisterRepository/Update', {
            //            EntityId: key,
            //            Entity: entity
            //        }, (response) => {
            //            delete self.pendingChanges[key];
            //            saveNext();
            //        });
            //    })();
            //}
            //protected getColumns(): Slick.Column[] {
            //    var columns = super.getColumns();
            //    //  return "<input type='checkbox' class='' data-field='' value=''/>";
            //    var b = `<input type='checkbox' class='ChkClick'/>`;
            //    columns.push({
            //        name: "Action",
            //        field: 'Action',
            //        format: ctx => b,
            //        width: 80
            //    });
            //    //    var columns = super.getColumns();
            //    //var num = ctx => this.numericInputFormatter(ctx);
            //    // //var fld = AccChequeRegisterRow.Fields;
            //    // Q.first(columns, x => x.field === 'IsCancelled').format = num;
            //    return columns;
            //}
            //protected onClick(e: JQueryEventObject, row: number, cell: number): void {
            //    // let base grid handle clicks for its edit links
            //    super.onClick(e, row, cell);
            //    // if base grid already handled, we shouldn"t handle it again
            //    if (e.isDefaultPrevented()) {
            //        return;
            //    }
            //    // get reference to current item
            //    var item = this.itemAt(row);
            //    // get reference to clicked element
            //    var target = $(e.target);
            //    if (target.hasClass("ChkClick")) {
            //        //   e.preventDefault();
            //        let message = "confirm?";
            //        // $(target).prop("checked", "checked");
            //        Q.confirm(message, () => {
            //            // ConScreeningChecklistService.Delete({ EntityId: item.ConScreeningChecklistId }, p => { this.refresh() });
            //            //if (!$(target).is(':checked'))
            //            //var v = target as HTMLInputElement;
            //            //if (!$(target).is(':checked')) {
            //            //   // $(target).prop("checked", "");
            //            //    $(target).removeAttr('checked');
            //            //    alert('unchecked');
            //            //}
            //            //else {
            //            //    $(target).prop("checked", "checked");
            //            //    alert('checked');
            //            //}
            //        }
            //        );
            //    }
            //}
            AccChequeRegisterGrid.prototype.getViewOptions = function () {
                var opt = _super.prototype.getViewOptions.call(this);
                opt.rowsPerPage = 20;
                return opt;
            };
            AccChequeRegisterGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccChequeRegisterGrid);
            return AccChequeRegisterGrid;
        }(VistaGL.EntityGridBaseNew));
        Transaction.AccChequeRegisterGrid = AccChequeRegisterGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccCostCentreOrInstituteInformationDialog = (function (_super) {
            __extends(AccCostCentreOrInstituteInformationDialog, _super);
            function AccCostCentreOrInstituteInformationDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Transaction.AccCostCentreOrInstituteInformationForm(_this.idPrefix);
                $('.EmpId').hide();
                // Q.reloadLookup(AccCostCentreOrInstituteInformationRow.lookupKey);
                _this.form.CostCenterTypeId.changeSelect2(function (p) {
                    if (_this.form.CostCenterTypeId.value == "4") {
                        $('.EmpId').show();
                    }
                    else {
                        $('.EmpId').hide();
                        _this.form.EmpId.value = "";
                    }
                });
                _this.form.EmpId.changeSelect2(function (p) {
                    var empCOde = _this.form.EmpId.get_text().split('-');
                    _this.form.UserCode.value = empCOde[0].trim();
                    _this.form.Name.value = empCOde[1].trim();
                });
                return _this;
            }
            AccCostCentreOrInstituteInformationDialog.prototype.getFormKey = function () { return Transaction.AccCostCentreOrInstituteInformationForm.formKey; };
            AccCostCentreOrInstituteInformationDialog.prototype.getIdProperty = function () { return Transaction.AccCostCentreOrInstituteInformationRow.idProperty; };
            AccCostCentreOrInstituteInformationDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccCostCentreOrInstituteInformationRow.localTextPrefix; };
            AccCostCentreOrInstituteInformationDialog.prototype.getNameProperty = function () { return Transaction.AccCostCentreOrInstituteInformationRow.nameProperty; };
            AccCostCentreOrInstituteInformationDialog.prototype.getService = function () { return Transaction.AccCostCentreOrInstituteInformationService.baseUrl; };
            AccCostCentreOrInstituteInformationDialog.prototype.onDialogOpen = function () {
                var _this = this;
                _super.prototype.onDialogOpen.call(this);
                if (this.entity.IsFixedAssetDevWork == true) {
                    this.form.FixedAssetDevWorkTypeSelector.value = VistaGL.FixedAssetDevWorkType.IsFixedAssetDevWork.toString();
                }
                else if (this.entity.IsFixedAssetNonDevWork == true) {
                    this.form.FixedAssetDevWorkTypeSelector.value = VistaGL.FixedAssetDevWorkType.IsFixedAssetNonDevWork.toString();
                }
                if (this.isNew()) {
                    this.form.Name.change(function (e) {
                        //
                        _this.form.NameForBankAdviceLetter.value = _this.form.Name.value;
                    });
                }
            };
            AccCostCentreOrInstituteInformationDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccCostCentreOrInstituteInformationDialog);
            return AccCostCentreOrInstituteInformationDialog;
        }(_Ext.DialogBase));
        Transaction.AccCostCentreOrInstituteInformationDialog = AccCostCentreOrInstituteInformationDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccCostCentreOrInstituteInformationGrid = (function (_super) {
            __extends(AccCostCentreOrInstituteInformationGrid, _super);
            function AccCostCentreOrInstituteInformationGrid(container) {
                var _this = _super.call(this, container) || this;
                new Serenity.TreeGridMixin({
                    grid: _this,
                    getParentId: function (x) { return x.ParentId; },
                    toggleField: "Name" /* Name */,
                    initialCollapse: function () { return false; }
                });
                return _this;
            }
            AccCostCentreOrInstituteInformationGrid.prototype.getColumnsKey = function () { return 'Transaction.AccCostCentreOrInstituteInformation'; };
            AccCostCentreOrInstituteInformationGrid.prototype.getDialogType = function () { return Transaction.AccCostCentreOrInstituteInformationDialog; };
            AccCostCentreOrInstituteInformationGrid.prototype.getIdProperty = function () { return Transaction.AccCostCentreOrInstituteInformationRow.idProperty; };
            AccCostCentreOrInstituteInformationGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccCostCentreOrInstituteInformationRow.localTextPrefix; };
            AccCostCentreOrInstituteInformationGrid.prototype.getService = function () { return Transaction.AccCostCentreOrInstituteInformationService.baseUrl; };
            AccCostCentreOrInstituteInformationGrid.prototype.subDialogDataChange = function () {
                _super.prototype.subDialogDataChange.call(this);
                Q.reloadLookup("Transaction.AccCostCentreOrInstituteInformation_Lookup");
            };
            AccCostCentreOrInstituteInformationGrid.prototype.usePager = function () {
                return true;
            };
            AccCostCentreOrInstituteInformationGrid.prototype.getViewOptions = function () {
                var opt = _super.prototype.getViewOptions.call(this);
                opt.rowsPerPage = 500;
                return opt;
            };
            AccCostCentreOrInstituteInformationGrid.prototype.getColumns = function () {
                var columns = _super.prototype.getColumns.call(this);
                columns.splice(Q.indexOf(columns, function (x) { return x.name == "Is Parent?"; }) + 1, 0, {
                    field: 'Add Child',
                    name: '',
                    format: function (ctx) { return '<a class="inline-action add-child-unit" title="add child"></a>'; },
                    width: 24,
                    minWidth: 24,
                    maxWidth: 24
                });
                return columns;
            };
            AccCostCentreOrInstituteInformationGrid.prototype.onClick = function (e, row, cell) {
                _super.prototype.onClick.call(this, e, row, cell);
                if (e.isDefaultPrevented())
                    return;
                var item = this.itemAt(row);
                var target = $(e.target);
                if (target.parent().hasClass('inline-action'))
                    target = target.parent();
                if (target.hasClass('inline-action')) {
                    e.preventDefault();
                    if (target.hasClass('add-child-unit')) {
                        if (item.IsInstitute == true) {
                            var _items = this.getItems().filter(function (p) { return p.ParentId == item.Id; });
                            //console.log(_items);
                            var max_ = Math.max.apply(Math, _items.map(function (o) { return o.UserCode; }));
                            //console.log(max_);
                            if (max_.toString() == "NaN" || max_.toString() == "-Infinity")
                                max_ = 1;
                            else
                                max_++;
                            var dlg = new Transaction.AccCostCentreOrInstituteInformationDialog();
                            this.initDialog(dlg);
                            dlg.loadEntityAndOpenDialog({
                                CostCenterTypeId: item.CostCenterTypeId,
                                ParentId: item.Id,
                                Code: item.Code,
                                CodeCount: max_,
                                AccountCodeClient: item.Code + "." + max_,
                                UserCode: max_.toString().padStart(_items[0].UserCode.length, "0")
                            });
                        }
                        else {
                            Q.alert("Selected sub-ledger is not Parent! Mark it as parent first to add child!");
                        }
                    }
                }
            };
            AccCostCentreOrInstituteInformationGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccCostCentreOrInstituteInformationGrid);
            return AccCostCentreOrInstituteInformationGrid;
        }(VistaGL.EntityGridBase));
        Transaction.AccCostCentreOrInstituteInformationGrid = AccCostCentreOrInstituteInformationGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
/// <reference path="../../Common/Helpers/BulkServiceAction.ts" />
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccCreditVoucherFromMoneyReceiptBulkAction = (function (_super) {
            __extends(AccCreditVoucherFromMoneyReceiptBulkAction, _super);
            function AccCreditVoucherFromMoneyReceiptBulkAction() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            /**
             * This controls how many service requests will be used in parallel.
             * Determine this number based on how many requests your server
             * might be able to handle, and amount of wait on external resources.
             */
            AccCreditVoucherFromMoneyReceiptBulkAction.prototype.getParallelRequests = function () {
                return 10;
            };
            /**
             * These number of records IDs will be sent to your service in one
             * service call. If your service is designed to handle one record only,
             * set it to 1. But note that, if you have 5000 records, this will
             * result in 5000 service calls / requests.
             */
            AccCreditVoucherFromMoneyReceiptBulkAction.prototype.getBatchSize = function () {
                return 5;
            };
            /**
             * This is where you should call your service.
             * Batch parameter contains the selected order IDs
             * that should be processed in this service call.
             */
            AccCreditVoucherFromMoneyReceiptBulkAction.prototype.executeForBatch = function (batch) {
                var _this = this;
                Transaction.AccCreditVoucherFromMoneyReceiptService.BulkAction({
                    IDs: batch.map(function (x) { return Q.parseInteger(x); })
                }, function (response) { return _this.set_successCount(_this.get_successCount() + batch.length); }, {
                    blockUI: false,
                    onError: function (response) { return _this.set_errorCount(_this.get_errorCount() + batch.length); },
                    onCleanup: function () { return _this.serviceCallCleanup(); }
                });
            };
            return AccCreditVoucherFromMoneyReceiptBulkAction;
        }(VistaGL.Common.BulkServiceAction));
        Transaction.AccCreditVoucherFromMoneyReceiptBulkAction = AccCreditVoucherFromMoneyReceiptBulkAction;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccCreditVoucherFromMoneyReceiptGrid = (function (_super) {
            __extends(AccCreditVoucherFromMoneyReceiptGrid, _super);
            function AccCreditVoucherFromMoneyReceiptGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.setTitle("Prepare Credit Voucher from Money Receipts");
                return _this;
            }
            AccCreditVoucherFromMoneyReceiptGrid.prototype.getColumnsKey = function () { return 'Transaction.AccCreditVoucherFromMoneyReceipt'; };
            AccCreditVoucherFromMoneyReceiptGrid.prototype.getIdProperty = function () { return Transaction.AccMoneyReceiptRow.idProperty; };
            AccCreditVoucherFromMoneyReceiptGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccMoneyReceiptRow.localTextPrefix; };
            AccCreditVoucherFromMoneyReceiptGrid.prototype.getService = function () { return Transaction.AccCreditVoucherFromMoneyReceiptService.baseUrl; };
            AccCreditVoucherFromMoneyReceiptGrid.prototype.createToolbarExtensions = function () {
                _super.prototype.createToolbarExtensions.call(this);
                this.rowSelection = new Serenity.GridRowSelectionMixin(this);
            };
            AccCreditVoucherFromMoneyReceiptGrid.prototype.getButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getButtons.call(this);
                buttons.shift();
                buttons.push({
                    title: 'Prepare Credit Voucher',
                    cssClass: 'send-button',
                    onClick: function () {
                        if (!_this.onViewSubmit()) {
                            return;
                        }
                        var selected = _this.rowSelection.getSelectedKeys();
                        if (selected.length == 0) {
                            var rv = Q.warning("No row is selected!");
                        }
                        else {
                            var selectedOutput = [];
                            var items;
                            var bankAccId = 0;
                            var _loop_6 = function () {
                                var id = selected[i];
                                items = Transaction.AccMoneyReceiptRow.getLookup().items.filter(function (x) { return x.Id == +id; })[0];
                                if (i == 0)
                                    bankAccId = items.AccHeadBankId;
                                if (i > 0 && bankAccId != items.AccHeadBankId) {
                                    Q.warning("Account Head Bank must be same in case of multiple money receipts setection!");
                                    return { value: void 0 };
                                }
                                selectedOutput.push(+selected[i]);
                            };
                            for (var i = 0; i < selected.length; i++) {
                                var state_2 = _loop_6();
                                if (typeof state_2 === "object")
                                    return state_2.value;
                            }
                            var dialog = new Transaction.AccCreditVoucherParametersDialog();
                            dialog.SendSelected(selectedOutput);
                            dialog.element.bind('dialogclose', function () {
                                _this.rowSelection.resetCheckedAndRefresh();
                            });
                            dialog.loadNewAndOpenDialog();
                        }
                        //var action = new AccCreditVoucherFromMoneyReceiptBulkAction();
                        //action.done = () => this.rowSelection.resetCheckedAndRefresh();
                        //action.execute(this.rowSelection.getSelectedKeys());
                    } // *** End onClick() ***
                }); // *** End Button.push ***
                return buttons;
            };
            AccCreditVoucherFromMoneyReceiptGrid.prototype.getSlickOptions = function () {
                var opt = _super.prototype.getSlickOptions.call(this);
                opt.frozenColumn = 5;
                return opt;
            };
            AccCreditVoucherFromMoneyReceiptGrid.prototype.getColumns = function () {
                var _this = this;
                var columns = _super.prototype.getColumns.call(this);
                columns.splice(0, 0, Serenity.GridRowSelectionMixin.createSelectColumn(function () { return _this.rowSelection; }));
                columns.splice(1, 0, {
                    field: 'Print Money Receipt',
                    name: '',
                    format: function (ctx) { return '<a class="inline-action Print-link" title="Print Money Receipt">' +
                        '<i class="fa fa-print text-blue"></i></a>'; },
                    width: 24,
                    minWidth: 24,
                    maxWidth: 24
                });
                return columns;
            };
            AccCreditVoucherFromMoneyReceiptGrid.prototype.getItemCssClass = function (item, index) {
                var klass = "";
                if (item.LinkedWithAutoJV) {
                    klass += " backColorForLinkedWithAutoJV";
                }
                return Q.trimToNull(klass);
            };
            AccCreditVoucherFromMoneyReceiptGrid.prototype.getViewOptions = function () {
                var opt = _super.prototype.getViewOptions.call(this);
                opt.rowsPerPage = 2500;
                return opt;
            };
            AccCreditVoucherFromMoneyReceiptGrid.prototype.onViewSubmit = function () {
                if (!_super.prototype.onViewSubmit.call(this)) {
                    return false;
                }
                //var request = this.view.params as Serenity.ListRequest;
                //request.Criteria = Serenity.Criteria.and(request.Criteria,
                //    [['IsUsed'], '=', 0]);
                return true;
            };
            AccCreditVoucherFromMoneyReceiptGrid.prototype.onClick = function (e, row, cell) {
                _super.prototype.onClick.call(this, e, row, cell);
                if (e.isDefaultPrevented())
                    return;
                var item = this.itemAt(row);
                var target = $(e.target);
                // -- ****
                if (target.parent().hasClass('Print-link'))
                    target = target.parent();
                if (target.hasClass("Print-link")) {
                    e.preventDefault();
                    var _url = "~/Reports/MoneyReceipt?id=" + item.Id + "&source='FromMoneyReceiptPage'";
                    Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                }
                // -- ****//
            };
            AccCreditVoucherFromMoneyReceiptGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccCreditVoucherFromMoneyReceiptGrid);
            return AccCreditVoucherFromMoneyReceiptGrid;
        }(Serenity.EntityGrid));
        Transaction.AccCreditVoucherFromMoneyReceiptGrid = AccCreditVoucherFromMoneyReceiptGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccCreditVoucherParametersDialog = (function (_super) {
            __extends(AccCreditVoucherParametersDialog, _super);
            function AccCreditVoucherParametersDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Transaction.AccCreditVoucherParametersForm(_this.idPrefix);
                return _this;
            }
            AccCreditVoucherParametersDialog.prototype.getFormKey = function () { return Transaction.AccCreditVoucherParametersForm.formKey; };
            AccCreditVoucherParametersDialog.prototype.getIdProperty = function () { return Transaction.AccMoneyReceiptRow.idProperty; };
            AccCreditVoucherParametersDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccMoneyReceiptRow.localTextPrefix; };
            AccCreditVoucherParametersDialog.prototype.getNameProperty = function () { return Transaction.AccMoneyReceiptRow.nameProperty; };
            AccCreditVoucherParametersDialog.prototype.getService = function () { return Transaction.AccCreditVoucherFromMoneyReceiptService.baseUrl; };
            AccCreditVoucherParametersDialog.prototype.SendSelected = function (selected) {
                this.selectedItems = selected;
            };
            AccCreditVoucherParametersDialog.prototype.getToolbarButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getToolbarButtons.call(this);
                buttons.splice(Q.indexOf(buttons, function (x) { return x.cssClass == "save-and-close-button"; }), 1);
                buttons.splice(Q.indexOf(buttons, function (x) { return x.cssClass == "apply-changes-button"; }), 1);
                buttons.splice(Q.indexOf(buttons, function (x) { return x.cssClass == "delete-button"; }), 1);
                buttons.splice(Q.indexOf(buttons, function (x) { return x.cssClass == "undo-delete-button"; }), 1);
                buttons.splice(Q.indexOf(buttons, function (x) { return x.cssClass == "localization-button"; }), 1);
                buttons.splice(Q.indexOf(buttons, function (x) { return x.cssClass == "clone-button"; }), 1);
                var linkButton = {
                    title: 'Create Voucher',
                    cssClass: 'save-and-close-button',
                    onClick: function () {
                        if (_this.form.CreditVoucherDate.value == "" || _this.form.CreditVoucherNarration.value == "") {
                            Q.warning("Please fill-up necessary fields.");
                        }
                        else {
                            Q.defaultNotifyOptions.positionClass = "toast-top-center";
                            Q.defaultNotifyOptions.newestOnTop = false;
                            //Q.notifyWarning("Voucher Preparation in Progress...", "Prepare Credit Voucher");
                            var servicecall = Transaction.AccCreditVoucherFromMoneyReceiptService.CreateCreditVoucher({
                                MoneyReceiptIds: _this.selectedItems,
                                VoucherDate: _this.form.CreditVoucherDate.value,
                                Narration: _this.form.CreditVoucherNarration.value,
                                ReceiveFrom: _this.form.ReceiveFrom.value
                            }, function (response) {
                                var options = Q.defaultNotifyOptions;
                                options.tapToDismiss = true;
                                _this.dialogClose();
                                var message = JSON.parse(servicecall.responseText);
                                //Q.alert(message.OutoutMessage);
                                Q.notifySuccess(message.OutoutMessage, "Success", options);
                            }, {
                                blockUI: true,
                                onError: function (response) {
                                    var options = Q.defaultNotifyOptions;
                                    options.timeOut = 15000;
                                    options.extendedTimeOut = 3000;
                                    _this.dialogClose();
                                    Q.notifyError("Something happened wrong!", "Prepare Credit Voucher", options);
                                    var errorcontent = JSON.parse(servicecall.responseText);
                                    var message = errorcontent["Error"]["Message"];
                                    Q.alert(message);
                                },
                            });
                        }
                    }
                };
                var cancelButton = {
                    title: 'Cancel',
                    cssClass: 'undo-delete-button',
                    onClick: function () {
                        _this.dialogClose();
                    }
                };
                buttons.push(linkButton);
                buttons.push(cancelButton);
                return buttons;
            };
            AccCreditVoucherParametersDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccCreditVoucherParametersDialog);
            return AccCreditVoucherParametersDialog;
        }(Serenity.EntityDialog));
        Transaction.AccCreditVoucherParametersDialog = AccCreditVoucherParametersDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccEmpAdvanceDialog = (function (_super) {
            __extends(AccEmpAdvanceDialog, _super);
            function AccEmpAdvanceDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Transaction.AccEmpAdvanceForm(_this.idPrefix);
                return _this;
            }
            AccEmpAdvanceDialog.prototype.getFormKey = function () { return Transaction.AccEmpAdvanceForm.formKey; };
            AccEmpAdvanceDialog.prototype.getIdProperty = function () { return Transaction.AccEmpAdvanceRow.idProperty; };
            AccEmpAdvanceDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccEmpAdvanceRow.localTextPrefix; };
            AccEmpAdvanceDialog.prototype.getNameProperty = function () { return Transaction.AccEmpAdvanceRow.nameProperty; };
            AccEmpAdvanceDialog.prototype.getService = function () { return Transaction.AccEmpAdvanceService.baseUrl; };
            AccEmpAdvanceDialog.prototype.onDialogOpen = function () {
                var _this = this;
                _super.prototype.onDialogOpen.call(this);
                //this.form.CoAId.clearItems();
                //this.form.ChequeRegisterId.clearItems();
                this.items_ChartofAccounts = Q.getLookup('Configurations.AccChartofAccounts_Lookup').items;
                this.AccChequeRegister = Q.getLookup('Transaction.AccChequeRegister_Lookup').items;
                //    console.log(this.items_ChartofAccounts);
                this.form.CoAId.changeSelect2(function (p1) {
                    //   console.log(this.form.CoAId.value);
                    var _AccChequeRegister = _this.AccChequeRegister.filter(function (p) { return p.BankAccountInformationCoaId == +_this.form.CoAId.value; });
                    _this.form.ChequeRegisterId.value = "";
                    _this.form.ChequeRegisterId.clearItems();
                    for (var _i = 0, _AccChequeRegister_1 = _AccChequeRegister; _i < _AccChequeRegister_1.length; _i++) {
                        var item = _AccChequeRegister_1[_i];
                        //  var str = items[i];
                        _this.form.ChequeRegisterId.addItem({ id: item.Id.toString(), text: item.ChequeNo, source: null, disabled: false });
                    }
                });
                this.form.TransactionMode.changeSelect2(function (p) {
                    //  console.log(this.form.TransactionMode.value);
                    var items = _this.items_ChartofAccounts.filter(function (f) { return f.IsControlhead == 0 && f.CoaMapping == _this.form.TransactionMode.value; });
                    _this.form.CoAId.value = "";
                    _this.form.CoAId.clearItems();
                    for (var _i = 0, items_8 = items; _i < items_8.length; _i++) {
                        var item = items_8[_i];
                        // var str = items[i];
                        _this.form.CoAId.addItem({ id: item.Id.toString(), text: item.AccountName, source: null, disabled: false });
                    }
                });
                Serenity.EditorUtils.setReadonly(this.element.find(this.form.RemainAmount.element), true);
                if (!this.isNew()) {
                    this.form.Amount.value = this.form.RemainAmount.value;
                    this.toolbar.findButton('Process-Payment').toggleClass('disabled');
                    if (this.form.RemainAmount.value == 0) {
                        this.toolbar.findButton('Process-Adjustment').toggleClass('disabled');
                        this.toolbar.findButton('Process-Receipt').toggleClass('disabled');
                    }
                    else {
                        this.toolbar.findButton('Process-Adjustment').removeClass('disabled');
                        this.toolbar.findButton('Process-Receipt').removeClass('disabled');
                    }
                    if (this.entity.Status == 1) {
                        Serenity.EditorUtils.setReadonly(this.element.find(this.form.EmpId.element), true);
                        Serenity.EditorUtils.setReadonly(this.element.find(this.form.TransactionMode.element), true);
                        Serenity.EditorUtils.setReadonly(this.element.find(this.form.CoAId.element), true);
                        Serenity.EditorUtils.setReadonly(this.element.find(this.form.ChequeRegisterId.element), true);
                    }
                }
                else {
                    this.toolbar.findButton('Process-Adjustment').toggleClass('disabled');
                    this.toolbar.findButton('Process-Receipt').toggleClass('disabled');
                    this.form.CoAId2.value = "130";
                }
            };
            AccEmpAdvanceDialog.prototype.getToolbarButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getToolbarButtons.call(this);
                buttons.push({
                    title: "Process Payment", cssClass: "send-button Process-Payment",
                    onClick: function (x) {
                        //if (this.entityId != undefined) {
                        var b = (new Transaction.AccVoucherInformationDialog());
                        var entity_voucher;
                        entity_voucher = {};
                        entity_voucher.VoucherTypeId = 1;
                        //
                        entity_voucher.TransactionMode = _this.form.TransactionMode.value;
                        entity_voucher.TemplateId = _this.entityId;
                        entity_voucher.TemplateStatus = 1;
                        entity_voucher.TemplateCOAId = +_this.form.CoAId.value;
                        entity_voucher.TemplateChequeRegisterId = +_this.form.ChequeRegisterId.value;
                        entity_voucher.TemplateCOAId2 = +_this.form.CoAId2.value;
                        b.loadEntityAndOpenDialog(entity_voucher);
                        //   b.form.VoucherTypeId.value = "1";
                        b.form.TransactionTypeEntityId.value = b.form.TransactionTypeEntityId.items[0].id;
                        b.setNewVoucherNumber();
                        b.loadAccountHead();
                        b.form.CreditAmount.value = _this.form.Amount.value;
                        b.form.AccountHead.value = _this.form.CoAId.value.toString();
                        b.loadCheque();
                        b.form.ChequeRegisterId.value = _this.form.ChequeRegisterId.value;
                        b.setMultiCurrencyCurrency(null, null, false);
                        b.form.ConversionAmount.value = b.form.ConversionRate.value * _this.form.Amount.value;
                        b.form.PaytoOrReciveFrom.value = _this.form.EmpId.get_text();
                        //  b.form.Description.value = this.form.Remarks.value;
                        b.addtoGrid();
                        b.form.CreditAmount.value = 0;
                        b.form.DebitAmount.value = _this.form.Amount.value;
                        b.form.AccountHead.value = _this.form.CoAId2.value;
                        b.setMultiCurrencyCurrency(null, null, false);
                        b.form.ConversionAmount.value = b.form.ConversionRate.value * _this.form.Amount.value;
                        b.addtoGrid();
                        b.form.EmpId.value = +_this.form.EmpId.value;
                        b.form.Description.value = _this.form.Narration.value;
                        b.onAfterSaveSuccess = function () {
                            _this.dialogClose();
                            Serenity.SubDialogHelper.triggerDataChange(_this);
                        };
                        //  b.dialogOpen()
                        //} else {
                        //    Q.alert("Id not found.");
                        //}
                    }
                });
                buttons.push({
                    title: "Process Adjustment", cssClass: "send-button Process-Adjustment",
                    onClick: function (x) {
                        if (_this.entityId != undefined) {
                            var b = (new Transaction.AccVoucherInformationDialog());
                            var entity_voucher;
                            entity_voucher = {};
                            entity_voucher.VoucherTypeId = 3;
                            //
                            entity_voucher.TransactionMode = _this.form.TransactionMode.value;
                            entity_voucher.TemplateId = _this.entityId;
                            entity_voucher.TemplateStatus = 2;
                            //   entity_voucher.TemplateCOAId = +this.form.CoAId.value;
                            b.loadEntityAndOpenDialog(entity_voucher);
                            //   b.form.VoucherTypeId.value = "1";
                            b.form.TransactionTypeEntityId.value = b.form.TransactionTypeEntityId.items[0].id;
                            b.setNewVoucherNumber();
                            b.loadAccountHead();
                            b.form.DebitAmount.value = _this.form.Amount.value;
                            b.form.AccountHead.value = _this.form.CoAId.value.toString();
                            b.loadCheque();
                            b.form.ChequeRegisterId.value = _this.form.ChequeRegisterId.value;
                            b.setMultiCurrencyCurrency(null, null, false);
                            b.form.ConversionAmount.value = b.form.ConversionRate.value * _this.form.Amount.value;
                            b.form.PaytoOrReciveFrom.value = _this.form.EmpId.get_text();
                            //  b.form.Description.value = this.form.Remarks.value;
                            b.addtoGrid();
                            b.form.DebitAmount.value = 0;
                            b.form.CreditAmount.value = _this.form.Amount.value;
                            b.form.AccountHead.value = _this.form.CoAId2.value;
                            b.setMultiCurrencyCurrency(null, null, false);
                            b.form.ConversionAmount.value = b.form.ConversionRate.value * _this.form.Amount.value;
                            b.addtoGrid();
                            b.form.EmpId.value = +_this.form.EmpId.value;
                            b.form.RemainAmount.value = _this.form.RemainAmount.value;
                            b.form.Description.value = _this.form.Narration.value;
                            b.onAfterSaveSuccess = function () {
                                _this.dialogClose();
                                Serenity.SubDialogHelper.triggerDataChange(_this);
                            };
                            //  b.dialogOpen()
                        }
                        else {
                            Q.alert("Id not found.");
                        }
                    }
                });
                buttons.push({
                    title: "Process Receipt", cssClass: "send-button Process-Receipt",
                    onClick: function (x) {
                        if (_this.entityId != undefined) {
                            var b = (new Transaction.AccVoucherInformationDialog());
                            var entity_voucher;
                            entity_voucher = {};
                            entity_voucher.VoucherTypeId = 2;
                            //
                            entity_voucher.TransactionMode = _this.form.TransactionMode.value;
                            entity_voucher.TemplateId = _this.entityId;
                            entity_voucher.TemplateStatus = 2;
                            //   entity_voucher.TemplateCOAId = +this.form.CoAId.value;
                            b.loadEntityAndOpenDialog(entity_voucher);
                            //   b.form.VoucherTypeId.value = "1";
                            b.form.TransactionTypeEntityId.value = b.form.TransactionTypeEntityId.items[0].id;
                            b.setNewVoucherNumber();
                            b.loadAccountHead();
                            b.form.DebitAmount.value = _this.form.Amount.value;
                            b.form.AccountHead.value = _this.form.CoAId.value.toString();
                            b.loadCheque();
                            b.form.ChequeRegisterId.value = _this.form.ChequeRegisterId.value;
                            b.setMultiCurrencyCurrency(null, null, false);
                            b.form.ConversionAmount.value = b.form.ConversionRate.value * _this.form.Amount.value;
                            b.form.PaytoOrReciveFrom.value = _this.form.EmpId.get_text();
                            //  b.form.Description.value = this.form.Remarks.value;
                            b.addtoGrid();
                            b.form.DebitAmount.value = 0;
                            b.form.CreditAmount.value = _this.form.Amount.value;
                            b.form.AccountHead.value = _this.form.CoAId2.value;
                            b.setMultiCurrencyCurrency(null, null, false);
                            b.form.ConversionAmount.value = b.form.ConversionRate.value * _this.form.Amount.value;
                            b.addtoGrid();
                            b.form.EmpId.value = +_this.form.EmpId.value;
                            b.form.RemainAmount.value = _this.form.RemainAmount.value;
                            b.form.Description.value = _this.form.Narration.value;
                            b.onAfterSaveSuccess = function () {
                                _this.dialogClose();
                                Serenity.SubDialogHelper.triggerDataChange(_this);
                            };
                            //  b.dialogOpen()
                        }
                        else {
                            Q.alert("Id not found.");
                        }
                    }
                });
                return buttons;
            };
            AccEmpAdvanceDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccEmpAdvanceDialog);
            return AccEmpAdvanceDialog;
        }(VistaGL.EntityDialogBase));
        Transaction.AccEmpAdvanceDialog = AccEmpAdvanceDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccEmpAdvanceEditor = (function (_super) {
            __extends(AccEmpAdvanceEditor, _super);
            function AccEmpAdvanceEditor(container) {
                return _super.call(this, container) || this;
            }
            AccEmpAdvanceEditor.prototype.getColumnsKey = function () { return 'Transaction.AccEmpAdvance'; };
            AccEmpAdvanceEditor.prototype.getDialogType = function () { return Transaction.AccEmpAdvanceEditorDialog; };
            AccEmpAdvanceEditor.prototype.getLocalTextPrefix = function () { return Transaction.AccEmpAdvanceRow.localTextPrefix; };
            AccEmpAdvanceEditor = __decorate([
                Serenity.Decorators.registerClass()
            ], AccEmpAdvanceEditor);
            return AccEmpAdvanceEditor;
        }(VistaGL.GridEditorBase));
        Transaction.AccEmpAdvanceEditor = AccEmpAdvanceEditor;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccEmpAdvanceEditorDialog = (function (_super) {
            __extends(AccEmpAdvanceEditorDialog, _super);
            function AccEmpAdvanceEditorDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccEmpAdvanceForm(_this.idPrefix);
                return _this;
            }
            AccEmpAdvanceEditorDialog.prototype.getFormKey = function () { return Transaction.AccEmpAdvanceForm.formKey; };
            AccEmpAdvanceEditorDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccEmpAdvanceRow.localTextPrefix; };
            AccEmpAdvanceEditorDialog.prototype.getNameProperty = function () { return Transaction.AccEmpAdvanceRow.nameProperty; };
            AccEmpAdvanceEditorDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccEmpAdvanceEditorDialog);
            return AccEmpAdvanceEditorDialog;
        }(VistaGL.GridEditorDialog));
        Transaction.AccEmpAdvanceEditorDialog = AccEmpAdvanceEditorDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccEmpAdvanceGrid = (function (_super) {
            __extends(AccEmpAdvanceGrid, _super);
            function AccEmpAdvanceGrid(container) {
                return _super.call(this, container) || this;
            }
            AccEmpAdvanceGrid.prototype.getColumnsKey = function () { return 'Transaction.AccEmpAdvance'; };
            AccEmpAdvanceGrid.prototype.getDialogType = function () { return Transaction.AccEmpAdvanceDialog; };
            AccEmpAdvanceGrid.prototype.getIdProperty = function () { return Transaction.AccEmpAdvanceRow.idProperty; };
            AccEmpAdvanceGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccEmpAdvanceRow.localTextPrefix; };
            AccEmpAdvanceGrid.prototype.getService = function () { return Transaction.AccEmpAdvanceService.baseUrl; };
            AccEmpAdvanceGrid.prototype.subDialogDataChange = function () {
                _super.prototype.subDialogDataChange.call(this);
                this.refresh();
                // Q.reloadLookup("Transaction.AccCostCentreOrInstituteInformation_Lookup");
            };
            AccEmpAdvanceGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccEmpAdvanceGrid);
            return AccEmpAdvanceGrid;
        }(VistaGL.EntityGridBase));
        Transaction.AccEmpAdvanceGrid = AccEmpAdvanceGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccFixedAssetDepreciationDialog = (function (_super) {
            __extends(AccFixedAssetDepreciationDialog, _super);
            function AccFixedAssetDepreciationDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccFixedAssetDepreciationForm(_this.idPrefix);
                return _this;
            }
            AccFixedAssetDepreciationDialog.prototype.getFormKey = function () { return Transaction.AccFixedAssetDepreciationForm.formKey; };
            AccFixedAssetDepreciationDialog.prototype.getIdProperty = function () { return Transaction.AccFixedAssetDepreciationRow.idProperty; };
            AccFixedAssetDepreciationDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccFixedAssetDepreciationRow.localTextPrefix; };
            AccFixedAssetDepreciationDialog.prototype.getService = function () { return Transaction.AccFixedAssetDepreciationService.baseUrl; };
            AccFixedAssetDepreciationDialog.prototype.onDialogOpen = function () {
                _super.prototype.onDialogOpen.call(this);
                if (this.isNew()) {
                    $('.reject').hide();
                }
                else {
                }
            };
            AccFixedAssetDepreciationDialog.prototype.getToolbarButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getToolbarButtons.call(this);
                buttons = [];
                buttons.push({
                    title: "Process", cssClass: "send-button",
                    onClick: function (x) {
                        var message = "Are you sure you want to Process?";
                        Q.confirm(message, function () {
                            if (_this.form.FinancialYearId.value == "") {
                                Q.alert("Please select leave year!");
                                return;
                            }
                            var allProcessRows = Transaction.AccFixedAssetDepreciationRow.getLookup().items;
                            if (allProcessRows.length > 0) {
                                var selectedFinancialYear = VistaGL.Configurations.AccAccountingPeriodInformationRow.getLookup().items.filter(function (x) { return x.Id == +_this.form.FinancialYearId.value; })[0];
                                var selectedYearName = selectedFinancialYear.YearName.split("-");
                                var nextYearName_1 = (Number(selectedYearName[0]) + 1) + "-" + (Number(selectedYearName[1]) + 1);
                                var previousYearName_1 = (Number(selectedYearName[0]) - 1) + "-" + (Number(selectedYearName[1]) - 1);
                                var financialYearList = VistaGL.Configurations.AccAccountingPeriodInformationRow.getLookup().items;
                                var nextFinancialYear = financialYearList.filter(function (x) { return x.YearName == nextYearName_1; });
                                var nextFinancialYearId_1 = 0;
                                if (nextFinancialYear[0] != undefined)
                                    nextFinancialYearId_1 = nextFinancialYear[0].Id;
                                var nextYearDepreciationP = Transaction.AccFixedAssetDepreciationRow.getLookup().items.filter(function (x) { return x.FinancialYearId == nextFinancialYearId_1; });
                                if (nextYearDepreciationP.length > 0) {
                                    Q.warning("Depreciation can't process! Because " + nextYearName_1 + " depreciation already processed.");
                                    return;
                                }
                                var previousFinancialYear = financialYearList.filter(function (x) { return x.YearName == previousYearName_1; });
                                var previousFinancialYearId_1 = 0;
                                if (previousFinancialYear[0] != undefined)
                                    previousFinancialYearId_1 = previousFinancialYear[0].Id;
                                var previousYearDepreciationP = Transaction.AccFixedAssetDepreciationRow.getLookup().items.filter(function (x) { return x.FinancialYearId == previousFinancialYearId_1; });
                                if (previousYearDepreciationP.length == 0) {
                                    Q.warning("Depreciation can't process! Because " + previousYearName_1 + " depreciation is not process yet.");
                                    return;
                                }
                            }
                            _this.form.ProcessType.value = "P";
                            _this.save(function (p) { Q.notifySuccess("Process successfull."); _this.dialogClose(); });
                        });
                    }
                });
                buttons.push({
                    title: "Rollback", cssClass: "reject",
                    onClick: function (x) {
                        var message = "Are you sure you want to Rollback?";
                        Q.confirm(message, function () {
                            if (_this.form.FinancialYearId.value == "") {
                                Q.alert("Please select leave year!");
                                return;
                            }
                            var selectedFinancialYear = VistaGL.Configurations.AccAccountingPeriodInformationRow.getLookup().items.filter(function (x) { return x.Id == +_this.form.FinancialYearId.value; })[0];
                            var selectedYearName = selectedFinancialYear.YearName.split("-");
                            var nextYearName = (Number(selectedYearName[0]) + 1) + "-" + (Number(selectedYearName[1]) + 1);
                            var financialYearList = VistaGL.Configurations.AccAccountingPeriodInformationRow.getLookup().items;
                            var nextFinancialYear = financialYearList.filter(function (x) { return x.YearName == nextYearName; });
                            var nextFinancialYearId = 0;
                            if (nextFinancialYear[0] != undefined)
                                nextFinancialYearId = nextFinancialYear[0].Id;
                            var nextYearDepreciationP = Transaction.AccFixedAssetDepreciationRow.getLookup().items.filter(function (x) { return x.FinancialYearId == nextFinancialYearId; });
                            if (nextYearDepreciationP.length != 0) {
                                Q.warning("Rollback can't process! Because " + nextYearName + " depreciation already processed.");
                                return;
                            }
                            _this.form.ProcessType.value = "RB";
                            _this.save(function (p) { Q.notifySuccess("Rollback successfull."); _this.dialogClose(); });
                        });
                    }
                });
                return buttons;
            };
            AccFixedAssetDepreciationDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccFixedAssetDepreciationDialog);
            return AccFixedAssetDepreciationDialog;
        }(Serenity.EntityDialog));
        Transaction.AccFixedAssetDepreciationDialog = AccFixedAssetDepreciationDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccFixedAssetDepreciationGrid = (function (_super) {
            __extends(AccFixedAssetDepreciationGrid, _super);
            function AccFixedAssetDepreciationGrid(container) {
                return _super.call(this, container) || this;
            }
            AccFixedAssetDepreciationGrid.prototype.getColumnsKey = function () { return 'Transaction.AccFixedAssetDepreciation'; };
            AccFixedAssetDepreciationGrid.prototype.getDialogType = function () { return Transaction.AccFixedAssetDepreciationDialog; };
            AccFixedAssetDepreciationGrid.prototype.getIdProperty = function () { return Transaction.AccFixedAssetDepreciationRow.idProperty; };
            AccFixedAssetDepreciationGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccFixedAssetDepreciationRow.localTextPrefix; };
            AccFixedAssetDepreciationGrid.prototype.getService = function () { return Transaction.AccFixedAssetDepreciationService.baseUrl; };
            AccFixedAssetDepreciationGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccFixedAssetDepreciationGrid);
            return AccFixedAssetDepreciationGrid;
        }(Serenity.EntityGrid));
        Transaction.AccFixedAssetDepreciationGrid = AccFixedAssetDepreciationGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccFixedAssetRefurbishmentDialog = (function (_super) {
            __extends(AccFixedAssetRefurbishmentDialog, _super);
            function AccFixedAssetRefurbishmentDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccFixedAssetRefurbishmentForm(_this.idPrefix);
                return _this;
            }
            AccFixedAssetRefurbishmentDialog.prototype.getFormKey = function () { return Transaction.AccFixedAssetRefurbishmentForm.formKey; };
            AccFixedAssetRefurbishmentDialog.prototype.getIdProperty = function () { return Transaction.AccFixedAssetRefurbishmentRow.idProperty; };
            AccFixedAssetRefurbishmentDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccFixedAssetRefurbishmentRow.localTextPrefix; };
            AccFixedAssetRefurbishmentDialog.prototype.getService = function () { return Transaction.AccFixedAssetRefurbishmentService.baseUrl; };
            AccFixedAssetRefurbishmentDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccFixedAssetRefurbishmentDialog);
            return AccFixedAssetRefurbishmentDialog;
        }(VistaGL.EntityDialogBase));
        Transaction.AccFixedAssetRefurbishmentDialog = AccFixedAssetRefurbishmentDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccFixedAssetRefurbishmentGrid = (function (_super) {
            __extends(AccFixedAssetRefurbishmentGrid, _super);
            function AccFixedAssetRefurbishmentGrid(container) {
                return _super.call(this, container) || this;
            }
            AccFixedAssetRefurbishmentGrid.prototype.getColumnsKey = function () { return 'Transaction.AccFixedAssetRefurbishment'; };
            AccFixedAssetRefurbishmentGrid.prototype.getDialogType = function () { return Transaction.AccFixedAssetRefurbishmentDialog; };
            AccFixedAssetRefurbishmentGrid.prototype.getIdProperty = function () { return Transaction.AccFixedAssetRefurbishmentRow.idProperty; };
            AccFixedAssetRefurbishmentGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccFixedAssetRefurbishmentRow.localTextPrefix; };
            AccFixedAssetRefurbishmentGrid.prototype.getService = function () { return Transaction.AccFixedAssetRefurbishmentService.baseUrl; };
            AccFixedAssetRefurbishmentGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccFixedAssetRefurbishmentGrid);
            return AccFixedAssetRefurbishmentGrid;
        }(VistaGL.EntityGridBaseNew));
        Transaction.AccFixedAssetRefurbishmentGrid = AccFixedAssetRefurbishmentGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccFixedAssetsManualInputDialog = (function (_super) {
            __extends(AccFixedAssetsManualInputDialog, _super);
            function AccFixedAssetsManualInputDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccFixedAssetsManualInputForm(_this.idPrefix);
                return _this;
            }
            AccFixedAssetsManualInputDialog.prototype.getFormKey = function () { return Transaction.AccFixedAssetsManualInputForm.formKey; };
            AccFixedAssetsManualInputDialog.prototype.getIdProperty = function () { return Transaction.AccFixedAssetsManualInputRow.idProperty; };
            AccFixedAssetsManualInputDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccFixedAssetsManualInputRow.localTextPrefix; };
            AccFixedAssetsManualInputDialog.prototype.getService = function () { return Transaction.AccFixedAssetsManualInputService.baseUrl; };
            AccFixedAssetsManualInputDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccFixedAssetsManualInputDialog);
            return AccFixedAssetsManualInputDialog;
        }(Serenity.EntityDialog));
        Transaction.AccFixedAssetsManualInputDialog = AccFixedAssetsManualInputDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccFixedAssetsManualInputGrid = (function (_super) {
            __extends(AccFixedAssetsManualInputGrid, _super);
            function AccFixedAssetsManualInputGrid(container) {
                return _super.call(this, container) || this;
            }
            AccFixedAssetsManualInputGrid.prototype.getColumnsKey = function () { return 'Transaction.AccFixedAssetsManualInput'; };
            AccFixedAssetsManualInputGrid.prototype.getDialogType = function () { return Transaction.AccFixedAssetsManualInputDialog; };
            AccFixedAssetsManualInputGrid.prototype.getIdProperty = function () { return Transaction.AccFixedAssetsManualInputRow.idProperty; };
            AccFixedAssetsManualInputGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccFixedAssetsManualInputRow.localTextPrefix; };
            AccFixedAssetsManualInputGrid.prototype.getService = function () { return Transaction.AccFixedAssetsManualInputService.baseUrl; };
            AccFixedAssetsManualInputGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccFixedAssetsManualInputGrid);
            return AccFixedAssetsManualInputGrid;
        }(Serenity.EntityGrid));
        Transaction.AccFixedAssetsManualInputGrid = AccFixedAssetsManualInputGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccIbcsJsondataHistoryDialog = (function (_super) {
            __extends(AccIbcsJsondataHistoryDialog, _super);
            function AccIbcsJsondataHistoryDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccIbcsJsondataHistoryForm(_this.idPrefix);
                return _this;
            }
            AccIbcsJsondataHistoryDialog.prototype.getFormKey = function () { return Transaction.AccIbcsJsondataHistoryForm.formKey; };
            AccIbcsJsondataHistoryDialog.prototype.getIdProperty = function () { return Transaction.AccIbcsJsondataHistoryRow.idProperty; };
            AccIbcsJsondataHistoryDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccIbcsJsondataHistoryRow.localTextPrefix; };
            AccIbcsJsondataHistoryDialog.prototype.getNameProperty = function () { return Transaction.AccIbcsJsondataHistoryRow.nameProperty; };
            AccIbcsJsondataHistoryDialog.prototype.getService = function () { return Transaction.AccIbcsJsondataHistoryService.baseUrl; };
            AccIbcsJsondataHistoryDialog.prototype.getToolbarButtons = function () {
                var buttons = _super.prototype.getToolbarButtons.call(this);
                buttons.splice(Q.indexOf(buttons, function (x) { return x.cssClass == "save-and-close-button"; }), 1);
                buttons.splice(Q.indexOf(buttons, function (x) { return x.cssClass == "apply-changes-button"; }), 1);
                buttons.splice(Q.indexOf(buttons, function (x) { return x.cssClass == "delete-button"; }), 1);
                return buttons;
            };
            AccIbcsJsondataHistoryDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], AccIbcsJsondataHistoryDialog);
            return AccIbcsJsondataHistoryDialog;
        }(Serenity.EntityDialog));
        Transaction.AccIbcsJsondataHistoryDialog = AccIbcsJsondataHistoryDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccIbcsJsondataHistoryGrid = (function (_super) {
            __extends(AccIbcsJsondataHistoryGrid, _super);
            function AccIbcsJsondataHistoryGrid(container) {
                return _super.call(this, container) || this;
            }
            AccIbcsJsondataHistoryGrid.prototype.getColumnsKey = function () { return 'Transaction.AccIbcsJsondataHistory'; };
            AccIbcsJsondataHistoryGrid.prototype.getDialogType = function () { return Transaction.AccIbcsJsondataHistoryDialog; };
            AccIbcsJsondataHistoryGrid.prototype.getIdProperty = function () { return Transaction.AccIbcsJsondataHistoryRow.idProperty; };
            AccIbcsJsondataHistoryGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccIbcsJsondataHistoryRow.localTextPrefix; };
            AccIbcsJsondataHistoryGrid.prototype.getService = function () { return Transaction.AccIbcsJsondataHistoryService.baseUrl; };
            AccIbcsJsondataHistoryGrid.prototype.getButtons = function () {
                var buttons = _super.prototype.getButtons.call(this);
                buttons.splice(Q.indexOf(buttons, function (x) { return x.cssClass == "add-button"; }), 1);
                return buttons;
            };
            AccIbcsJsondataHistoryGrid.prototype.getViewOptions = function () {
                var opt = _super.prototype.getViewOptions.call(this);
                opt.rowsPerPage = 20;
                return opt;
            };
            AccIbcsJsondataHistoryGrid.prototype.getColumns = function () {
                var columns = _super.prototype.getColumns.call(this);
                Q.first(columns, function (x) { return x.field == "JsonData" /* JsonData */; }).cssClass += " inline-action download-json";
                Q.first(columns, function (x) { return x.field == "VoucherNo" /* VoucherNo */; }).cssClass += " inline-action download-json";
                //columns.splice(1, 0, {
                //    field: 'View XML',
                //    name: '',
                //    format: ctx => '<a class="inline-action download-json" title="View JSON">' +
                //        '<i class="fa fa-file-text-o text-blue"></i></a>',
                //    width: 24,
                //    minWidth: 24,
                //    maxWidth: 24
                //});
                return columns;
            };
            AccIbcsJsondataHistoryGrid.prototype.onClick = function (e, row, cell) {
                _super.prototype.onClick.call(this, e, row, cell);
                if (e.isDefaultPrevented())
                    return;
                var item = this.itemAt(row);
                var target = $(e.target);
                if (target.parent().hasClass('inline-action'))
                    target = target.parent();
                if (target.hasClass('inline-action')) {
                    e.preventDefault();
                    if (target.hasClass('download-json')) {
                        var ServiceEndpoint = this.getService() + "/ExportFile";
                        Q.postToService({
                            service: ServiceEndpoint,
                            request: { EntityId: item.Id },
                            target: '_blank'
                        });
                    }
                }
            };
            AccIbcsJsondataHistoryGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccIbcsJsondataHistoryGrid);
            return AccIbcsJsondataHistoryGrid;
        }(VistaGL.EntityGridBaseNew));
        Transaction.AccIbcsJsondataHistoryGrid = AccIbcsJsondataHistoryGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccMoneyReceiptDialog = (function (_super) {
            __extends(AccMoneyReceiptDialog, _super);
            function AccMoneyReceiptDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Transaction.AccMoneyReceiptForm(_this.idPrefix);
                _this.form.AccMoneyReceiptDatailsList.view.onDataChanged.subscribe(function () {
                    var total = 0;
                    for (var _i = 0, _a = _this.form.AccMoneyReceiptDatailsList.getItems(); _i < _a.length; _i++) {
                        var k = _a[_i];
                        total += k.Amount || 0;
                    }
                    _this.form.Amount.value = total;
                    _this.form.AmountInWord.value = VoucherUtil.currencyToWords(total);
                });
                _this.form.AccMoneyReceiptDatailsList.onItemsChanged = function () {
                    var total = 0;
                    for (var _i = 0, _a = _this.form.AccMoneyReceiptDatailsList.getItems(); _i < _a.length; _i++) {
                        var k = _a[_i];
                        total += k.Amount || 0;
                    }
                    _this.form.Amount.value = total;
                    _this.form.AmountInWord.value = VoucherUtil.currencyToWords(total);
                };
                return _this;
            }
            AccMoneyReceiptDialog.prototype.getFormKey = function () { return Transaction.AccMoneyReceiptForm.formKey; };
            AccMoneyReceiptDialog.prototype.getIdProperty = function () { return Transaction.AccMoneyReceiptRow.idProperty; };
            AccMoneyReceiptDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccMoneyReceiptRow.localTextPrefix; };
            AccMoneyReceiptDialog.prototype.getNameProperty = function () { return Transaction.AccMoneyReceiptRow.nameProperty; };
            AccMoneyReceiptDialog.prototype.getService = function () { return Transaction.AccMoneyReceiptService.baseUrl; };
            AccMoneyReceiptDialog.prototype.onDialogOpen = function () {
                var _this = this;
                _super.prototype.onDialogOpen.call(this);
                var userinfo = VistaGL.Authorization.userDefinition;
                this.toolbar.findButton('MoneyReceipt').hide();
                if (this.isEditMode()) {
                    if (this.form.IsConfirmed.value == true) {
                        this.toolbar.findButton('MoneyReceipt').show();
                        this.toolbar.findButton('delete-button').hide();
                        this.toolbar.findButton('apply-changes-button').hide();
                        this.toolbar.findButton('save-and-close-button').hide();
                    }
                    if (this.form.IsUsed.value == true) {
                        Serenity.EditorUtils.setReadonly(this.element.find(this.form.IsCancelled.element), true);
                    }
                }
                else {
                    Transaction.AccMoneyReceiptService.GetNewMoneyReceiptNo({ ZoneId: userinfo.ZoneID, FundControlId: userinfo.FundControlInformationId }, function (r) {
                        _this.form.SerialNo.value = r.MoneyReceiptNo;
                        _this.form.MoneyReceiptNo.value = r.MoneyReceiptNumber;
                    });
                }
                //this.form.CostCenterId.changeSelect2(p => {
                //    this.form.CostCenterName.value = this.form.CostCenterId.get_text();
                //});
            };
            AccMoneyReceiptDialog.prototype.getToolbarButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getToolbarButtons.call(this);
                buttons.push({
                    title: "Money Receipt", cssClass: "print-preview-button MoneyReceipt",
                    onClick: function (x) {
                        if (_this.entityId != undefined) {
                            var _url = "~/Reports/MoneyReceipt?id=" + _this.entityId + "&source='FromMoneyReceiptPage'";
                            Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                        }
                        else {
                            Q.alert("Sorry! Money Receipt Id not found!");
                        }
                    }
                });
                return buttons;
            };
            AccMoneyReceiptDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccMoneyReceiptDialog);
            return AccMoneyReceiptDialog;
        }(VistaGL.EntityDialogBase));
        Transaction.AccMoneyReceiptDialog = AccMoneyReceiptDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccMoneyReceiptGrid = (function (_super) {
            __extends(AccMoneyReceiptGrid, _super);
            function AccMoneyReceiptGrid(container) {
                return _super.call(this, container) || this;
            }
            AccMoneyReceiptGrid.prototype.getColumnsKey = function () { return 'Transaction.AccMoneyReceipt'; };
            AccMoneyReceiptGrid.prototype.getDialogType = function () { return Transaction.AccMoneyReceiptDialog; };
            AccMoneyReceiptGrid.prototype.getIdProperty = function () { return Transaction.AccMoneyReceiptRow.idProperty; };
            AccMoneyReceiptGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccMoneyReceiptRow.localTextPrefix; };
            AccMoneyReceiptGrid.prototype.getService = function () { return Transaction.AccMoneyReceiptService.baseUrl; };
            AccMoneyReceiptGrid.prototype.getSlickOptions = function () {
                var opt = _super.prototype.getSlickOptions.call(this);
                opt.frozenColumn = 5;
                return opt;
            };
            AccMoneyReceiptGrid.prototype.getColumns = function () {
                var columns = _super.prototype.getColumns.call(this);
                columns.splice(1, 0, {
                    field: 'Print Money Receipt',
                    name: '',
                    format: function (ctx) { return '<a class="inline-action Print-link" title="Print Money Receipt">' +
                        '<i class="fa fa-print text-blue"></i></a>'; },
                    width: 24,
                    minWidth: 24,
                    maxWidth: 24
                });
                return columns;
            };
            AccMoneyReceiptGrid.prototype.getQuickFilters = function () {
                var filters = _super.prototype.getQuickFilters.call(this);
                Q.first(filters, function (x) { return x.field == "IsUsed" /* IsUsed */; }).init = function (w) {
                    w.value = "false";
                };
                return filters;
            };
            AccMoneyReceiptGrid.prototype.onClick = function (e, row, cell) {
                _super.prototype.onClick.call(this, e, row, cell);
                if (e.isDefaultPrevented())
                    return;
                var item = this.itemAt(row);
                var target = $(e.target);
                // -- ****
                if (target.parent().hasClass('Print-link'))
                    target = target.parent();
                if (target.hasClass("Print-link")) {
                    e.preventDefault();
                    if (item.IsConfirmed) {
                        var _url = "~/Reports/MoneyReceipt?id=" + item.Id + "&source='FromMoneyReceiptPage'";
                        Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                    }
                    else {
                        Q.warning("This Money Receipt is not confirm yet!");
                    }
                }
                // -- ****//
            };
            AccMoneyReceiptGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccMoneyReceiptGrid);
            return AccMoneyReceiptGrid;
        }(VistaGL.EntityGridBaseNew));
        Transaction.AccMoneyReceiptGrid = AccMoneyReceiptGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccMoneyReceiptDatailsDialog = (function (_super) {
            __extends(AccMoneyReceiptDatailsDialog, _super);
            function AccMoneyReceiptDatailsDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccMoneyReceiptDatailsForm(_this.idPrefix);
                return _this;
            }
            AccMoneyReceiptDatailsDialog.prototype.getFormKey = function () { return Transaction.AccMoneyReceiptDatailsForm.formKey; };
            AccMoneyReceiptDatailsDialog.prototype.getIdProperty = function () { return Transaction.AccMoneyReceiptDatailsRow.idProperty; };
            AccMoneyReceiptDatailsDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccMoneyReceiptDatailsRow.localTextPrefix; };
            AccMoneyReceiptDatailsDialog.prototype.getService = function () { return Transaction.AccMoneyReceiptDatailsService.baseUrl; };
            AccMoneyReceiptDatailsDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccMoneyReceiptDatailsDialog);
            return AccMoneyReceiptDatailsDialog;
        }(Serenity.EntityDialog));
        Transaction.AccMoneyReceiptDatailsDialog = AccMoneyReceiptDatailsDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccMoneyReceiptDatailsEditor = (function (_super) {
            __extends(AccMoneyReceiptDatailsEditor, _super);
            function AccMoneyReceiptDatailsEditor(container) {
                return _super.call(this, container) || this;
            }
            AccMoneyReceiptDatailsEditor.prototype.getColumnsKey = function () { return 'Transaction.AccMoneyReceiptDatails'; };
            AccMoneyReceiptDatailsEditor.prototype.getDialogType = function () { return Transaction.AccMoneyReceiptDatailsEditorDialog; };
            AccMoneyReceiptDatailsEditor.prototype.getLocalTextPrefix = function () { return Transaction.AccMoneyReceiptDatailsRow.localTextPrefix; };
            AccMoneyReceiptDatailsEditor.prototype.validateEntity = function (row, id) {
                row.CoaAccountName = VistaGL.Configurations.AccChartofAccountsRow.getLookup().itemById[row.CoaId].AccountName;
                row.CostCenterName = Transaction.AccCostCentreOrInstituteInformationRow.getLookup().itemById[row.CostCenterId].Name;
                return true;
            };
            AccMoneyReceiptDatailsEditor = __decorate([
                Serenity.Decorators.registerClass()
            ], AccMoneyReceiptDatailsEditor);
            return AccMoneyReceiptDatailsEditor;
        }(VistaGL.GridEditorBase));
        Transaction.AccMoneyReceiptDatailsEditor = AccMoneyReceiptDatailsEditor;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccMoneyReceiptDatailsEditorDialog = (function (_super) {
            __extends(AccMoneyReceiptDatailsEditorDialog, _super);
            function AccMoneyReceiptDatailsEditorDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                //protected getNameProperty() { return AccMoneyReceiptDatailsRow.nameProperty; }
                _this.form = new Transaction.AccMoneyReceiptDatailsForm(_this.idPrefix);
                return _this;
            }
            AccMoneyReceiptDatailsEditorDialog.prototype.getFormKey = function () { return Transaction.AccMoneyReceiptDatailsForm.formKey; };
            AccMoneyReceiptDatailsEditorDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccMoneyReceiptDatailsRow.localTextPrefix; };
            AccMoneyReceiptDatailsEditorDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccMoneyReceiptDatailsEditorDialog);
            return AccMoneyReceiptDatailsEditorDialog;
        }(VistaGL.GridEditorDialog));
        Transaction.AccMoneyReceiptDatailsEditorDialog = AccMoneyReceiptDatailsEditorDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccMoneyReceiptDatailsGrid = (function (_super) {
            __extends(AccMoneyReceiptDatailsGrid, _super);
            function AccMoneyReceiptDatailsGrid(container) {
                return _super.call(this, container) || this;
            }
            AccMoneyReceiptDatailsGrid.prototype.getColumnsKey = function () { return 'Transaction.AccMoneyReceiptDatails'; };
            AccMoneyReceiptDatailsGrid.prototype.getDialogType = function () { return Transaction.AccMoneyReceiptDatailsDialog; };
            AccMoneyReceiptDatailsGrid.prototype.getIdProperty = function () { return Transaction.AccMoneyReceiptDatailsRow.idProperty; };
            AccMoneyReceiptDatailsGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccMoneyReceiptDatailsRow.localTextPrefix; };
            AccMoneyReceiptDatailsGrid.prototype.getService = function () { return Transaction.AccMoneyReceiptDatailsService.baseUrl; };
            AccMoneyReceiptDatailsGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccMoneyReceiptDatailsGrid);
            return AccMoneyReceiptDatailsGrid;
        }(Serenity.EntityGrid));
        Transaction.AccMoneyReceiptDatailsGrid = AccMoneyReceiptDatailsGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccNoaDialog = (function (_super) {
            __extends(AccNoaDialog, _super);
            function AccNoaDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccNoaForm(_this.idPrefix);
                return _this;
            }
            AccNoaDialog.prototype.getFormKey = function () { return Transaction.AccNoaForm.formKey; };
            AccNoaDialog.prototype.getIdProperty = function () { return Transaction.AccNoaRow.idProperty; };
            AccNoaDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccNoaRow.localTextPrefix; };
            AccNoaDialog.prototype.getNameProperty = function () { return Transaction.AccNoaRow.nameProperty; };
            AccNoaDialog.prototype.getService = function () { return Transaction.AccNoaService.baseUrl; };
            AccNoaDialog.prototype.onDialogOpen = function () {
                var _this = this;
                _super.prototype.onDialogOpen.call(this);
                if (!this.isNew()) {
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.NoaNumber.element), true);
                }
                this.form.CostCenterId.changeSelect2(function (p) {
                    _this.form.NameofContractor.value = _this.form.CostCenterId.text;
                });
            };
            AccNoaDialog.prototype.validateBeforeSave = function () {
                var _this = this;
                var Status = true;
                if (this.isNew() == true) {
                    var data = Transaction.AccNoaRow.getLookup().items.filter(function (f) { return f.NoaNumber == _this.form.NoaNumber.value; });
                    data.forEach(function (d) {
                        Q.alert("Duplicate NOA Number Found.");
                        Status = false;
                    });
                }
                return Status;
            };
            AccNoaDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccNoaDialog);
            return AccNoaDialog;
        }(VistaGL.EntityDialogBase));
        Transaction.AccNoaDialog = AccNoaDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccNoaGrid = (function (_super) {
            __extends(AccNoaGrid, _super);
            function AccNoaGrid(container) {
                return _super.call(this, container) || this;
            }
            AccNoaGrid.prototype.getColumnsKey = function () { return 'Transaction.AccNoa'; };
            AccNoaGrid.prototype.getDialogType = function () { return Transaction.AccNoaDialog; };
            AccNoaGrid.prototype.getIdProperty = function () { return Transaction.AccNoaRow.idProperty; };
            AccNoaGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccNoaRow.localTextPrefix; };
            AccNoaGrid.prototype.getService = function () { return Transaction.AccNoaService.baseUrl; };
            AccNoaGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccNoaGrid);
            return AccNoaGrid;
        }(VistaGL.EntityGridBase));
        Transaction.AccNoaGrid = AccNoaGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccPartyPaymentDialog = (function (_super) {
            __extends(AccPartyPaymentDialog, _super);
            function AccPartyPaymentDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccPartyPaymentForm(_this.idPrefix);
                return _this;
            }
            AccPartyPaymentDialog.prototype.getFormKey = function () { return Transaction.AccPartyPaymentForm.formKey; };
            AccPartyPaymentDialog.prototype.getIdProperty = function () { return Transaction.AccPartyPaymentRow.idProperty; };
            AccPartyPaymentDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccPartyPaymentRow.localTextPrefix; };
            AccPartyPaymentDialog.prototype.getNameProperty = function () { return Transaction.AccPartyPaymentRow.nameProperty; };
            AccPartyPaymentDialog.prototype.getService = function () { return Transaction.AccPartyPaymentService.baseUrl; };
            AccPartyPaymentDialog.prototype.onDialogOpen = function () {
                var _this = this;
                _super.prototype.onDialogOpen.call(this);
                //this.form.CoAId.clearItems();
                //this.form.ChequeRegisterId.clearItems();
                this.items_ChartofAccounts = Q.getLookup('Configurations.AccChartofAccounts_Lookup').items;
                this.AccChequeRegister = Q.getLookup('Transaction.AccChequeRegister_Lookup').items;
                //    console.log(this.items_ChartofAccounts);
                this.form.CoAId.changeSelect2(function (p1) {
                    //   console.log(this.form.CoAId.value);
                    var _AccChequeRegister = _this.AccChequeRegister.filter(function (p) { return p.BankAccountInformationCoaId == +_this.form.CoAId.value; });
                    _this.form.ChequeRegisterId.value = "";
                    _this.form.ChequeRegisterId.clearItems();
                    for (var _i = 0, _AccChequeRegister_2 = _AccChequeRegister; _i < _AccChequeRegister_2.length; _i++) {
                        var item = _AccChequeRegister_2[_i];
                        //  var str = items[i];
                        _this.form.ChequeRegisterId.addItem({ id: item.Id.toString(), text: item.ChequeNo, source: null, disabled: false });
                    }
                });
                this.form.TransactionMode.changeSelect2(function (p) {
                    //  console.log(this.form.TransactionMode.value);
                    var items = _this.items_ChartofAccounts.filter(function (f) { return f.IsControlhead == 0 && f.CoaMapping == _this.form.TransactionMode.value; });
                    _this.form.CoAId.value = "";
                    _this.form.CoAId.clearItems();
                    for (var _i = 0, items_9 = items; _i < items_9.length; _i++) {
                        var item = items_9[_i];
                        // var str = items[i];
                        _this.form.CoAId.addItem({ id: item.Id.toString(), text: item.AccountName, source: null, disabled: false });
                    }
                });
                Serenity.EditorUtils.setReadonly(this.element.find(this.form.RemainAmount.element), true);
                if (!this.isNew()) {
                    this.form.Amount.value = this.form.RemainAmount.value;
                    this.toolbar.findButton('Process-Payment').toggleClass('disabled');
                    if (this.form.RemainAmount.value == 0) {
                        this.toolbar.findButton('Process-Adjustment').toggleClass('disabled');
                        this.toolbar.findButton('Process-Receipt').toggleClass('disabled');
                    }
                    else {
                        this.toolbar.findButton('Process-Adjustment').removeClass('disabled');
                        this.toolbar.findButton('Process-Receipt').removeClass('disabled');
                    }
                    if (this.entity.Status == 1) {
                        Serenity.EditorUtils.setReadonly(this.element.find(this.form.PartyId.element), true);
                        Serenity.EditorUtils.setReadonly(this.element.find(this.form.TransactionMode.element), true);
                        Serenity.EditorUtils.setReadonly(this.element.find(this.form.CoAId.element), true);
                        Serenity.EditorUtils.setReadonly(this.element.find(this.form.ChequeRegisterId.element), true);
                    }
                }
                else {
                    this.toolbar.findButton('Process-Adjustment').toggleClass('disabled');
                    this.toolbar.findButton('Process-Receipt').toggleClass('disabled');
                    this.form.CoAId2.value = "130";
                }
            };
            AccPartyPaymentDialog.prototype.getToolbarButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getToolbarButtons.call(this);
                buttons.push({
                    title: "Process Payment", cssClass: "send-button Process-Payment",
                    onClick: function (x) {
                        //if (this.entityId != undefined) {
                        var b = (new Transaction.AccVoucherInformationDialog());
                        var entity_voucher;
                        entity_voucher = {};
                        entity_voucher.VoucherTypeId = 1;
                        //
                        entity_voucher.TransactionMode = _this.form.TransactionMode.value;
                        entity_voucher.TemplateId = _this.entityId;
                        entity_voucher.TemplateStatus = 3;
                        entity_voucher.TemplateCOAId = +_this.form.CoAId.value;
                        entity_voucher.TemplateChequeRegisterId = +_this.form.ChequeRegisterId.value;
                        entity_voucher.TemplateCOAId2 = +_this.form.CoAId2.value;
                        b.loadEntityAndOpenDialog(entity_voucher);
                        //   b.form.VoucherTypeId.value = "1";
                        b.form.TransactionTypeEntityId.value = b.form.TransactionTypeEntityId.items[0].id;
                        b.setNewVoucherNumber();
                        b.loadAccountHead();
                        b.form.CreditAmount.value = _this.form.Amount.value;
                        b.form.AccountHead.value = _this.form.CoAId.value.toString();
                        b.loadCheque();
                        b.form.ChequeRegisterId.value = _this.form.ChequeRegisterId.value;
                        b.setMultiCurrencyCurrency(null, null, false);
                        b.form.ConversionAmount.value = b.form.ConversionRate.value * _this.form.Amount.value;
                        b.form.PaytoOrReciveFrom.value = _this.form.PartyId.get_text();
                        //  b.form.Description.value = this.form.Remarks.value;
                        b.addtoGrid();
                        b.form.CreditAmount.value = 0;
                        b.form.DebitAmount.value = _this.form.Amount.value;
                        b.form.AccountHead.value = _this.form.CoAId2.value;
                        b.setMultiCurrencyCurrency(null, null, false);
                        b.form.ConversionAmount.value = b.form.ConversionRate.value * _this.form.Amount.value;
                        b.addtoGrid();
                        b.form.EmpId.value = +_this.form.PartyId.value;
                        b.form.Description.value = _this.form.Narration.value;
                        b.onAfterSaveSuccess = function () {
                            _this.dialogClose();
                            Serenity.SubDialogHelper.triggerDataChange(_this);
                        };
                        //  b.dialogOpen()
                        //} else {
                        //    Q.alert("Id not found.");
                        //}
                    }
                });
                buttons.push({
                    title: "Process Adjustment", cssClass: "send-button Process-Adjustment",
                    onClick: function (x) {
                        if (_this.entityId != undefined) {
                            var b = (new Transaction.AccVoucherInformationDialog());
                            var entity_voucher;
                            entity_voucher = {};
                            entity_voucher.VoucherTypeId = 3;
                            //
                            entity_voucher.TransactionMode = _this.form.TransactionMode.value;
                            entity_voucher.TemplateId = _this.entityId;
                            entity_voucher.TemplateStatus = 4;
                            //   entity_voucher.TemplateCOAId = +this.form.CoAId.value;
                            b.loadEntityAndOpenDialog(entity_voucher);
                            //   b.form.VoucherTypeId.value = "1";
                            b.form.TransactionTypeEntityId.value = b.form.TransactionTypeEntityId.items[0].id;
                            b.setNewVoucherNumber();
                            b.loadAccountHead();
                            b.form.DebitAmount.value = _this.form.Amount.value;
                            b.form.AccountHead.value = _this.form.CoAId.value.toString();
                            b.loadCheque();
                            b.form.ChequeRegisterId.value = _this.form.ChequeRegisterId.value;
                            b.setMultiCurrencyCurrency(null, null, false);
                            b.form.ConversionAmount.value = b.form.ConversionRate.value * _this.form.Amount.value;
                            b.form.PaytoOrReciveFrom.value = _this.form.PartyId.get_text();
                            //  b.form.Description.value = this.form.Remarks.value;
                            b.addtoGrid();
                            b.form.DebitAmount.value = 0;
                            b.form.CreditAmount.value = _this.form.Amount.value;
                            b.form.AccountHead.value = _this.form.CoAId2.value;
                            b.setMultiCurrencyCurrency(null, null, false);
                            b.form.ConversionAmount.value = b.form.ConversionRate.value * _this.form.Amount.value;
                            b.addtoGrid();
                            //  b.form.EmpId.value = +this.form.PartyId.value;
                            b.form.RemainAmount.value = _this.form.RemainAmount.value;
                            b.form.Description.value = _this.form.Narration.value;
                            b.onAfterSaveSuccess = function () {
                                _this.dialogClose();
                                Serenity.SubDialogHelper.triggerDataChange(_this);
                            };
                            //  b.dialogOpen()
                        }
                        else {
                            Q.alert("Id not found.");
                        }
                    }
                });
                buttons.push({
                    title: "Process Receipt", cssClass: "send-button Process-Receipt",
                    onClick: function (x) {
                        if (_this.entityId != undefined) {
                            var b = (new Transaction.AccVoucherInformationDialog());
                            var entity_voucher;
                            entity_voucher = {};
                            entity_voucher.VoucherTypeId = 2;
                            //
                            entity_voucher.TransactionMode = _this.form.TransactionMode.value;
                            entity_voucher.TemplateId = _this.entityId;
                            entity_voucher.TemplateStatus = 4;
                            //   entity_voucher.TemplateCOAId = +this.form.CoAId.value;
                            b.loadEntityAndOpenDialog(entity_voucher);
                            //   b.form.VoucherTypeId.value = "1";
                            b.form.TransactionTypeEntityId.value = b.form.TransactionTypeEntityId.items[0].id;
                            b.setNewVoucherNumber();
                            b.loadAccountHead();
                            b.form.DebitAmount.value = _this.form.Amount.value;
                            b.form.AccountHead.value = _this.form.CoAId.value.toString();
                            b.loadCheque();
                            b.form.ChequeRegisterId.value = _this.form.ChequeRegisterId.value;
                            b.setMultiCurrencyCurrency(null, null, false);
                            b.form.ConversionAmount.value = b.form.ConversionRate.value * _this.form.Amount.value;
                            b.form.PaytoOrReciveFrom.value = _this.form.PartyId.get_text();
                            //  b.form.Description.value = this.form.Remarks.value;
                            b.addtoGrid();
                            b.form.DebitAmount.value = 0;
                            b.form.CreditAmount.value = _this.form.Amount.value;
                            b.form.AccountHead.value = _this.form.CoAId2.value;
                            b.setMultiCurrencyCurrency(null, null, false);
                            b.form.ConversionAmount.value = b.form.ConversionRate.value * _this.form.Amount.value;
                            b.addtoGrid();
                            // b.form.EmpId.value = +this.form.PartyId.value;
                            b.form.RemainAmount.value = _this.form.RemainAmount.value;
                            b.form.Description.value = _this.form.Narration.value;
                            b.onAfterSaveSuccess = function () {
                                _this.dialogClose();
                                Serenity.SubDialogHelper.triggerDataChange(_this);
                            };
                            //  b.dialogOpen()
                        }
                        else {
                            Q.alert("Id not found.");
                        }
                    }
                });
                return buttons;
            };
            AccPartyPaymentDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccPartyPaymentDialog);
            return AccPartyPaymentDialog;
        }(Serenity.EntityDialog));
        Transaction.AccPartyPaymentDialog = AccPartyPaymentDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccPartyPaymentGrid = (function (_super) {
            __extends(AccPartyPaymentGrid, _super);
            function AccPartyPaymentGrid(container) {
                return _super.call(this, container) || this;
            }
            AccPartyPaymentGrid.prototype.getColumnsKey = function () { return 'Transaction.AccPartyPayment'; };
            AccPartyPaymentGrid.prototype.getDialogType = function () { return Transaction.AccPartyPaymentDialog; };
            AccPartyPaymentGrid.prototype.getIdProperty = function () { return Transaction.AccPartyPaymentRow.idProperty; };
            AccPartyPaymentGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccPartyPaymentRow.localTextPrefix; };
            AccPartyPaymentGrid.prototype.getService = function () { return Transaction.AccPartyPaymentService.baseUrl; };
            AccPartyPaymentGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccPartyPaymentGrid);
            return AccPartyPaymentGrid;
        }(Serenity.EntityGrid));
        Transaction.AccPartyPaymentGrid = AccPartyPaymentGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccTransactionTypeAssignDialog = (function (_super) {
            __extends(AccTransactionTypeAssignDialog, _super);
            function AccTransactionTypeAssignDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccTransactionTypeAssignForm(_this.idPrefix);
                return _this;
            }
            AccTransactionTypeAssignDialog.prototype.getFormKey = function () { return Transaction.AccTransactionTypeAssignForm.formKey; };
            AccTransactionTypeAssignDialog.prototype.getIdProperty = function () { return Transaction.AccTransactionTypeAssignRow.idProperty; };
            AccTransactionTypeAssignDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccTransactionTypeAssignRow.localTextPrefix; };
            AccTransactionTypeAssignDialog.prototype.getNameProperty = function () { return Transaction.AccTransactionTypeAssignRow.nameProperty; };
            AccTransactionTypeAssignDialog.prototype.getService = function () { return Transaction.AccTransactionTypeAssignService.baseUrl; };
            AccTransactionTypeAssignDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccTransactionTypeAssignDialog);
            return AccTransactionTypeAssignDialog;
        }(Serenity.EntityDialog));
        Transaction.AccTransactionTypeAssignDialog = AccTransactionTypeAssignDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccTransactionTypeAssignGrid = (function (_super) {
            __extends(AccTransactionTypeAssignGrid, _super);
            function AccTransactionTypeAssignGrid(container) {
                return _super.call(this, container) || this;
            }
            AccTransactionTypeAssignGrid.prototype.getColumnsKey = function () { return 'Transaction.AccTransactionTypeAssign'; };
            AccTransactionTypeAssignGrid.prototype.getDialogType = function () { return Transaction.AccTransactionTypeAssignDialog; };
            AccTransactionTypeAssignGrid.prototype.getIdProperty = function () { return Transaction.AccTransactionTypeAssignRow.idProperty; };
            AccTransactionTypeAssignGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccTransactionTypeAssignRow.localTextPrefix; };
            AccTransactionTypeAssignGrid.prototype.getService = function () { return Transaction.AccTransactionTypeAssignService.baseUrl; };
            AccTransactionTypeAssignGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccTransactionTypeAssignGrid);
            return AccTransactionTypeAssignGrid;
        }(Serenity.EntityGrid));
        Transaction.AccTransactionTypeAssignGrid = AccTransactionTypeAssignGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var CoACreditEditor = (function (_super) {
            __extends(CoACreditEditor, _super);
            function CoACreditEditor(container) {
                var _this = _super.call(this, container) || this;
                _this.CreditItems = [];
                _this.searchInput = document.createElement('input');
                _this.searchInput.type = 'text';
                _this.searchInput.id = 'searchInputCredit';
                _this.searchInput.style.width = '100%';
                _this.jsTreeDiv = document.createElement('div');
                _this.jsTreeDiv.id = 'jsTreeDivCredit';
                _this.element.append(_this.searchInput);
                _this.element.append(_this.jsTreeDiv);
                return _this;
            }
            CoACreditEditor.prototype.getEditValue = function (property, target) {
                target[property.name] = this.value;
            };
            CoACreditEditor.prototype.setEditValue = function (source, property) {
                this.value = source[property.name];
            };
            Object.defineProperty(CoACreditEditor.prototype, "value", {
                get: function () {
                    var selectedNodes = $('#jsTreeDivCredit').jstree().get_checked(true);
                    //   var menuPermissionNodesOnly = selectedNodes.filter(f => f.id.startsWith('menuPermission_'));
                    for (var i = 0; i < selectedNodes.length; i++) {
                        var menuPermission = selectedNodes[i].data;
                        //console.log(menuPermission);
                        var CreditItems = this.CreditItems.filter(function (f) { return f.CoaId == menuPermission.Id; });
                        if (CreditItems.length == 0) {
                            this.CreditItems.push({ CoaId: menuPermission.Id, TrType: "C" });
                        }
                        //else if (CreditItems.length == 1) {
                        //    CreditItems[0].Granted = true;
                        //}
                        //else {
                        //    Q.alert('Invalid Data.');
                        //}
                    }
                    return this.CreditItems;
                },
                set: function (value) {
                    value = value || [];
                    this.CreditItems = value;
                    var apps = VistaGL.Configurations.AccChartofAccountsRow.getLookup().items;
                    //var modules = ModuleRow.getLookup().items;
                    //var menus = MenuRow.getLookup().items;
                    //var menuPermissions = MenuPermissionRow.getLookup().items;
                    var treeData = [];
                    //App
                    //for (var app of apps) {
                    //    var appTreeId = 'app_' + app.Id
                    //treeData.push({
                    //    id: appTreeId,
                    //    parent: "#",
                    //    text: app.Name,
                    //    icon: false, state: { opened: false }
                    //});
                    //Module
                    var appModules = apps; //.filter(f => f.ApplicationId == app.Id);
                    for (var _i = 0, appModules_2 = appModules; _i < appModules_2.length; _i++) {
                        var module = appModules_2[_i];
                        var moduleTreeId = 'Credit_' + module.Id;
                        var moduleParentAccountId = "";
                        var isSelected = value.filter(function (f) { return f.CoaId == module.Id
                            && f.TrType == "C"; }).length > 0;
                        if (module.ParentAccountId != undefined) {
                            moduleParentAccountId = 'Credit_' + module.ParentAccountId;
                            treeData.push({
                                id: moduleTreeId,
                                parent: moduleParentAccountId,
                                text: module.AccountName,
                                icon: false, state: { opened: false, selected: isSelected },
                                data: module
                            });
                        }
                        else {
                            treeData.push({
                                id: moduleTreeId,
                                text: module.AccountName,
                                parent: "#",
                                icon: false, state: { opened: false }
                            });
                        }
                        // console.log(moduleParentAccountId);
                        ////Menu - open tree
                        //var moduleMenus = menus.filter(f => f.ModuleId == module.Id);
                        //for (var menu of moduleMenus) {
                        //    var menuTreeId = 'menu_' + menu.Id;
                        //    var menuParentTreeId = menu.ParentId != undefined || menu.ParentId != null ? ('menu_' + menu.ParentId) : moduleTreeId;
                        //    treeData.push({
                        //        id: menuTreeId,
                        //        parent: menuParentTreeId,
                        //        text: menu.Name,
                        //        icon: false, state: { opened: false }
                        //    });
                        //    //MenuPermisson
                        //    var _menuPermissions = menuPermissions.filter(f => f.MenuId == menu.Id);
                        //    for (var menuPermission of _menuPermissions) {
                        //        var isSelected = value.filter(f => f.MenuId == menuPermission.MenuId
                        //            && f.PermissionId == menuPermission.PermissionId
                        //            && f.Granted == true).length > 0;
                        //        treeData.push({
                        //            id: 'menuPermission_' + menuPermission.Id,
                        //            parent: menuTreeId,
                        //            text: menuPermission.PermissionName,
                        //            icon: false, state: { opened: false, selected: isSelected },
                        //            data: menuPermission
                        //        });
                        //    }
                        //}
                    }
                    //  }
                    // console.log(treeData);
                    $('#searchInputCredit').keyup(function (e) {
                        var searchString = e.currentTarget.value;
                        $('#jsTreeDivCredit').jstree('search', searchString);
                    });
                    $('#jsTreeDivCredit').jstree({
                        plugins: ['checkbox', "search"],
                        core: {
                            data: treeData
                        },
                        search: {
                            case_insensitive: true,
                            show_only_matches: true
                        },
                    });
                },
                enumerable: true,
                configurable: true
            });
            CoACreditEditor = __decorate([
                Serenity.Decorators.registerClass([Serenity.IGetEditValue, Serenity.ISetEditValue]),
                Serenity.Decorators.editor(),
                Serenity.Decorators.element("<div/>")
            ], CoACreditEditor);
            return CoACreditEditor;
        }(Serenity.Widget));
        Transaction.CoACreditEditor = CoACreditEditor;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var CoADebitEditor = (function (_super) {
            __extends(CoADebitEditor, _super);
            function CoADebitEditor(container) {
                var _this = _super.call(this, container) || this;
                _this.DebitItems = [];
                _this.searchDebitInput = document.createElement('input');
                _this.searchDebitInput.type = 'text';
                _this.searchDebitInput.id = 'searchDebitInput';
                _this.searchDebitInput.style.width = '100%';
                // this.searchDebitInput.style.cssFloat = 'left';
                _this.jsTreeDebitDiv = document.createElement('div');
                //  
                _this.jsTreeDebitDiv.id = 'jsTreeDebitDiv';
                //this.element.append(this.searchDebitInput);
                _this.element.append(_this.jsTreeDebitDiv);
                //    this.jsTreeDebitDiv.style.cssFloat = "left";
                _this.searchCreditInput = document.createElement('input');
                _this.searchCreditInput.type = 'text';
                _this.searchCreditInput.id = 'searchCreditInput';
                _this.searchCreditInput.style.width = '100%';
                //  this.searchCreditInput.style.cssFloat = 'right';
                _this.jsTreeCreditDiv = document.createElement('div');
                _this.jsTreeCreditDiv.id = 'jsTreeCreditDiv';
                //this.element.append(this.searchCreditInput);
                _this.element.append(_this.jsTreeCreditDiv);
                return _this;
                //   this.jsTreeCreditDiv.style.cssFloat = "right";
            }
            CoADebitEditor.prototype.getEditValue = function (property, target) {
                target[property.name] = this.value;
            };
            CoADebitEditor.prototype.setEditValue = function (source, property) {
                this.value = source[property.name];
            };
            Object.defineProperty(CoADebitEditor.prototype, "value", {
                get: function () {
                    this.DebitItems = [];
                    //var b: AccTransactionTypeAssignRow;
                    //b = {};
                    //b.TrType = "ZZZ";
                    //this.DebitItems.push(b);
                    //    this.DebitItems.forEach(f => f.Level = 1);
                    var selectedNodes = $('#jsTreeDebitDiv').jstree().get_checked(true);
                    //   var menuPermissionNodesOnly = selectedNodes.filter(f => f.id.startsWith('menuPermission_'));
                    for (var i = 0; i < selectedNodes.length; i++) {
                        var menuPermission = selectedNodes[i].data;
                        //console.log(menuPermission);
                        //   var DebitItems = this.DebitItems.filter(f => f.CoaId == menuPermission.Id)
                        //  if (DebitItems.length == 0) {
                        this.DebitItems.push({ CoaId: menuPermission.Id, TrType: "D", ParentId: this.TransactionTypeID });
                        //  }
                        //else if (DebitItems.length == 1) {
                        //    DebitItems[0].Granted = true;
                        //}
                        //else {
                        //    Q.alert('Invalid Data.');
                        //}
                    }
                    var selectedNodesCredit = $('#jsTreeCreditDiv').jstree().get_checked(true);
                    //   var menuPermissionNodesOnly = selectedNodes.filter(f => f.id.startsWith('menuPermission_'));
                    for (var i = 0; i < selectedNodesCredit.length; i++) {
                        var menuPermission = selectedNodesCredit[i].data;
                        //var DebitItems1 = this.DebitItems.filter(f => f.CoaId == menuPermission.Id && f.TrType == "C");
                        //console.log(DebitItems1.length);
                        //if (DebitItems1.length == 0) {
                        this.DebitItems.push({ CoaId: menuPermission.Id, TrType: "C", ParentId: this.TransactionTypeID });
                        //} else {
                        //  //  this.DebitItems.r
                        //    this.DebitItems = this.DebitItems.filter(f => f.CoaId != menuPermission.Id && f.TrType == "C");
                        //}
                        //else if (DebitItems.length == 1) {
                        //    DebitItems[0].Granted = true;
                        //}
                        //else {
                        //    Q.alert('Invalid Data.');
                        //}
                    }
                    //    console.log(this.DebitItems);
                    return this.DebitItems;
                },
                set: function (value) {
                    value = value || [];
                    this.DebitItems = value;
                    var apps;
                    apps = Q.getLookup('Configurations.AccChartofAccounts_Lookup').items;
                    //  Configurations.AccChartofAccountsRow.getLookup().items;
                    //var modules = ModuleRow.getLookup().items;
                    //var menus = MenuRow.getLookup().items;
                    //var menuPermissions = MenuPermissionRow.getLookup().items;
                    var treeData_Debit = [];
                    var treeData_Credit = [];
                    //App
                    //for (var app of apps) {
                    //    var appTreeId = 'app_' + app.Id
                    //treeData.push({
                    //    id: appTreeId,
                    //    parent: "#",
                    //    text: app.Name,
                    //    icon: false, state: { opened: false }
                    //});
                    //Module
                    var appModules = apps; //.filter(f => f.ApplicationId == app.Id);
                    for (var _i = 0, appModules_3 = appModules; _i < appModules_3.length; _i++) {
                        var module = appModules_3[_i];
                        var moduleTreeId = 'debit_' + module.Id;
                        var CreditmoduleTreeId = 'credit_' + module.Id;
                        var moduleParentAccountId = "";
                        var isSelectedDebit = value.filter(function (f) { return f.CoaId == module.Id
                            && f.TrType == "D"; }).length > 0;
                        var isSelectedCredit = value.filter(function (f) { return f.CoaId == module.Id
                            && f.TrType == "C"; }).length > 0;
                        if (module.ParentAccountId != undefined) {
                            moduleParentAccountId = 'debit_' + module.ParentAccountId;
                            treeData_Debit.push({
                                id: moduleTreeId,
                                parent: moduleParentAccountId,
                                text: module.AccountName,
                                icon: false, state: { opened: false, selected: isSelectedDebit },
                                data: module
                            });
                            var CreditmoduleParentAccountId = 'credit_' + module.ParentAccountId;
                            treeData_Credit.push({
                                id: CreditmoduleTreeId,
                                parent: CreditmoduleParentAccountId,
                                text: module.AccountName,
                                icon: false, state: { opened: false, selected: isSelectedCredit },
                                data: module
                            });
                        }
                        else {
                            treeData_Debit.push({
                                id: moduleTreeId,
                                text: module.AccountName,
                                parent: "#",
                                icon: false, state: { opened: false }
                            });
                            treeData_Credit.push({
                                id: CreditmoduleTreeId,
                                text: module.AccountName,
                                parent: "#",
                                icon: false, state: { opened: false }
                            });
                        }
                    }
                    //  }
                    // console.log(treeData);
                    //    $('#searchDebitInput').keyup( (e) => {
                    //        var searchDebitString = (e.currentTarget as HTMLInputElement).value;
                    //        $('#jsTreeDebitDiv').jstree('search', searchDebitString);
                    //});
                    //$('#searchCreditInput').keyup((e) => {
                    //    var searchCreditString = (e.currentTarget as HTMLInputElement).value;
                    //    $('#jsTreeCreditDiv').jstree('search', searchCreditString);
                    //});
                    $('#jsTreeDebitDiv').jstree({
                        plugins: ['checkbox', "search"],
                        core: {
                            data: treeData_Debit
                        },
                    });
                    $('#jsTreeCreditDiv').jstree({
                        plugins: ['checkbox', "search"],
                        core: {
                            data: treeData_Credit
                        },
                    });
                },
                enumerable: true,
                configurable: true
            });
            CoADebitEditor = __decorate([
                Serenity.Decorators.registerClass([Serenity.IGetEditValue, Serenity.ISetEditValue]),
                Serenity.Decorators.editor(),
                Serenity.Decorators.element("<div/>")
            ], CoADebitEditor);
            return CoADebitEditor;
        }(Serenity.Widget));
        Transaction.CoADebitEditor = CoADebitEditor;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccTransactionTypeAssignMasterDialog = (function (_super) {
            __extends(AccTransactionTypeAssignMasterDialog, _super);
            function AccTransactionTypeAssignMasterDialog(container) {
                var _this = _super.call(this, container) || this;
                _this.form = new Transaction.AccTransactionTypeAssignMasterForm(_this.idPrefix);
                $('.ui-dialog-titlebar-maximize').click();
                _this.form.TransactionTypeId.change(function (e) {
                    _this.form.CoADebit.TransactionTypeID = Q.toId(_this.form.TransactionTypeId.value);
                });
                //   this.byId('jsTreeCreditDiv').appendTo(this.byId('Credit'));
                var fieldDetailList = $('.Credit')[0];
                fieldDetailList.children[1].remove();
                //fieldDetailList.innerHTML = '';
                //var _details1 = $('#searchCreditInput')[0];
                // fieldDetailList.appendChild(_details1);
                // var br = document.createElement("p");
                //// element.appendChild(br);
                // fieldDetailList.appendChild(br);
                //// fieldDetailList.appendChild(ht
                var _details = $('#jsTreeCreditDiv')[0];
                fieldDetailList.appendChild(_details);
                return _this;
            }
            AccTransactionTypeAssignMasterDialog.prototype.getFormKey = function () { return Transaction.AccTransactionTypeAssignMasterForm.formKey; };
            AccTransactionTypeAssignMasterDialog.prototype.getIdProperty = function () { return Transaction.AccTransactionTypeAssignMasterRow.idProperty; };
            AccTransactionTypeAssignMasterDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccTransactionTypeAssignMasterRow.localTextPrefix; };
            AccTransactionTypeAssignMasterDialog.prototype.getNameProperty = function () { return Transaction.AccTransactionTypeAssignMasterRow.nameProperty; };
            AccTransactionTypeAssignMasterDialog.prototype.getService = function () { return Transaction.AccTransactionTypeAssignMasterService.baseUrl; };
            AccTransactionTypeAssignMasterDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive(),
                Serenity.Decorators.maximizable()
            ], AccTransactionTypeAssignMasterDialog);
            return AccTransactionTypeAssignMasterDialog;
        }(Serenity.EntityDialog));
        Transaction.AccTransactionTypeAssignMasterDialog = AccTransactionTypeAssignMasterDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccTransactionTypeAssignMasterGrid = (function (_super) {
            __extends(AccTransactionTypeAssignMasterGrid, _super);
            function AccTransactionTypeAssignMasterGrid(container) {
                return _super.call(this, container) || this;
            }
            AccTransactionTypeAssignMasterGrid.prototype.getColumnsKey = function () { return 'Transaction.AccTransactionTypeAssignMaster'; };
            AccTransactionTypeAssignMasterGrid.prototype.getDialogType = function () { return Transaction.AccTransactionTypeAssignMasterDialog; };
            AccTransactionTypeAssignMasterGrid.prototype.getIdProperty = function () { return Transaction.AccTransactionTypeAssignMasterRow.idProperty; };
            AccTransactionTypeAssignMasterGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccTransactionTypeAssignMasterRow.localTextPrefix; };
            AccTransactionTypeAssignMasterGrid.prototype.getService = function () { return Transaction.AccTransactionTypeAssignMasterService.baseUrl; };
            AccTransactionTypeAssignMasterGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccTransactionTypeAssignMasterGrid);
            return AccTransactionTypeAssignMasterGrid;
        }(VistaGL.EntityGridBase));
        Transaction.AccTransactionTypeAssignMasterGrid = AccTransactionTypeAssignMasterGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetDialog = (function (_super) {
            __extends(AccViewBudgetDialog, _super);
            function AccViewBudgetDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccViewBudgetForm(_this.idPrefix);
                return _this;
            }
            AccViewBudgetDialog.prototype.getFormKey = function () { return Transaction.AccViewBudgetForm.formKey; };
            AccViewBudgetDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccViewBudgetRow.localTextPrefix; };
            AccViewBudgetDialog.prototype.getNameProperty = function () { return Transaction.AccViewBudgetRow.nameProperty; };
            AccViewBudgetDialog.prototype.getService = function () { return Transaction.AccViewBudgetService.baseUrl; };
            AccViewBudgetDialog.prototype.onDialogOpen = function () {
                _super.prototype.onDialogOpen.call(this);
                this.ViewBudgetDetailsGrid = new Transaction.AccViewBudgetDetailsGrid(this.byId('DetailsGrid'));
                this.ViewBudgetDetailsGrid.element.flexHeightOnly(1);
                // Q.initFullHeightGridPage(this.byId('DetailsGrid'));
                this.ViewBudgetDetailsGrid.CoAID = this.COAID;
                $('.s-Transaction-AccViewBudgetDialog .grid-title').text(this.COAName);
                // this.byId('AccountID').val(this.COAID.toString());
            };
            //protected getTemplate() {
            //    // you could also put this in a ChartInDialog.Template.html file. it's here for simplicity.
            //    return "<div id='~_Budget'></div>";
            //}
            //protected getDialogOptions() {
            //    var opt = super.getDialogOptions();
            //    opt.title = 'Budget Details';
            //    return opt;
            //}
            AccViewBudgetDialog.prototype.getToolbarButtons = function () {
                var buttons = [];
                buttons.push({
                    title: "Save", cssClass: "approve-button",
                    onClick: function (x) {
                        var message = "Are you sure you want to " + $('.approve-button .button-inner').text() + "?";
                        Q.confirm(message, function () {
                            //this.form.BudgetStatus.value = this.entity.ApprovalAction;
                            //this.save(p => { Q.notifySuccess("success"); this.dialogClose(); });
                        });
                    }
                });
                return buttons;
            };
            AccViewBudgetDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.resizable(),
                Serenity.Decorators.maximizable()
            ], AccViewBudgetDialog);
            return AccViewBudgetDialog;
        }(Serenity.EntityDialog));
        Transaction.AccViewBudgetDialog = AccViewBudgetDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetGrid = (function (_super) {
            __extends(AccViewBudgetGrid, _super);
            function AccViewBudgetGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.nextId = 1;
                return _this;
            }
            AccViewBudgetGrid.prototype.getColumnsKey = function () { return 'Transaction.AccViewBudget'; };
            AccViewBudgetGrid.prototype.getDialogType = function () { return Transaction.AccViewBudgetDialog; };
            AccViewBudgetGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccViewBudgetRow.localTextPrefix; };
            AccViewBudgetGrid.prototype.getService = function () { return Transaction.AccViewBudgetService.baseUrl; };
            AccViewBudgetGrid.prototype.getIdProperty = function () { return "__id"; };
            /**
             * This method is called to preprocess data returned from the list service
             */
            AccViewBudgetGrid.prototype.onViewProcessData = function (response) {
                response = _super.prototype.onViewProcessData.call(this, response);
                // there is no __id property in SalesByCategoryRow but
                // this is javascript and we can set any property of an object
                for (var _i = 0, _a = response.Entities; _i < _a.length; _i++) {
                    var x = _a[_i];
                    x.__id = this.nextId++;
                }
                return response;
            };
            AccViewBudgetGrid.prototype.getButtons = function () {
                var b = _super.prototype.getButtons.call(this);
                b.shift();
                return b;
            };
            AccViewBudgetGrid.prototype.getColumns = function () {
                var columns = _super.prototype.getColumns.call(this);
                Q.first(columns, function (x) { return x.field == "AccountName" /* AccountName */; }).format =
                    function (ctx) { return "<a href=\"javascript:;\" class=\"customer-link\">" + Q.htmlEncode(ctx.value) + "</a>"; };
                return columns;
            };
            AccViewBudgetGrid.prototype.onClick = function (e, row, cell) {
                // let base grid handle clicks for its edit links
                _super.prototype.onClick.call(this, e, row, cell);
                // if base grid already handled, we shouldn"t handle it again
                if (e.isDefaultPrevented()) {
                    return;
                }
                // get reference to current item
                var item = this.itemAt(row);
                // get reference to clicked element
                var target = $(e.target);
                if (target.hasClass("customer-link")) {
                    e.preventDefault();
                    var dlg = new Transaction.AccViewBudgetDialog();
                    dlg.COAID = item.Id;
                    dlg.COAName = item.AccountName;
                    dlg.dialogOpen();
                }
            };
            AccViewBudgetGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccViewBudgetGrid);
            return AccViewBudgetGrid;
        }(Serenity.EntityGrid));
        Transaction.AccViewBudgetGrid = AccViewBudgetGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetDetailsDialog = (function (_super) {
            __extends(AccViewBudgetDetailsDialog, _super);
            function AccViewBudgetDetailsDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccViewBudgetDetailsForm(_this.idPrefix);
                return _this;
            }
            AccViewBudgetDetailsDialog.prototype.getFormKey = function () { return Transaction.AccViewBudgetDetailsForm.formKey; };
            AccViewBudgetDetailsDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccViewBudgetDetailsRow.localTextPrefix; };
            AccViewBudgetDetailsDialog.prototype.getNameProperty = function () { return Transaction.AccViewBudgetDetailsRow.nameProperty; };
            AccViewBudgetDetailsDialog.prototype.getService = function () { return Transaction.AccViewBudgetDetailsService.baseUrl; };
            AccViewBudgetDetailsDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccViewBudgetDetailsDialog);
            return AccViewBudgetDetailsDialog;
        }(Serenity.EntityDialog));
        Transaction.AccViewBudgetDetailsDialog = AccViewBudgetDetailsDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetDetailsEditor = (function (_super) {
            __extends(AccViewBudgetDetailsEditor, _super);
            function AccViewBudgetDetailsEditor(container) {
                return _super.call(this, container) || this;
            }
            AccViewBudgetDetailsEditor.prototype.getColumnsKey = function () { return 'Transaction.AccViewBudgetDetails'; };
            AccViewBudgetDetailsEditor.prototype.getDialogType = function () { return Transaction.AccViewBudgetDetailsEditorDialog; };
            AccViewBudgetDetailsEditor.prototype.getLocalTextPrefix = function () { return Transaction.AccViewBudgetDetailsRow.localTextPrefix; };
            AccViewBudgetDetailsEditor = __decorate([
                Serenity.Decorators.registerClass()
            ], AccViewBudgetDetailsEditor);
            return AccViewBudgetDetailsEditor;
        }(VistaGL.GridEditorBase));
        Transaction.AccViewBudgetDetailsEditor = AccViewBudgetDetailsEditor;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetDetailsEditorDialog = (function (_super) {
            __extends(AccViewBudgetDetailsEditorDialog, _super);
            function AccViewBudgetDetailsEditorDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccViewBudgetDetailsForm(_this.idPrefix);
                return _this;
            }
            AccViewBudgetDetailsEditorDialog.prototype.getFormKey = function () { return Transaction.AccViewBudgetDetailsForm.formKey; };
            AccViewBudgetDetailsEditorDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccViewBudgetDetailsRow.localTextPrefix; };
            AccViewBudgetDetailsEditorDialog.prototype.getNameProperty = function () { return Transaction.AccViewBudgetDetailsRow.nameProperty; };
            AccViewBudgetDetailsEditorDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccViewBudgetDetailsEditorDialog);
            return AccViewBudgetDetailsEditorDialog;
        }(VistaGL.GridEditorDialog));
        Transaction.AccViewBudgetDetailsEditorDialog = AccViewBudgetDetailsEditorDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetDetailsGrid = (function (_super) {
            __extends(AccViewBudgetDetailsGrid, _super);
            function AccViewBudgetDetailsGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.pendingChanges = {};
                _this.nextId = 1;
                //  $('.s-Transaction-AccViewBudgetDialog .grid-title').remove();
                $('.s-Transaction-AccViewBudgetDialog .grid-toolbar').remove();
                _this.slickContainer.on('change', '.edit:input', function (e) { return _this.inputsChange(e); });
                return _this;
            }
            AccViewBudgetDetailsGrid.prototype.getColumnsKey = function () { return 'Transaction.AccViewBudgetDetails'; };
            AccViewBudgetDetailsGrid.prototype.getDialogType = function () { return Transaction.AccViewBudgetDetailsDialog; };
            AccViewBudgetDetailsGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccViewBudgetDetailsRow.localTextPrefix; };
            AccViewBudgetDetailsGrid.prototype.getService = function () { return Transaction.AccViewBudgetDetailsService.baseUrl; };
            AccViewBudgetDetailsGrid.prototype.getIdProperty = function () { return "__id"; };
            /**
             * This method is called to preprocess data returned from the list service
             */
            AccViewBudgetDetailsGrid.prototype.onViewProcessData = function (response) {
                response = _super.prototype.onViewProcessData.call(this, response);
                // there is no __id property in SalesByCategoryRow but
                // this is javascript and we can set any property of an object
                for (var _i = 0, _a = response.Entities; _i < _a.length; _i++) {
                    var x = _a[_i];
                    x.__id = this.nextId++;
                }
                return response;
            };
            AccViewBudgetDetailsGrid.prototype.getButtons = function () {
                var b = _super.prototype.getButtons.call(this);
                b.shift();
                return b;
            };
            Object.defineProperty(AccViewBudgetDetailsGrid.prototype, "CoAID", {
                get: function () {
                    return this._CoAID;
                },
                set: function (value) {
                    if (this._CoAID !== value) {
                        this._CoAID = value;
                        this.setEquality('id', value);
                        this.refresh();
                    }
                },
                enumerable: true,
                configurable: true
            });
            AccViewBudgetDetailsGrid.prototype.usePager = function () {
                return false;
            };
            AccViewBudgetDetailsGrid.prototype.getEffectiveValue = function (item, field) {
                var pending = this.pendingChanges[item.ProductID];
                if (pending && pending[field] !== undefined) {
                    return pending[field];
                }
                return item[field];
            };
            AccViewBudgetDetailsGrid.prototype.getColumns = function () {
                var _this = this;
                var columns = _super.prototype.getColumns.call(this);
                var num = function (ctx) { return _this.numericInputFormatter(ctx); };
                //  var str = ctx => this.stringInputFormatter(ctx);
                Q.first(columns, function (x) { return x.field === 'Amount1'; }).format = num;
                //Q.first(columns, x => x.field === fld.UnitPrice).format = num;
                //Q.first(columns, x => x.field === fld.UnitsInStock).format = num;
                //Q.first(columns, x => x.field === fld.UnitsOnOrder).format = num;
                //Q.first(columns, x => x.field === fld.ReorderLevel).format = num;
                return columns;
            };
            AccViewBudgetDetailsGrid.prototype.numericInputFormatter = function (ctx) {
                var klass = 'edit numeric';
                var item = ctx.item;
                var pending = this.pendingChanges[item.Id];
                if (pending && pending[ctx.column.field] !== undefined) {
                    klass += ' dirty';
                }
                var value = this.getEffectiveValue(item, ctx.column.field);
                return "<input type='text' class='" + klass +
                    "' data-field='" + ctx.column.field +
                    "' value='" + Q.formatNumber(value, '0.##') + "'/>";
            };
            AccViewBudgetDetailsGrid.prototype.inputsChange = function (e) {
                var cell = this.slickGrid.getCellFromEvent(e);
                var item = this.itemAt(cell.row);
                var input = $(e.target);
                var field = input.data('field');
                var text = Q.coalesce(Q.trimToNull(input.val()), '0');
                var pending = this.pendingChanges[item.Id];
                var effective = this.getEffectiveValue(item, field);
                var oldText;
                if (input.hasClass("numeric"))
                    oldText = Q.formatNumber(effective, '0.##');
                else
                    oldText = effective;
                var value;
                if (field === 'UnitPrice') {
                    value = Q.parseDecimal(text);
                    if (value == null || isNaN(value)) {
                        Q.notifyError(Q.text('Validation.Decimal'), '', null);
                        input.val(oldText);
                        input.focus();
                        return;
                    }
                }
                else if (input.hasClass("numeric")) {
                    var i = Q.parseInteger(text);
                    if (isNaN(i) || i > 32767 || i < 0) {
                        Q.notifyError(Q.text('Validation.Integer'), '', null);
                        input.val(oldText);
                        input.focus();
                        return;
                    }
                    value = i;
                }
                else
                    value = text;
                if (!pending) {
                    this.pendingChanges[item.Id] = pending = {};
                }
                pending[field] = value;
                item[field] = value;
                this.view.refresh();
                if (input.hasClass("numeric"))
                    value = Q.formatNumber(value, '0.##');
                input.val(value).addClass('dirty');
                this.setSaveButtonState();
            };
            AccViewBudgetDetailsGrid.prototype.setSaveButtonState = function () {
                this.toolbar.findButton('apply-changes-button').toggleClass('disabled', Object.keys(this.pendingChanges).length === 0);
            };
            AccViewBudgetDetailsGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccViewBudgetDetailsGrid);
            return AccViewBudgetDetailsGrid;
        }(Serenity.EntityGrid));
        Transaction.AccViewBudgetDetailsGrid = AccViewBudgetDetailsGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetDetailsDeptDialog = (function (_super) {
            __extends(AccViewBudgetDetailsDeptDialog, _super);
            function AccViewBudgetDetailsDeptDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccViewBudgetDetailsDeptForm(_this.idPrefix);
                return _this;
            }
            AccViewBudgetDetailsDeptDialog.prototype.getFormKey = function () { return Transaction.AccViewBudgetDetailsDeptForm.formKey; };
            AccViewBudgetDetailsDeptDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccViewBudgetDetailsDeptRow.localTextPrefix; };
            AccViewBudgetDetailsDeptDialog.prototype.getNameProperty = function () { return Transaction.AccViewBudgetDetailsDeptRow.nameProperty; };
            AccViewBudgetDetailsDeptDialog.prototype.getService = function () { return Transaction.AccViewBudgetDetailsDeptService.baseUrl; };
            AccViewBudgetDetailsDeptDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccViewBudgetDetailsDeptDialog);
            return AccViewBudgetDetailsDeptDialog;
        }(Serenity.EntityDialog));
        Transaction.AccViewBudgetDetailsDeptDialog = AccViewBudgetDetailsDeptDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetDetailsDeptEditor = (function (_super) {
            __extends(AccViewBudgetDetailsDeptEditor, _super);
            function AccViewBudgetDetailsDeptEditor(container) {
                return _super.call(this, container) || this;
            }
            AccViewBudgetDetailsDeptEditor.prototype.getColumnsKey = function () { return 'Transaction.AccViewBudgetDetailsDept'; };
            AccViewBudgetDetailsDeptEditor.prototype.getDialogType = function () { return Transaction.AccViewBudgetDetailsDeptEditorDialog; };
            AccViewBudgetDetailsDeptEditor.prototype.getLocalTextPrefix = function () { return Transaction.AccViewBudgetDetailsDeptRow.localTextPrefix; };
            AccViewBudgetDetailsDeptEditor = __decorate([
                Serenity.Decorators.registerClass()
            ], AccViewBudgetDetailsDeptEditor);
            return AccViewBudgetDetailsDeptEditor;
        }(VistaGL.GridEditorBase));
        Transaction.AccViewBudgetDetailsDeptEditor = AccViewBudgetDetailsDeptEditor;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetDetailsDeptEditorDialog = (function (_super) {
            __extends(AccViewBudgetDetailsDeptEditorDialog, _super);
            function AccViewBudgetDetailsDeptEditorDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccViewBudgetDetailsDeptForm(_this.idPrefix);
                return _this;
            }
            AccViewBudgetDetailsDeptEditorDialog.prototype.getFormKey = function () { return Transaction.AccViewBudgetDetailsDeptForm.formKey; };
            AccViewBudgetDetailsDeptEditorDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccViewBudgetDetailsDeptRow.localTextPrefix; };
            AccViewBudgetDetailsDeptEditorDialog.prototype.getNameProperty = function () { return Transaction.AccViewBudgetDetailsDeptRow.nameProperty; };
            AccViewBudgetDetailsDeptEditorDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccViewBudgetDetailsDeptEditorDialog);
            return AccViewBudgetDetailsDeptEditorDialog;
        }(VistaGL.GridEditorDialog));
        Transaction.AccViewBudgetDetailsDeptEditorDialog = AccViewBudgetDetailsDeptEditorDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetDetailsDeptGrid = (function (_super) {
            __extends(AccViewBudgetDetailsDeptGrid, _super);
            function AccViewBudgetDetailsDeptGrid(container) {
                return _super.call(this, container) || this;
            }
            AccViewBudgetDetailsDeptGrid.prototype.getColumnsKey = function () { return 'Transaction.AccViewBudgetDetailsDept'; };
            AccViewBudgetDetailsDeptGrid.prototype.getDialogType = function () { return Transaction.AccViewBudgetDetailsDeptDialog; };
            AccViewBudgetDetailsDeptGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccViewBudgetDetailsDeptRow.localTextPrefix; };
            AccViewBudgetDetailsDeptGrid.prototype.getService = function () { return Transaction.AccViewBudgetDetailsDeptService.baseUrl; };
            AccViewBudgetDetailsDeptGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccViewBudgetDetailsDeptGrid);
            return AccViewBudgetDetailsDeptGrid;
        }(Serenity.EntityGrid));
        Transaction.AccViewBudgetDetailsDeptGrid = AccViewBudgetDetailsDeptGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetZoneDialog = (function (_super) {
            __extends(AccViewBudgetZoneDialog, _super);
            function AccViewBudgetZoneDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccViewBudgetZoneForm(_this.idPrefix);
                return _this;
            }
            AccViewBudgetZoneDialog.prototype.getFormKey = function () { return Transaction.AccViewBudgetZoneForm.formKey; };
            AccViewBudgetZoneDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccViewBudgetZoneRow.localTextPrefix; };
            AccViewBudgetZoneDialog.prototype.getNameProperty = function () { return Transaction.AccViewBudgetZoneRow.nameProperty; };
            AccViewBudgetZoneDialog.prototype.getService = function () { return Transaction.AccViewBudgetZoneService.baseUrl; };
            AccViewBudgetZoneDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccViewBudgetZoneDialog);
            return AccViewBudgetZoneDialog;
        }(Serenity.EntityDialog));
        Transaction.AccViewBudgetZoneDialog = AccViewBudgetZoneDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetZoneEditor = (function (_super) {
            __extends(AccViewBudgetZoneEditor, _super);
            function AccViewBudgetZoneEditor(container) {
                return _super.call(this, container) || this;
            }
            AccViewBudgetZoneEditor.prototype.getColumnsKey = function () { return 'Transaction.AccViewBudgetZone'; };
            AccViewBudgetZoneEditor.prototype.getDialogType = function () { return Transaction.AccViewBudgetZoneEditorDialog; };
            AccViewBudgetZoneEditor.prototype.getLocalTextPrefix = function () { return Transaction.AccViewBudgetZoneRow.localTextPrefix; };
            AccViewBudgetZoneEditor = __decorate([
                Serenity.Decorators.registerClass()
            ], AccViewBudgetZoneEditor);
            return AccViewBudgetZoneEditor;
        }(VistaGL.GridEditorBase));
        Transaction.AccViewBudgetZoneEditor = AccViewBudgetZoneEditor;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetZoneEditorDialog = (function (_super) {
            __extends(AccViewBudgetZoneEditorDialog, _super);
            function AccViewBudgetZoneEditorDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccViewBudgetZoneForm(_this.idPrefix);
                return _this;
            }
            AccViewBudgetZoneEditorDialog.prototype.getFormKey = function () { return Transaction.AccViewBudgetZoneForm.formKey; };
            AccViewBudgetZoneEditorDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccViewBudgetZoneRow.localTextPrefix; };
            AccViewBudgetZoneEditorDialog.prototype.getNameProperty = function () { return Transaction.AccViewBudgetZoneRow.nameProperty; };
            AccViewBudgetZoneEditorDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccViewBudgetZoneEditorDialog);
            return AccViewBudgetZoneEditorDialog;
        }(VistaGL.GridEditorDialog));
        Transaction.AccViewBudgetZoneEditorDialog = AccViewBudgetZoneEditorDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccViewBudgetZoneGrid = (function (_super) {
            __extends(AccViewBudgetZoneGrid, _super);
            function AccViewBudgetZoneGrid(container) {
                return _super.call(this, container) || this;
            }
            AccViewBudgetZoneGrid.prototype.getColumnsKey = function () { return 'Transaction.AccViewBudgetZone'; };
            AccViewBudgetZoneGrid.prototype.getDialogType = function () { return Transaction.AccViewBudgetZoneDialog; };
            AccViewBudgetZoneGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccViewBudgetZoneRow.localTextPrefix; };
            AccViewBudgetZoneGrid.prototype.getService = function () { return Transaction.AccViewBudgetZoneService.baseUrl; };
            AccViewBudgetZoneGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccViewBudgetZoneGrid);
            return AccViewBudgetZoneGrid;
        }(Serenity.EntityGrid));
        Transaction.AccViewBudgetZoneGrid = AccViewBudgetZoneGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherConfigurationDialog = (function (_super) {
            __extends(AccVoucherConfigurationDialog, _super);
            function AccVoucherConfigurationDialog(container) {
                var _this = _super.call(this) || this;
                _this.form = new Transaction.AccVoucherConfigurationForm(_this.idPrefix);
                return _this;
            }
            AccVoucherConfigurationDialog.prototype.getFormKey = function () { return Transaction.AccVoucherConfigurationForm.formKey; };
            AccVoucherConfigurationDialog.prototype.getIdProperty = function () { return Transaction.AccVoucherConfigurationRow.idProperty; };
            AccVoucherConfigurationDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherConfigurationRow.localTextPrefix; };
            AccVoucherConfigurationDialog.prototype.getNameProperty = function () { return Transaction.AccVoucherConfigurationRow.nameProperty; };
            AccVoucherConfigurationDialog.prototype.getService = function () { return Transaction.AccVoucherConfigurationService.baseUrl; };
            AccVoucherConfigurationDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherConfigurationDialog);
            return AccVoucherConfigurationDialog;
        }(VistaGL.EntityDialogBase));
        Transaction.AccVoucherConfigurationDialog = AccVoucherConfigurationDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherConfigurationGrid = (function (_super) {
            __extends(AccVoucherConfigurationGrid, _super);
            function AccVoucherConfigurationGrid(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherConfigurationGrid.prototype.getColumnsKey = function () { return 'Transaction.AccVoucherConfiguration'; };
            AccVoucherConfigurationGrid.prototype.getDialogType = function () { return Transaction.AccVoucherConfigurationDialog; };
            AccVoucherConfigurationGrid.prototype.getIdProperty = function () { return Transaction.AccVoucherConfigurationRow.idProperty; };
            AccVoucherConfigurationGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherConfigurationRow.localTextPrefix; };
            AccVoucherConfigurationGrid.prototype.getService = function () { return Transaction.AccVoucherConfigurationService.baseUrl; };
            AccVoucherConfigurationGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherConfigurationGrid);
            return AccVoucherConfigurationGrid;
        }(VistaGL.EntityGridBase));
        Transaction.AccVoucherConfigurationGrid = AccVoucherConfigurationGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDetailsDialog = (function (_super) {
            __extends(AccVoucherDetailsDialog, _super);
            function AccVoucherDetailsDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccVoucherDetailsForm(_this.idPrefix);
                return _this;
            }
            AccVoucherDetailsDialog.prototype.getFormKey = function () { return Transaction.AccVoucherDetailsForm.formKey; };
            AccVoucherDetailsDialog.prototype.getIdProperty = function () { return Transaction.AccVoucherDetailsRow.idProperty; };
            AccVoucherDetailsDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherDetailsRow.localTextPrefix; };
            AccVoucherDetailsDialog.prototype.getNameProperty = function () { return Transaction.AccVoucherDetailsRow.nameProperty; };
            AccVoucherDetailsDialog.prototype.getService = function () { return Transaction.AccVoucherDetailsService.baseUrl; };
            AccVoucherDetailsDialog.prototype.onDialogOpen = function () {
                _super.prototype.onDialogOpen.call(this);
                q.initDetailEditor(this, this.form.VoucherDtlAllocation);
                this.form.VoucherDtlAllocation.parentDialog = this;
            };
            AccVoucherDetailsDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherDetailsDialog);
            return AccVoucherDetailsDialog;
        }(VistaGL.EntityDialogBase));
        Transaction.AccVoucherDetailsDialog = AccVoucherDetailsDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDetailsEditor = (function (_super) {
            __extends(AccVoucherDetailsEditor, _super);
            function AccVoucherDetailsEditor(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherDetailsEditor.prototype.getColumnsKey = function () { return 'Transaction.AccVoucherDetails'; };
            AccVoucherDetailsEditor.prototype.getDialogType = function () { return Transaction.AccVoucherDetailsEditorDialog; };
            AccVoucherDetailsEditor.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherDetailsRow.localTextPrefix; };
            AccVoucherDetailsEditor.prototype.onItemsChanged = function () {
                //
                var parentDialog = this.parentDialog;
                if (parentDialog) {
                    setTimeout(function () {
                        parentDialog.sumDebitCredit();
                    });
                }
            };
            AccVoucherDetailsEditor.prototype.deleteEntity = function (id) {
                //--
                var parentDialog = this.parentDialog;
                //
                if (parentDialog.form.VoucherTypeId.value == VistaGL.VoucherType.Journal_Voucher.toString()) {
                    var item = this.view.getItemById(id);
                    if (item.Id != undefined) {
                        var linkedDetail = Transaction.AccVoucherDetailsRow.getLookup().items.filter(function (i) { return i.LinkedJVDetailId == item.Id; });
                        if (linkedDetail != undefined && linkedDetail.length > 0) {
                            Q.notifyWarning("This journal voucher entity has a relation with auto payment voucher entity! " +
                                "You cannot delete this entity! " +
                                "In this case, You have to delete whole voucher and re-enter again.");
                            return false;
                        }
                    }
                }
                //
                this.view.deleteItem(id);
                this.onItemsChanged();
                return true;
            };
            AccVoucherDetailsEditor.prototype.editItem = function (entityOrId) {
                //--
                var parentDialog = this.parentDialog;
                if (parentDialog.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                    if (parentDialog.form.LinkedWithAutoJV.value == true) {
                        Q.notifyWarning("This voucher has an auto journal voucher! " +
                            "Please make sure that you have done necessary change in journal voucher also!");
                    }
                }
                _super.prototype.editItem.call(this, entityOrId);
            };
            AccVoucherDetailsEditor.prototype.C_editItem = function (id) {
                //
                this.editItem(id);
            };
            AccVoucherDetailsEditor.prototype.C_NewItem = function (_row) {
                var _this = this;
                //
                this.createEntityDialog(this.getItemType(), function (dlg) {
                    var dialog = dlg;
                    dialog.parentEditor = _this;
                    dialog.onSave = function (opt, callback) { return _this.save(opt, callback); };
                    dialog.loadEntityAndOpenDialog(_this.getNewEntity());
                });
            };
            AccVoucherDetailsEditor.prototype.validateEntity = function (row, id) {
                //
                row.ChartofAccountsId = Q.toId(row.ChartofAccountsId);
                return true;
            };
            AccVoucherDetailsEditor = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherDetailsEditor);
            return AccVoucherDetailsEditor;
        }(VistaGL.GridEditorBase));
        Transaction.AccVoucherDetailsEditor = AccVoucherDetailsEditor;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDetailsEditorDialog = (function (_super) {
            __extends(AccVoucherDetailsEditorDialog, _super);
            function AccVoucherDetailsEditorDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccVoucherDetailsForm(_this.idPrefix);
                _this.Amount = 0.00;
                return _this;
            }
            AccVoucherDetailsEditorDialog.prototype.getFormKey = function () { return Transaction.AccVoucherDetailsForm.formKey; };
            AccVoucherDetailsEditorDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherDetailsRow.localTextPrefix; };
            AccVoucherDetailsEditorDialog.prototype.getNameProperty = function () { return Transaction.AccVoucherDetailsRow.nameProperty; };
            AccVoucherDetailsEditorDialog.prototype.onDialogClose = function () {
                _super.prototype.onDialogClose.call(this);
                clearInterval(this.timeLoad);
            };
            AccVoucherDetailsEditorDialog.prototype.onDialogOpen = function () {
                var _this = this;
                _super.prototype.onDialogOpen.call(this);
                //   this.items_ChartofAccounts = this.items_ChartofAccounts.filter(f => f.IsControlhead == 0);
                //for (var i = 0; i < this.items_ChartofAccounts.length; i++) {
                //    var str = this.items_ChartofAccounts[i];
                //    //  var c = distinct_axes2.filter(p => p.CoaId == str.CoaId);
                //    //   if (c.length < 1) {
                //    //     distinct_axes2.push(str);
                //    this.form.ChartofAccountsId.addItem({ id: str.Id.toString(), text: str.AccountName, source: null, disabled: false });
                //    // }
                //}
                this.form.ConversionRate.element.hide();
                this.form.ConversionAmount.element.hide();
                var parentDialog = this.parentEditor.parentDialog;
                this.items_ChartofAccounts = parentDialog.items_ChartofAccounts;
                this.form.ChartofAccountsId.items = parentDialog.form.AccountHead.items;
                this._TransactionMode = parentDialog.form.TransactionMode.value;
                this._VoucherTypeId = parentDialog.form.VoucherTypeId.value;
                if (this._VoucherTypeId != VistaGL.VoucherType.Journal_Voucher.toString())
                    $('.AdjustedChequeRegisterId').hide();
                if (this.isNew()) {
                    this.form.ChartofAccountsId.value = parentDialog.form.AccountHead.value;
                    this.form.ConversionRate.value = parentDialog.form.ConversionRate.value;
                    this.form.CreditAmount.value = parentDialog.form.CreditAmount.value;
                    this.form.DebitAmount.value = parentDialog.form.DebitAmount.value;
                    // this.entity.ChartofAccountsAccountName = parentDialog.form.AccountHead.get_text();
                    this.form.Description.value = parentDialog.form.DDescription.value;
                    this.form.VoucherDtlAllocation.value = parentDialog._VoucherDtlAllocation;
                    this.form.ConversionAmount.value = parentDialog.form.ConversionAmount.value;
                }
                if (this.form.DebitAmount.value > 0) {
                    this.form.VoucherDtlAllocation.isDrCr = "Dr";
                }
                else {
                    this.form.VoucherDtlAllocation.isDrCr = "Cr";
                }
                var Check_AccHead = parentDialog.items_ChartofAccounts.filter(function (p) { return p.Id == +_this.form.ChartofAccountsId.value; })[0];
                // if (parentDialog._IsCostCenterAllocate == 1) {
                if (Check_AccHead.IsCostCenterAllocate == 1) {
                    this.timeLoad = setInterval(function (p) {
                        _this.Amount = 0.00;
                        var SDetailsPush = _this.form.VoucherDtlAllocation.getItems();
                        for (var _i = 0, SDetailsPush_1 = SDetailsPush; _i < SDetailsPush_1.length; _i++) {
                            var item = SDetailsPush_1[_i];
                            _this.Amount = _this.Amount + item.Amount;
                        }
                        if (_this.form.CreditAmount.value.toString() == "" || _this.form.CreditAmount.value == 0.00) {
                            _this.form.DebitAmount.value = _this.Amount;
                        }
                        else {
                            _this.form.CreditAmount.value = _this.Amount;
                        }
                    }, 500);
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.DebitAmount.element), true);
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.CreditAmount.element), true);
                    this.form.VoucherDtlAllocation.element.show();
                    $('.VoucherDtlAllocation .caption').show();
                }
                else {
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.DebitAmount.element), false);
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.CreditAmount.element), false);
                    this.form.VoucherDtlAllocation.element.hide();
                    $('.VoucherDtlAllocation .caption').hide();
                }
                //    if (parentDialog._IsBillRef == 1)
                if (Check_AccHead.IsBillRef == 1) {
                    this.form.VoucherDtlBillRef.element.show();
                    $('.VoucherDtlBillRef .caption').show();
                }
                else {
                    this.form.VoucherDtlBillRef.element.hide();
                    $('.VoucherDtlBillRef .caption').hide();
                }
                this.FocusDrCr(parentDialog.form.VoucherTypeId.value, Check_AccHead.CoaMapping);
                if (Check_AccHead.CoaMapping == "BANK") {
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ChequeRegisterId.element), false);
                }
                else {
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ChequeRegisterId.element), true);
                }
                this.form.ChartofAccountsId.changeSelect2(function (p) {
                    var Check_AccHead = parentDialog.items_ChartofAccounts.filter(function (f) { return f.Id == +_this.form.ChartofAccountsId.value; });
                    if (Check_AccHead[0].CoaMapping == "BANK") {
                        Serenity.EditorUtils.setReadonly(_this.element.find(_this.form.ChequeRegisterId.element), false);
                        var _AccChequeRegister = parentDialog.AccChequeRegister.filter(function (p) { return p.BankAccountInformationCoaId == +_this.form.ChartofAccountsId.value; });
                        _this.form.ChequeRegisterId.clearItems();
                        for (var _i = 0, _AccChequeRegister_3 = _AccChequeRegister; _i < _AccChequeRegister_3.length; _i++) {
                            var item = _AccChequeRegister_3[_i];
                            //  var str = items[i];
                            _this.form.ChequeRegisterId.addItem({ id: item.Id.toString(), text: item.ChequeNo, source: null, disabled: false });
                        }
                    }
                    else {
                        Serenity.EditorUtils.setReadonly(_this.element.find(_this.form.ChequeRegisterId.element), true);
                    }
                    if (Check_AccHead[0].IsCostCenterAllocate == 1) {
                        _this.form.VoucherDtlAllocation.element.show();
                        $('.VoucherDtlAllocation .caption').show();
                    }
                    else {
                        _this.form.VoucherDtlAllocation.element.hide();
                        $('.VoucherDtlAllocation .caption').hide();
                    }
                    if (Check_AccHead[0].MultiCurrencyCurrency == null) {
                        //   this.form.MultiCurrency.value = "Taka";
                        _this.form.ConversionRate.value = 1;
                        //  $("#lbConversionRate").text("Taka");
                    }
                    else {
                        //  this.form.MultiCurrency.value = Check_AccHead[0].MultiCurrencyCurrency;
                        var MultiCurrency_amount = parentDialog.items_CurrencyConversionRate.filter(function (f) { return f.FirstCurrency == Check_AccHead[0].MultiCurrencyId; });
                        _this.form.ConversionRate.value = MultiCurrency_amount[0].SecondAmout;
                        //  $("#lbConversionRate").text(MultiCurrency_amount[0].SecondCurrencyCurrency);
                    }
                    _this.FocusDrCr(parentDialog.form.VoucherTypeId.value, Check_AccHead[0].CoaMapping);
                    if (parentDialog.form.VoucherTypeId.value == VistaGL.VoucherType.Journal_Voucher.toString()) {
                        var _AccTransactionTypeAssign = parentDialog.AccTransactionTypeAssign.filter(function (p) { return p.CoaId == +_this.form.ChartofAccountsId.value && p.ParentId == +parentDialog.form.TransactionTypeEntityId.value; });
                        if (_AccTransactionTypeAssign.length > 0) {
                            //
                            if (_AccTransactionTypeAssign[0].TrType == "C") {
                                _this.form.CreditAmount.element.focus();
                                _this.form.CreditAmount.element[0].setSelectionRange(0, 100);
                            }
                            else {
                                _this.form.DebitAmount.element.focus();
                                _this.form.DebitAmount.element[0].setSelectionRange(0, 100);
                            }
                        }
                    }
                });
                this.form.CreditAmount.change(function (p) {
                    _this.form.ConversionAmount.value = _this.form.ConversionRate.value * _this.form.CreditAmount.value;
                });
                this.form.CreditAmount.element.focusout(function () {
                    //
                    if (_this.form.CreditAmount.value > 0) {
                        _this.form.DebitAmount.value = 0;
                        _this.form.VoucherDtlAllocation.isDrCr = "Cr";
                    }
                });
                this.form.DebitAmount.change(function (p) {
                    _this.form.ConversionAmount.value = _this.form.ConversionRate.value * _this.form.DebitAmount.value;
                });
                this.form.DebitAmount.element.focusout(function () {
                    //
                    if (_this.form.DebitAmount.value > 0) {
                        _this.form.CreditAmount.value = 0;
                        _this.form.VoucherDtlAllocation.isDrCr = "Dr";
                    }
                });
                this.form.ConversionRate.change(function (p) {
                    _this.form.ConversionAmount.value = _this.form.ConversionRate.value * (_this.form.DebitAmount.value + _this.form.CreditAmount.value);
                });
            };
            AccVoucherDetailsEditorDialog.prototype.FocusDrCr = function (VoucherTypeId, CoaMapping) {
                if (VoucherTypeId == VistaGL.VoucherType.Payment_Voucher.toString()) {
                    if (CoaMapping == "BANK" || CoaMapping == "CASH") {
                        //Serenity.EditorUtils.setReadonly(this.element.find(this.form.DebitAmount.element), true);
                        //Serenity.EditorUtils.setReadonly(this.element.find(this.form.CreditAmount.element), false);
                        // this.form.DebitAmount.value = 0;
                        this.form.CreditAmount.element.focus();
                        this.form.CreditAmount.element[0].setSelectionRange(0, 100);
                    }
                    else {
                        //Serenity.EditorUtils.setReadonly(this.element.find(this.form.DebitAmount.element), false);
                        //Serenity.EditorUtils.setReadonly(this.element.find(this.form.CreditAmount.element), true);
                        // this.form.CreditAmount.value = 0;
                        this.form.DebitAmount.element.focus();
                        this.form.DebitAmount.element[0].setSelectionRange(0, 100);
                    }
                }
                else if (VoucherTypeId == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                    if (CoaMapping == "BANK" || CoaMapping == "CASH") {
                        //Serenity.EditorUtils.setReadonly(this.element.find(this.form.CreditAmount.element), true);
                        //Serenity.EditorUtils.setReadonly(this.element.find(this.form.DebitAmount.element), false);
                        // this.form.CreditAmount.value = 0;
                        this.form.DebitAmount.element.focus();
                        this.form.DebitAmount.element[0].setSelectionRange(0, 100);
                    }
                    else {
                        //Serenity.EditorUtils.setReadonly(this.element.find(this.form.CreditAmount.element), false);
                        //Serenity.EditorUtils.setReadonly(this.element.find(this.form.DebitAmount.element), true);
                        //this.form.DebitAmount.value = 0;
                        this.form.CreditAmount.element.focus();
                        this.form.CreditAmount.element[0].setSelectionRange(0, 100);
                    }
                }
            };
            AccVoucherDetailsEditorDialog.prototype.getSaveEntity = function () {
                var entity = _super.prototype.getSaveEntity.call(this);
                var vouDtlAll = entity.VoucherDtlAllocation;
                var tempCostCenterName = '';
                for (var i = 0; i < vouDtlAll.length; i++) {
                    var tempVouDtl = vouDtlAll[i];
                    tempCostCenterName += tempVouDtl.CostCenterName + ', ';
                }
                //   entity.ChartofAccountsAccountName = this.form.ChartofAccountsId.itemById[this.form.ChartofAccountsId.value].text;
                entity.ChartofAccountsAccountName = this.form.ChartofAccountsId.get_text() + ' (' + tempCostCenterName + ')';
                return entity;
            };
            AccVoucherDetailsEditorDialog.prototype.validateBeforeSave = function () {
                var _this = this;
                if (this._TransactionMode == "") {
                    Q.warning("Please select Transaction Mode.");
                    return false;
                }
                if (this.form.ChartofAccountsId.value == "") {
                    Q.warning("Please select Account Head.");
                    return false;
                }
                if ((this.form.DebitAmount.value.toString() == "NaN" && this.form.CreditAmount.value.toString() == "NaN")
                    || (this.form.DebitAmount.value <= 0 && this.form.CreditAmount.value <= 0)) {
                    Q.warning("Please enter Debit or Credit Amount 1.");
                    return false;
                }
                if (this.form.DebitAmount.value > 0 && this.form.CreditAmount.value > 0) {
                    Q.warning("Please enter Debit or Credit Amount 2.");
                    return false;
                }
                var Check_AccHead = this.items_ChartofAccounts.filter(function (f) { return f.Id == +_this.form.ChartofAccountsId.value; });
                var _amount = 0;
                var _Damount = 0;
                var _Camount = 0;
                if (Check_AccHead[0].CoaMapping == undefined) {
                    if (this._VoucherTypeId == VistaGL.VoucherType.Payment_Voucher.toString()) {
                        //if (this.form.DebitAmount.value.toString() == "NaN" || this.form.DebitAmount.value <= 0) {
                        //    Q.warning("Credit Amount for Bank or Cash Head.");
                        //    return false;
                        //}
                        //else {
                        _amount = this.form.DebitAmount.value;
                        _Damount = this.form.DebitAmount.value;
                        //}
                    }
                    else if (this._VoucherTypeId == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                        //if (this.form.CreditAmount.value.toString() == "NaN" || this.form.CreditAmount.value <= 0) {
                        //    Q.warning("Debit Amount for Bank or Cash Head.");
                        //    return false;
                        //}
                        //else {
                        _amount = this.form.CreditAmount.value;
                        _Camount = this.form.CreditAmount.value;
                        //}
                    }
                    else if (this._VoucherTypeId == VistaGL.VoucherType.Journal_Voucher.toString()) {
                        _amount = this.form.DebitAmount.value;
                        if (_amount == 0) {
                            _amount = this.form.CreditAmount.value;
                            _Damount = this.form.DebitAmount.value;
                            _Camount = this.form.CreditAmount.value;
                        }
                    }
                    else if (this._VoucherTypeId == VistaGL.VoucherType.Transfer_Voucher.toString()) {
                        _amount = this.form.DebitAmount.value;
                        if (_amount == 0) {
                            _amount = this.form.CreditAmount.value;
                            _Damount = this.form.DebitAmount.value;
                            _Camount = this.form.CreditAmount.value;
                        }
                    }
                }
                else {
                    if (this._TransactionMode == "BANK" && Check_AccHead[0].CoaMapping != "BANK") {
                        //  if (Check_AccHead[0].CoaMapping != "BANK") {
                        Q.warning("Please select Bank Head.");
                        return false;
                        // }
                    }
                    if (this._TransactionMode == "BANK" && Check_AccHead[0].CoaMapping != "BANK") {
                        //  if (Check_AccHead[0].CoaMapping != "BANK") {
                        Q.warning("Please select Cash Head.");
                        return false;
                        // }
                    }
                    if (this._VoucherTypeId == VistaGL.VoucherType.Payment_Voucher.toString()) {
                        //if (this.form.CreditAmount.value.toString() == "NaN" || this.form.CreditAmount.value <= 0) {
                        //    Q.warning("Credit Amount for Bank or Cash Head.");
                        //    return false;
                        //} else {
                        _amount = this.form.CreditAmount.value;
                        _Camount = this.form.CreditAmount.value;
                        //}
                    }
                    else if (this._VoucherTypeId == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                        //if (this.form.DebitAmount.value.toString() == "NaN" || this.form.DebitAmount.value <= 0) {
                        //    Q.warning("Debit Amount for Bank or Cash Head.");
                        //    return false;
                        //} else {
                        _amount = this.form.DebitAmount.value;
                        _Damount = this.form.DebitAmount.value;
                        //}
                    }
                    else if (this._VoucherTypeId == VistaGL.VoucherType.Journal_Voucher.toString()) {
                        _amount = this.form.DebitAmount.value;
                        if (_amount == 0) {
                            _amount = this.form.CreditAmount.value;
                            _Damount = this.form.DebitAmount.value;
                            _Camount = this.form.CreditAmount.value;
                        }
                    }
                    else if (this._VoucherTypeId == VistaGL.VoucherType.Transfer_Voucher.toString()) {
                        _amount = this.form.DebitAmount.value;
                        if (_amount == 0) {
                            _amount = this.form.CreditAmount.value;
                            _Damount = this.form.DebitAmount.value;
                            _Camount = this.form.CreditAmount.value;
                        }
                    }
                }
                if (Check_AccHead[0].IsCostCenterAllocate == 1) {
                    var _cItems = this.form.VoucherDtlAllocation.getItems();
                    if (_cItems.length > 1) {
                        Q.alert("Only one Sub-ledger allocation is allowed!");
                        return false;
                    }
                    if (_cItems.length == 0) {
                        Q.alert("Please add Sub-ledger!");
                        return false;
                    }
                    else {
                        var _totalCostCenterAmount = 0;
                        for (var _i = 0, _cItems_1 = _cItems; _i < _cItems_1.length; _i++) {
                            var c_item = _cItems_1[_i];
                            _totalCostCenterAmount += c_item.Amount;
                        }
                    }
                }
                this.form.CCreditAmount.value = this.form.CreditAmount.value * this.form.ConversionRate.value;
                this.form.CDebitAmount.value = this.form.DebitAmount.value * this.form.ConversionRate.value;
                if (Check_AccHead[0].AccountGroup == "Assets" || Check_AccHead[0].AccountGroup == "Expense") {
                    this.form.EffectiveValue.value = _Damount - _Camount;
                }
                else {
                    this.form.EffectiveValue.value = _Camount - _Damount;
                }
                return true;
            };
            AccVoucherDetailsEditorDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherDetailsEditorDialog);
            return AccVoucherDetailsEditorDialog;
        }(VistaGL.GridEditorDialog));
        Transaction.AccVoucherDetailsEditorDialog = AccVoucherDetailsEditorDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDetailsGrid = (function (_super) {
            __extends(AccVoucherDetailsGrid, _super);
            function AccVoucherDetailsGrid(container) {
                return _super.call(this, container) || this;
                //new Serenity.TreeGridMixin<AccVoucherDetailsRow>({
                //    grid: this,
                //    getParentId: x => x.Id,
                //    toggleField: AccVoucherDetailsRow.Fields.ChartofAccountsAccountName,
                //    initialCollapse: () => true
                //});
            }
            AccVoucherDetailsGrid.prototype.getColumnsKey = function () { return 'Transaction.AccVoucherDetails'; };
            AccVoucherDetailsGrid.prototype.getDialogType = function () { return Transaction.AccVoucherDetailsDialog; };
            AccVoucherDetailsGrid.prototype.getIdProperty = function () { return Transaction.AccVoucherDetailsRow.idProperty; };
            AccVoucherDetailsGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherDetailsRow.localTextPrefix; };
            AccVoucherDetailsGrid.prototype.getService = function () { return Transaction.AccVoucherDetailsService.baseUrl; };
            AccVoucherDetailsGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherDetailsGrid);
            return AccVoucherDetailsGrid;
        }(Serenity.EntityGrid));
        Transaction.AccVoucherDetailsGrid = AccVoucherDetailsGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var TransferDetailesEditor = (function (_super) {
            __extends(TransferDetailesEditor, _super);
            function TransferDetailesEditor(container) {
                return _super.call(this, container) || this;
            }
            TransferDetailesEditor.prototype.getColumnsKey = function () { return 'Transaction.TransferDetailes'; };
            TransferDetailesEditor.prototype.getDialogType = function () { return null; };
            TransferDetailesEditor.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherDetailsRow.localTextPrefix; };
            TransferDetailesEditor = __decorate([
                Serenity.Decorators.registerClass()
            ], TransferDetailesEditor);
            return TransferDetailesEditor;
        }(VistaGL.GridEditorBase));
        Transaction.TransferDetailesEditor = TransferDetailesEditor;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDtlAllocationDialog = (function (_super) {
            __extends(AccVoucherDtlAllocationDialog, _super);
            function AccVoucherDtlAllocationDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccVoucherDtlAllocationForm(_this.idPrefix);
                return _this;
            }
            AccVoucherDtlAllocationDialog.prototype.getFormKey = function () { return Transaction.AccVoucherDtlAllocationForm.formKey; };
            AccVoucherDtlAllocationDialog.prototype.getIdProperty = function () { return Transaction.AccVoucherDtlAllocationRow.idProperty; };
            AccVoucherDtlAllocationDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherDtlAllocationRow.localTextPrefix; };
            AccVoucherDtlAllocationDialog.prototype.getService = function () { return Transaction.AccVoucherDtlAllocationService.baseUrl; };
            AccVoucherDtlAllocationDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherDtlAllocationDialog);
            return AccVoucherDtlAllocationDialog;
        }(Serenity.EntityDialog));
        Transaction.AccVoucherDtlAllocationDialog = AccVoucherDtlAllocationDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDtlAllocationEditor = (function (_super) {
            __extends(AccVoucherDtlAllocationEditor, _super);
            function AccVoucherDtlAllocationEditor(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherDtlAllocationEditor.prototype.getColumnsKey = function () { return 'Transaction.AccVoucherDtlAllocation'; };
            AccVoucherDtlAllocationEditor.prototype.getDialogType = function () { return Transaction.AccVoucherDtlAllocationEditorDialog; };
            AccVoucherDtlAllocationEditor.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherDtlAllocationRow.localTextPrefix; };
            AccVoucherDtlAllocationEditor.prototype.initEntityDialog = function (itemType, dialog) {
                _super.prototype.initEntityDialog.call(this, itemType, dialog);
                // passing category ID from grid editor to detail dialog
                var _dialog = dialog;
                _dialog.isDrCr = this.isDrCr;
            };
            AccVoucherDtlAllocationEditor.prototype.validateEntity = function (row, id) {
                row.CostCenterId = Q.toId(row.CostCenterId);
                var sameCostCenter = Q.tryFirst(this.view.getItems(), function (x) { return x.CostCenterId === row.CostCenterId; });
                if (sameCostCenter && this.id(sameCostCenter) !== id) {
                    Q.alert('This Sub Ledger is already exist!');
                    return false;
                }
                return true;
            };
            AccVoucherDtlAllocationEditor = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherDtlAllocationEditor);
            return AccVoucherDtlAllocationEditor;
        }(VistaGL.GridEditorBase));
        Transaction.AccVoucherDtlAllocationEditor = AccVoucherDtlAllocationEditor;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDtlAllocationEditorDialog = (function (_super) {
            __extends(AccVoucherDtlAllocationEditorDialog, _super);
            function AccVoucherDtlAllocationEditorDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccVoucherDtlAllocationForm(_this.idPrefix);
                return _this;
            }
            AccVoucherDtlAllocationEditorDialog.prototype.getFormKey = function () { return Transaction.AccVoucherDtlAllocationForm.formKey; };
            AccVoucherDtlAllocationEditorDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherDtlAllocationRow.localTextPrefix; };
            AccVoucherDtlAllocationEditorDialog.prototype.onDialogOpen = function () {
                _super.prototype.onDialogOpen.call(this);
                //let subLedgerList = AccCostCentreOrInstituteInformationRow.getLookup().items;
                ////console.log(subLedgerList);
                //for (var item of subLedgerList) {
                //    this.form.CostCenterId.addItem({ id: item.Id.toString(), text: item.Name, source: null, disabled: false });
                //}
            };
            AccVoucherDtlAllocationEditorDialog.prototype.getSaveEntity = function () {
                var entity = _super.prototype.getSaveEntity.call(this);
                console.log(this.isDrCr);
                //   entity.ChartofAccountsAccountName = this.form.ChartofAccountsId.itemById[this.form.ChartofAccountsId.value].text;
                entity.CostCenterName = this.form.CostCenterId.get_text();
                if (this.isDrCr == "Cr")
                    entity.CreditAmount = entity.Amount;
                else
                    entity.DebitAmount = entity.Amount;
                return entity;
            };
            AccVoucherDtlAllocationEditorDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherDtlAllocationEditorDialog);
            return AccVoucherDtlAllocationEditorDialog;
        }(VistaGL.GridEditorDialog));
        Transaction.AccVoucherDtlAllocationEditorDialog = AccVoucherDtlAllocationEditorDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDtlAllocationGrid = (function (_super) {
            __extends(AccVoucherDtlAllocationGrid, _super);
            function AccVoucherDtlAllocationGrid(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherDtlAllocationGrid.prototype.getColumnsKey = function () { return 'Transaction.AccVoucherDtlAllocation'; };
            AccVoucherDtlAllocationGrid.prototype.getDialogType = function () { return Transaction.AccVoucherDtlAllocationDialog; };
            AccVoucherDtlAllocationGrid.prototype.getIdProperty = function () { return Transaction.AccVoucherDtlAllocationRow.idProperty; };
            AccVoucherDtlAllocationGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherDtlAllocationRow.localTextPrefix; };
            AccVoucherDtlAllocationGrid.prototype.getService = function () { return Transaction.AccVoucherDtlAllocationService.baseUrl; };
            AccVoucherDtlAllocationGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherDtlAllocationGrid);
            return AccVoucherDtlAllocationGrid;
        }(VistaGL.EntityGridBaseNew));
        Transaction.AccVoucherDtlAllocationGrid = AccVoucherDtlAllocationGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDtlBillRefDialog = (function (_super) {
            __extends(AccVoucherDtlBillRefDialog, _super);
            function AccVoucherDtlBillRefDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccVoucherDtlBillRefForm(_this.idPrefix);
                return _this;
            }
            AccVoucherDtlBillRefDialog.prototype.getFormKey = function () { return Transaction.AccVoucherDtlBillRefForm.formKey; };
            AccVoucherDtlBillRefDialog.prototype.getIdProperty = function () { return Transaction.AccVoucherDtlBillRefRow.idProperty; };
            AccVoucherDtlBillRefDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherDtlBillRefRow.localTextPrefix; };
            AccVoucherDtlBillRefDialog.prototype.getNameProperty = function () { return Transaction.AccVoucherDtlBillRefRow.nameProperty; };
            AccVoucherDtlBillRefDialog.prototype.getService = function () { return Transaction.AccVoucherDtlBillRefService.baseUrl; };
            AccVoucherDtlBillRefDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherDtlBillRefDialog);
            return AccVoucherDtlBillRefDialog;
        }(Serenity.EntityDialog));
        Transaction.AccVoucherDtlBillRefDialog = AccVoucherDtlBillRefDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDtlBillRefEditor = (function (_super) {
            __extends(AccVoucherDtlBillRefEditor, _super);
            function AccVoucherDtlBillRefEditor(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherDtlBillRefEditor.prototype.getColumnsKey = function () { return 'Transaction.AccVoucherDtlBillRef'; };
            AccVoucherDtlBillRefEditor.prototype.getDialogType = function () { return Transaction.AccVoucherDtlBillRefEditorDialog; };
            AccVoucherDtlBillRefEditor.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherDtlBillRefRow.localTextPrefix; };
            AccVoucherDtlBillRefEditor = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherDtlBillRefEditor);
            return AccVoucherDtlBillRefEditor;
        }(VistaGL.GridEditorBase));
        Transaction.AccVoucherDtlBillRefEditor = AccVoucherDtlBillRefEditor;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDtlBillRefEditorDialog = (function (_super) {
            __extends(AccVoucherDtlBillRefEditorDialog, _super);
            function AccVoucherDtlBillRefEditorDialog() {
                var _this = _super !== null && _super.apply(this, arguments) || this;
                _this.form = new Transaction.AccVoucherDtlBillRefForm(_this.idPrefix);
                return _this;
            }
            AccVoucherDtlBillRefEditorDialog.prototype.getFormKey = function () { return Transaction.AccVoucherDtlBillRefForm.formKey; };
            AccVoucherDtlBillRefEditorDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherDtlBillRefRow.localTextPrefix; };
            AccVoucherDtlBillRefEditorDialog.prototype.getNameProperty = function () { return Transaction.AccVoucherDtlBillRefRow.nameProperty; };
            AccVoucherDtlBillRefEditorDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherDtlBillRefEditorDialog);
            return AccVoucherDtlBillRefEditorDialog;
        }(VistaGL.GridEditorDialog));
        Transaction.AccVoucherDtlBillRefEditorDialog = AccVoucherDtlBillRefEditorDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherDtlBillRefGrid = (function (_super) {
            __extends(AccVoucherDtlBillRefGrid, _super);
            function AccVoucherDtlBillRefGrid(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherDtlBillRefGrid.prototype.getColumnsKey = function () { return 'Transaction.AccVoucherDtlBillRef'; };
            AccVoucherDtlBillRefGrid.prototype.getDialogType = function () { return Transaction.AccVoucherDtlBillRefDialog; };
            AccVoucherDtlBillRefGrid.prototype.getIdProperty = function () { return Transaction.AccVoucherDtlBillRefRow.idProperty; };
            AccVoucherDtlBillRefGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherDtlBillRefRow.localTextPrefix; };
            AccVoucherDtlBillRefGrid.prototype.getService = function () { return Transaction.AccVoucherDtlBillRefService.baseUrl; };
            AccVoucherDtlBillRefGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherDtlBillRefGrid);
            return AccVoucherDtlBillRefGrid;
        }(Serenity.EntityGrid));
        Transaction.AccVoucherDtlBillRefGrid = AccVoucherDtlBillRefGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
// ************************************
// FOR BANK WISE PAYMENT VOUCHER ONLY
// ************************************
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherBankWiseDialog = (function (_super) {
            __extends(AccVoucherBankWiseDialog, _super);
            function AccVoucherBankWiseDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Transaction.AccVoucherBankWiseForm(_this.idPrefix);
                _this.items_CurrencyConversionRate = VistaGL.Configurations.AccCurrencyConversionRateRow.getLookup().items;
                _this.CheckAutoVoucher = false;
                _this.AccTransactionTypeAssign = Transaction.AccTransactionTypeAssignRow.getLookup().items;
                _this._AccountingPeriod = VistaGL.Configurations.AccAccountingPeriodInformationRow.getLookup().items;
                _this.nextId = 1;
                _this.HeadId = 0;
                _this.selectedApproverId = 0;
                _this._IsCostCenterAllocate = 0;
                _this._IsBillRef = 0;
                _this.IsAutoPost = false;
                _this.transactionMode = "BANK";
                var userinfo = VistaGL.Authorization.userDefinition;
                _this.baseCurrency = userinfo.BaseCurrency;
                _this.fundControlId = userinfo.FundControlInformationId;
                _this.zoneId = userinfo.ZoneID;
                _this.userId = userinfo.EmpId; // EmployeeId
                // Comments History //mo
                _this.byId('ApplicationInformationHistory').closest('.field').hide().end().appendTo(_this.byId('TabNotes'));
                //***
                _this.form.BankAmount.element.css('background-color', '#ffd5c0');
                //Generate button
                var fieldButt = $('.AddtoGrid')[0];
                fieldButt.innerHTML = "<label class=\"caption\" title=\"\"></label>\n                <a href= \"javascript:;\" class=\"btn btn-default groupAdd\"> <i class=\"fa fa-fw fa-plus-circle\"> </i>Add to Grid</a>\n            ";
                _this.form.ChequeRegisterId.inplaceCreateClick = (function () {
                    if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                        //let accCheckRegDialog = new AccChequeRegisterDialog();
                        //if (this.form.ChequeRegisterId.value == "") {
                        //    let entity_chequeRegister: AccChequeRegisterRow;
                        //    entity_chequeRegister = {};
                        //    //entity_chequeRegister.Id = +this.form.ChequeRegisterId.value;
                        //    entity_chequeRegister.ChequeIssueDate = this.form.VoucherDate.value;
                        //    entity_chequeRegister.ChequeDate = this.form.VoucherDate.value;
                        //    entity_chequeRegister.ChequeType = 'AccountPayee';
                        //    entity_chequeRegister.Remarks = this.form.AccountHeadBankCash.value;
                        //    accCheckRegDialog.dig = this;
                        //    accCheckRegDialog._isFromVoucher = true;
                        //    accCheckRegDialog._isPaymentOrReceiptVoucherOnly = false;
                        //    accCheckRegDialog.loadEntityAndOpenDialog(entity_chequeRegister);
                        //}
                        //else {
                        //    accCheckRegDialog.loadByIdAndOpenDialog(this.form.ChequeRegisterId.value);
                        //}
                    }
                    else if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                        //
                        var chequeRecRegDialog = new Transaction.AccChequeReceiveRegisterDialog();
                        if (_this.form.ChequeRegisterId.value == "") {
                            var entity_chequeRecRegister = void 0;
                            entity_chequeRecRegister = {};
                            entity_chequeRecRegister.ChequeReceiveDate = _this.form.VoucherDate.value;
                            entity_chequeRecRegister.ChequeDate = _this.form.VoucherDate.value;
                            entity_chequeRecRegister.ChequeType = 'AccountPayee';
                            chequeRecRegDialog.dig = _this;
                            chequeRecRegDialog._isFromVoucher = true;
                            chequeRecRegDialog._isPaymentOrReceiptVoucherOnly = false;
                            chequeRecRegDialog.loadEntityAndOpenDialog(entity_chequeRecRegister);
                        }
                        else {
                            chequeRecRegDialog.loadByIdAndOpenDialog(_this.form.ChequeRegisterId.value);
                        }
                    }
                });
                //added Nazrul
                //var a = document.createElement('a');
                //var i = document.createElement('b');
                //a.appendChild(i);
                //a.title = "Calculate";
                //a.href = "javascript:;";
                //a.className = "inplace-button inplace-create";
                //a.id = "calculate";
                //$('.CreditAmount')[0].appendChild(a);
                //$("#calculate").click(function () {
                //    var dlg = new VistaGL.Transaction.selectCalculationDialog();
                //    dlg.dialogOpen();
                //});
                $('.CalculationAmount').hide();
                $('.CalculationRate').hide();
                $('.Type').hide();
                var checkbox = document.createElement('input');
                checkbox.type = "checkbox";
                checkbox.id = "calculate";
                var label = document.createElement('label');
                label.appendChild(document.createTextNode('Calculate(%)'));
                $('.CreditAmount')[0].appendChild(checkbox);
                $('.CreditAmount')[0].appendChild(label);
                $('.CreditAmount > label:nth-child(1)').width("60px");
                $('#calculate').click(function () {
                    if ($('#calculate').is(":checked")) {
                        $('.CalculationAmount').show();
                        $('.CalculationRate').show();
                        $('.Type').show();
                        Serenity.EditorUtils.setReadonly($('.DebitAmount input'), true);
                        Serenity.EditorUtils.setReadonly($('.CreditAmount input'), true);
                        $('#calculate').removeAttr("disabled");
                    }
                    else {
                        $('.CalculationAmount').hide();
                        $('.CalculationRate').hide();
                        $('.Type').hide();
                        $('.CalculationAmount input').val('');
                        $('.CalculationRate input').val('');
                        $('.Type').val('');
                        Serenity.EditorUtils.setReadonly($('.DebitAmount input'), false);
                        Serenity.EditorUtils.setReadonly($('.CreditAmount input'), false);
                    }
                });
                //-- *****************************************************
                //-- Highlight caption label on focus of input control
                //-- *****************************************************
                $('input, textarea').on('blur', function () {
                    //
                    if ($(document.activeElement).hasClass('select2-offscreen')) {
                        // -- have written blur event for select2 below.
                    }
                    else {
                        $("label[for='" + $(this).attr('id') + "']").removeClass('backColorofLabel');
                    }
                });
                $('input, textarea').on('focus', function () {
                    //
                    if ($(document.activeElement).hasClass('select2-offscreen')) {
                        // -- have written focus event for select2 below.
                    }
                    else {
                        //
                        $("label[for='" + $(document.activeElement).attr('id') + "']").addClass('backColorofLabel');
                        window.setTimeout(function () {
                            $(document.activeElement).select();
                        }, 0);
                    }
                });
                $('.select2-offscreen').on('blur', function () {
                    //
                    $('label.backColorofLabel').each(function () {
                        $(this).removeClass('backColorofLabel');
                    });
                });
                $('.select2-offscreen').on('focus', function () {
                    //
                    $(this).select2('open');
                    if (($(this)).parent()[0].childNodes[0].nodeName == "LABEL") {
                        ($(this)).parent()[0].childNodes[0].attributes['class'].nodeValue = 'caption backColorofLabel';
                    }
                });
                $('.select2-offscreen').on("select2-open", function () {
                    if (($(this)).parent()[0].childNodes[0].nodeName == "LABEL") {
                        ($(this)).parent()[0].childNodes[0].attributes['class'].nodeValue =
                            'caption backColorofLabel';
                    }
                });
                return _this;
                //----------************//
            }
            AccVoucherBankWiseDialog.prototype.getFormKey = function () { return Transaction.AccVoucherBankWiseForm.formKey; };
            AccVoucherBankWiseDialog.prototype.getIdProperty = function () { return Transaction.AccVoucherInformationRow.idProperty; };
            AccVoucherBankWiseDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherInformationRow.localTextPrefix; };
            AccVoucherBankWiseDialog.prototype.getNameProperty = function () { return Transaction.AccVoucherInformationRow.nameProperty; };
            AccVoucherBankWiseDialog.prototype.getService = function () { return Transaction.AccVoucherInformationService.baseUrl; };
            AccVoucherBankWiseDialog.prototype.onDialogOpen = function () {
                var _this = this;
                _super.prototype.onDialogOpen.call(this);
                // Maximize the dialog
                this.element.closest('.ui-dialog').find('.ui-dialog-titlebar-maximize').click();
                q.initDetailEditor(this, this.form.VoucherDetails);
                if (this.HeadId != 0) {
                    this.loadAccountHeadBankCash();
                    this.form.AccountHeadBankCash.value = this.HeadId.toString();
                }
                this.form.ConversionRate.element.hide();
                this.form.ConversionAmount.element.hide();
                this.form.CostCenterTypeId.getGridField().hide();
                this.form.ParentId.getGridField().hide();
                this.form.FileNo.element.hide();
                this.form.PageNo.element.hide();
                this.form.VoucherDetails.parentDialog = this;
                this.items_ChartofAccounts = Q.getLookup('Configurations.AccChartofAccounts_Lookup').items;
                this._VoucherConfiguration = Q.getLookup('Transaction.AccVoucherConfiguration_Lookup').items;
                this.toolbar.findButton('MoneyReceipt').hide();
                var fieldpayToOrReceiveFrom = $('.PaytoOrReciveFrom .caption')[0];
                Serenity.EditorUtils.setReadonly(this.element.find(this.form.VoucherNo.element), true);
                Serenity.EditorUtils.setReadonly(this.element.find(this.form.TransactionMode.element), true);
                var transactionType = VistaGL.Configurations.AccTransactionTypeRow.getLookup().items;
                var transactionTypeId = '';
                $('.ChequeBookId').hide();
                $('.ChequeNumhdn').hide();
                $('.ChequeType').hide();
                $('.ChequeDate').hide();
                this.form.IsBankWisePaymentVoucher.value = false;
                this.form.IsBankWiseReceiptVoucher.value = false;
                // title change Voucher type wise
                if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                    this.set_dialogTitle("Bank wise Payment Voucher");
                    this.form.IsBankWisePaymentVoucher.value = true;
                    $('.ChequeBookId').show();
                    $('.ChequeNumhdn').show();
                    $('.ChequeType').show();
                    $('.ChequeDate').show();
                    fieldpayToOrReceiveFrom.innerHTML = "<sup title=\"this field is required\">*</sup>Pay To";
                    //added by nazrul
                    this.form.CreditAmount.element.css("background-color", "#E3B8E4");
                    var tt = transactionType.filter(function (x) { return x.VoucherTypeId == VistaGL.VoucherType.Payment_Voucher && x.IsbyDefault == true; })[0];
                    transactionTypeId = tt.Id.toString();
                    this.form.TransactionType.value = "PAYMENT";
                    this.form.VoucherType.value = "Debit";
                    //
                }
                else if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                    this.set_dialogTitle("Bank wise Receipt Voucher");
                    this.form.IsBankWiseReceiptVoucher.value = true;
                    $('.ChequeRegisterId').show();
                    $('.LinkedWithAutoJV').hide();
                    $('.PowerOfAttorney').hide();
                    $('.BudgetAmountCOA').hide();
                    $('.BudgetAmountSUbledger').hide();
                    $('.NOAId').hide();
                    $('.CostCentreId').removeClass('width9');
                    $('.CostCentreId').addClass('width12');
                    //  this.AccChequeReceiveRegister = Q.getLookup('Transaction.AccChequeReceiveRegister_Lookup').items;
                    fieldpayToOrReceiveFrom.innerHTML = "Receive From";
                    $('.PaytoForBankAdvice').hide();
                    this.toolbar.findButton('MoneyReceipt').show();
                    //Serenity.EditorUtils.setReadonly(this.element.find(this.form.DebitAmount.element), true);
                    //added by nazrul
                    this.form.DebitAmount.element.css("background-color", "#E3B8E4");
                    var tt_1 = transactionType.filter(function (x) { return x.VoucherTypeId == VistaGL.VoucherType.Receipt_Voucher && x.IsbyDefault == true; })[0];
                    transactionTypeId = tt_1.Id.toString();
                    this.form.TransactionType.value = "RECEIPT";
                    this.form.VoucherType.value = "Credit";
                    //
                }
                this.form.TransactionTypeEntityId.value = transactionTypeId;
                if (this.isNew()) {
                    //
                    this.form.ChequeDate.value = this.form.VoucherDate.value;
                    this.VoucherDateChange();
                    this.setNewVoucherNumber(transactionTypeId);
                }
                this.loadAccountHead();
                this.form.TransactionMode.value = this.transactionMode.toString();
                this.loadAccountHeadBankCash();
                $('.VoucherDetails .grid-toolbar').hide();
                $('.MultiCurrency .caption').hide();
                $('.groupAdd').click(function (e) { return _this.addtoGrid(); });
                // $('.ConversionRate .editor').css("width", "200px !important").removeClass("editor");
                $('.ConversionRate .editor').removeClass("editor");
                var fieldButt1 = $('.ConversionRate')[0];
                var searchCreditInput;
                searchCreditInput = document.createElement('label');
                searchCreditInput.id = 'lbConversionRate';
                fieldButt1.appendChild(searchCreditInput);
                this.form.ChequeRegisterId.clearItems();
                //--------------------
                //-- Change events
                //--------------------
                this.form.TransactionTypeEntityId.changeSelect2(function (p) {
                    //this.form.AccountHead.clearItems();
                    //this.form.AccountHeadBankCash.clearItems();
                    if (_this.isNew()) {
                        _this.setNewVoucherNumber(transactionTypeId);
                    }
                    _this.loadAccountHead();
                });
                this.form.VoucherDate.change(function (p) {
                    _this.VoucherDateChange();
                    if (_this.isNew()) {
                        _this.setNewVoucherNumber(transactionTypeId);
                    }
                });
                this.form.AccountHeadBankCash.changeSelect2(function (p) {
                    _this.form.ChequeRegisterId.value = "";
                    _this.form.CreditAmount.value = 0;
                    _this.form.DebitAmount.value = 0;
                    Serenity.EditorUtils.setReadonly(_this.element.find(_this.form.ChequeRegisterId.element), false);
                    _this.loadCheque();
                    _this.populateChequeBook(+_this.form.AccountHeadBankCash.value);
                });
                this.form.ChequeBookId.changeSelect2(function (p) {
                    _this.populateChequeNumber(+_this.form.ChequeBookId.value);
                });
                this.form.ChequeNumhdn.changeSelect2(function (p) {
                    _this.form.ChequeNo.value = _this.form.ChequeNumhdn.get_text();
                    if (_this.form.ChequeNo.value == "") {
                        console.log('populating cheque book...');
                        _this.populateChequeBook(+_this.form.AccountHeadBankCash.value);
                    }
                });
                this.form.PaytoOrReciveFrom.change(function (e) {
                    //
                    _this.changePvSubLedger();
                });
                this.form.AccountHead.changeSelect2(function (p) {
                    var Check_AccHead = _this.items_ChartofAccounts.filter(function (f) { return f.Id == +_this.form.AccountHead.value; });
                    if (Check_AccHead[0].IsCostCenterAllocate == 1) {
                        Serenity.EditorUtils.setReadonly(_this.element.find(_this.form.MultipleCostCenter.element), false);
                    }
                    else {
                        Serenity.EditorUtils.setReadonly(_this.element.find(_this.form.MultipleCostCenter.element), true);
                    }
                    _this.setMultiCurrencyCurrency(Check_AccHead[0].MultiCurrencyCurrency, Check_AccHead[0].MultiCurrencyId, true);
                    //var _currency = this.baseCurrency;
                    //if (Check_AccHead[0].MultiCurrencyCurrency == _currency || Check_AccHead[0].MultiCurrencyCurrency == null) {
                    //    this.form.MultiCurrency.value = _currency;
                    //    this.form.ConversionRate.value = 1;
                    //    $("#lbConversionRate").text(_currency);
                    //    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ConversionAmount.element), true);
                    //    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ConversionRate.element), true);
                    //}
                    //else {
                    //    this.form.MultiCurrency.value = Check_AccHead[0].MultiCurrencyCurrency;
                    //    var MultiCurrency_amount = this.items_CurrencyConversionRate.filter(f => f.FirstCurrency == Check_AccHead[0].MultiCurrencyId);
                    //    this.form.ConversionRate.value = MultiCurrency_amount[0].SecondAmout;
                    //    $("#lbConversionRate").text(MultiCurrency_amount[0].SecondCurrencyCurrency);
                    //}
                    //if (Check_AccHead[0].CoaMapping == "BANK") {
                    //    this.form.ChequeRegisterId.value = "";
                    //    // this.form.PaytoOrReciveFrom.value = "";
                    //    this.form.CreditAmount.value = 0;
                    //    this.form.DebitAmount.value = 0;
                    //    //   this.form.Description.value = "";
                    //    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ChequeRegisterId.element), false);
                    //    this.LoadCheque();
                    //} else {
                    //    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ChequeRegisterId.element), true);
                    //    this.form.ChequeRegisterId.value = "";
                    //    //    this.form.PaytoOrReciveFrom.value = "";
                    //    this.form.CreditAmount.value = 0;
                    //    this.form.DebitAmount.value = 0;
                    //    //  this.form.Description.value = "";
                    //}
                    if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                        //
                        if (Check_AccHead[0].CoaMapping == "BANK" || Check_AccHead[0].CoaMapping == "CASH") {
                            //Serenity.EditorUtils.setReadonly(this.element.find(this.form.DebitAmount.element), true);
                            //Serenity.EditorUtils.setReadonly(this.element.find(this.form.CreditAmount.element), false);
                            _this.form.CreditAmount.element[0].setSelectionRange(0, 100);
                        }
                        else {
                            //Serenity.EditorUtils.setReadonly(this.element.find(this.form.DebitAmount.element), false);
                            //Serenity.EditorUtils.setReadonly(this.element.find(this.form.CreditAmount.element), true);
                            _this.form.DebitAmount.element[0].setSelectionRange(0, 100);
                        }
                        //
                    }
                    else if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                        //
                        if (Check_AccHead[0].CoaMapping == "BANK" || Check_AccHead[0].CoaMapping == "CASH") {
                            //Serenity.EditorUtils.setReadonly(this.element.find(this.form.CreditAmount.element), true);
                            //Serenity.EditorUtils.setReadonly(this.element.find(this.form.DebitAmount.element), false);
                            _this.form.DebitAmount.element[0].setSelectionRange(0, 100);
                        }
                        else {
                            //Serenity.EditorUtils.setReadonly(this.element.find(this.form.CreditAmount.element), false);
                            //Serenity.EditorUtils.setReadonly(this.element.find(this.form.DebitAmount.element), true);
                            _this.form.CreditAmount.element[0].setSelectionRange(0, 100);
                        }
                        //
                    }
                    else if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Journal_Voucher.toString()) {
                        //
                        var _AccTransactionTypeAssign = _this.AccTransactionTypeAssign
                            .filter(function (p) { return p.CoaId == +_this.form.AccountHead.value
                            && p.ParentId == +_this.form.TransactionTypeEntityId.value; });
                        if (_AccTransactionTypeAssign.length > 0) {
                            if (_AccTransactionTypeAssign[0].TrType == "C") {
                                _this.form.CreditAmount.element[0].setSelectionRange(0, 100);
                            }
                            else {
                                _this.form.DebitAmount.element[0].setSelectionRange(0, 100);
                            }
                        }
                        //
                    }
                    _this.getBudgetAmount(_this.form.AccountHead.value, true, false);
                });
                this.form.Type.changeSelect2(function (p) {
                    var clAmount = _this.form.CalculationAmount.value;
                    var clRate = _this.form.CalculationRate.value;
                    if (_this.form.Type.value == 'Dr' && clAmount >= 0 && clRate >= 0) {
                        _this.form.DebitAmount.value = clAmount * (clRate / 100);
                        _this.form.CreditAmount.value = 0;
                    }
                    else if (_this.form.Type.value == 'Cr' && clAmount >= 0 && clRate >= 0) {
                        _this.form.CreditAmount.value = clAmount * (clRate / 100);
                        _this.form.DebitAmount.value = 0;
                    }
                });
                this.form.DebitAmount.change(function (p) {
                    _this.form.ConversionAmount.value = _this.form.ConversionRate.value * _this.form.DebitAmount.value;
                    _this.form.CreditAmount.value = 0;
                });
                this.form.ChequeRegisterId.changeSelect2(function (p) {
                    console.log('This ChequeRegisterId.changeSelect2 event should not call in this dialog!');
                    if (_this.form.ChequeRegisterId.value != "") {
                        if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                            //
                            var AccChequeReceiveRegister = void 0;
                            Q.reloadLookup("Transaction.AccChequeReceiveRegister_Lookup");
                            AccChequeReceiveRegister = Q.getLookup('Transaction.AccChequeReceiveRegister_Lookup').items;
                            var _ReceiveFrom = AccChequeReceiveRegister.filter(function (p) { return p.Id == +_this.form.ChequeRegisterId.value; });
                            _this.form.PaytoOrReciveFrom.value = _ReceiveFrom[0].RecieveFrom;
                            _this.form.BankAmount.value = _ReceiveFrom[0].Amount;
                            //this.form.CreditAmount.value = _PayTo[0].Amount;
                            _this.form.Description.value = _ReceiveFrom[0].Remarks;
                            _this.form.ConversionAmount.value = _this.form.ConversionRate.value * _this.form.DebitAmount.value;
                            //
                        }
                    }
                    else {
                        //this.form.PaytoOrReciveFrom.value = "";
                        _this.form.CreditAmount.value = 0;
                        _this.form.DebitAmount.value = 0;
                        _this.form.Description.value = "";
                    }
                });
                this.form.ConversionRate.change(function (p) {
                    _this.form.ConversionAmount.value = _this.form.ConversionRate.value * (_this.form.DebitAmount.value + _this.form.CreditAmount.value);
                });
                this.form.CostCentreId.changeSelect2(function (p) {
                    _this.getBudgetAmount(_this.form.CostCentreId.value, false, false);
                });
                this.form.AutoPV_AccountHead.changeSelect2(function (p) {
                    _this.getBudgetAmount(_this.form.AutoPV_AccountHead.value, true, true);
                });
                this.form.AutoPV_CostCentreId.changeSelect2(function (p) {
                    _this.getBudgetAmount(_this.form.AutoPV_CostCentreId.value, false, true);
                });
                //--------------------
                //-- Keypress events
                //--------------------
                this.form.TransactionTypeEntityId.getGridField().keyup(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.VoucherDate.element.focus();
                    }
                });
                this.form.VoucherDate.element.keydown(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.AccountHeadBankCash.element.focus();
                        return false;
                    }
                });
                this.form.AccountHeadBankCash.getGridField().keyup(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.ChequeBookId.element.focus();
                    }
                });
                this.form.ChequeBookId.getGridField().keyup(function (e) {
                    if (e.keyCode == 13) {
                        window.setTimeout(function () { _this.form.ChequeNumhdn.element.focus(); }, 500);
                    }
                });
                this.form.ChequeNumhdn.getGridField().keyup(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.ChequeType.element.focus();
                    }
                });
                this.form.ChequeType.getGridField().keyup(function (e) {
                    if (e.keyCode == 13) {
                        //
                        _this.form.ChequeDate.element.focus();
                    }
                });
                this.form.ChequeDate.element.keydown(function (e) {
                    if (e.keyCode == 13) {
                        //
                        _this.form.ChequeRemarks.element.focus();
                    }
                });
                this.form.ChequeRemarks.element.keydown(function (e) {
                    if (e.keyCode == 13) {
                        //
                        _this.form.BankAmount.element.focus();
                    }
                });
                this.form.BankAmount.element.keydown(function (e) {
                    if (e.keyCode == 13) {
                        //
                        _this.form.PaytoOrReciveFrom.element.focus();
                        return false;
                    }
                });
                var insidePayto = 0;
                this.form.PaytoOrReciveFrom.element.keyup(function (e) {
                    //
                    if (e.keyCode == 13) {
                        if (insidePayto == 0) {
                            insidePayto = 1;
                            return e;
                        }
                        _this.form.PowerofAttorney.element.focus();
                        insidePayto = 0;
                    }
                });
                this.form.PowerofAttorney.element.keydown(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.NOAId.element.focus();
                        //
                    }
                });
                this.form.NOAId.getGridField().keyup(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.LinkedWithAutoJV.element.focus();
                    }
                });
                this.form.ChequeRegisterId.getGridField().keyup(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.PowerofAttorney.element.focus();
                    }
                });
                this.form.LinkedWithAutoJV.element.click(function (e) {
                    if (!_this.form.LinkedWithAutoJV.value) {
                        //
                        _this.form.AutoPV_CostCentreId.getGridField().hide();
                        _this.form.AutoPV_AccountHead.getGridField().hide();
                        _this.form.AutoBudgetAmountCOA.getGridField().hide();
                        _this.form.AutoBudgetAmountSUbledger.getGridField().hide();
                        //this.form.BudgetAmountCOA.getGridField().show();
                        //this.form.BudgetAmountSUbledger.getGridField().show();                   
                        //
                    }
                    else {
                        //
                        _this.form.AutoPV_CostCentreId.getGridField().show();
                        _this.form.AutoPV_AccountHead.getGridField().show();
                        _this.form.AutoBudgetAmountCOA.getGridField().show();
                        _this.form.AutoBudgetAmountSUbledger.getGridField().show();
                        //this.form.BudgetAmountCOA.getGridField().hide();
                        //this.form.BudgetAmountSUbledger.getGridField().hide();                   
                    }
                });
                this.form.LinkedWithAutoJV.element.keydown(function (e) {
                    if (e.keyCode == 13) {
                        if (_this.form.LinkedWithAutoJV.value) {
                            _this.form.AutoPV_AccountHead.element.focus();
                        }
                        else {
                            _this.form.AccountHead.element.focus();
                        }
                    }
                });
                this.form.AutoPV_AccountHead.getGridField().keyup(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.AutoPV_CostCentreId.element.focus();
                    }
                });
                this.form.AutoPV_CostCentreId.getGridField().keyup(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.AccountHead.element.focus();
                    }
                });
                this.form.AccountHead.getGridField().keyup(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.CostCentreId.element.focus();
                    }
                });
                this.form.CostCentreId.getGridField().keyup(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.DebitAmount.element.focus();
                    }
                });
                this.form.DebitAmount.element.keydown(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.CreditAmount.element.focus();
                    }
                });
                this.form.CreditAmount.element.keydown(function (e) {
                    if (e.keyCode == 13) {
                        e.preventDefault();
                        $('.groupAdd').focus();
                        return false;
                    }
                });
                this.form.DDescription.element.keydown(function (e) {
                    if (e.keyCode == 13) {
                        e.preventDefault();
                        $('.groupAdd').focus();
                        return false;
                    }
                });
                if (!this.isNew() || this.isEditMode()) {
                    if (this.form.approveStatus.value == "")
                        this.form.approveStatus.value = Number(VistaGL.ApprovalStatus.Draft).toString();
                    this.toolbar.findButton('apply-changes-button').hide();
                    this.toolbar.findButton('expand-all-button').hide(); // Save & Next Button
                    this.toolbar.findButton('send-button').hide();
                    this.toolbar.findButton('save-and-close-button').hide();
                    if (this.form.approveStatus.value == VistaGL.ApprovalStatus.Approved.toString()) {
                        $('.ApproverId').hide();
                    }
                    if (this.form.approveStatus.value == VistaGL.ApprovalStatus.Draft.toString() ||
                        this.form.approveStatus.value == VistaGL.ApprovalStatus.Regret.toString()) {
                        //
                        this.toolbar.findButton('send-button').show();
                        this.toolbar.findButton('save-and-close-button').show();
                    }
                    if (this.form.approveStatus.value == VistaGL.ApprovalStatus.Submit.toString() ||
                        this.form.approveStatus.value == VistaGL.ApprovalStatus.Recommend.toString()) {
                        // -- IF VOUCHER "SUBMITTED AND CURRENT" USER IS NOT SAME THEN
                        if (this.entity.createdUserId != this.userId.toString()) {
                            //
                            var criteria1 = Serenity.Criteria.and([['ApplicationId'], '=', this.entity.Id], [['ApproverId'], '=', this.userId]);
                            Transaction.ApvApplicationInformationService.List({ Criteria: criteria1 }, function (response1) {
                                if (response1.Entities != undefined) {
                                    if (response1.Entities.length > 0) {
                                        if (response1.Entities.length == 1) {
                                            _this.toolbar.findButton('send-button').show();
                                            _this.toolbar.findButton('save-and-close-button').show();
                                        }
                                        else {
                                            var anyPendingFound = response1.Entities.filter(function (f) { return f.ApprovalStatusId == null; });
                                            if (anyPendingFound != null && anyPendingFound.length > 0) {
                                                _this.toolbar.findButton('send-button').show();
                                                _this.toolbar.findButton('save-and-close-button').show();
                                            }
                                        }
                                    }
                                }
                            });
                        }
                        else {
                            Q.notifyWarning("This voucher is already submitted/recommended! You cannot edit at this moment!");
                            this.toolbar.findButton('send-button').hide();
                            this.toolbar.findButton('save-and-close-button').hide();
                        }
                    }
                    $('.LinkedWithAutoJV').hide();
                    if (this.entity.LinkedWithAutoJV) {
                        this.loadAccountHead();
                        this.sumDebitCredit();
                        $('.AutoJVVoucherNo').hide();
                        Transaction.AccVoucherInformationService.List({ Criteria: [['Id'], '=', this.entity.LinkedVoucherIdForAutoJV] }, function (response) {
                            _this.CheckAutoVoucher = true;
                            $('.AutoJVVoucherNo').show();
                            var linkedVNo = $('.AutoJVVoucherNo')[0];
                            linkedVNo.innerHTML = '<div style="padding-top: 3px; color: blue;">' +
                                '<i><span>Linked Journal Voucher No:&nbsp;&nbsp;</span><u><a href= "JournalVoucher#edit/Id" data-item-type="Transaction.JournalVoucher" data-item-id="Id" class="LinkedJVNo">' + response.Entities[0].VoucherNo + '</a></u></i>' +
                                '</div>';
                            $('.LinkedJVNo').attr({
                                'href': 'JournalVoucher#edit/' + _this.entity.LinkedVoucherIdForAutoJV.toString(),
                                'data-item-id': _this.entity.LinkedVoucherIdForAutoJV.toString()
                            });
                        });
                        this.form.LinkedWithAutoJV.value = this.entity.LinkedWithAutoJV;
                        $('.AccountHead').hide();
                        $('.CostCenterTypeId').hide();
                        $('.ParentId').hide();
                        $('.CostCentreId').hide();
                        $('.MultipleCostCenter').hide();
                        $('.DebitAmount').hide();
                        $('.CreditAmount').hide();
                        $('.CalculationRate').hide();
                        $('.CalculationAmount').hide();
                        $('.DDescription').hide();
                        $('.AddtoGrid').hide();
                    }
                    // POPULATE CHEQUE INFO IN EDIT MODE
                    if (this.entity.ChequeRegisterId != null) {
                        VistaGL.Transaction.AccChequeRegisterService.List({ Criteria: [['id'], '=', this.entity.ChequeRegisterId] }, function (r) {
                            var chqReg;
                            chqReg = r.Entities;
                            if (chqReg.length > 0) {
                                //this.form.AccountHeadBankCash.value =
                                var lstEntity = chqReg[chqReg.length - 1];
                                _this.form.ChequeBookId.value = lstEntity.ChequeBookId.toString();
                                _this.form.ChequeType.value = lstEntity.ChequeType;
                                _this.form.BankAmount.value = lstEntity.Amount;
                                _this.form.ChequeDate.value = lstEntity.ChequeDate;
                                _this.form.PaytoForBankAdvice.value = lstEntity.PayTo;
                                //this.PopulateChequeNumber();
                                _this.form.ChequeNumhdn.addItem({
                                    id: lstEntity.ChequeNumhdn.toString(),
                                    text: lstEntity.ChequeNo.toString(),
                                    source: null,
                                    disabled: false
                                });
                                _this.form.ChequeNo.value = lstEntity.ChequeNo.toString();
                                _this.form.ChequeNumhdn.value = lstEntity.ChequeNumhdn.toString();
                            }
                        });
                    }
                    // END
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.TransactionTypeEntityId.element), true);
                    this.form.ClearDate.value = this.entity.VoucherDetails.filter(function (vd) { return vd.IsAccountHeadBankCash == true; })[0].ClearDate;
                    this.form.IsClearDate.value = this.entity.VoucherDetails.filter(function (vd) { return vd.IsAccountHeadBankCash == true; })[0].IsClearDate;
                    // SHOW COST CENTER WITH CHART OF ACCOUNT
                    this.entity.VoucherDetails = this.entity.VoucherDetails.filter(function (vd) { return vd.IsAccountHeadBankCash == false; });
                    var vouDtl = this.entity.VoucherDetails;
                    for (var i = 0; i < vouDtl.length; i++) {
                        var vouDtlTemp = vouDtl[i];
                        var costCenterTemp = '';
                        for (var _i = 0, _a = vouDtlTemp.VoucherDtlAllocation; _i < _a.length; _i++) {
                            var vouAllItem = _a[_i];
                            costCenterTemp += vouAllItem.CostCenterName + ', ';
                        }
                        if (vouDtlTemp.VoucherDtlAllocation.length > 0) {
                            this.entity.VoucherDetails[i].ChartofAccountsAccountName = vouDtlTemp.ChartofAccountsAccountName + ' (' + costCenterTemp + ')';
                        }
                        else {
                            this.entity.VoucherDetails[i].ChartofAccountsAccountName = vouDtlTemp.ChartofAccountsAccountName;
                        }
                        var id = this.entity.VoucherDetails[i].__id;
                        if (id == null) {
                            this.entity.VoucherDetails[i].__id = this.nextId++;
                        }
                    }
                    this.form.VoucherDetails.setItems(this.entity.VoucherDetails);
                    // END
                    this.form.Amount.value = this.entity.Amount;
                    this.form.BankAmount.value = this.entity.Amount;
                    this.form.AccountBankCashAmount.value = this.entity.Amount;
                    this.form.AccountBankCash.value = this.form.AccountHeadBankCash.get_text();
                    this.form.AmountInWords.value = this.entity.AmountInWords;
                    //
                } // END OF EDIT MOOD
                else {
                    this.VoucherDateChange();
                    //this.toolbar.findButton('send-button').hide();
                    this.form.ChequeBookId.clearItems();
                    this.form.ChequeBookId.value = "";
                }
                this.form.VoucherDate.element.focus();
                this.form.VoucherDate.element.select();
            };
            AccVoucherBankWiseDialog.prototype.addtoGrid = function () {
                var _this = this;
                if (this.transactionMode.toString() == "") {
                    Q.warning("Please select Transaction Mode.");
                    return;
                }
                if (this.form.AccountHeadBankCash.value == "") {
                    Q.warning("Please select Bank Head!");
                    return;
                }
                if (this.form.AccountHead.value == "") {
                    Q.warning("Please select Account Head.");
                    return;
                }
                if ((this.form.DebitAmount.value.toString() == "NaN" && this.form.CreditAmount.value.toString() == "NaN")
                    || (this.form.DebitAmount.value <= 0 && this.form.CreditAmount.value <= 0)) {
                    this.form.DebitAmount.element.focus();
                    this.form.DebitAmount.element.select();
                    Q.warning("Please enter Debit or Credit Amount 1.");
                    return;
                }
                if (this.form.DebitAmount.value > 0 && this.form.CreditAmount.value > 0) {
                    this.form.DebitAmount.element.focus();
                    this.form.DebitAmount.element.select();
                    Q.warning("Please enter Debit or Credit Amount 2.");
                    return;
                }
                var Check_AccHead = this.items_ChartofAccounts.filter(function (f) { return f.Id == +_this.form.AccountHead.value; });
                var _amount = 0;
                var _Damount = 0;
                var _Camount = 0;
                this._IsBillRef = Check_AccHead[0].IsBillRef;
                this._IsCostCenterAllocate = Check_AccHead[0].IsCostCenterAllocate;
                if (Check_AccHead[0].CoaMapping == undefined) {
                    if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                        if (this.form.DebitAmount.value > 0) {
                            _amount = this.form.DebitAmount.value;
                            _Damount = this.form.DebitAmount.value;
                        }
                        else {
                            _amount = this.form.CreditAmount.value;
                            _Camount = this.form.CreditAmount.value;
                        }
                    }
                    else if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                        if (this.form.CreditAmount.value > 0) {
                            _amount = this.form.CreditAmount.value;
                            _Camount = this.form.CreditAmount.value;
                        }
                        else {
                            _amount = this.form.DebitAmount.value;
                            _Damount = this.form.DebitAmount.value;
                        }
                    }
                }
                else {
                    if (Check_AccHead[0].CoaMapping != "BANK") {
                        Q.warning("Please select Bank Head.");
                        return;
                    }
                    if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                        if (this.form.CreditAmount.value > 0) {
                            _amount = this.form.CreditAmount.value;
                            _Damount = this.form.CreditAmount.value;
                        }
                        else {
                            _amount = this.form.DebitAmount.value;
                            _Damount = this.form.DebitAmount.value;
                        }
                    }
                    else if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                        if (this.form.DebitAmount.value > 0) {
                            _amount = this.form.DebitAmount.value;
                            _Camount = this.form.DebitAmount.value;
                        }
                        else {
                            _amount = this.form.CreditAmount.value;
                            _Camount = this.form.CreditAmount.value;
                        }
                    }
                }
                var _items = this.form.VoucherDetails.getItems();
                this._VoucherDtlAllocation = [];
                if (Check_AccHead[0].IsCostCenterAllocate == 1) {
                    if (this.form.CostCentreId.value != "") {
                        this._VoucherDtlAllocation.push({
                            CostCenterId: +this.form.CostCentreId.value,
                            CostCenterTypeId: +this.form.CostCenterTypeId.value,
                            CostCenterParentId: +this.form.ParentId.value,
                            Amount: _amount,
                            DebitAmount: _Damount,
                            CreditAmount: _Camount,
                            CostCenterName: this.form.CostCentreId.get_text()
                        });
                    }
                    else if (this.form.MultipleCostCenter.value) { }
                    else {
                        Q.alert('Please select Sub Ledger!');
                        return;
                    }
                }
                var subledger;
                if (this.form.CostCentreId.get_text() != '' && this.form.CostCentreId.get_text() != undefined) {
                    subledger = ' (' + this.form.CostCentreId.get_text() + ')';
                }
                else {
                    subledger = '';
                }
                var _details;
                _details = {};
                _details.ChartofAccountsAccountName = this.form.AccountHead.get_text() + subledger,
                    _details.ChartofAccountsId = +this.form.AccountHead.value;
                _details.CreditAmount = this.form.CreditAmount.value;
                _details.DebitAmount = this.form.DebitAmount.value;
                _details.Description = this.form.DDescription.value;
                _details.VoucherDtlAllocation = this._VoucherDtlAllocation;
                _details.ConversionAmount = this.form.ConversionAmount.value;
                _details.ConversionRate = this.form.ConversionRate.value;
                _details.CalculationRate = this.form.CalculationRate.value;
                _details.CalculationAmount = this.form.CalculationAmount.value;
                if (this.form.ChequeRegisterId.value != "") {
                    _details.ChequeRegisterId = +this.form.ChequeRegisterId.value;
                }
                _details.BankAccountInformationId = +this.form.BankAccountInformationId.value;
                _details.CCreditAmount = this.form.CreditAmount.value * this.form.ConversionRate.value;
                _details.CDebitAmount = this.form.DebitAmount.value * this.form.ConversionRate.value;
                _details.IsAccountHeadBankCash = false;
                //if (Check_AccHead[0].AccountGroup == "Assets" || Check_AccHead[0].AccountGroup == "Expense") {
                //    _details.EffectiveValue = _Damount - _Camount;
                //}
                //else {
                //    _details.EffectiveValue = _Camount - _Damount;
                //}
                if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString() && this.form.CreditAmount.value > 0) {
                    _details.EffectiveValue = -this.form.CreditAmount.value;
                }
                else if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString() && this.form.DebitAmount.value > 0) {
                    _details.EffectiveValue = this.form.DebitAmount.value;
                }
                else if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString() && this.form.DebitAmount.value > 0) {
                    _details.EffectiveValue = -this.form.DebitAmount.value;
                }
                else if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString() && this.form.CreditAmount.value > 0) {
                    _details.EffectiveValue = this.form.CreditAmount.value;
                }
                if (Check_AccHead[0].IsCostCenterAllocate == 1 && this.form.MultipleCostCenter.value || Check_AccHead[0].IsBillRef == 1) {
                    this.form.VoucherDetails.C_NewItem(_details);
                }
                else {
                    _items.push(_details);
                    // Start SUM Dr/Cr and Grid ID
                    var dAmount = 0;
                    var cAmount = 0;
                    for (var _i = 0, _items_1 = _items; _i < _items_1.length; _i++) {
                        var item = _items_1[_i];
                        var id = item.__id;
                        if (id == null) {
                            item.__id = this.nextId++;
                        }
                    }
                    this.form.VoucherDetails.setItems(_items);
                    // End SUM Dr/Cr and Grid ID
                    this.sumDebitCredit();
                }
                this.form.AccountHead.element.focus();
            };
            AccVoucherBankWiseDialog.prototype.afterLoadEntity = function () {
                _super.prototype.afterLoadEntity.call(this);
                this.form.NOAId.filterValue = String(this.zoneId);
                if (!this.isNew()) {
                    this.form.NOAId.value = String(this.entity.NOAId);
                }
            };
            AccVoucherBankWiseDialog.prototype.getToolbarButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getToolbarButtons.call(this);
                buttons.push({
                    title: 'Save & Next',
                    cssClass: 'tool-button expand-all-button',
                    onClick: function () {
                        _this.save(function () {
                            Q.notifySuccess('Application has been Saved successfully.');
                            var ent = {};
                            ent.VoucherTypeId = Number(_this.form.VoucherTypeId.value);
                            ent.PostingFinancialYearId = Number(_this.form.PostingFinancialYearId.value);
                            ent.TransactionTypeEntityId = Number(_this.form.TransactionTypeEntityId.value);
                            ent.VoucherDate = _this.form.VoucherDate.value;
                            ent.TransactionMode = _this.transactionMode.toString();
                            ent.FileNo = _this.form.FileNo.value;
                            ent.PageNo = _this.form.PageNo.value;
                            ent.PaytoOrReciveFrom = ""; //this.form.PaytoOrReciveFrom.value;
                            _this.HeadId = Number(_this.form.AccountHeadBankCash.value);
                            _this.selectedApproverId = Number(_this.form.ApproverId.value);
                            var chequeBookId = _this.form.ChequeBookId.value;
                            _this.loadEntity(ent);
                            q.initDetailEditor(_this, _this.form.VoucherDetails);
                            _this.form.ChequeBookId.clearItems();
                            _this.form.ChequeBookId.value = "";
                            _this.form.ChequeNumhdn.clearItems();
                            _this.form.ChequeNumhdn.value = "";
                            _this.items_ChartofAccounts = Q.getLookup('Configurations.AccChartofAccounts_Lookup').items;
                            _this._VoucherConfiguration = Q.getLookup('Transaction.AccVoucherConfiguration_Lookup').items;
                            _this.toolbar.findButton('MoneyReceipt').hide(); // toggleClass('disabled');
                            var fieldpayToOrReceiveFrom = $('.PaytoOrReciveFrom .caption')[0];
                            // CHANGE TITLE - VOUCHER TYPE WISE
                            if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                                _this.set_dialogTitle("Bank wise Payment Voucher");
                                Q.reloadLookup("Transaction.AccChequeRegister_Lookup");
                                // this.AccChequeRegister = Q.getLookup('Transaction.AccChequeRegister_Lookup').items;
                                fieldpayToOrReceiveFrom.innerHTML = "<sup title=\"this field is required\">*</sup>Pay To";
                                //Serenity.EditorUtils.setReadonly(this.element.find(this.form.CreditAmount.element), true);
                            }
                            else if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                                _this.set_dialogTitle("Bank wise Receipt Voucher");
                                Q.reloadLookup("Transaction.AccChequeReceiveRegister_Lookup");
                                // this.AccChequeReceiveRegister = Q.getLookup('Transaction.AccChequeReceiveRegister_Lookup').items;
                                fieldpayToOrReceiveFrom.innerHTML = "Receive From";
                                $('.PaytoForBankAdvice').hide();
                                _this.toolbar.findButton('MoneyReceipt').show(); // toggleClass('disabled');
                                //Serenity.EditorUtils.setReadonly(this.element.find(this.form.DebitAmount.element), true);
                            }
                            else if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Journal_Voucher.toString()) {
                                _this.set_dialogTitle("Journal/Adjustment Voucher");
                            }
                            $('.VoucherDetails .grid-toolbar').hide();
                            $('.MultiCurrency .caption').hide();
                            //$('.groupAdd').click(e => this.AddtoGrid());
                            // $('.ConversionRate .editor').css("width", "200px !important").removeClass("editor");
                            $('.ConversionRate .editor').removeClass("editor");
                            var fieldButt1 = $('.ConversionRate')[0];
                            var searchCreditInput;
                            searchCreditInput = document.createElement('label');
                            //  searchCreditInput.type = 'text';
                            searchCreditInput.id = 'lbConversionRate';
                            //fieldButt1.appendChild(searchCreditInput);
                            //$($('.s-Transaction-AccVoucherBankWiseDialog .category')[0]).hide();
                            _this.form.VoucherDetails.parentDialog = _this;
                            _this.VoucherDateChange();
                            _this.setNewVoucherNumber(_this.form.TransactionTypeEntityId.value);
                            _this.form.IsBankWisePaymentVoucher.value = false;
                            _this.form.IsBankWiseReceiptVoucher.value = false;
                            if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                                _this.form.TransactionType.value = "PAYMENT";
                                _this.form.VoucherType.value = "Debit";
                                _this.form.IsBankWisePaymentVoucher.value = true;
                            }
                            else if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                                _this.form.TransactionType.value = "RECEIPT";
                                _this.form.VoucherType.value = "Credit";
                                _this.form.IsBankWiseReceiptVoucher.value = true;
                            }
                            _this.loadAccountHead();
                            if (_this.HeadId != 0) {
                                _this.loadAccountHeadBankCash();
                                _this.form.AccountHeadBankCash.value = _this.HeadId.toString();
                                _this.populateChequeBook(+_this.form.AccountHeadBankCash.value);
                                if (!chequeBookId != null && chequeBookId != "") {
                                    _this.form.ChequeBookId.value = chequeBookId.toString();
                                    _this.populateChequeNumber(chequeBookId);
                                }
                            }
                            if (_this.selectedApproverId != 0) {
                                _this.form.ApproverId.value = _this.selectedApproverId.toString();
                            }
                            _this.form.ChequeRegisterId.clearItems();
                            _this.form.ChequeRegisterId.value = "";
                            _this.form.CreditAmount.value = 0;
                            _this.form.DebitAmount.value = 0;
                            _this.form.DDescription.value = "";
                            Serenity.EditorUtils.setReadonly(_this.element.find(_this.form.ChequeRegisterId.element), false);
                            _this.loadCheque();
                            window.setTimeout(function () { _this.form.ChequeNumhdn.element.focus(); }, 500);
                        });
                    }
                });
                buttons.push({
                    title: "Print", cssClass: "print-preview-button",
                    onClick: function (x) {
                        //
                        if (_this.entityId != undefined) {
                            if (_this.entity.LinkedWithAutoJV && _this.entity.LinkedWithAutoJV != null) {
                                var _url = "~/Reports/VoucherPreview/IndexCombineVoucher?id=" + _this.entityId + "&isCombineVoucher=" + true;
                            }
                            else {
                                var _url = "~/Reports/VoucherPreview?id=" + _this.entityId;
                            }
                            Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                        }
                        else {
                            Q.alert("Sorry! Voucher Id not found!");
                        }
                    }
                });
                buttons.push({
                    title: "Money Receipt", cssClass: "print-preview-button MoneyReceipt",
                    onClick: function (x) {
                        if (_this.entityId != undefined) {
                            //var b = (new VoucherPreviewDialog());
                            //var _url = Q.resolveUrl("~/Reports/MoneyReceipt?id=" + this.entityId);
                            //b._url = _url;
                            //b.dialogOpen();
                            //var _url = "~/Reports/MoneyReceipt?id=" + this.entityId;
                            var _url = "~/Reports/MoneyReceipt?id=" + _this.entityId + "&source='FromReceiptVoucher'";
                            Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                        }
                        else {
                            Q.alert("Sorry! Voucher Id not found!");
                        }
                    }
                });
                buttons.push({
                    title: "Forward for approve", cssClass: "send-button",
                    onClick: function (x) {
                        var message = "Are you sure you want to Forward for approve?";
                        Q.confirm(message, function () {
                            if (_this.form.ApproverId.value == "") {
                                Q.alert("Please select Approver!");
                                return;
                            }
                            _this.form.approveStatus.value = VistaGL.ApprovalStatus.Submit.toString();
                            _this.form.EmpId.value = +_this.form.ApproverId.value;
                            _this.save(function (p) { Q.notifySuccess("Voucher is submitted successfully."); _this.dialogClose(); });
                        });
                    }
                });
                return buttons;
            };
            AccVoucherBankWiseDialog.prototype.getSaveEntity = function () {
                var _this = this;
                var voucherInformation = _super.prototype.getSaveEntity.call(this);
                voucherInformation.LinkedWithAutoJV = this.form.LinkedWithAutoJV.value;
                //-- Journal voucher amount and amount in word
                if (voucherInformation.LinkedWithAutoJV) {
                    if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                        voucherInformation.JVAmount = this.form.DAmount.value;
                        voucherInformation.JVAmountInWords = VoucherUtil.currencyToWords(voucherInformation.JVAmount);
                    }
                    if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                        voucherInformation.JVAmount = this.form.CAmount.value;
                        voucherInformation.JVAmountInWords = VoucherUtil.currencyToWords(voucherInformation.JVAmount);
                    }
                }
                var _vc = this._VoucherConfiguration.filter(function (p) { return p.FundControlInformationId == _this.fundControlId && p.TransactionTypeId == +_this.form.TransactionTypeEntityId.value && p.AccountingPeriodId == +_this.form.PostingFinancialYearId.value; });
                if (_vc.length > 0) {
                    if (_vc[0].IsAutoPost) {
                        voucherInformation.PostingDate = this.form.VoucherDate.value;
                        voucherInformation.PostedBy = this.userId.toString();
                        voucherInformation.PostToLedger = 1;
                        voucherInformation.approveStatus = VistaGL.ApprovalStatus.Approved;
                        this.IsAutoPost = true;
                        // this.form.approveStatus.value=ApprovalStatus.Approved.toString();
                    }
                }
                return voucherInformation;
            };
            AccVoucherBankWiseDialog.prototype.validateBeforeSave = function () {
                if (!this.validateForm())
                    return false;
                var result = _super.prototype.validateBeforeSave.call(this);
                if (!result)
                    return false;
                if (this.form.PostingFinancialYearId.value == "0") {
                    Q.alert("Accounting Period not found!");
                    return false;
                }
                if (this.form.AccountHeadBankCash.value == "") {
                    Q.alert("Please Select Bank Head!");
                    return false;
                }
                if (this.form.Description.value == "") {
                    this.form.Description.element.focus();
                    Q.alert("Enter Narration!");
                    return false;
                }
                if (this.form.VoucherDetails.getItems().length == 0) {
                    Q.alert("Please add voucher details.");
                    return false;
                }
                if (this.form.IsBankWisePaymentVoucher.value == true && this.form.ChequeBookId.value != "") {
                    if (this.form.ChequeNumhdn.value == "") {
                        Q.alert("Please Select Cheque Number!");
                        return false;
                    }
                    if (this.form.ChequeType.value == "") {
                        Q.alert("Please Select Cheque Type!");
                        return false;
                    }
                    if (this.form.ChequeDate.value == "") {
                        Q.alert("Please Select Cheque Date!");
                        return false;
                    }
                    if (this.form.PaytoForBankAdvice.value == "") {
                        Q.alert("Please Select Pay to For Bank Advice!");
                        return false;
                    }
                }
                if (this.form.LinkedWithAutoJV.value) {
                    //
                    if (this.isNew()) {
                        if (this.form.AutoPV_AccountHead.value == "") {
                            Q.alert("Please select Account Head for auto voucher!");
                            return false;
                        }
                        if (this.form.AutoPV_CostCentreId.value == "") {
                            Q.alert("Please select Sub ledger for auto voucher!");
                            return false;
                        }
                    }
                }
                else {
                    //--
                    if (this.isNew()) {
                        if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                            var totalCreditAmount_1 = 0;
                            this.form.VoucherDetails.value.forEach(function (f) { return totalCreditAmount_1 += f.CreditAmount; });
                            if (totalCreditAmount_1 > 0) {
                                //
                                this.form.LinkedWithAutoJV.value = true;
                                this.form.AutoPV_CostCentreId.getGridField().show();
                                this.form.AutoPV_AccountHead.getGridField().show();
                                if (this.form.AutoPV_AccountHead.value == "") {
                                    Q.alert("You are supposed to create an auto jv! Please select Account Head for auto voucher!");
                                    return false;
                                }
                                if (this.form.AutoPV_CostCentreId.value == "") {
                                    Q.alert("You are supposed to create an auto jv! Please select Sub ledger for auto voucher!");
                                    return false;
                                }
                            }
                        }
                    }
                }
                if (this.form.FileName.value.length == 0) {
                    var message = "Are you sure want to save data without attachment?";
                    if (confirm(message)) {
                        result = true;
                    }
                    else {
                        result = false;
                        return false;
                    }
                }
                if (this.form.ApproverId.value != "") {
                    this.form.approveStatus.value = VistaGL.ApprovalStatus.Submit.toString();
                }
                return result;
            };
            AccVoucherBankWiseDialog.prototype.onSaveSuccess = function (response) {
                if (this.entity.approveStatus == VistaGL.ApprovalStatus.Draft) {
                    if (!this.IsAutoPost) {
                        this.toolbar.findButton('send-button').removeClass('disabled');
                    }
                    $($('.category')[0]).show();
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ApproverId.element), false);
                }
                else {
                    this.toolbar.findButton('send-button').toggleClass('disabled');
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ApproverId.element), true);
                }
                this.onAfterSaveSuccess();
            };
            AccVoucherBankWiseDialog.prototype.onAfterSaveSuccess = function () {
                //
            };
            AccVoucherBankWiseDialog.prototype.loadAccountHead = function () {
                //this.form.AccountHead.clearItems();
                //this.form.AutoPV_AccountHead.clearItems();
                ////  var distinct_axes2: AccTransactionTypeAssignRow[];
                //var distinct_axes2 = [];
                //var unique = this.AccTransactionTypeAssign.filter(p => p.ParentId == +this.form.TransactionTypeEntityId.value);//.filter((v, i, a) => a.indexOf(v) === i);
                //for (var i = 0; i < unique.length; i++) {
                //    var str = unique[i];
                //    var c = distinct_axes2.filter(p => p == str.CoaId);
                //    if (c.length < 1) {
                //        var Check_Parent = this.items_ChartofAccounts.filter(f => f.Id == str.CoaId);
                //        if (Check_Parent[0].IsControlhead == 1) {
                //            var Child_Items = this.items_ChartofAccounts.filter(f => f.ParentAccountId == Check_Parent[0].Id);
                //            for (var _it of Child_Items.filter(p => p.IsControlhead == 0)) {
                //                c = distinct_axes2.filter(p => p == _it.Id);
                //                if (c.length < 1) {
                //                    distinct_axes2.push(_it.Id);
                //                    this.form.AccountHead.addItem({
                //                        id: _it.Id.toString(),
                //                        text: _it.AccountName,
                //                        source: null,
                //                        disabled: false
                //                    });
                //                    this.form.AutoPV_AccountHead.addItem({
                //                        id: _it.Id.toString(),
                //                        text: _it.AccountName,
                //                        source: null,
                //                        disabled: false
                //                    });
                //                }
                //            }
                //        } else {
                //            distinct_axes2.push(str.CoaId);
                //            this.form.AccountHead.addItem({
                //                id: str.CoaId.toString(),
                //                text: str.CoaAccountName,
                //                source: null,
                //                disabled: false
                //            });
                //            this.form.AutoPV_AccountHead.addItem({
                //                id: str.CoaId.toString(),
                //                text: str.CoaAccountName,
                //                source: null,
                //                disabled: false
                //            });
                //        }
                //    }
                //}
                //if (unique.length == 0) {
                //    var items = this.items_ChartofAccounts.filter(f => f.IsControlhead == 0);
                //    this.form.AccountHead.clearItems();
                //    this.form.AutoPV_AccountHead.clearItems();
                //    for (var item of items) {
                //        // var str = items[i];
                //        this.form.AccountHead.addItem({ id: item.Id.toString(), text: item.AccountName, source: null, disabled: false });
                //        this.form.AutoPV_AccountHead.addItem({ id: item.Id.toString(), text: item.AccountName, source: null, disabled: false });
                //    }
                //}
            };
            AccVoucherBankWiseDialog.prototype.loadAccountHeadBankCash = function () {
                //this.form.AccountHeadBankCash.clearItems();
                //var coaMapping = "BANK";
                //var _zoneWiseBankAccInfoList: Configurations.AccBankAccountInformationRow[];
                //_zoneWiseBankAccInfoList = Q.getLookup("Configurations.AccBankAccountInformation_Lookup").items;
                //var distinct_axes2 = [];
                //var unique = this.AccTransactionTypeAssign
                //    .filter(p => p.ParentId == +this.form.TransactionTypeEntityId.value
                //        && p.CoaCoaMapping == coaMapping);//.filter((v, i, a) => a.indexOf(v) === i);
                //if (unique.length == 0) {
                //    for (var bank of _zoneWiseBankAccInfoList) {
                //        var coa = this.items_ChartofAccounts.filter(f => f.Id == bank.CoaId);
                //        if (coa.length > 0) {
                //            this.form.AccountHeadBankCash.addItem({ id: coa[0].Id.toString(), text: coa[0].AccountName, source: null, disabled: false });
                //        }
                //    }
                //}
                //else {
                //    for (var i = 0; i < unique.length; i++) {
                //        var str = unique[i];
                //        var c = distinct_axes2.filter(p => p == str.CoaId);
                //        if (c.length < 1) {
                //            var Check_Parent = this.items_ChartofAccounts.filter(f => f.Id == str.CoaId);
                //            if (Check_Parent[0].IsControlhead == 1) {
                //                var Child_Items = this.items_ChartofAccounts.filter(f => f.ParentAccountId == Check_Parent[0].Id);
                //                for (var _it of Child_Items.filter(p => p.IsControlhead == 0 && p.CoaMapping == coaMapping)) {
                //                    c = distinct_axes2.filter(p => p == _it.Id);
                //                    if (c.length < 1) {
                //                        distinct_axes2.push(_it.Id);
                //                        this.form.AccountHeadBankCash.addItem({
                //                            id: _it.Id.toString(),
                //                            text: _it.AccountName,
                //                            source: null,
                //                            disabled: false
                //                        });
                //                    }
                //                }
                //            } else {
                //                distinct_axes2.push(str.CoaId);
                //                this.form.AccountHeadBankCash.addItem({
                //                    id: str.CoaId.toString(),
                //                    text: str.CoaAccountName,
                //                    source: null,
                //                    disabled: false
                //                });
                //            }
                //        }
                //    }
                //}
                this.loadCheque();
            };
            AccVoucherBankWiseDialog.prototype.loadCheque = function () {
                var _this = this;
                if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                    //
                    var AccChequeRegister = void 0;
                    AccChequeRegister = Q.getLookup('Transaction.AccChequeRegister_Lookup').items;
                    var _AccChequeRegister = AccChequeRegister
                        .filter(function (p) { return p.BankAccountInformationCoaId == +_this.form.AccountHeadBankCash.value; });
                    this.form.ChequeRegisterId.clearItems();
                    for (var _i = 0, _AccChequeRegister_4 = _AccChequeRegister; _i < _AccChequeRegister_4.length; _i++) {
                        var item = _AccChequeRegister_4[_i];
                        this.form.ChequeRegisterId.addItem({
                            id: item.Id.toString(), text: item.ChequeNo, source: null, disabled: false
                        });
                    }
                    //
                }
                else if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                    //
                    var AccChequeReceiveRegister = void 0;
                    AccChequeReceiveRegister = Q.getLookup('Transaction.AccChequeReceiveRegister_Lookup').items;
                    var _AccChequeReceiveRegister = AccChequeReceiveRegister;
                    this.form.ChequeRegisterId.clearItems();
                    for (var _a = 0, _AccChequeReceiveRegister_1 = _AccChequeReceiveRegister; _a < _AccChequeReceiveRegister_1.length; _a++) {
                        var item1 = _AccChequeReceiveRegister_1[_a];
                        this.form.ChequeRegisterId.addItem({
                            id: item1.Id.toString(), text: item1.ChequeNo.toString() + "#" + item1.Amount + " TK.", source: null, disabled: false
                        });
                    }
                    //
                }
            };
            AccVoucherBankWiseDialog.prototype.populateChequeBook = function (accountHeadBank) {
                //--
                //if (this.form.VoucherTypeId.value == VoucherType.Payment_Voucher.toString()) {
                //    this.form.ChequeBookId.clearItems();
                //    this.form.ChequeBookId.value = "";
                //    this.form.ChequeNumhdn.clearItems();
                //    this.form.ChequeNumhdn.value = "";
                //}
                if (accountHeadBank == 0)
                    return;
                var _bankAccInfoList = VistaGL.Configurations.AccBankAccountInformationRow
                    .getLookup()
                    .items
                    .filter(function (b) { return b.CoaId == accountHeadBank; });
                if (_bankAccInfoList.length > 0) {
                    //
                    // Lets assume, Only one bank account is mapped with one account head
                    var accInfo = _bankAccInfoList[0];
                    //var _chequeBookList: AccChequeBookRow[];
                    //if (this.form.VoucherTypeId.value == VoucherType.Payment_Voucher.toString()) {
                    //    //
                    //    _chequeBookList =
                    //        Transaction.AccChequeBookRow.getLookup().items
                    //            .filter(b => b.BankAccountInformationId == accInfo.Id && b.HasFinished == false);
                    //    if (_chequeBookList.length > 0) {
                    //        //
                    //        for (var item of _chequeBookList) {
                    //            //
                    //            this.form.ChequeBookId.addItem({
                    //                id: item.Id.toString(),
                    //                text: item.CheckBookName + ' {' + accInfo.AccountNumber + '}',
                    //                source: null,
                    //                disabled: false
                    //            }); //
                    //        } //
                    //    } //
                    //} //
                    this.form.BankAccountInformationId.value = accInfo.Id.toString();
                    if (this.isNew()) {
                        this.setNewVoucherNumber(this.form.TransactionTypeEntityId.value);
                    }
                    //
                }
            };
            AccVoucherBankWiseDialog.prototype.populateChequeNumber = function (chequeBookId) {
                var _this = this;
                this.form.ChequeNumhdn.clearItems();
                this.form.ChequeNumhdn.value = "";
                this.form.IsChequeFinished.value = false;
                var LastChqNo = 0;
                var chequeRegisterCriteria = Serenity.Criteria.and([['ChequeBookId'], '=', chequeBookId.toString()], [['IsCancelled'], '<', 1]);
                //{ Criteria: [['ChequeBookId'], '=', chequeBookId.toString()] }
                Transaction.AccChequeRegisterService.List({ Criteria: chequeRegisterCriteria }, function (r) {
                    var chqReg;
                    chqReg = r.Entities;
                    if (chqReg.length > 0) {
                        var lstEntity = chqReg[chqReg.length - 1];
                        LastChqNo = lstEntity.ChequeNumhdn;
                    }
                });
                //generate cheque no
                Transaction.AccChequeBookService.List({ Criteria: [['Id'], '=', chequeBookId.toString()] }, function (r) {
                    var _Unionitems = r.Entities;
                    _this.form.BankAccountInformationId.value = r.Entities[0].BankAccountInformationId.toString();
                    //var declare
                    var prefix = "";
                    var strNo = 0;
                    var endNo = 0;
                    var strNoLength = 0;
                    strNoLength = _Unionitems[0].StartingNo.length;
                    prefix = _Unionitems[0].Prefix;
                    strNo = +_Unionitems[0].StartingNo;
                    endNo = _Unionitems[0].EndingNo;
                    var strNumberPerfix = _Unionitems[0].StartingNo.toString();
                    var genChqNoWithPrefix = "";
                    var genNoWithOutPrefix;
                    if (LastChqNo > 0 && LastChqNo < endNo) {
                        if (prefix == undefined) {
                            genChqNoWithPrefix = (LastChqNo + 1).toString();
                        }
                        else {
                            genChqNoWithPrefix = prefix + (LastChqNo + 1);
                        }
                        genNoWithOutPrefix = LastChqNo + 1;
                        if (genNoWithOutPrefix == endNo) {
                            _this.form.IsChequeFinished.value = true;
                        }
                    }
                    else if (LastChqNo == 0) {
                        if (prefix == undefined) {
                            genChqNoWithPrefix = strNo.toString();
                        }
                        else {
                            genChqNoWithPrefix = prefix + strNo;
                        }
                        genNoWithOutPrefix = strNo;
                    }
                    if (endNo == LastChqNo) {
                        Q.notifyWarning("There are no remaing cheque no.");
                    }
                    function pad(n, width, z) { while (n.length < width)
                        n = '' + z + n; return n; }
                    var ChequeNoList = [];
                    for (strNo; strNo <= endNo; strNo++) {
                        var tempChequeNo = "";
                        if (prefix == undefined) {
                            tempChequeNo = pad(strNo.toString(), strNoLength, "0").toString();
                        }
                        else {
                            tempChequeNo = prefix + pad(strNo.toString(), strNoLength, "0");
                        }
                        var newChequeNo = {
                            text: tempChequeNo,
                            id: strNo.toString()
                        };
                        ChequeNoList.push(newChequeNo);
                    }
                    var data;
                    Q.reloadLookup("Transaction.AccChequeRegister_Lookup_ALL");
                    data = Q.getLookup("Transaction.AccChequeRegister_Lookup_ALL").items;
                    data = data.filter(function (p) { return p.ChequeBookId == chequeBookId; });
                    var _loop_7 = function () {
                        var ddloption = ChequeNoList[i];
                        if (Q.count(data, function (o) { return o.ChequeNo == ddloption.text; }) == 0) {
                            _this.form.ChequeNumhdn.addItem({
                                id: ddloption.id.toString(), text: ddloption.text.toString(), source: null, disabled: false
                            });
                        }
                    };
                    //data = AccChequeRegisterRow.getLookup().items;
                    //data = data.filter(p => p.ChequeBookId == chequeBookId);
                    for (var i = 0, l = ChequeNoList.length; i < l; i++) {
                        _loop_7();
                    }
                });
            };
            AccVoucherBankWiseDialog.prototype.changePvSubLedger = function () {
                var selectedPayto = this.form.PaytoOrReciveFrom.value;
                //var indexofFirstHighphen = selectedPayto.indexOf('-');
                //if (indexofFirstHighphen > 0) indexofFirstHighphen = indexofFirstHighphen + 1;
                //var onlyNamePart = selectedPayto.substring(indexofFirstHighphen, selectedPayto.length).trim();
                var costCentersByPayTo = Transaction.AccCostCentreOrInstituteInformationRow.getLookup().items.filter(function (f) { return f.Name == selectedPayto; });
                if (costCentersByPayTo.length > 0) {
                    //var data = AccNoaRow.getLookup().items.filter(f => f.CostCenterId = costCentersByPayTo[0].Id);
                    //this.form.NOAId.value = data[0].Id.toString();
                    if (costCentersByPayTo[0].Id.toString() != 'undefined')
                        this.form.AutoPV_CostCentreId.value = costCentersByPayTo[0].Id.toString();
                    if (costCentersByPayTo[0].NameForBankAdviceLetter != 'undefined')
                        this.form.PaytoForBankAdvice.value = costCentersByPayTo[0].NameForBankAdviceLetter.toString();
                }
            };
            AccVoucherBankWiseDialog.prototype.setMultiCurrencyCurrency = function (MultiCurrencyCurrency, MultiCurrencyId, thisform) {
                var _this = this;
                var _currency = this.baseCurrency;
                if (!thisform) {
                    var Check_AccHead = this.items_ChartofAccounts.filter(function (f) { return f.Id == +_this.form.AccountHead.value; });
                    MultiCurrencyCurrency = Check_AccHead[0].MultiCurrencyCurrency;
                    MultiCurrencyId = Check_AccHead[0].MultiCurrencyId;
                }
                if (MultiCurrencyCurrency == _currency || MultiCurrencyCurrency == null) {
                    this.form.MultiCurrency.value = _currency;
                    this.form.ConversionRate.value = 1;
                    $("#lbConversionRate").text(_currency);
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ConversionAmount.element), true);
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ConversionRate.element), true);
                }
                else {
                    this.form.MultiCurrency.value = MultiCurrencyCurrency;
                    var MultiCurrency_amount = this.items_CurrencyConversionRate.filter(function (f) { return f.FirstCurrency == MultiCurrencyId; });
                    this.form.ConversionRate.value = MultiCurrency_amount[0].SecondAmout;
                    $("#lbConversionRate").text(MultiCurrency_amount[0].SecondCurrencyCurrency);
                }
            };
            AccVoucherBankWiseDialog.prototype.sumDebitCredit = function () {
                var dAmount = 0;
                var cAmount = 0;
                for (var _i = 0, _a = this.form.VoucherDetails.value; _i < _a.length; _i++) {
                    var item = _a[_i];
                    if (item.CreditAmount == undefined || item.CreditAmount == null) { }
                    else if (item.CreditAmount.toString() != "NaN") {
                        cAmount += item.CreditAmount;
                    }
                    if (item.DebitAmount == undefined || item.DebitAmount == null) { }
                    else if (item.DebitAmount.toString() != "NaN") {
                        dAmount += item.DebitAmount;
                    }
                }
                this.form.AccountBankCash.value = this.form.AccountHeadBankCash.get_text();
                switch (this.form.VoucherTypeId.value) {
                    case VistaGL.VoucherType.Payment_Voucher.toString():
                        this.form.AccountBankCashAmount.value = dAmount - cAmount;
                        this.form.DAmount.value = dAmount;
                        this.form.CAmount.value = cAmount + this.form.AccountBankCashAmount.value;
                        break;
                    case VistaGL.VoucherType.Receipt_Voucher.toString():
                        this.form.AccountBankCashAmount.value = cAmount - dAmount;
                        this.form.CAmount.value = cAmount;
                        this.form.DAmount.value = dAmount + this.form.AccountBankCashAmount.value;
                        break;
                    default:
                }
                this.form.BankAmount.value = this.form.AccountBankCashAmount.value;
                this.form.Amount.value = this.form.AccountBankCashAmount.value;
                this.form.AmountInWords.value = VoucherUtil.currencyToWords(this.form.AccountBankCashAmount.value);
                this.clearData();
            };
            AccVoucherBankWiseDialog.prototype.setNewVoucherNumber = function (transactionTypeId) {
                this.form.VoucherNo.value = "";
                this.form.VoucherNumber.value = "";
                this.form.AutoJVVoucherNo.value = '';
                this.form.AutoJVVoucherNumber.value = '';
                var voucherDate = new Date(this.form.VoucherDate.value);
                var financialYearId = Number(this.form.PostingFinancialYearId.value);
                var bankAccId = Number(this.form.BankAccountInformationId.value);
                var fundControlId = this.fundControlId;
                var zoneId = this.zoneId;
                VoucherUtil.newVoucherNumberFactory(this._VoucherConfiguration, transactionTypeId, voucherDate, financialYearId, fundControlId, zoneId, bankAccId, function (_voucherNo, _voucherNumber) {
                    //
                    $('.VoucherNo input').val(_voucherNo);
                    $('.VoucherNumber input').val(_voucherNumber);
                });
            };
            AccVoucherBankWiseDialog.prototype.VoucherDateChange = function () {
                var _VoucherDate = this.form.VoucherDate.valueAsDate;
                var _piriod = this._AccountingPeriod.filter(function (j) { return _VoucherDate >= Q.parseISODateTime(j.PeriodStartDate) && _VoucherDate <= Q.parseISODateTime(j.PeriodEndDate); });
                if (_piriod.length == 0) {
                    Q.alert("Sorry, Accounting period not found.");
                }
                else {
                    if (_piriod[0].IsClosed == true) {
                        Q.alert("This accounting period - " + _piriod[0].YearName + " is closed! You cannot create/modify voucher.");
                        this.form.VoucherNo.value = "";
                    }
                    else {
                        this.form.PostingFinancialYearId.value = _piriod[0].Id.toString();
                    }
                }
            };
            AccVoucherBankWiseDialog.prototype.clearData = function () {
                //this.form.AccountHead.value = null;
                //this.form.AccountHeadBankCash.value = null;
                this.form.CreditAmount.value = 0;
                this.form.DebitAmount.value = 0;
                this.form.DDescription.value = "";
                this.form.ConversionAmount.value = 0;
                this.form.ConversionRate.value = 0;
                this.form.MultiCurrency.value = "";
                this.form.MultipleCostCenter.value = false;
                $("#lbConversionRate").text("");
            };
            AccVoucherBankWiseDialog.prototype.getBudgetAmount = function (headId, IsCoa, IsAutoJV) {
                var budgetAmount = 0;
                this.budgetHeadList = Q.getLookup("Transaction.AccBudgetDetails_Lookup").items;
                budgetAmount = this.budgetHeadList.filter(function (x) { return x.BudgetHeadId == headId; })[0] == undefined ? 0 : this.budgetHeadList.filter(function (x) { return x.BudgetHeadId == headId; })[0].BudgetAmount;
                if (IsAutoJV) {
                    if (IsCoa) {
                        this.form.AutoBudgetAmountCOA.value = budgetAmount;
                    }
                    else {
                        this.form.AutoBudgetAmountSUbledger.value = budgetAmount;
                    }
                }
                else {
                    if (IsCoa) {
                        this.form.BudgetAmountCOA.value = budgetAmount;
                    }
                    else {
                        this.form.BudgetAmountSUbledger.value = budgetAmount;
                    }
                }
            };
            AccVoucherBankWiseDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive(),
                Serenity.Decorators.maximizable()
            ], AccVoucherBankWiseDialog);
            return AccVoucherBankWiseDialog;
        }(VistaGL.EntityDialogBase));
        Transaction.AccVoucherBankWiseDialog = AccVoucherBankWiseDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherBankWiseGrid = (function (_super) {
            __extends(AccVoucherBankWiseGrid, _super);
            function AccVoucherBankWiseGrid(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherBankWiseGrid.prototype.getColumnsKey = function () { return 'Transaction.AccVoucherInformation'; };
            AccVoucherBankWiseGrid.prototype.getDialogType = function () { return Transaction.AccVoucherBankWiseDialog; };
            AccVoucherBankWiseGrid.prototype.getIdProperty = function () { return Transaction.AccVoucherInformationRow.idProperty; };
            AccVoucherBankWiseGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherInformationRow.localTextPrefix; };
            AccVoucherBankWiseGrid.prototype.getService = function () { return Transaction.AccVoucherInformationService.baseUrl; };
            AccVoucherBankWiseGrid.prototype.OpenVoucher = function (id) {
                VistaGL.Configurations.AccVoucherApiDetailsService.List({ Criteria: [['VoucherApiId'], '=', id] }, function (r) {
                    var chqReg;
                    chqReg = r.Entities;
                    if (chqReg.length > 0) {
                        var lstEntity = chqReg[0];
                        var vid = (new Transaction.AccVoucherBankWiseDialog());
                        var entity_voucher;
                        entity_voucher = {};
                        entity_voucher.VoucherTypeId = lstEntity.VoucherApiVouchrTypeId;
                        //
                        entity_voucher.TransactionMode = lstEntity.VoucherApiTransactionMode;
                        vid.loadEntityAndOpenDialog(entity_voucher);
                        var transactionTypeId = lstEntity.VoucherApiTransactionId.toString();
                        vid.form.TransactionTypeEntityId.value = transactionTypeId;
                        vid.setNewVoucherNumber(transactionTypeId);
                        vid.loadAccountHead();
                        vid.form.Description.value = lstEntity.VoucherApiNarration;
                        for (var _i = 0, chqReg_1 = chqReg; _i < chqReg_1.length; _i++) {
                            var item = chqReg_1[_i];
                            vid.form.AccountHead.value = item.AccountHeadId.toString();
                            var amount = item.Amount;
                            if (item.DrCr == "Cr") {
                                vid.form.DebitAmount.value = 0;
                                vid.form.CreditAmount.value = amount;
                            }
                            else {
                                vid.form.DebitAmount.value = amount;
                                vid.form.CreditAmount.value = 0;
                            }
                            // b.LoadCheque();
                            //  b.form.ChequeRegisterId.value = this.entityId;
                            vid.setMultiCurrencyCurrency(null, null, false);
                            vid.form.ConversionAmount.value = vid.form.ConversionRate.value * amount;
                            //b.form.PaytoOrReciveFrom.value = this.form.PayTo.value;
                            vid.form.DDescription.value = item.Description;
                            vid.addtoGrid();
                        }
                    }
                    else {
                        Q.alert("Id not found.");
                    }
                });
            };
            AccVoucherBankWiseGrid.prototype.getColumns = function () {
                var columns = _super.prototype.getColumns.call(this);
                columns = columns.filter(function (x) { return x.field != "TransactionMode" /* TransactionMode */; });
                columns = columns.filter(function (x) { return x.field != "LinkedWithDebitVoucher" /* LinkedWithDebitVoucher */; });
                columns.unshift({
                    field: 'Print Voucher',
                    name: '',
                    format: function (ctx) { return '<a class="inline-action Print-link" title="Print Voucher">' +
                        '<i class="fa fa-print text-blue"></i></a>'; },
                    width: 24,
                    minWidth: 24,
                    maxWidth: 24
                });
                // It is using to change backcolor of approved voucher.
                Q.first(columns, function (x) { return x.field == "approveStatus" /* approveStatus */; }).cssClass += " col-Approve-Status";
                return columns;
            };
            AccVoucherBankWiseGrid.prototype.getSlickOptions = function () {
                var opt = _super.prototype.getSlickOptions.call(this);
                opt.frozenColumn = 3;
                return opt;
            };
            AccVoucherBankWiseGrid.prototype.getItemCssClass = function (item, index) {
                var klass = "";
                if (item.LinkedWithAutoJV) {
                    klass += " backColorForLinkedWithAutoJV";
                }
                if (item.approveStatus == VistaGL.ApprovalStatus.Approved) {
                    klass += " approved-Voucher";
                }
                return Q.trimToNull(klass);
            };
            AccVoucherBankWiseGrid.prototype.onClick = function (e, row, cell) {
                _super.prototype.onClick.call(this, e, row, cell);
                if (e.isDefaultPrevented()) {
                    return;
                }
                var item = this.itemAt(row);
                var target = $(e.target);
                if (target.parent().hasClass('Print-link'))
                    target = target.parent();
                //if (item.LinkedWithAutoJV == true && item.LinkedWithAutoJV != null) {
                //    if (target.hasClass("Print-link")) {
                //        e.preventDefault();
                //        var b = (new VoucherPreviewDialog());
                //        var _url = Q.resolveUrl("~/Reports/VoucherPreview/IndexCombineVoucher?id=" + item.Id + "&isCombineVoucher=" + true);
                //        b._url = _url;
                //        b.dialogOpen();
                //    }
                //}
                //else {
                //    if (target.hasClass("Print-link")) {
                //        e.preventDefault();
                //        var b = (new VoucherPreviewDialog());
                //        var _url = Q.resolveUrl("~/Reports/VoucherPreview?id=" + item.Id);
                //        b._url = _url;
                //        b.dialogOpen();
                //    }
                //}
                if (target.hasClass("Print-link")) {
                    e.preventDefault();
                    if (item.LinkedWithAutoJV && item.LinkedWithAutoJV != null) {
                        var _url = "~/Reports/VoucherPreview/IndexCombineVoucher?id=" + item.Id + "&isCombineVoucher=" + true;
                    }
                    else {
                        var _url = "~/Reports/VoucherPreview?id=" + item.Id;
                    }
                    Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                }
            };
            AccVoucherBankWiseGrid.prototype.getQuickFilters = function () {
                var filters = _super.prototype.getQuickFilters.call(this);
                // --
                var filterByChequeNo = Q.tryFirst(filters, function (x) { return x.field == "ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */; });
                if (filterByChequeNo != null) {
                    filterByChequeNo.title = "Cheque No..";
                    filterByChequeNo.type = Serenity.StringEditor;
                    filterByChequeNo.handler = function (h) {
                        if (h.active) {
                            h.request.Criteria = Serenity.Criteria.and(h.request.Criteria, [["ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */], 'like', '%' + h.value + '%']);
                        }
                    };
                }
                // --
                var filterByAmount = Q.tryFirst(filters, function (x) { return x.field == "Amount" /* Amount */; });
                if (filterByAmount != null) {
                    filterByAmount.title = "Amount (Exactly)";
                    //filterByAmount.type = Serenity.StringEditor;
                    //filterByAmount.handler = h => {
                    //    if (h.active) {
                    //        console.log(h.value);
                    //        h.request.Criteria = Serenity.Criteria.and(h.request.Criteria,
                    //            [[fld.Amount], 'like', h.value + '%']);
                    //    }
                    //};
                }
                // --
                return filters;
            };
            AccVoucherBankWiseGrid.prototype.getQuickSearchFields = function () {
                var txt = function (s) { return Q.text("Db." + Transaction.AccVoucherInformationRow.localTextPrefix + "." + s).toLowerCase(); };
                return [
                    { name: "", title: "all" },
                    { name: "VoucherNo" /* VoucherNo */, title: txt("VoucherNo" /* VoucherNo */) },
                    { name: "Description" /* Description */, title: txt("Description" /* Description */) },
                    { name: "PaytoOrReciveFrom" /* PaytoOrReciveFrom */, title: txt("PaytoOrReciveFrom" /* PaytoOrReciveFrom */) },
                    { name: "ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */, title: txt("ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */) },
                    { name: "Amount" /* Amount */, title: txt("Amount" /* Amount */) }
                ];
            };
            AccVoucherBankWiseGrid.prototype.getViewOptions = function () {
                var opt = _super.prototype.getViewOptions.call(this);
                opt.rowsPerPage = 20;
                return opt;
            };
            AccVoucherBankWiseGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherBankWiseGrid);
            return AccVoucherBankWiseGrid;
        }(VistaGL.EntityGridBaseNew));
        Transaction.AccVoucherBankWiseGrid = AccVoucherBankWiseGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
// ************************************
// CONTROLLER: FOR PAYMENT VOUCHER ONLY
// ************************************
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherInformationDialog = (function (_super) {
            __extends(AccVoucherInformationDialog, _super);
            function AccVoucherInformationDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Transaction.AccVoucherInformationForm(_this.idPrefix);
                _this.items_CurrencyConversionRate = VistaGL.Configurations.AccCurrencyConversionRateRow.getLookup().items;
                _this.CheckAutoVoucher = false;
                _this.AccTransactionTypeAssign = Transaction.AccTransactionTypeAssignRow.getLookup().items;
                _this._AccountingPeriod = VistaGL.Configurations.AccAccountingPeriodInformationRow.getLookup().items;
                _this.nextId = 1;
                _this.isFristTime = true;
                _this._IsCostCenterAllocate = 0;
                _this._IsBillRef = 0;
                _this.IsAutoPost = false;
                _this.transactionMode = "Other";
                _this.selectedApproverId = 0;
                _this.HeadId = 0;
                var userinfo = VistaGL.Authorization.userDefinition;
                _this.baseCurrency = userinfo.BaseCurrency;
                _this.fundControlId = userinfo.FundControlInformationId;
                _this.zoneId = userinfo.ZoneID;
                _this.userId = userinfo.EmpId; // EmployeeId
                // Comments History //
                _this.byId('ApplicationInformationHistory').closest('.field').hide().end().appendTo(_this.byId('TabNotes'));
                //***
                //Generate button
                var fieldButt = $('.AddtoGrid')[0];
                fieldButt.innerHTML = "<label class=\"caption\" title=\"\"></label>\n                <a href= \"javascript:;\" class=\"btn btn-default groupAdd\"> <i class=\"fa fa-fw fa-plus-circle\"> </i>Add to Grid</a>\n            ";
                // added by Nazrul
                _this.form.ChequeRegisterId.inplaceCreateClick = (function () {
                    if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                        var accCheckRegDialog = new Transaction.AccChequeRegisterDialog();
                        var entity_chequeRegister = void 0;
                        entity_chequeRegister = {};
                        entity_chequeRegister.ChequeIssueDate = _this.form.VoucherDate.value;
                        entity_chequeRegister.ChequeDate = _this.form.VoucherDate.value;
                        entity_chequeRegister.ChequeType = 'AccountPayee';
                        entity_chequeRegister.Remarks = _this.form.AccountHead.value;
                        accCheckRegDialog.digforOnlyPayment = _this;
                        accCheckRegDialog._isFromVoucher = true;
                        accCheckRegDialog._isPaymentOrReceiptVoucherOnly = true;
                        accCheckRegDialog.loadEntityAndOpenDialog(entity_chequeRegister);
                    }
                    else if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                        var chequeRecRegDialog = new Transaction.AccChequeReceiveRegisterDialog();
                        var entity_chequeRecRegister = void 0;
                        entity_chequeRecRegister = {};
                        entity_chequeRecRegister.ChequeReceiveDate = _this.form.VoucherDate.value;
                        entity_chequeRecRegister.ChequeDate = _this.form.VoucherDate.value;
                        entity_chequeRecRegister.ChequeType = 'AccountPayee';
                        chequeRecRegDialog.digforOnlyPayment = _this;
                        chequeRecRegDialog._isFromVoucher = true;
                        chequeRecRegDialog._isPaymentOrReceiptVoucherOnly = true;
                        chequeRecRegDialog.loadEntityAndOpenDialog(entity_chequeRecRegister);
                    }
                });
                //-- *****************************************************
                //-- Highlight caption label on focus of input control
                //-- *****************************************************
                $('input, textarea').on('blur', function () {
                    //
                    if ($(document.activeElement).hasClass('select2-offscreen')) {
                        // -- have written blur event for select2 below.
                    }
                    else {
                        $("label[for='" + $(this).attr('id') + "']").removeClass('backColorofLabel');
                    }
                });
                $('input, textarea').on('focus', function () {
                    //
                    if ($(document.activeElement).hasClass('select2-offscreen')) {
                        // -- have written focus event for select2 below.
                    }
                    else {
                        //
                        $("label[for='" + $(document.activeElement).attr('id') + "']").addClass('backColorofLabel');
                        window.setTimeout(function () {
                            $(document.activeElement).select();
                        }, 0);
                    }
                });
                $('.select2-offscreen').on('blur', function () {
                    //
                    $('label.backColorofLabel').each(function () {
                        $(this).removeClass('backColorofLabel');
                    });
                });
                $('.select2-offscreen').on('focus', function () {
                    //
                    $(this).select2('open');
                    if (($(this)).parent()[0].childNodes[0].nodeName == "LABEL") {
                        ($(this)).parent()[0].childNodes[0].attributes['class'].nodeValue = 'caption backColorofLabel';
                    }
                });
                $('.select2-offscreen').on("select2-open", function () {
                    if (($(this)).parent()[0].childNodes[0].nodeName == "LABEL") {
                        ($(this)).parent()[0].childNodes[0].attributes['class'].nodeValue =
                            'caption backColorofLabel';
                    }
                });
                return _this;
                //----------************//
            }
            AccVoucherInformationDialog.prototype.getFormKey = function () { return Transaction.AccVoucherInformationForm.formKey; };
            AccVoucherInformationDialog.prototype.getIdProperty = function () { return Transaction.AccVoucherInformationRow.idProperty; };
            AccVoucherInformationDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherInformationRow.localTextPrefix; };
            AccVoucherInformationDialog.prototype.getNameProperty = function () { return Transaction.AccVoucherInformationRow.nameProperty; };
            AccVoucherInformationDialog.prototype.getService = function () { return Transaction.AccVoucherInformationService.baseUrl; };
            AccVoucherInformationDialog.prototype.onDialogOpen = function () {
                var _this = this;
                _super.prototype.onDialogOpen.call(this);
                // Maximize the dialog
                this.element.closest('.ui-dialog').find('.ui-dialog-titlebar-maximize').click();
                this.form.NOAId2.element.hide();
                this.form.NOAId.changeSelect2(function (e) {
                    var data = Transaction.AccNoaRow.getLookup().items.filter(function (f) { return f.Id = Number(_this.form.NOAId.value); });
                    data.forEach(function (f) {
                        _this.form.CostCentreId.value = f.CostCenterId.toString();
                    });
                });
                q.initDetailEditor(this, this.form.VoucherDetails);
                this.form.VoucherDetails.parentDialog = this;
                this.form.ConversionRate.element.hide();
                this.form.ConversionAmount.element.hide();
                this.form.CostCenterTypeId.getGridField().hide();
                this.form.ParentId.getGridField().hide();
                this.form.FileNo.element.hide();
                this.form.PageNo.element.hide();
                this.items_ChartofAccounts = Q.getLookup('Configurations.AccChartofAccounts_Lookup').items;
                this._VoucherConfiguration = Q.getLookup('Transaction.AccVoucherConfiguration_Lookup').items;
                this.toolbar.findButton('MoneyReceipt').hide();
                var fieldpayToOrReceiveFrom = $('.PaytoOrReciveFrom .caption')[0];
                Serenity.EditorUtils.setReadonly(this.element.find(this.form.VoucherNo.element), true);
                // title change Voucher type wise
                if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                    this.set_dialogTitle("Payment Voucher");
                    this.AccChequeRegister = Q.getLookup('Transaction.AccChequeRegister_Lookup').items;
                    fieldpayToOrReceiveFrom.innerHTML = "<sup title=\"this field is required\">*</sup>Pay To";
                }
                else if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                    this.set_dialogTitle("Receipt Voucher");
                    this.AccChequeReceiveRegister = Q.getLookup('Transaction.AccChequeReceiveRegister_Lookup').items;
                    fieldpayToOrReceiveFrom.innerHTML = "Receive From";
                    this.toolbar.findButton('MoneyReceipt').show(); // toggleClass('disabled');
                }
                else if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Journal_Voucher.toString()) {
                    this.set_dialogTitle("Journal/Adjustment Voucher");
                    this.form.PaytoOrReciveFrom.element.hide();
                    $('.PaytoOrReciveFrom .caption').hide();
                    this.form.NOAId.getGridField().hide();
                    this.form.ChequeRegisterId.getGridField().hide();
                }
                // added by Nazrul
                //let subLedgerList = AccCostCentreOrInstituteInformationRow.getLookup().items;
                //for (var item of subLedgerList) {
                //    this.form.CostCentreId.addItem({ id: item.Id.toString(), text: item.Name, source: null, disabled: false });
                //}
                //
                $('.VoucherDetails .grid-toolbar').hide();
                $('.MultiCurrency .caption').hide();
                $('.groupAdd').click(function (e) { return _this.addtoGrid(); });
                // $('.ConversionRate .editor').css("width", "200px !important").removeClass("editor");
                $('.ConversionRate .editor').removeClass("editor");
                var fieldButt1 = $('.ConversionRate')[0];
                var searchCreditInput;
                searchCreditInput = document.createElement('label');
                //  searchCreditInput.type = 'text';
                searchCreditInput.id = 'lbConversionRate';
                // searchCreditInput.style.width = '40%';
                //   var L = `<label class="caption" id="lbConversionRate" title=""></label>`;
                fieldButt1.appendChild(searchCreditInput);
                //  $("#lbConversionRate").text("fff");
                //Serenity.EditorUtils.setReadonly(this.element.find(this.form.MultipleCostCenter.element), true);
                this.form.ChequeRegisterId.clearItems();
                this.form.TransactionMode.changeSelect2(function (p) {
                    _this.transactionModeChange();
                });
                //this.form.VoucherTypeId.changeSelect2(p => {
                //    this.form.TransactionTypeEntityId.clearItems();
                //    var AccTransactionType = Configurations.AccTransactionTypeRow.getLookup().items.filter(p => p.VoucherTypeId == +this.form.VoucherTypeId.value);//.filter((v, i, a) => a.indexOf(v) === i);
                //    for (var item of AccTransactionType) {
                //        //  var str = items[i];
                //        this.form.TransactionTypeEntityId.addItem({ id: item.Id.toString(), text: item.TransactionType, source: null, disabled: false });
                //    }
                //})
                if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                    this.form.TransactionType.value = "PAYMENT";
                    this.form.VoucherType.value = "Debit";
                }
                else if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                    this.form.TransactionType.value = "RECEIPT";
                    this.form.VoucherType.value = "Credit";
                    //
                }
                else if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Journal_Voucher.toString()) {
                    this.form.TransactionType.value = "JOURNAL";
                    this.form.VoucherType.value = "-";
                    this.form.TransactionMode.value = "Other";
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.TransactionMode.element), true);
                    //
                }
                this.form.AccountHead.clearItems();
                this.form.TransactionTypeEntityId.changeSelect2(function (p) {
                    if (_this.isNew()) {
                        _this.setNewVoucherNumber();
                    }
                    _this.loadAccountHead();
                });
                this.form.AccountHead.changeSelect2(function (p) {
                    var Check_AccHead = _this.items_ChartofAccounts.filter(function (f) { return f.Id == +_this.form.AccountHead.value; });
                    if (Check_AccHead[0].IsCostCenterAllocate == 1) {
                        Serenity.EditorUtils.setReadonly(_this.element.find(_this.form.MultipleCostCenter.element), false);
                    }
                    else {
                        Serenity.EditorUtils.setReadonly(_this.element.find(_this.form.MultipleCostCenter.element), true);
                    }
                    _this.setMultiCurrencyCurrency(Check_AccHead[0].MultiCurrencyCurrency, Check_AccHead[0].MultiCurrencyId, true);
                    //var _currency = Authorization.userDefinition.BaseCurrency;
                    //if (Check_AccHead[0].MultiCurrencyCurrency == _currency || Check_AccHead[0].MultiCurrencyCurrency == null) {
                    //    this.form.MultiCurrency.value = _currency;
                    //    this.form.ConversionRate.value = 1;
                    //    $("#lbConversionRate").text(_currency);
                    //    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ConversionAmount.element), true);
                    //    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ConversionRate.element), true);
                    //}
                    //else {
                    //    this.form.MultiCurrency.value = Check_AccHead[0].MultiCurrencyCurrency;
                    //    var MultiCurrency_amount = this.items_CurrencyConversionRate.filter(f => f.FirstCurrency == Check_AccHead[0].MultiCurrencyId);
                    //    this.form.ConversionRate.value = MultiCurrency_amount[0].SecondAmout;
                    //    $("#lbConversionRate").text(MultiCurrency_amount[0].SecondCurrencyCurrency);
                    //}
                    if (Check_AccHead[0].CoaMapping == "BANK") {
                        _this.form.ChequeRegisterId.value = "";
                        // this.form.PaytoOrReciveFrom.value = "";
                        _this.form.CreditAmount.value = 0;
                        _this.form.DebitAmount.value = 0;
                        //   this.form.Description.value = "";
                        Serenity.EditorUtils.setReadonly(_this.element.find(_this.form.ChequeRegisterId.element), false);
                        _this.loadCheque();
                    }
                    else {
                        Serenity.EditorUtils.setReadonly(_this.element.find(_this.form.ChequeRegisterId.element), true);
                        _this.form.ChequeRegisterId.value = "";
                        //    this.form.PaytoOrReciveFrom.value = "";
                        _this.form.CreditAmount.value = 0;
                        _this.form.DebitAmount.value = 0;
                        //  this.form.Description.value = "";
                    }
                    if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                        //
                        if (Check_AccHead[0].CoaMapping == "BANK" || Check_AccHead[0].CoaMapping == "CASH") {
                            //Serenity.EditorUtils.setReadonly(this.element.find(this.form.DebitAmount.element), true);
                            //Serenity.EditorUtils.setReadonly(this.element.find(this.form.CreditAmount.element), false);
                            _this.form.CreditAmount.element.focus();
                            _this.form.CreditAmount.element[0].setSelectionRange(0, 100);
                        }
                        else {
                            //Serenity.EditorUtils.setReadonly(this.element.find(this.form.DebitAmount.element), false);
                            //Serenity.EditorUtils.setReadonly(this.element.find(this.form.CreditAmount.element), true);
                            _this.form.DebitAmount.element.focus();
                            _this.form.DebitAmount.element[0].setSelectionRange(0, 100);
                        }
                    }
                    else if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                        //
                        if (Check_AccHead[0].CoaMapping == "BANK" || Check_AccHead[0].CoaMapping == "CASH") {
                            Serenity.EditorUtils.setReadonly(_this.element.find(_this.form.CreditAmount.element), true);
                            Serenity.EditorUtils.setReadonly(_this.element.find(_this.form.DebitAmount.element), false);
                            _this.form.DebitAmount.element.focus();
                            _this.form.DebitAmount.element[0].setSelectionRange(0, 100);
                        }
                        else {
                            Serenity.EditorUtils.setReadonly(_this.element.find(_this.form.CreditAmount.element), false);
                            Serenity.EditorUtils.setReadonly(_this.element.find(_this.form.DebitAmount.element), true);
                            _this.form.CreditAmount.element.focus();
                            _this.form.CreditAmount.element[0].setSelectionRange(0, 100);
                        }
                    }
                    else if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Journal_Voucher.toString()) {
                        //
                        var _AccTransactionTypeAssign = _this.AccTransactionTypeAssign
                            .filter(function (p) { return p.CoaId == +_this.form.AccountHead.value
                            && p.ParentId == +_this.form.TransactionTypeEntityId.value; });
                        if (_AccTransactionTypeAssign.length > 0) {
                            if (_AccTransactionTypeAssign[0].TrType == "C") {
                                _this.form.CreditAmount.element.focus();
                                _this.form.CreditAmount.element[0].setSelectionRange(0, 100);
                            }
                            else {
                                _this.form.DebitAmount.element.focus();
                                _this.form.DebitAmount.element[0].setSelectionRange(0, 100);
                            }
                        }
                    }
                });
                this.form.CreditAmount.change(function (p) {
                    _this.form.ConversionAmount.value = _this.form.ConversionRate.value * _this.form.CreditAmount.value;
                    _this.form.DebitAmount.value = 0;
                });
                this.form.DebitAmount.change(function (p) {
                    _this.form.ConversionAmount.value = _this.form.ConversionRate.value * _this.form.DebitAmount.value;
                    _this.form.CreditAmount.value = 0;
                });
                this.form.ConversionRate.change(function (p) {
                    _this.form.ConversionAmount.value = _this.form.ConversionRate.value * (_this.form.DebitAmount.value + _this.form.CreditAmount.value);
                });
                this.form.ChequeRegisterId.changeSelect2(function (p) {
                    if (_this.form.ChequeRegisterId.value != "") {
                        if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                            //
                            var _PayTo = _this.AccChequeRegister.filter(function (p) { return p.Id == +_this.form.ChequeRegisterId.value; });
                            _this.form.PaytoOrReciveFrom.value = _PayTo[0].PayTo;
                            _this.form.CreditAmount.value = _PayTo[0].Amount;
                            _this.form.Description.value = _PayTo[0].Remarks;
                            _this.form.ConversionAmount.value = _this.form.ConversionRate.value * _this.form.CreditAmount.value;
                        }
                        else if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                            //
                            var _ReceiveFrom = _this.AccChequeReceiveRegister.filter(function (p) { return p.Id == +_this.form.ChequeRegisterId.value; });
                            _this.form.PaytoOrReciveFrom.value = _ReceiveFrom[0].RecieveFrom;
                            _this.form.DebitAmount.value = _ReceiveFrom[0].Amount;
                            _this.form.Description.value = _ReceiveFrom[0].Remarks;
                            _this.form.ConversionAmount.value = _this.form.ConversionRate.value * _this.form.DebitAmount.value;
                        }
                    }
                    else {
                        _this.form.PaytoOrReciveFrom.value = "";
                        _this.form.CreditAmount.value = 0;
                        _this.form.DebitAmount.value = 0;
                        _this.form.Description.value = "";
                    }
                });
                this.form.VoucherDate.change(function (p) {
                    _this.VoucherDateChange();
                    if (_this.isNew()) {
                        _this.setNewVoucherNumber();
                    }
                });
                //--------------------
                //-- Keypress events
                //--------------------
                this.form.TransactionTypeEntityId.getGridField().keyup(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.VoucherDate.element.focus();
                    }
                });
                this.form.VoucherDate.element.keydown(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.AccountHead.element.focus();
                        return false;
                    }
                });
                this.form.AccountHead.getGridField().keyup(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.CostCentreId.element.focus();
                    }
                });
                this.form.CostCentreId.getGridField().keyup(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.DebitAmount.element.focus();
                    }
                });
                this.form.DebitAmount.element.keydown(function (e) {
                    if (e.keyCode == 13) {
                        _this.form.CreditAmount.element.focus();
                    }
                });
                this.form.CreditAmount.element.keydown(function (e) {
                    if (e.keyCode == 13) {
                        e.preventDefault();
                        $('.groupAdd').focus();
                        return false;
                    }
                });
                this.form.DDescription.element.keydown(function (e) {
                    if (e.keyCode == 13) {
                        e.preventDefault();
                        $('.groupAdd').focus();
                        return false;
                    }
                });
                if (!this.isNew()) {
                    if (this.form.approveStatus.value == "")
                        this.form.approveStatus.value = Number(VistaGL.ApprovalStatus.Draft).toString();
                    this.toolbar.findButton('apply-changes-button').hide();
                    this.toolbar.findButton('expand-all-button').hide(); // Save & Next Button
                    this.toolbar.findButton('send-button').hide();
                    this.toolbar.findButton('save-and-close-button').hide();
                    if (this.form.approveStatus.value == VistaGL.ApprovalStatus.Approved.toString()) {
                        $('.ApproverId').hide();
                    }
                    if (this.form.approveStatus.value == VistaGL.ApprovalStatus.Draft.toString() ||
                        this.form.approveStatus.value == VistaGL.ApprovalStatus.Regret.toString()) {
                        //
                        this.toolbar.findButton('send-button').show();
                        this.toolbar.findButton('save-and-close-button').show();
                    }
                    if (this.form.approveStatus.value == VistaGL.ApprovalStatus.Submit.toString() ||
                        this.form.approveStatus.value == VistaGL.ApprovalStatus.Recommend.toString()) {
                        // -- IF VOUCHER SEBMITTED AND CURRENT USER IS SAME THEN
                        if (this.entity.createdUserId != this.userId.toString()) {
                            //
                            var criteria = Serenity.Criteria.and([['ApplicationId'], '=', this.entity.Id], [['ApproverId'], '=', this.userId]);
                            Transaction.ApvApplicationInformationService.List({ Criteria: criteria }, function (response) {
                                if (response.Entities != undefined && response.Entities.length > 0) {
                                    _this.toolbar.findButton('send-button').show();
                                    _this.toolbar.findButton('save-and-close-button').show();
                                }
                            });
                        }
                        else {
                            Q.notifyWarning("This voucher is already submitted/recommended! You cannot edit at this moment!");
                            this.toolbar.findButton('send-button').hide();
                            this.toolbar.findButton('save-and-close-button').hide();
                        }
                    }
                    this.loadAccountHead();
                    this.sumDebitCredit();
                    this.transactionModeChange();
                    // added by Nazrul
                    var vouDtl = this.entity.VoucherDetails;
                    for (var i = 0; i < vouDtl.length; i++) {
                        var vouDtlTemp = vouDtl[i];
                        var costCenterTemp = '';
                        for (var _i = 0, _a = vouDtlTemp.VoucherDtlAllocation; _i < _a.length; _i++) {
                            var vouAllItem = _a[_i];
                            costCenterTemp += vouAllItem.CostCenterName + ', ';
                        }
                        if (vouDtlTemp.VoucherDtlAllocation.length > 0) {
                            this.entity.VoucherDetails[i].ChartofAccountsAccountName = vouDtlTemp.ChartofAccountsAccountName + ' (' + costCenterTemp + ')';
                        }
                        else {
                            this.entity.VoucherDetails[i].ChartofAccountsAccountName = vouDtlTemp.ChartofAccountsAccountName;
                        }
                        var id = this.entity.VoucherDetails[i].__id;
                        if (id == null) {
                            this.entity.VoucherDetails[i].__id = this.nextId++;
                        }
                    }
                    this.form.VoucherDetails.setItems(this.entity.VoucherDetails);
                    // end
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.TransactionMode.element), true);
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.TransactionTypeEntityId.element), true);
                    $('.LinkedPaymentVoucherNo').hide();
                    Transaction.AccVoucherInformationService.List({ Criteria: [['LinkedVoucherIdForAutoJV'], '=', this.entity.Id] }, function (r) {
                        if (r.Entities[0] != undefined) {
                            $('.LinkedPaymentVoucherNo').show();
                            _this.CheckAutoVoucher = true;
                            var linkedVNo = $('.LinkedPaymentVoucherNo')[0];
                            linkedVNo.innerHTML = '<div style="padding-top: 3px; color: blue;">' +
                                '<i><span>Linked Payment Voucher No:&nbsp;&nbsp;</span><u><a href= "Payment#edit/Id" data-item-type="Transaction.PaymentVoucher" data-item-id="Id" class="LinkedPVNo">' +
                                r.Entities[0].VoucherNo +
                                '</a></u></i>' +
                                '</div>';
                            $('.LinkedPVNo').attr({
                                'href': 'Payment#edit/' + r.Entities[0].Id.toString(),
                                'data-item-id': r.Entities[0].Id.toString()
                            });
                            if (_this.form.approveStatus.value == VistaGL.ApprovalStatus.Draft.toString()) {
                                //
                                Q.notifyWarning("Initiating auto journal voucher.");
                                _this.toolbar.findButton('delete-button').hide();
                                _this.toolbar.findButton('apply-changes-button').hide();
                                _this.toolbar.findButton('send-button').hide();
                                $($('.s-Transaction-AccVoucherInformationDialog .category')[0]).hide();
                            }
                        }
                    });
                }
                else {
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ChequeRegisterId.element), true);
                    this.VoucherDateChange();
                }
                this.form.TransactionTypeEntityId.element.focus();
                this.form.TransactionTypeEntityId.element.select();
            };
            AccVoucherInformationDialog.prototype.addtoGrid = function () {
                var _this = this;
                if (this.form.TransactionMode.value == "") {
                    Q.warning("Please select Transaction Mode.");
                    return;
                }
                if (this.form.AccountHead.value == "") {
                    Q.warning("Please select Account Head.");
                    return;
                }
                if ((this.form.DebitAmount.value.toString() == "NaN" && this.form.CreditAmount.value.toString() == "NaN")
                    || (this.form.DebitAmount.value <= 0 && this.form.CreditAmount.value <= 0)) {
                    Q.warning("Please enter Debit or Credit Amount 1.");
                    this.form.DebitAmount.element.focus();
                    return;
                }
                if (this.form.DebitAmount.value > 0 && this.form.CreditAmount.value > 0) {
                    Q.warning("Please enter Debit or Credit Amount 2.");
                    this.form.DebitAmount.element.focus();
                    return;
                }
                var Check_AccHead = this.items_ChartofAccounts.filter(function (f) { return f.Id == +_this.form.AccountHead.value; });
                var _amount = 0;
                var _Damount = 0;
                var _Camount = 0;
                this._IsBillRef = Check_AccHead[0].IsBillRef;
                this._IsCostCenterAllocate = Check_AccHead[0].IsCostCenterAllocate;
                if (Check_AccHead[0].CoaMapping == undefined) {
                    if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                        if (this.form.DebitAmount.value > 0) {
                            _amount = this.form.DebitAmount.value;
                            _Damount = this.form.DebitAmount.value;
                        }
                        else {
                            _amount = this.form.CreditAmount.value;
                            _Damount = this.form.CreditAmount.value;
                        }
                    }
                    else if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                        if (this.form.CreditAmount.value.toString() == "NaN" || this.form.CreditAmount.value <= 0) {
                            Q.warning("Debit Amount for Bank or Cash Head.");
                            return;
                        }
                        else {
                            _amount = this.form.CreditAmount.value;
                            _Camount = this.form.CreditAmount.value;
                        }
                    }
                    else if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Journal_Voucher.toString()) {
                        if (this.form.DebitAmount.value.toString() != "NaN" && this.form.DebitAmount.value > 0) {
                            _amount = this.form.DebitAmount.value;
                            _Damount = this.form.DebitAmount.value;
                        }
                        else {
                            _amount = this.form.CreditAmount.value;
                            _Camount = this.form.CreditAmount.value;
                        }
                    }
                }
                else {
                    if (this.form.TransactionMode.value == "BANK" && Check_AccHead[0].CoaMapping != "BANK") {
                        //  if (Check_AccHead[0].CoaMapping != "BANK") {
                        Q.warning("Please select Bank Head.");
                        return;
                        // }
                    }
                    if (this.form.TransactionMode.value == "CASH" && Check_AccHead[0].CoaMapping != "CASH") {
                        //  if (Check_AccHead[0].CoaMapping != "BANK") {
                        Q.warning("Please select Cash Head.");
                        return;
                        // }
                    }
                    if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                        if (this.form.CreditAmount.value > 0) {
                            _amount = this.form.CreditAmount.value;
                            _Damount = this.form.CreditAmount.value;
                        }
                        else {
                            _amount = this.form.DebitAmount.value;
                            _Damount = this.form.DebitAmount.value;
                        }
                    }
                    else if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                        if (this.form.DebitAmount.value.toString() == "NaN" || this.form.DebitAmount.value <= 0) {
                            Q.warning("Debit Amount for Bank or Cash Head.");
                            return;
                        }
                        else {
                            _amount = this.form.DebitAmount.value;
                            _Damount = this.form.DebitAmount.value;
                        }
                    }
                    else if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Journal_Voucher.toString()) {
                        if (this.form.DebitAmount.value.toString() != "NaN" && this.form.DebitAmount.value > 0) {
                            _amount = this.form.DebitAmount.value;
                            _Damount = this.form.DebitAmount.value;
                        }
                        else {
                            _amount = this.form.CreditAmount.value;
                            _Camount = this.form.CreditAmount.value;
                        }
                    }
                }
                var _items = this.form.VoucherDetails.getItems();
                this._VoucherDtlAllocation = [];
                if (Check_AccHead[0].IsCostCenterAllocate == 1) {
                    if (this.form.CostCentreId.value != "") {
                        this._VoucherDtlAllocation.push({
                            CostCenterId: +this.form.CostCentreId.value,
                            CostCenterTypeId: +this.form.CostCenterTypeId.value,
                            CostCenterParentId: +this.form.ParentId.value,
                            Amount: _amount,
                            DebitAmount: _Damount,
                            CreditAmount: _Camount,
                            CostCenterName: this.form.CostCentreId.get_text(),
                            AdjustedChequeRegisterId: +this.form.AdjustedChequeRegisterId.value
                        });
                    }
                    else if (this.form.MultipleCostCenter.value) { }
                    else {
                        Q.alert('Select Sub Ledger please!');
                        return;
                    }
                }
                var subledger;
                if (this.form.CostCentreId.get_text() != '' && this.form.CostCentreId.get_text() != undefined) {
                    subledger = ' (' + this.form.CostCentreId.get_text() + ')';
                }
                else {
                    subledger = '';
                }
                var _details;
                _details = {};
                _details.ChartofAccountsAccountName = this.form.AccountHead.get_text() + subledger,
                    _details.ChartofAccountsId = +this.form.AccountHead.value;
                _details.CreditAmount = this.form.CreditAmount.value;
                _details.DebitAmount = this.form.DebitAmount.value;
                _details.Description = this.form.DDescription.value;
                _details.VoucherDtlAllocation = this._VoucherDtlAllocation;
                _details.ConversionAmount = this.form.ConversionAmount.value;
                _details.ConversionRate = this.form.ConversionRate.value;
                _details.AdjustedChequeRegisterId = +this.form.AdjustedChequeRegisterId.value == 0 ? null : +this.form.AdjustedChequeRegisterId.value;
                console.log(_details.AdjustedChequeRegisterId);
                if (this.form.ChequeRegisterId.value != "") {
                    _details.ChequeRegisterId = +this.form.ChequeRegisterId.value;
                    if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                        var _AccChequeRegister = this.AccChequeRegister.filter(function (p) { return p.Id == +_this.form.ChequeRegisterId.value; });
                        _details.BankAccountInformationId = _AccChequeRegister[0].BankAccountInformationId;
                    }
                }
                _details.CCreditAmount = this.form.CreditAmount.value * this.form.ConversionRate.value;
                _details.CDebitAmount = this.form.DebitAmount.value * this.form.ConversionRate.value;
                if (Check_AccHead[0].AccountGroup == "Assets" || Check_AccHead[0].AccountGroup == "Expense") {
                    _details.EffectiveValue = _Damount - _Camount;
                }
                else {
                    _details.EffectiveValue = _Camount - _Damount;
                }
                if (Check_AccHead[0].IsCostCenterAllocate == 1 && this.form.MultipleCostCenter.value || Check_AccHead[0].IsBillRef == 1) {
                    this.form.VoucherDetails.C_NewItem(_details);
                }
                else {
                    _items.push(_details);
                    // Start SUM Dr/Cr and Grid ID
                    var dAmount = 0;
                    var cAmount = 0;
                    for (var _i = 0, _items_2 = _items; _i < _items_2.length; _i++) {
                        var item = _items_2[_i];
                        var id = item.__id;
                        if (id == null) {
                            item.__id = this.nextId++;
                        }
                        if (item.CreditAmount == undefined || item.CreditAmount == null) {
                        }
                        else if (item.CreditAmount.toString() != "NaN") {
                            cAmount += item.CreditAmount;
                        }
                        if (item.DebitAmount == undefined || item.DebitAmount == null) {
                        }
                        else if (item.DebitAmount.toString() != "NaN") {
                            dAmount += item.DebitAmount;
                        }
                    }
                    this.form.DAmount.value = dAmount;
                    this.form.CAmount.value = cAmount;
                    if (dAmount - cAmount == 0) {
                        this.form.Amount.value = cAmount;
                        this.form.AmountInWords.value = this.currencyToWords(this.form.Amount.value);
                    }
                    else {
                        this.form.Amount.value = 0;
                        this.form.AmountInWords.value = 'ZERO';
                    }
                    // End SUM Dr/Cr and Grid ID
                    this.form.VoucherDetails.setItems(_items);
                    this.clearData();
                }
                this.form.AccountHead.element.focus();
            };
            AccVoucherInformationDialog.prototype.afterLoadEntity = function () {
                _super.prototype.afterLoadEntity.call(this);
            };
            AccVoucherInformationDialog.prototype.getToolbarButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getToolbarButtons.call(this);
                buttons.push({
                    title: 'Save & Next',
                    cssClass: 'tool-button expand-all-button',
                    onClick: function () {
                        _this.save(function () {
                            Q.notifySuccess('Application has been Saved successfully.');
                            var ent = {};
                            ent.VoucherTypeId = Number(_this.form.VoucherTypeId.value);
                            ent.PostingFinancialYearId = Number(_this.form.PostingFinancialYearId.value);
                            ent.TransactionTypeEntityId = Number(_this.form.TransactionTypeEntityId.value);
                            ent.VoucherDate = _this.form.VoucherDate.value;
                            ent.TransactionMode = _this.transactionMode.toString();
                            ent.FileNo = _this.form.FileNo.value;
                            ent.PageNo = _this.form.PageNo.value;
                            ent.PaytoOrReciveFrom = ""; //this.form.PaytoOrReciveFrom.value;
                            _this.selectedApproverId = Number(_this.form.ApproverId.value);
                            _this.loadEntity(ent);
                            q.initDetailEditor(_this, _this.form.VoucherDetails);
                            _this.items_ChartofAccounts = Q.getLookup('Configurations.AccChartofAccounts_Lookup').items;
                            _this._VoucherConfiguration = Q.getLookup('Transaction.AccVoucherConfiguration_Lookup').items;
                            _this.toolbar.findButton('MoneyReceipt').hide(); // toggleClass('disabled');
                            var fieldpayToOrReceiveFrom = $('.PaytoOrReciveFrom .caption')[0];
                            // CHANGE TITLE - VOUCHER TYPE WISE
                            if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                                _this.set_dialogTitle("Bank wise Payment Voucher");
                                Q.reloadLookup("Transaction.AccChequeRegister_Lookup");
                                // this.AccChequeRegister = Q.getLookup('Transaction.AccChequeRegister_Lookup').items;
                                fieldpayToOrReceiveFrom.innerHTML = "<sup title=\"this field is required\">*</sup>Pay To";
                                //Serenity.EditorUtils.setReadonly(this.element.find(this.form.CreditAmount.element), true);
                            }
                            else if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                                _this.set_dialogTitle("Bank wise Receipt Voucher");
                                Q.reloadLookup("Transaction.AccChequeReceiveRegister_Lookup");
                                // this.AccChequeReceiveRegister = Q.getLookup('Transaction.AccChequeReceiveRegister_Lookup').items;
                                fieldpayToOrReceiveFrom.innerHTML = "Receive From";
                                _this.toolbar.findButton('MoneyReceipt').show(); // toggleClass('disabled');
                                //Serenity.EditorUtils.setReadonly(this.element.find(this.form.DebitAmount.element), true);
                            }
                            else if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Journal_Voucher.toString()) {
                                _this.set_dialogTitle("Journal/Adjustment Voucher");
                            }
                            $('.VoucherDetails .grid-toolbar').hide();
                            $('.MultiCurrency .caption').hide();
                            //$('.groupAdd').click(e => this.AddtoGrid());
                            // $('.ConversionRate .editor').css("width", "200px !important").removeClass("editor");
                            $('.ConversionRate .editor').removeClass("editor");
                            var fieldButt1 = $('.ConversionRate')[0];
                            var searchCreditInput;
                            searchCreditInput = document.createElement('label');
                            //  searchCreditInput.type = 'text';
                            searchCreditInput.id = 'lbConversionRate';
                            //fieldButt1.appendChild(searchCreditInput);
                            //$($('.s-Transaction-AccVoucherBankWiseDialog .category')[0]).hide();
                            _this.form.VoucherDetails.parentDialog = _this;
                            _this.VoucherDateChange();
                            _this.setNewVoucherNumberByTransactionType(_this.form.TransactionTypeEntityId.value);
                            if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                                _this.form.TransactionType.value = "PAYMENT";
                                _this.form.VoucherType.value = "Debit";
                            }
                            else if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                                _this.form.TransactionType.value = "RECEIPT";
                                _this.form.VoucherType.value = "Credit";
                            }
                            else if (_this.form.VoucherTypeId.value == VistaGL.VoucherType.Journal_Voucher.toString()) {
                                _this.form.TransactionType.value = "JOURNAL";
                                _this.form.VoucherType.value = "-";
                            }
                            _this.loadAccountHead();
                            if (_this.HeadId != 0) {
                                //this.loadAccountHeadBankCash();
                                //this.form.AccountHeadBankCash.value = this.HeadId.toString();
                                //this.populateChequeBook(+this.form.AccountHeadBankCash.value);
                                //if (!chequeBookId != null && chequeBookId != "") {
                                //    this.form.ChequeBookId.value = chequeBookId.toString();
                                //    this.populateChequeNumber(chequeBookId);
                                //}
                            }
                            if (_this.selectedApproverId != 0) {
                                _this.form.ApproverId.value = _this.selectedApproverId.toString();
                            }
                            _this.form.ChequeRegisterId.clearItems();
                            _this.form.ChequeRegisterId.value = "";
                            _this.form.CreditAmount.value = 0;
                            _this.form.DebitAmount.value = 0;
                            _this.form.DDescription.value = "";
                            Serenity.EditorUtils.setReadonly(_this.element.find(_this.form.ChequeRegisterId.element), false);
                            _this.loadCheque();
                        });
                    }
                });
                buttons.push({
                    title: "Print", cssClass: "print-preview-button",
                    onClick: function (x) {
                        //
                        if (_this.entityId != undefined) {
                            //
                            //Q.notifyInfo("Voucher print preview is opening...");
                            //var b = (new VoucherPreviewDialog());
                            //if (this.entity.LinkedWithAutoJV == true && this.entity.LinkedWithAutoJV != null) {
                            //    var _url = Q.resolveUrl("~/Reports/VoucherPreview/IndexCombineVoucher?id=" + this.entityId + "&isCombineVoucher=" + true);
                            //    b._url = _url;
                            //}
                            //else {
                            //    var _url = Q.resolveUrl("~/Reports/VoucherPreview?id=" + this.entityId);
                            //    b._url = _url;
                            //}
                            //b.dialogOpen();
                            if (_this.entity.LinkedWithAutoJV && _this.entity.LinkedWithAutoJV != null) {
                                var _url = "~/Reports/VoucherPreview/IndexCombineVoucher?id=" + _this.entityId + "&isCombineVoucher=" + true;
                            }
                            else {
                                var _url = "~/Reports/VoucherPreview?id=" + _this.entityId;
                            }
                            Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                        }
                        else {
                            Q.alert("Sorry! Voucher Id not found!");
                        }
                    }
                });
                //buttons.push({
                //    title: "Money Receipt", cssClass: "print-preview-button MoneyReceipt",
                //    onClick: (x) => {
                //        //     this._url="/css/css_colors.asp";
                //        if (this.entityId != undefined) {
                //            var b = (new VoucherPreviewDialog());
                //            var _url = Q.resolveUrl("~/Reports/MoneyReceipt?id=" + this.entityId);
                //            b._url = _url;
                //            b.dialogOpen();
                //        } else {
                //            Q.alert("Voucher Id not found.");
                //        }
                //    }
                //});
                buttons.push({
                    title: "Forward for approve", cssClass: "send-button",
                    onClick: function (x) {
                        var message = "Are you sure you want to Forward for approve?";
                        Q.confirm(message, function () {
                            if (_this.form.ApproverId.value == "") {
                                Q.alert("Please select approver");
                                return;
                            }
                            _this.sumDebitCredit();
                            _this.form.approveStatus.value = VistaGL.ApprovalStatus.Submit.toString();
                            _this.form.EmpId.value = +_this.form.ApproverId.value;
                            _this.save(function (p) { Q.notifySuccess("Voucher is submitted successfully."); _this.dialogClose(); });
                        });
                    }
                });
                return buttons;
            };
            AccVoucherInformationDialog.prototype.getSaveEntity = function () {
                var _this = this;
                var _entity = _super.prototype.getSaveEntity.call(this);
                var _vc = this._VoucherConfiguration.filter(function (p) { return p.FundControlInformationId == _this.fundControlId && p.TransactionTypeId == +_this.form.TransactionTypeEntityId.value && p.AccountingPeriodId == +_this.form.PostingFinancialYearId.value; });
                if (_vc.length > 0) {
                    if (_vc[0].IsAutoPost) {
                        _entity.PostingDate = this.form.VoucherDate.value;
                        _entity.PostedBy = this.userId.toString();
                        _entity.PostToLedger = 1;
                        _entity.approveStatus = VistaGL.ApprovalStatus.Approved;
                        this.IsAutoPost = true;
                    }
                }
                return _entity;
            };
            AccVoucherInformationDialog.prototype.validateBeforeSave = function () {
                var result = _super.prototype.validateBeforeSave.call(this);
                if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString() && this.form.PaytoOrReciveFrom.value == "") {
                    Q.alert("Please enter Pay To.");
                    result = false;
                }
                if (result) {
                    if (this.form.CAmount.value - this.form.DAmount.value != 0) {
                        Q.alert("Debit Amount and Credit Amount not match.");
                        result = false;
                    }
                }
                if (this.form.PostingFinancialYearId.value == "0") {
                    Q.alert("Accounting Period not found.");
                    result = false;
                }
                if (this.form.ApproverId.value != "") {
                    this.form.approveStatus.value = VistaGL.ApprovalStatus.Submit.toString();
                }
                return result;
            };
            AccVoucherInformationDialog.prototype.onSaveSuccess = function (response) {
                if (this.entity.approveStatus == VistaGL.ApprovalStatus.Draft) {
                    if (!this.IsAutoPost) {
                        this.toolbar.findButton('send-button').removeClass('disabled');
                    }
                    $($('.category')[0]).show();
                    //this.toolbar.findButton('save-and-close-button').toggleClass('disabled');
                    //this.toolbar.findButton('apply-changes-button').toggleClass('disabled');
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ApproverId.element), false);
                }
                else {
                    this.toolbar.findButton('send-button').toggleClass('disabled');
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ApproverId.element), true);
                }
                this.onAfterSaveSuccess();
            };
            AccVoucherInformationDialog.prototype.onAfterSaveSuccess = function () { };
            AccVoucherInformationDialog.prototype.setMultiCurrencyCurrency = function (MultiCurrencyCurrency, MultiCurrencyId, thisform) {
                var _this = this;
                var _currency = this.baseCurrency;
                if (!thisform) {
                    var Check_AccHead = this.items_ChartofAccounts.filter(function (f) { return f.Id == +_this.form.AccountHead.value; });
                    MultiCurrencyCurrency = Check_AccHead[0].MultiCurrencyCurrency;
                    MultiCurrencyId = Check_AccHead[0].MultiCurrencyId;
                }
                if (MultiCurrencyCurrency == _currency || MultiCurrencyCurrency == null) {
                    this.form.MultiCurrency.value = _currency;
                    this.form.ConversionRate.value = 1;
                    $("#lbConversionRate").text(_currency);
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ConversionAmount.element), true);
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ConversionRate.element), true);
                }
                else {
                    this.form.MultiCurrency.value = MultiCurrencyCurrency;
                    var MultiCurrency_amount = this.items_CurrencyConversionRate.filter(function (f) { return f.FirstCurrency == MultiCurrencyId; });
                    this.form.ConversionRate.value = MultiCurrency_amount[0].SecondAmout;
                    $("#lbConversionRate").text(MultiCurrency_amount[0].SecondCurrencyCurrency);
                }
            };
            AccVoucherInformationDialog.prototype.VoucherDateChange = function () {
                var _VoucherDate = this.form.VoucherDate.valueAsDate;
                var _piriod = this._AccountingPeriod.filter(function (j) { return _VoucherDate >= Q.parseISODateTime(j.PeriodStartDate) && _VoucherDate <= Q.parseISODateTime(j.PeriodEndDate); });
                if (_piriod.length == 0) {
                    Q.alert("Accounting Period not found.");
                    this.form.VoucherNo.value = "";
                }
                else {
                    this.form.PostingFinancialYearId.value = _piriod[0].Id.toString();
                }
            };
            AccVoucherInformationDialog.prototype.loadAccountHead = function () {
                var _this = this;
                this.form.AccountHead.clearItems();
                //  var distinct_axes2: AccTransactionTypeAssignRow[];
                var distinct_axes2 = [];
                var unique = this.AccTransactionTypeAssign.filter(function (p) { return p.ParentId == +_this.form.TransactionTypeEntityId.value; }); //.filter((v, i, a) => a.indexOf(v) === i);
                for (var i = 0; i < unique.length; i++) {
                    var str = unique[i];
                    var c = distinct_axes2.filter(function (p) { return p == str.CoaId; });
                    if (c.length < 1) {
                        var Check_Parent = this.items_ChartofAccounts.filter(function (f) { return f.Id == str.CoaId; });
                        if (Check_Parent[0].IsControlhead == 1) {
                            var Child_Items = this.items_ChartofAccounts.filter(function (f) { return f.ParentAccountId == Check_Parent[0].Id; });
                            for (var _i = 0, _a = Child_Items.filter(function (p) { return p.IsControlhead == 0; }); _i < _a.length; _i++) {
                                var _it = _a[_i];
                                c = distinct_axes2.filter(function (p) { return p == _it.Id; });
                                if (c.length < 1) {
                                    distinct_axes2.push(_it.Id);
                                    this.form.AccountHead.addItem({ id: _it.Id.toString(), text: _it.AccountName, source: null, disabled: false });
                                }
                            }
                        }
                        else {
                            distinct_axes2.push(str.CoaId);
                            this.form.AccountHead.addItem({ id: str.CoaId.toString(), text: str.CoaAccountName, source: null, disabled: false });
                        }
                    }
                }
                if (unique.length == 0) {
                    var items = this.items_ChartofAccounts.filter(function (f) { return f.IsControlhead == 0; });
                    this.form.AccountHead.clearItems();
                    for (var _b = 0, items_10 = items; _b < items_10.length; _b++) {
                        var item = items_10[_b];
                        // var str = items[i];
                        this.form.AccountHead.addItem({ id: item.Id.toString(), text: item.AccountName, source: null, disabled: false });
                    }
                }
            };
            AccVoucherInformationDialog.prototype.loadCheque = function () {
                var _this = this;
                if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Payment_Voucher.toString()) {
                    //
                    var _AccChequeRegister = this.AccChequeRegister.filter(function (p) { return p.BankAccountInformationCoaId == +_this.form.AccountHead.value; });
                    this.form.ChequeRegisterId.clearItems();
                    for (var _i = 0, _AccChequeRegister_5 = _AccChequeRegister; _i < _AccChequeRegister_5.length; _i++) {
                        var item = _AccChequeRegister_5[_i];
                        //  var str = items[i];
                        this.form.ChequeRegisterId.addItem({ id: item.Id.toString(), text: item.ChequeNo, source: null, disabled: false });
                    }
                }
                else if (this.form.VoucherTypeId.value == VistaGL.VoucherType.Receipt_Voucher.toString()) {
                    //
                    var _AccChequeReceiveRegister = this.AccChequeReceiveRegister;
                    this.form.ChequeRegisterId.clearItems();
                    for (var _a = 0, _AccChequeReceiveRegister_2 = _AccChequeReceiveRegister; _a < _AccChequeReceiveRegister_2.length; _a++) {
                        var item1 = _AccChequeReceiveRegister_2[_a];
                        //  var str = items[i];
                        //this.form.ChequeRegisterId.addItem({ id: item1.Id.toString(), text: item1.AccountName, source: null, disabled: false });
                        this.form.ChequeRegisterId.addItem({ id: item1.Id.toString(), text: item1.ChequeNo.toString() + "#" + item1.Amount + " TK.", source: null, disabled: false });
                    }
                }
            };
            AccVoucherInformationDialog.prototype.sumDebitCredit = function () {
                var dAmount = 0;
                var cAmount = 0;
                for (var _i = 0, _a = this.form.VoucherDetails.value; _i < _a.length; _i++) {
                    var item = _a[_i];
                    if (item.CreditAmount == undefined || item.CreditAmount == null) {
                    }
                    else if (item.CreditAmount.toString() != "NaN") {
                        cAmount += item.CreditAmount;
                    }
                    if (item.DebitAmount == undefined || item.DebitAmount == null) {
                    }
                    else if (item.DebitAmount.toString() != "NaN") {
                        dAmount += item.DebitAmount;
                    }
                }
                this.form.DAmount.value = dAmount;
                this.form.CAmount.value = cAmount;
                if (dAmount - cAmount == 0) {
                    this.form.Amount.value = cAmount;
                    this.form.AmountInWords.value = this.currencyToWords(this.form.Amount.value);
                }
                else {
                    this.form.Amount.value = 0;
                    this.form.AmountInWords.value = 'ZERO';
                }
                this.clearData();
            };
            AccVoucherInformationDialog.prototype.clearData = function () {
                //this.form.AccountHead.value = null;
                this.form.CreditAmount.value = 0;
                this.form.DebitAmount.value = 0;
                this.form.DDescription.value = "";
                this.form.ConversionAmount.value = 0;
                this.form.ConversionRate.value = 0;
                this.form.MultiCurrency.value = "";
                this.form.MultipleCostCenter.value = false;
                //this.form.CostCentreId.value = "";
                this.form.ChequeRegisterId.value = "";
                $("#lbConversionRate").text("");
            };
            AccVoucherInformationDialog.prototype.setNewVoucherNumber = function () {
                //
                this.form.VoucherNo.value = "";
                this.form.VoucherNumber.value = "";
                var voucherDate = new Date(this.form.VoucherDate.value);
                var financialYearId = Number(this.form.PostingFinancialYearId.value);
                var bankAccId = 0;
                var fundControlId = this.fundControlId;
                var zoneId = this.zoneId;
                var transactionTypeId = +this.form.TransactionTypeEntityId.value;
                VoucherUtil.newVoucherNumberFactory(this._VoucherConfiguration, transactionTypeId, voucherDate, financialYearId, fundControlId, zoneId, bankAccId, function (_voucherNo, _voucherNumber) {
                    $('.VoucherNo input').val(_voucherNo);
                    $('.VoucherNumber input').val(_voucherNumber);
                });
            };
            AccVoucherInformationDialog.prototype.setNewVoucherNumberByTransactionType = function (transactionTypeId) {
                this.form.VoucherNo.value = "";
                this.form.VoucherNumber.value = "";
                var voucherDate = new Date(this.form.VoucherDate.value);
                var financialYearId = Number(this.form.PostingFinancialYearId.value);
                var bankAccId = null;
                var fundControlId = this.fundControlId;
                var zoneId = this.zoneId;
                VoucherUtil.newVoucherNumberFactory(this._VoucherConfiguration, transactionTypeId, voucherDate, financialYearId, fundControlId, zoneId, bankAccId, function (_voucherNo, _voucherNumber) {
                    //
                    $('.VoucherNo input').val(_voucherNo);
                    $('.VoucherNumber input').val(_voucherNumber);
                });
            };
            AccVoucherInformationDialog.prototype.currencyToWords = function (s) {
                var result = '';
                var data = Q.parseDecimal(s.toString()) - Math.floor(s);
                if (data > 0) {
                    result = this.convertNumber(s) + " TAKA " + this.convertNumber(data * 100) + " POISA";
                }
                else {
                    result = this.convertNumber(s) + " TAKA";
                }
                return result + " ONLY";
            };
            AccVoucherInformationDialog.prototype.convertNumber = function (num) {
                if ((num < 0) || (num > 99999999999999)) {
                    return "NUMBER OUT OF RANGE!";
                }
                var Gn = Math.floor(num / 10000000); /* Crore */
                num -= Gn * 10000000;
                var kn = Math.floor(num / 100000); /* lakhs */
                num -= kn * 100000;
                var Hn = Math.floor(num / 1000); /* thousand */
                num -= Hn * 1000;
                var Dn = Math.floor(num / 100); /* Tens (deca) */
                num = num % 100; /* Ones */
                var tn = Math.floor(num / 10);
                var one = Math.floor(num % 10);
                var res = "";
                if (Gn > 0) {
                    res += (this.convertNumber(Gn) + " CRORE");
                }
                if (kn > 0) {
                    res += (((res == "") ? "" : " ") +
                        this.convertNumber(kn) + " LAKH");
                }
                if (Hn > 0) {
                    res += (((res == "") ? "" : " ") +
                        this.convertNumber(Hn) + " THOUSAND");
                }
                if (Dn) {
                    res += (((res == "") ? "" : " ") +
                        this.convertNumber(Dn) + " HUNDRED");
                }
                var ones = Array("", "ONE", "TWO", "THREE", "FOUR", "FIVE", "SIX", "SEVEN", "EIGHT", "NINE", "TEN", "ELEVEN", "TWELVE", "THIRTEEN", "FOURTEEN", "FIFTEEN", "SIXTEEN", "SEVENTEEN", "EIGHTEEN", "NINETEEN");
                var tens = Array("", "", "TWENTY", "THIRTY", "FOURTY", "FIFTY", "SIXTY", "SEVENTY", "EIGHTY", "NINETY");
                if (tn > 0 || one > 0) {
                    if (!(res == "")) {
                        res += " AND ";
                    }
                    if (tn < 2) {
                        res += ones[tn * 10 + one];
                    }
                    else {
                        res += tens[tn];
                        if (one > 0) {
                            res += ("-" + ones[one]);
                        }
                    }
                }
                if (res == "") {
                    res = "ZERO";
                }
                return res;
            };
            AccVoucherInformationDialog.prototype.transactionModeChange = function () {
                if (this.form.TransactionMode.value == "BANK") {
                    // this.form.BankAccountInformationId.value
                    //    Serenity.EditorUtils.setReadonly(this.element.find(this.form.BankAccountInformationId.element), false);
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ChequeRegisterId.element), false);
                    //  var items = this.items_ChartofAccounts.filter(f => f.CoaMapping == "BANK");
                    // this.form.AccountHead.clearItems();
                    //for (var item of items) {
                    //    var str = item;
                    //    this.form.AccountHead.addItem({ id: str.Id.toString(), text: str.AccountName, source: null, disabled: false });
                    //}
                }
                else {
                    //var items = this.items_ChartofAccounts.filter(f => f.IsControlhead == 0 && f.CoaMapping == "CASH");
                    //this.form.AccountHead.clearItems();
                    //for (var i = 0; i < items.length; i++) {
                    //    var str = items[i];
                    //    this.form.AccountHead.addItem({ id: str.Id.toString(), text: str.AccountName, source: null, disabled: false });
                    //}
                    // Serenity.EditorUtils.setReadonly(this.element.find(this.form.BankAccountInformationId.element), true);
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.ChequeRegisterId.element), true);
                }
                this.isFristTime = true;
            };
            AccVoucherInformationDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive(),
                Serenity.Decorators.maximizable()
            ], AccVoucherInformationDialog);
            return AccVoucherInformationDialog;
        }(VistaGL.EntityDialogBase));
        Transaction.AccVoucherInformationDialog = AccVoucherInformationDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherInformationGrid = (function (_super) {
            __extends(AccVoucherInformationGrid, _super);
            function AccVoucherInformationGrid(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherInformationGrid.prototype.getColumnsKey = function () { return 'Transaction.AccVoucherInformation'; };
            AccVoucherInformationGrid.prototype.getDialogType = function () { return Transaction.AccVoucherInformationDialog; };
            AccVoucherInformationGrid.prototype.getIdProperty = function () { return Transaction.AccVoucherInformationRow.idProperty; };
            AccVoucherInformationGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherInformationRow.localTextPrefix; };
            AccVoucherInformationGrid.prototype.getService = function () { return Transaction.AccVoucherInformationService.baseUrl; };
            AccVoucherInformationGrid.prototype.OpenVoucher = function (id) {
                VistaGL.Configurations.AccVoucherApiDetailsService.List({ Criteria: [['VoucherApiId'], '=', id] }, function (r) {
                    var chqReg;
                    chqReg = r.Entities;
                    if (chqReg.length > 0) {
                        var lstEntity = chqReg[0];
                        var b = (new Transaction.AccVoucherInformationDialog());
                        var entity_voucher;
                        entity_voucher = {};
                        entity_voucher.VoucherTypeId = lstEntity.VoucherApiVouchrTypeId;
                        //
                        entity_voucher.TransactionMode = lstEntity.VoucherApiTransactionMode;
                        b.loadEntityAndOpenDialog(entity_voucher);
                        //   b.form.VoucherTypeId.value = "1";
                        b.form.TransactionTypeEntityId.value = lstEntity.VoucherApiTransactionId.toString();
                        b.setNewVoucherNumber();
                        b.loadAccountHead();
                        b.form.Description.value = lstEntity.VoucherApiNarration;
                        for (var _i = 0, chqReg_2 = chqReg; _i < chqReg_2.length; _i++) {
                            var item = chqReg_2[_i];
                            b.form.AccountHead.value = item.AccountHeadId.toString();
                            var amount = item.Amount;
                            if (item.DrCr == "Cr") {
                                b.form.DebitAmount.value = 0;
                                b.form.CreditAmount.value = amount;
                            }
                            else {
                                b.form.DebitAmount.value = amount;
                                b.form.CreditAmount.value = 0;
                            }
                            // b.LoadCheque();
                            //  b.form.ChequeRegisterId.value = this.entityId;
                            b.setMultiCurrencyCurrency(null, null, false);
                            //b.form.ConversionAmount.value = b.form.ConversionRate.value * amount;
                            //b.form.PaytoOrReciveFrom.value = this.form.PayTo.value;
                            b.form.DDescription.value = item.Description;
                            b.addtoGrid();
                        }
                    }
                    else {
                        Q.alert("Id not found.");
                    }
                });
            };
            AccVoucherInformationGrid.prototype.getColumns = function () {
                var columns = _super.prototype.getColumns.call(this);
                columns.unshift({
                    field: 'Print Voucher',
                    name: '',
                    format: function (ctx) { return '<a class="inline-action Print-link" title="Print Voucher">' +
                        '<i class="fa fa-print text-blue"></i></a>'; },
                    width: 24,
                    minWidth: 24,
                    maxWidth: 24
                });
                // It is using to change backcolor of approved voucher.
                Q.first(columns, function (x) { return x.field == "approveStatus" /* approveStatus */; }).cssClass += " col-Approve-Status";
                return columns;
            };
            AccVoucherInformationGrid.prototype.getSlickOptions = function () {
                var opt = _super.prototype.getSlickOptions.call(this);
                opt.frozenColumn = 3;
                return opt;
            };
            AccVoucherInformationGrid.prototype.getItemCssClass = function (item, index) {
                var klass = "";
                if (item.LinkedWithAutoJV) {
                    klass += " backColorForLinkedWithAutoJV";
                }
                if (item.approveStatus == VistaGL.ApprovalStatus.Approved) {
                    klass += " approved-Voucher";
                }
                return Q.trimToNull(klass);
            };
            AccVoucherInformationGrid.prototype.onClick = function (e, row, cell) {
                _super.prototype.onClick.call(this, e, row, cell);
                if (e.isDefaultPrevented()) {
                    return;
                }
                var item = this.itemAt(row);
                var target = $(e.target);
                if (target.parent().hasClass('Print-link'))
                    target = target.parent();
                //if (item.LinkedWithAutoJV == true && item.LinkedWithAutoJV != null) {
                //    if (target.hasClass("Print-link")) {
                //        e.preventDefault();
                //        var b = (new VoucherPreviewDialog());
                //        var _url = Q.resolveUrl("~/Reports/VoucherPreview/IndexCombineVoucher?id=" + item.Id + "&isCombineVoucher=" + true);
                //        b._url = _url;
                //        b.dialogOpen();
                //    }
                //}
                //else {
                //    if (target.hasClass("Print-link")) {
                //        e.preventDefault();
                //        var b = (new VoucherPreviewDialog());
                //        var _url = Q.resolveUrl("~/Reports/VoucherPreview?id=" + item.Id);
                //        b._url = _url;
                //        b.dialogOpen();
                //    }
                //}
                if (target.hasClass("Print-link")) {
                    e.preventDefault();
                    if (item.LinkedWithAutoJV && item.LinkedWithAutoJV != null) {
                        var _url = "~/Reports/VoucherPreview/IndexCombineVoucher?id=" + item.Id + "&isCombineVoucher=" + true;
                    }
                    else {
                        var _url = "~/Reports/VoucherPreview?id=" + item.Id;
                    }
                    Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                }
            };
            AccVoucherInformationGrid.prototype.getQuickFilters = function () {
                var filters = _super.prototype.getQuickFilters.call(this);
                // --
                var filterByChequeNo = Q.tryFirst(filters, function (x) { return x.field == "ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */; });
                if (filterByChequeNo != null) {
                    filterByChequeNo.title = "Cheque No..";
                    filterByChequeNo.type = Serenity.StringEditor;
                    filterByChequeNo.handler = function (h) {
                        if (h.active) {
                            h.request.Criteria = Serenity.Criteria.and(h.request.Criteria, [["ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */], 'like', '%' + h.value + '%']);
                        }
                    };
                }
                // --
                var filterByAmount = Q.tryFirst(filters, function (x) { return x.field == "Amount" /* Amount */; });
                if (filterByAmount != null) {
                    filterByAmount.title = "Amount (Exactly)";
                    //filterByAmount.type = Serenity.StringEditor;
                    //filterByAmount.handler = h => {
                    //    if (h.active) {
                    //        console.log(h.value);
                    //        h.request.Criteria = Serenity.Criteria.and(h.request.Criteria,
                    //            [[fld.Amount], 'like', h.value + '%']);
                    //    }
                    //};
                }
                // --
                return filters;
            };
            AccVoucherInformationGrid.prototype.getQuickSearchFields = function () {
                var txt = function (s) { return Q.text("Db." + Transaction.AccVoucherInformationRow.localTextPrefix + "." + s).toLowerCase(); };
                return [
                    { name: "", title: "all" },
                    { name: "VoucherNo" /* VoucherNo */, title: txt("VoucherNo" /* VoucherNo */) },
                    { name: "Description" /* Description */, title: txt("Description" /* Description */) },
                    { name: "PaytoOrReciveFrom" /* PaytoOrReciveFrom */, title: txt("PaytoOrReciveFrom" /* PaytoOrReciveFrom */) },
                    { name: "ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */, title: txt("ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */) },
                    { name: "Amount" /* Amount */, title: txt("Amount" /* Amount */) }
                ];
            };
            AccVoucherInformationGrid.prototype.getViewOptions = function () {
                var opt = _super.prototype.getViewOptions.call(this);
                opt.rowsPerPage = 20;
                return opt;
            };
            AccVoucherInformationGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherInformationGrid);
            return AccVoucherInformationGrid;
        }(VistaGL.EntityGridBaseNew));
        Transaction.AccVoucherInformationGrid = AccVoucherInformationGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherInformationSearchGrid = (function (_super) {
            __extends(AccVoucherInformationSearchGrid, _super);
            function AccVoucherInformationSearchGrid(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherInformationSearchGrid.prototype.getColumnsKey = function () { return 'Transaction.VoucherInformationSearch'; };
            AccVoucherInformationSearchGrid.prototype.getDialogType = function () { return Transaction.AccVoucherInformationDialog; };
            AccVoucherInformationSearchGrid.prototype.getIdProperty = function () { return Transaction.AccVoucherInformationRow.idProperty; };
            AccVoucherInformationSearchGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherInformationRow.localTextPrefix; };
            AccVoucherInformationSearchGrid.prototype.getService = function () { return Transaction.AccVoucherInformationService.baseUrl; };
            AccVoucherInformationSearchGrid.prototype.set_VoucherTempId = function (value) {
                this.VoucherTempId = value == null ? 0 : value;
            };
            AccVoucherInformationSearchGrid.prototype.OpenVoucher = function (id) {
            };
            //protected VoucherTypeIdFilter: Serenity.LookupEditor;
            //public set_VoucherTypeId(value: number): void {
            //    this.VoucherTypeIdFilter.value = value == null ? '' : value.toString();
            //}
            //protected createQuickFilters() {
            //    super.createQuickFilters();
            //    let fld = AccVoucherInformationRow.Fields;
            //    this.VoucherTypeIdFilter = this.findQuickFilter(Serenity.LookupEditor, fld.VoucherTypeId);
            //}
            AccVoucherInformationSearchGrid.prototype.getColumns = function () {
                var columns = _super.prototype.getColumns.call(this);
                columns.unshift({
                    field: 'Print Voucher',
                    name: '',
                    format: function (ctx) { return '<a class="inline-action Print-link" title="Print Voucher">' +
                        '<i class="fa fa-print text-blue"></i></a>'; },
                    width: 24,
                    minWidth: 24,
                    maxWidth: 24
                });
                // It is using to change backcolor of approved voucher.
                Q.first(columns, function (x) { return x.field == "approveStatus" /* approveStatus */; }).cssClass += " col-Approve-Status";
                return columns;
            };
            AccVoucherInformationSearchGrid.prototype.getSlickOptions = function () {
                var opt = _super.prototype.getSlickOptions.call(this);
                opt.frozenColumn = 3;
                return opt;
            };
            AccVoucherInformationSearchGrid.prototype.getItemCssClass = function (item, index) {
                var klass = "";
                if (item.approveStatus === VistaGL.ApprovalStatus.Approved) {
                    klass += " approved-Voucher";
                }
                if (item.LinkedWithDebitVoucher) {
                    klass += " linked-Journal-Voucher";
                }
                return Q.trimToNull(klass);
            };
            AccVoucherInformationSearchGrid.prototype.onClick = function (e, row, cell) {
                _super.prototype.onClick.call(this, e, row, cell);
                if (e.isDefaultPrevented()) {
                    return;
                }
                var item = this.itemAt(row);
                var target = $(e.target);
                if (target.parent().hasClass('Print-link'))
                    target = target.parent();
                //if (item.LinkedWithAutoJV == true && item.LinkedWithAutoJV != null) {
                //    if (target.hasClass("Print-link")) {
                //        e.preventDefault();
                //        var b = (new VoucherPreviewDialog());
                //        var _url = Q.resolveUrl("~/Reports/VoucherPreview/IndexCombineVoucher?id=" + item.Id + "&isCombineVoucher=" + true);
                //        b._url = _url;
                //        b.dialogOpen();
                //    }
                //}
                //else {
                //    if (target.hasClass("Print-link")) {
                //        e.preventDefault();
                //        var b = (new VoucherPreviewDialog());
                //        var _url = Q.resolveUrl("~/Reports/VoucherPreview?id=" + item.Id);
                //        b._url = _url;
                //        b.dialogOpen();
                //    }
                //}
                if (target.hasClass("Print-link")) {
                    e.preventDefault();
                    if (item.LinkedWithAutoJV && item.LinkedWithAutoJV != null) {
                        var _url = "~/Reports/VoucherPreview/IndexCombineVoucher?id=" + item.Id + "&isCombineVoucher=" + true;
                    }
                    else {
                        var _url = "~/Reports/VoucherPreview?id=" + item.Id;
                    }
                    Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                }
            };
            AccVoucherInformationSearchGrid.prototype.getQuickFilters = function () {
                var filters = _super.prototype.getQuickFilters.call(this);
                // --
                var filterByChequeNo = Q.tryFirst(filters, function (x) { return x.field == "ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */; });
                if (filterByChequeNo != null) {
                    filterByChequeNo.title = "Cheque No..";
                    filterByChequeNo.type = Serenity.StringEditor;
                    filterByChequeNo.handler = function (h) {
                        if (h.active) {
                            h.request.Criteria = Serenity.Criteria.and(h.request.Criteria, [["ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */], 'like', '%' + h.value + '%']);
                        }
                    };
                }
                // --
                var filterByAmount = Q.tryFirst(filters, function (x) { return x.field == "Amount" /* Amount */; });
                if (filterByAmount != null) {
                    filterByAmount.title = "Amount (Exactly)";
                    //filterByAmount.type = Serenity.StringEditor;
                    //filterByAmount.handler = h => {
                    //    if (h.active) {
                    //        console.log(h.value);
                    //        h.request.Criteria = Serenity.Criteria.and(h.request.Criteria,
                    //            [[fld.Amount], 'like', h.value + '%']);
                    //    }
                    //};
                }
                // --
                return filters;
            };
            AccVoucherInformationSearchGrid.prototype.getQuickSearchFields = function () {
                var txt = function (s) { return Q.text("Db." + Transaction.AccVoucherInformationRow.localTextPrefix + "." + s).toLowerCase(); };
                return [
                    { name: "", title: "all" },
                    { name: "VoucherNo" /* VoucherNo */, title: txt("VoucherNo" /* VoucherNo */) },
                    { name: "Description" /* Description */, title: txt("Description" /* Description */) },
                    { name: "PaytoOrReciveFrom" /* PaytoOrReciveFrom */, title: txt("PaytoOrReciveFrom" /* PaytoOrReciveFrom */) },
                    { name: "ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */, title: txt("ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */) },
                    { name: "Amount" /* Amount */, title: txt("Amount" /* Amount */) }
                ];
            };
            AccVoucherInformationSearchGrid.prototype.getButtons = function () {
                var b = _super.prototype.getButtons.call(this);
                b.shift();
                return b;
            };
            AccVoucherInformationSearchGrid.prototype.getViewOptions = function () {
                var opt = _super.prototype.getViewOptions.call(this);
                opt.rowsPerPage = 20;
                return opt;
            };
            AccVoucherInformationSearchGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherInformationSearchGrid);
            return AccVoucherInformationSearchGrid;
        }(VistaGL.EntityGridBaseNew));
        Transaction.AccVoucherInformationSearchGrid = AccVoucherInformationSearchGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var selectCalculationDialog = (function (_super) {
            __extends(selectCalculationDialog, _super);
            function selectCalculationDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Transaction.selectCalculationForm(_this.idPrefix);
                _this.dialogTitle = "Calculate";
                return _this;
                //this.form.Type.changeSelect2(p => {
                //    Q.alert(this.form.Type.get_text());
                //});
            }
            selectCalculationDialog.prototype.getFormKey = function () { return Transaction.selectCalculationForm.formKey; };
            selectCalculationDialog.prototype.getToolbarButtons = function () {
                var _this = this;
                var buttons = []; //super.getToolbarButtons();
                buttons.push({
                    title: 'Ok',
                    cssClass: 'tool-button expand-all-button',
                    onClick: function () {
                        var type = _this.form.Type.value;
                        var amount = _this.form.Amount.value;
                        var rate = _this.form.Rate.value;
                        var finalAmount = amount * (rate / 100);
                        if (type == 'Dr') {
                            $("input[name*='DebitAmount']").val(finalAmount);
                            $("input[name*='CreditAmount']").val(0);
                        }
                        else {
                            $("input[name*='CreditAmount']").val(finalAmount);
                            $("input[name*='DebitAmount']").val(0);
                        }
                        _this.dialogClose();
                    }
                });
                return buttons;
            };
            selectCalculationDialog = __decorate([
                Serenity.Decorators.registerClass()
            ], selectCalculationDialog);
            return selectCalculationDialog;
        }(Serenity.EntityDialog));
        Transaction.selectCalculationDialog = selectCalculationDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var VoucherApprovalHistoryEditor = (function (_super) {
            __extends(VoucherApprovalHistoryEditor, _super);
            function VoucherApprovalHistoryEditor(div) {
                return _super.call(this, div) || this;
            }
            VoucherApprovalHistoryEditor.prototype.getTemplate = function () {
                return "<div><div id='~_Toolbar'></div><div id='~_NoteList'></div></div>";
            };
            VoucherApprovalHistoryEditor.prototype.updateContent = function () {
                var noteList = this.byId('NoteList');
                noteList.children().remove();
                if (this.items) {
                    var html = '<table class="table table-sm table-striped table-hover">';
                    html += '<tr style="background-color: gray; color: white; font-weight: bold;"><td>' + 'Date & Time' + '</td>' + '<td>' + 'Status' + '</td>' + '<td>' + 'Forword By' + '</td>' + '<td>' + 'Forword To' + ' </td>' + '<td>' + 'Comments' + ' </td>';
                    for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
                        var item = _a[_i];
                        if (item.Status == undefined)
                            item.Status = "Pending";
                        html += '<tr>' +
                            '<td>' + Q.formatDate(item.IDate, 'g') + '</td>' +
                            '<td>' + item.Status + '</td>' +
                            '<td>' + item.ForwordBy + '(' + item.IUser + ')' + ' </td>' +
                            '<td>' + item.EmploymentInfoFullName + '(' + item.ApproverCode + ')' + '</td>' +
                            '<td>' + item.ApproverComments + '</td></tr>';
                    }
                    ;
                    html += '</table>';
                    noteList.append(html);
                }
            };
            VoucherApprovalHistoryEditor.prototype.getEditValue = function (prop, target) {
                target[prop.name] = this.value;
            };
            VoucherApprovalHistoryEditor.prototype.setEditValue = function (source, prop) {
                this.value = source[prop.name] || [];
            };
            Object.defineProperty(VoucherApprovalHistoryEditor.prototype, "value", {
                get: function () {
                    return this.items;
                },
                set: function (value) {
                    this.items = value || [];
                    this.set_isDirty(false);
                    this.updateContent();
                },
                enumerable: true,
                configurable: true
            });
            VoucherApprovalHistoryEditor.prototype.get_isDirty = function () {
                return this.isDirty;
            };
            VoucherApprovalHistoryEditor.prototype.set_isDirty = function (value) {
                this.isDirty = value;
            };
            VoucherApprovalHistoryEditor = __decorate([
                Serenity.Decorators.registerEditor([Serenity.IGetEditValue, Serenity.ISetEditValue]),
                Serenity.Decorators.element("<div/>")
            ], VoucherApprovalHistoryEditor);
            return VoucherApprovalHistoryEditor;
        }(Serenity.TemplatedWidget));
        Transaction.VoucherApprovalHistoryEditor = VoucherApprovalHistoryEditor;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var VoucherAuditLogEditor = (function (_super) {
            __extends(VoucherAuditLogEditor, _super);
            function VoucherAuditLogEditor(div) {
                return _super.call(this, div) || this;
            }
            VoucherAuditLogEditor.prototype.getTemplate = function () {
                return "<div><div id='~_Toolbar'></div><div id='~_NoteList'></div></div>";
            };
            VoucherAuditLogEditor.prototype.updateContent = function () {
                var noteList = this.byId('NoteList');
                noteList.children().remove();
                if (this.items) {
                    var html = '<table class="table table-sm table-striped table-hover">';
                    html += '<tr style="background-color: gray; color: white; font-weight: bold;"><td>' + 'Date & Time' + '</td>' + '<td>' + 'Status' + '</td>' + '<td>' + 'Forword By' + '</td>' + '<td>' + 'Forword To' + ' </td>' + '<td>' + 'Comments' + ' </td>';
                    for (var _i = 0, _a = this.items; _i < _a.length; _i++) {
                        var item = _a[_i];
                        if (item.Status == undefined)
                            item.Status = "Pending";
                        html += '<tr>' +
                            '<td>' + Q.formatDate(item.IDate, 'g') + '</td>' +
                            '<td>' + item.Status + '</td>' +
                            '<td>' + item.ForwordBy + '(' + item.IUser + ')' + ' </td>' +
                            '<td>' + item.EmploymentInfoFullName + '(' + item.ApproverCode + ')' + '</td>' +
                            '<td>' + item.ApproverComments + '</td></tr>';
                    }
                    ;
                    html += '</table>';
                    noteList.append(html);
                }
            };
            VoucherAuditLogEditor.prototype.getEditValue = function (prop, target) {
                target[prop.name] = this.value;
            };
            VoucherAuditLogEditor.prototype.setEditValue = function (source, prop) {
                this.value = source[prop.name] || [];
            };
            Object.defineProperty(VoucherAuditLogEditor.prototype, "value", {
                get: function () {
                    return this.items;
                },
                set: function (value) {
                    this.items = value || [];
                    this.set_isDirty(false);
                    this.updateContent();
                },
                enumerable: true,
                configurable: true
            });
            VoucherAuditLogEditor.prototype.get_isDirty = function () {
                return this.isDirty;
            };
            VoucherAuditLogEditor.prototype.set_isDirty = function (value) {
                this.isDirty = value;
            };
            VoucherAuditLogEditor = __decorate([
                Serenity.Decorators.registerEditor([Serenity.IGetEditValue, Serenity.ISetEditValue]),
                Serenity.Decorators.element("<div/>")
            ], VoucherAuditLogEditor);
            return VoucherAuditLogEditor;
        }(Serenity.TemplatedWidget));
        Transaction.VoucherAuditLogEditor = VoucherAuditLogEditor;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
/// <reference path="../accvoucherinformationgrid.ts" />
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var JournalVoucherGrid = (function (_super) {
            __extends(JournalVoucherGrid, _super);
            function JournalVoucherGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.setTitle("Journal/Adjustment Voucher");
                return _this;
            }
            JournalVoucherGrid.prototype.getAddButtonCaption = function () {
                return "New Journal Voucher";
            };
            JournalVoucherGrid.prototype.addButtonClick = function () {
                this.editItem({
                    VoucherTypeId: 3
                });
            };
            JournalVoucherGrid.prototype.onViewSubmit = function () {
                if (!_super.prototype.onViewSubmit.call(this)) {
                    return false;
                }
                var request = this.view.params;
                request.Criteria = Serenity.Criteria.and(request.Criteria, [['VoucherTypeId'], '=', 3]);
                return true;
            };
            JournalVoucherGrid.prototype.getColumns = function () {
                var columns = _super.prototype.getColumns.call(this);
                columns = columns.filter(function (x) { return x.field != "TransactionMode" /* TransactionMode */; });
                columns = columns.filter(function (x) { return x.field != "ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */; });
                columns = columns.filter(function (x) { return x.field != "LinkedWithAutoJV" /* LinkedWithAutoJV */; });
                // It is using to change backcolor of approved voucher.
                Q.first(columns, function (x) { return x.field == "approveStatus" /* approveStatus */; }).cssClass += " col-Approve-Status";
                return columns;
            };
            JournalVoucherGrid.prototype.getItemCssClass = function (item, index) {
                var klass = "";
                if (item.approveStatus === VistaGL.ApprovalStatus.Approved) {
                    klass += " approved-Voucher";
                }
                if (item.LinkedWithDebitVoucher) {
                    klass += " linked-Journal-Voucher";
                }
                return Q.trimToNull(klass);
            };
            JournalVoucherGrid.prototype.getQuickFilters = function () {
                var filters = _super.prototype.getQuickFilters.call(this);
                Q.tryFirst(filters, function (x) { return x.field == "LinkedWithDebitVoucher" /* LinkedWithDebitVoucher */; }).init = function (w) {
                    w.value = "false";
                };
                return filters;
            };
            JournalVoucherGrid.prototype.getViewOptions = function () {
                var opt = _super.prototype.getViewOptions.call(this);
                opt.rowsPerPage = 20;
                return opt;
            };
            JournalVoucherGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], JournalVoucherGrid);
            return JournalVoucherGrid;
        }(Transaction.AccVoucherInformationGrid));
        Transaction.JournalVoucherGrid = JournalVoucherGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
/// <reference path="../accvoucherinformationgrid.ts" />
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var PaymentGrid = (function (_super) {
            __extends(PaymentGrid, _super);
            function PaymentGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.setTitle("Bank Wise Payment Voucher");
                return _this;
            }
            PaymentGrid.prototype.getAddButtonCaption = function () {
                return "New Bank Wise Payment Voucher";
            };
            //protected addButtonClick() {
            //    //this.editItem(<Northwind.OrderRow>{
            //    //    CustomerID: 'ANTON',
            //    //    RequiredDate: Q.formatDate(new Date(), 'yyyy-MM-dd'),
            //    //    EmployeeID: Northwind.EmployeeRow.getLookup().items
            //    //        .filter(x => x.FullName === 'Robert King')[0].EmployeeID,
            //    //    ShipVia: Northwind.ShipperRow.getLookup().items
            //    //        .filter(x => x.CompanyName === 'Speedy Express')[0].ShipperID
            //    //});
            //}
            //protected getButtons() {
            //    let buttons = super.getButtons();
            //    buttons.push({
            //        title: "Payment",
            //        cssClass: 'tool-button add-button',
            //        //icon: 'icon-lock-open text-green',
            //        onClick: () => {
            //            new AccVoucherBankWiseDialog().dialogOpen();
            //            this.editItem(<AccVoucherInformationRow>{
            //                VoucherTypeId: 1
            //            });
            //        }
            //    });
            //    return buttons;
            //}
            PaymentGrid.prototype.addButtonClick = function () {
                this.editItem({
                    VoucherTypeId: 1 // BANK WISE PAYMENT VOUCHER
                });
            };
            PaymentGrid.prototype.onViewSubmit = function () {
                if (!_super.prototype.onViewSubmit.call(this)) {
                    return false;
                }
                var request = this.view.params;
                request.Criteria = Serenity.Criteria.and(request.Criteria, [['VoucherTypeId'], '=', 1]);
                return true;
            };
            PaymentGrid.prototype.subDialogDataChange = function () {
                _super.prototype.subDialogDataChange.call(this);
                Q.reloadLookup('Transaction.AccChequeRegister_Lookup');
                //  Q.reloadLookup('Transaction.AccChequeReceiveRegister_Lookup');
            };
            PaymentGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], PaymentGrid);
            return PaymentGrid;
        }(Transaction.AccVoucherBankWiseGrid));
        Transaction.PaymentGrid = PaymentGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
/// <reference path="../accvoucherinformationgrid.ts" />
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var PaymentVoucherGrid = (function (_super) {
            __extends(PaymentVoucherGrid, _super);
            function PaymentVoucherGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.setTitle("Payment Voucher");
                return _this;
            }
            PaymentVoucherGrid.prototype.getAddButtonCaption = function () {
                return "New Payment Voucher";
            };
            /**
             * This method is called when New Item button is clicked.
             * By default, it calls EditItem with an empty entity.
             * This is a good place to fill in default values for New Item button.
             */
            //protected addButtonClick() {
            //    //this.editItem(<Northwind.OrderRow>{
            //    //    CustomerID: 'ANTON',
            //    //    RequiredDate: Q.formatDate(new Date(), 'yyyy-MM-dd'),
            //    //    EmployeeID: Northwind.EmployeeRow.getLookup().items
            //    //        .filter(x => x.FullName === 'Robert King')[0].EmployeeID,
            //    //    ShipVia: Northwind.ShipperRow.getLookup().items
            //    //        .filter(x => x.CompanyName === 'Speedy Express')[0].ShipperID
            //    //});
            //}
            PaymentVoucherGrid.prototype.addButtonClick = function () {
                this.editItem({
                    VoucherTypeId: 1
                });
            };
            PaymentVoucherGrid.prototype.onViewSubmit = function () {
                if (!_super.prototype.onViewSubmit.call(this)) {
                    return false;
                }
                var request = this.view.params;
                request.Criteria = Serenity.Criteria.and(request.Criteria, [['VoucherTypeId'], '=', 1]);
                return true;
            };
            PaymentVoucherGrid.prototype.getColumns = function () {
                var columns = _super.prototype.getColumns.call(this);
                columns = columns.filter(function (x) { return x.field != "TransactionMode" /* TransactionMode */; });
                columns = columns.filter(function (x) { return x.field != "LinkedWithDebitVoucher" /* LinkedWithDebitVoucher */; });
                // It is using to change backcolor of approved voucher.
                Q.first(columns, function (x) { return x.field == "approveStatus" /* approveStatus */; }).cssClass += " col-Approve-Status";
                return columns;
            };
            PaymentVoucherGrid.prototype.getItemCssClass = function (item, index) {
                var klass = "";
                if (item.approveStatus == VistaGL.ApprovalStatus.Approved) {
                    klass += " approved-Voucher";
                }
                return Q.trimToNull(klass);
            };
            PaymentVoucherGrid.prototype.subDialogDataChange = function () {
                _super.prototype.subDialogDataChange.call(this);
                Q.reloadLookup('Transaction.AccChequeRegister_Lookup');
                //  Q.reloadLookup('Transaction.AccChequeReceiveRegister_Lookup');
            };
            PaymentVoucherGrid.prototype.getViewOptions = function () {
                var opt = _super.prototype.getViewOptions.call(this);
                opt.rowsPerPage = 20;
                return opt;
            };
            PaymentVoucherGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], PaymentVoucherGrid);
            return PaymentVoucherGrid;
        }(Transaction.AccVoucherInformationGrid));
        Transaction.PaymentVoucherGrid = PaymentVoucherGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
/// <reference path="../accvoucherinformationgrid.ts" />
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var ReceiptGrid = (function (_super) {
            __extends(ReceiptGrid, _super);
            function ReceiptGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.setTitle("Bank Wise Receipt Voucher");
                return _this;
            }
            ReceiptGrid.prototype.getAddButtonCaption = function () {
                return "New Bank Wise Receipt Voucher";
            };
            /**
             * This method is called when New Item button is clicked.
             * By default, it calls EditItem with an empty entity.
             * This is a good place to fill in default values for New Item button.
             */
            //protected addButtonClick() {
            //    //this.editItem(<Northwind.OrderRow>{
            //    //    CustomerID: 'ANTON',
            //    //    RequiredDate: Q.formatDate(new Date(), 'yyyy-MM-dd'),
            //    //    EmployeeID: Northwind.EmployeeRow.getLookup().items
            //    //        .filter(x => x.FullName === 'Robert King')[0].EmployeeID,
            //    //    ShipVia: Northwind.ShipperRow.getLookup().items
            //    //        .filter(x => x.CompanyName === 'Speedy Express')[0].ShipperID
            //    //});
            //}
            ReceiptGrid.prototype.addButtonClick = function () {
                this.editItem({
                    VoucherTypeId: 2
                });
            };
            ReceiptGrid.prototype.onViewSubmit = function () {
                // only continue if base class returns true (didn't cancel request)
                if (!_super.prototype.onViewSubmit.call(this)) {
                    return false;
                }
                // view object is the data source for grid (SlickRemoteView)
                // this is an EntityGrid so its Params object is a ListRequest
                var request = this.view.params;
                // list request has a Criteria parameter
                // we AND criteria here to existing one because
                // otherwise we might clear filter set by
                // an edit filter dialog if any.
                request.Criteria = Serenity.Criteria.and(request.Criteria, [['VoucherTypeId'], '=', 2]);
                // TypeScript doesn't support operator overloading
                // so we had to use array syntax above to build criteria.
                // Make sure you write
                // [['Field'], '>', 10] (which means field A is greater than 10)
                // not
                // ['A', '>', 10] (which means string 'A' is greater than 10
                return true;
            };
            ReceiptGrid.prototype.subDialogDataChange = function () {
                _super.prototype.subDialogDataChange.call(this);
                // Q.reloadLookup('Transaction.AccChequeRegister_Lookup');
                Q.reloadLookup('Transaction.AccChequeReceiveRegister_Lookup');
            };
            ReceiptGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], ReceiptGrid);
            return ReceiptGrid;
        }(Transaction.AccVoucherBankWiseGrid));
        Transaction.ReceiptGrid = ReceiptGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
/// <reference path="../accvoucherinformationgrid.ts" />
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var ReceiptVoucherGrid = (function (_super) {
            __extends(ReceiptVoucherGrid, _super);
            function ReceiptVoucherGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.setTitle("Receipt Voucher");
                return _this;
            }
            ReceiptVoucherGrid.prototype.getAddButtonCaption = function () {
                return "New Receipt Voucher";
            };
            /**
             * This method is called when New Item button is clicked.
             * By default, it calls EditItem with an empty entity.
             * This is a good place to fill in default values for New Item button.
             */
            //protected addButtonClick() {
            //    //this.editItem(<Northwind.OrderRow>{
            //    //    CustomerID: 'ANTON',
            //    //    RequiredDate: Q.formatDate(new Date(), 'yyyy-MM-dd'),
            //    //    EmployeeID: Northwind.EmployeeRow.getLookup().items
            //    //        .filter(x => x.FullName === 'Robert King')[0].EmployeeID,
            //    //    ShipVia: Northwind.ShipperRow.getLookup().items
            //    //        .filter(x => x.CompanyName === 'Speedy Express')[0].ShipperID
            //    //});
            //}
            ReceiptVoucherGrid.prototype.addButtonClick = function () {
                this.editItem({
                    VoucherTypeId: 2
                });
            };
            ReceiptVoucherGrid.prototype.onViewSubmit = function () {
                if (!_super.prototype.onViewSubmit.call(this)) {
                    return false;
                }
                var request = this.view.params;
                request.Criteria = Serenity.Criteria.and(request.Criteria, [['VoucherTypeId'], '=', 2]);
                return true;
            };
            ReceiptVoucherGrid.prototype.getColumns = function () {
                var columns = _super.prototype.getColumns.call(this);
                columns = columns.filter(function (x) { return x.field != "TransactionMode" /* TransactionMode */; });
                columns = columns.filter(function (x) { return x.field != "LinkedWithDebitVoucher" /* LinkedWithDebitVoucher */; });
                // It is using to change backcolor of approved voucher.
                Q.first(columns, function (x) { return x.field == "approveStatus" /* approveStatus */; }).cssClass += " col-Approve-Status";
                return columns;
            };
            ReceiptVoucherGrid.prototype.getItemCssClass = function (item, index) {
                var klass = "";
                if (item.approveStatus == VistaGL.ApprovalStatus.Approved) {
                    klass += " approved-Voucher";
                }
                return Q.trimToNull(klass);
            };
            ReceiptVoucherGrid.prototype.subDialogDataChange = function () {
                _super.prototype.subDialogDataChange.call(this);
                // Q.reloadLookup('Transaction.AccChequeRegister_Lookup');
                Q.reloadLookup('Transaction.AccChequeReceiveRegister_Lookup');
            };
            ReceiptVoucherGrid.prototype.getViewOptions = function () {
                var opt = _super.prototype.getViewOptions.call(this);
                opt.rowsPerPage = 20;
                return opt;
            };
            ReceiptVoucherGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], ReceiptVoucherGrid);
            return ReceiptVoucherGrid;
        }(Transaction.AccVoucherInformationGrid));
        Transaction.ReceiptVoucherGrid = ReceiptVoucherGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var TransferVoucherDialog = (function (_super) {
            __extends(TransferVoucherDialog, _super);
            //public _VoucherDtlAllocation: AccVoucherDtlAllocationRow[];
            function TransferVoucherDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Transaction.TransferVoucherForm(_this.idPrefix);
                //public items_CurrencyConversionRate = Configurations.AccCurrencyConversionRateRow.getLookup().items;
                //public AccChequeRegister = AccChequeRegisterRow.getLookup().items;
                //public AccTransactionTypeAssign = AccTransactionTypeAssignRow.getLookup().items;
                _this._VoucherConfiguration = Transaction.AccVoucherConfigurationRow.getLookup().items;
                _this._AccountingPeriod = VistaGL.Configurations.AccAccountingPeriodInformationRow.getLookup().items;
                _this.nextId = 1;
                _this.isFristTime = true;
                _this._IsCostCenterAllocate = 0;
                _this._IsBillRef = 0;
                $('.ui-dialog-titlebar-maximize').click();
                //Generate button
                var fieldButt = $('.AddtoGrid')[0];
                fieldButt.innerHTML = "<label class=\"caption\" title=\"\"></label>\n                <a href= \"javascript:;\" class=\"btn btn-default groupAdd\"> <i class=\"fa fa-fw fa-plus-circle\"> </i>Add to Grid</a>\n            ";
                return _this;
                //var _fieldButt = $('#ga0')[0];
                //fieldButt.appendChild(_fieldButt);
                // var fieldButt1 = $('.MultiCurrency')[0];
                //fieldButt1.innerHTML = `<label class="caption" id="lbMultiCurrency" title=""></label>`;
                //$("#lbMultiCurrency").text("fff");
                //this.form.VoucherNo.element.on('keyup', (e) => {
                //    // only auto number when a key between 'A' and 'Z' is pressed
                //    if (e.which >= 65 && e.which <= 90)
                //        this.setNewVoucherNumber();
                //});
            }
            TransferVoucherDialog.prototype.getFormKey = function () { return Transaction.TransferVoucherForm.formKey; };
            TransferVoucherDialog.prototype.getIdProperty = function () { return Transaction.AccVoucherInformationRow.idProperty; };
            TransferVoucherDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherInformationRow.localTextPrefix; };
            TransferVoucherDialog.prototype.getNameProperty = function () { return Transaction.AccVoucherInformationRow.nameProperty; };
            TransferVoucherDialog.prototype.getService = function () { return Transaction.AccVoucherInformationService.baseUrl; };
            TransferVoucherDialog.prototype.AddtoGrid = function () {
                //if (this.form.TransactionMode.value == "") {
                //    //   Q.alert("Please select Transaction Mode.");
                //    Q.warning("Please select Transaction Mode.");
                //    return;
                //}
                if (this.form.AccountHeadFrom.value == "") {
                    Q.warning("Please select Account From Head.");
                    return;
                }
                if (this.form.AccountHeadTo.value == "") {
                    Q.warning("Please select Account To Head.");
                    return;
                }
                //if ((this.form.DebitAmount.value.toString() == "NaN" && this.form.CreditAmount.value.toString() == "NaN")
                //    || (this.form.DebitAmount.value <= 0 && this.form.CreditAmount.value <= 0)) {
                //    Q.warning("Please enter Debit or Credit Amount 1.");
                //    return;
                //}
                if (this.form.TransferAmount.value < 1) {
                    Q.warning("Please Transfer Amount.");
                    return;
                }
                //var Check_AccHead = this.items_ChartofAccounts.filter(f => f.Id == +this.form.AccountHead.value);
                //var _amount = 0;
                //var _Damount = 0;
                //var _Camount = 0;
                //this._IsBillRef = Check_AccHead[0].IsBillRef;
                //this._IsCostCenterAllocate = Check_AccHead[0].IsCostCenterAllocate;
                if (this.form.AccountHeadFrom.value == this.form.AccountHeadTo.value) {
                    Q.alert('duplicate!');
                    return;
                }
                var _items = this.form.VoucherDetails.getItems();
                //var sameProduct = Q.tryFirst(_items, x => x.ChartofAccountsId === +this.form.AccountHead.value);
                //if (sameProduct) {
                //    Q.alert('This Chart of Accounts is already in voucher!');
                //    return;
                //}
                //this._VoucherDtlAllocation = [];
                var _details;
                _details = {};
                _details.ChartofAccountsAccountName = this.form.AccountHeadFrom.get_text(),
                    _details.ChartofAccountsId = +this.form.AccountHeadFrom.value;
                _details.CreditAmount = this.form.TransferAmount.value;
                _details.DebitAmount = 0;
                _details.CCreditAmount = this.form.TransferAmount.value;
                _details.CDebitAmount = 0;
                _details.Description = this.form.DDescription.value;
                _items.push(_details);
                _details = {};
                _details.ChartofAccountsAccountName = this.form.AccountHeadTo.get_text(),
                    _details.ChartofAccountsId = +this.form.AccountHeadTo.value;
                _details.CreditAmount = 0;
                _details.DebitAmount = this.form.TransferAmount.value;
                _details.CCreditAmount = 0;
                _details.CDebitAmount = this.form.TransferAmount.value;
                _details.Description = this.form.DDescription.value;
                _items.push(_details);
                for (var _i = 0, _items_3 = _items; _i < _items_3.length; _i++) {
                    var item = _items_3[_i];
                    var id = item.__id;
                    if (id == null) {
                        item.__id = this.nextId++;
                    }
                }
                this.form.DAmount.value = this.form.TransferAmount.value;
                this.form.CAmount.value = this.form.TransferAmount.value;
                this.form.VoucherDetails.setItems(_items);
                this.form.Amount.value = this.form.TransferAmount.value;
                this.form.AmountInWords.value = this.toWords(this.form.TransferAmount.value);
                this.ClearData();
                $('.groupAdd').toggleClass("disabled");
            };
            TransferVoucherDialog.prototype.onDialogOpen = function () {
                var _this = this;
                _super.prototype.onDialogOpen.call(this);
                //q.initDetailEditor(this, this.form.VoucherDetails);
                //this.form.VoucherDetails.parentDialog = this;
                this.items_ChartofAccounts = Q.getLookup('Configurations.AccChartofAccounts_Lookup').items;
                $('.VoucherDetails .grid-toolbar').hide();
                //  $('.MultiCurrency .caption').hide();
                $('.groupAdd').click(function (e) { return _this.AddtoGrid(); });
                var fieldAccountHeadFrom = $('.AccountHeadFrom .caption')[0];
                var fieldAccountHeadTo = $('.AccountHeadTo .caption')[0];
                fieldAccountHeadTo.innerHTML = "<sup title=\"this field is required\">*</sup>Bank Acc. (To)";
                fieldAccountHeadFrom.innerHTML = "<sup title=\"this field is required\">*</sup>Bank Acc. (From)";
                this.form.TransactionType.value = "PAYMENT";
                this.form.TransactionMode.value = "Other";
                this.form.VoucherType.value = "Debit";
                this.form.VoucherTypeId.value = "4";
                this.form.TransactionTypeEntityId.value = this.form.TransactionTypeEntityId.items[0].id;
                this.getNextNumber();
                this.form.TransferType.change(function (p) {
                    var fieldAccountHeadFrom = $('.AccountHeadFrom .caption')[0];
                    var fieldAccountHeadTo = $('.AccountHeadTo .caption')[0];
                    var CoaMappingF = "BANK";
                    var CoaMappingT = "BANK";
                    if (_this.form.TransferType.value == "1") {
                        CoaMappingF = "BANK";
                        CoaMappingT = "CASH";
                        fieldAccountHeadTo.innerHTML = "<sup title=\"this field is required\">*</sup>Cash (To)";
                        fieldAccountHeadFrom.innerHTML = "<sup title=\"this field is required\">*</sup>Bank Acc. (From)";
                    }
                    else if (_this.form.TransferType.value == "2") {
                        CoaMappingF = "CASH";
                        CoaMappingT = "BANK";
                        fieldAccountHeadTo.innerHTML = "<sup title=\"this field is required\">*</sup>Bank Acc. (To)";
                        fieldAccountHeadFrom.innerHTML = "<sup title=\"this field is required\">*</sup>Cash (From)";
                    }
                    else {
                        fieldAccountHeadTo.innerHTML = "<sup title=\"this field is required\">*</sup>Bank Acc. (To)";
                        fieldAccountHeadFrom.innerHTML = "<sup title=\"this field is required\">*</sup>Bank Acc. (From)";
                    }
                    var itemsFrom = _this.items_ChartofAccounts.filter(function (f) { return f.IsControlhead == 0 && f.CoaMapping == CoaMappingF; });
                    var itemsTo = _this.items_ChartofAccounts.filter(function (f) { return f.IsControlhead == 0 && f.CoaMapping == CoaMappingT; });
                    _this.form.AccountHeadFrom.value = "";
                    _this.form.AccountHeadFrom.clearItems();
                    for (var _i = 0, itemsFrom_1 = itemsFrom; _i < itemsFrom_1.length; _i++) {
                        var itemFrom = itemsFrom_1[_i];
                        _this.form.AccountHeadFrom.addItem({ id: itemFrom.Id.toString(), text: itemFrom.AccountName, source: null, disabled: false });
                    }
                    _this.form.AccountHeadTo.value = "";
                    _this.form.AccountHeadTo.clearItems();
                    for (var _a = 0, itemsTo_1 = itemsTo; _a < itemsTo_1.length; _a++) {
                        var itemTo = itemsTo_1[_a];
                        _this.form.AccountHeadTo.addItem({ id: itemTo.Id.toString(), text: itemTo.AccountName, source: null, disabled: false });
                    }
                });
                if (!this.isNew()) {
                    $('.groupAdd').toggleClass("disabled");
                    var dAmount = 0;
                    var cAmount = 0;
                    for (var _i = 0, _a = this.form.VoucherDetails.value; _i < _a.length; _i++) {
                        var i = _a[_i];
                        if (i.CreditAmount != undefined)
                            cAmount += i.CreditAmount;
                        if (i.DebitAmount != undefined)
                            dAmount += i.DebitAmount;
                    }
                    this.form.DAmount.value = dAmount;
                    this.form.CAmount.value = cAmount;
                }
                this.set_dialogTitle("Contra/Transfer Voucher");
            };
            TransferVoucherDialog.prototype.ClearData = function () {
                this.form.AccountHeadFrom.value = null;
                this.form.AccountHeadTo.value = null;
                this.form.TransferAmount.value = 0;
                this.form.DDescription.value = "";
            };
            TransferVoucherDialog.prototype.getSaveEntity = function () {
                var _this = this;
                var _entity = _super.prototype.getSaveEntity.call(this);
                var _vc = this._VoucherConfiguration.filter(function (p) { return p.FundControlInformationId == VistaGL.Authorization.userDefinition.FundControlInformationId && p.TransactionTypeId == +_this.form.TransactionTypeEntityId.value; });
                if (_vc.length > 0) {
                    if (_vc[0].IsAutoPost) {
                        _entity.PostingDate = this.form.VoucherDate.value;
                        _entity.PostedBy = VistaGL.Authorization.userDefinition.EmpId.toString();
                        _entity.PostToLedger = 1;
                    }
                }
                //  var entites = this.form.VoucherDetails.getItems;
                var entites = _entity.VoucherDetails;
                _entity.VoucherDetails = [];
                //   console.log(entites);
                var items = entites.map(function (v, i, a) {
                    return {
                        ChartofAccountsId: v.ChartofAccountsId,
                        DebitAmount: v.DebitAmount,
                        CreditAmount: v.CreditAmount,
                        Description: v.Description,
                        EffectiveValue: v.EffectiveValue,
                        CCreditAmount: v.CCreditAmount,
                        CDebitAmount: v.CDebitAmount,
                    };
                });
                // console.log(items);
                _entity.VoucherDetails = items;
                return _entity;
            };
            TransferVoucherDialog.prototype.getNextNumber = function () {
                this.form.VoucherNo.value = "";
                this.form.VoucherNumber.value = "";
                var fundControlId;
                var zoneId;
                var userinfo = VistaGL.Authorization.userDefinition;
                fundControlId = userinfo.FundControlInformationId;
                zoneId = userinfo.ZoneID;
                var voucherDate = new Date(this.form.VoucherDate.value);
                var _VoucherDate = this.form.VoucherDate.valueAsDate;
                var _piriod = this._AccountingPeriod.filter(function (j) { return _VoucherDate >= Q.parseISODateTime(j.PeriodStartDate)
                    && _VoucherDate <= Q.parseISODateTime(j.PeriodEndDate); });
                if (_piriod.length == 0) {
                    Q.alert("Accounting Period not found.");
                }
                else {
                    this.form.PostingFinancialYearId.value = _piriod[0].Id.toString();
                    var financialYearId = +this.form.PostingFinancialYearId.value;
                    var transactionTypeId = +this.form.TransactionTypeEntityId.value;
                    var bankAccId = 0;
                    VoucherUtil.newVoucherNumberFactory(this._VoucherConfiguration, transactionTypeId, voucherDate, financialYearId, fundControlId, zoneId, bankAccId, function (_voucherNo, _voucherNumber) {
                        //
                        $('.VoucherNo input').val(_voucherNo);
                        $('.VoucherNumber input').val(_voucherNumber);
                    });
                }
                ////   var val = Q.trimToNull(this.form.VoucherNo.value);
                //// we will only get next number when customer ID is empty or 1 character in length
                //// if (!val || val.length <= 1) {
                //this.form.VoucherNo.value = "";
                //this.form.VoucherNumber.value = "";
                //var _vc = this._VoucherConfiguration.filter(p => p.FundControlInformationId == Authorization.userDefinition.FundControlInformationId && p.TransactionTypeId == +this.form.TransactionTypeEntityId.value);
                ////  console.log(_vc);
                //if (_vc.length > 0) {
                //    // if no customer ID yet (new record mode probably) use 'C' as a prefix
                //    var prefix = '';//(val || 'C').toUpperCase();
                //    // call our service, see CustomerEndpoint.cs and CustomerRepository.cs
                //    AccVoucherInformationService.GetNextNumber({
                //        Prefix: prefix,
                //        TransactionTypeId: +this.form.TransactionTypeEntityId.value,
                //        Length: _vc[0].NumberLength, // we want service to search for and return serials of 5 in length
                //        StartingNumber: _vc[0].StartingNumber,
                //        FundControlInformationId: fundControlId,
                //        ZoneID: zoneId,
                //        IsMonthWiseNewNumber: _vc[0].NewNumber
                //    }, response => {
                //        var _Prefix = '';
                //        if (_vc[0].Prefix != undefined)
                //            _Prefix = _vc[0].Prefix + _vc[0].Separators
                //        var _Suffix = '';
                //        if (_vc[0].Suffix != undefined)
                //            _Suffix = _vc[0].Separators + _vc[0].Suffix;
                //        var _AccountingPeriodYearName = '';
                //        if (_vc[0].AccountingPeriodYearName != undefined)
                //            _AccountingPeriodYearName = _vc[0].Separators + _vc[0].AccountingPeriodYearName;
                //        this.form.VoucherNo.value = _Prefix + response.Serial + _Suffix + _AccountingPeriodYearName;
                //        this.form.VoucherNumber.value = response.Serial;
                //        // this is to mark numerical part after prefix
                //        //  (this.form.VoucherNo.element[0] as any).setSelectionRange(prefix.length, response.Serial.length);
                //    });
                //}
                //else {
                //    Q.alert("Voucher Configuration not found.");
                //}
                ////  }
            };
            TransferVoucherDialog.prototype.toWords = function (s) {
                //var th = ['', 'thousand', 'million', 'billion', 'trillion'];
                //var dg = ['zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine'];
                //var tn = ['ten', 'eleven', 'twelve', 'thirteen', 'fourteen', 'fifteen', 'sixteen', 'seventeen', 'eighteen', 'nineteen'];
                //var tw = ['twenty', 'thirty', 'forty', 'fifty', 'sixty', 'seventy', 'eighty', 'ninety'];
                var th = ['', 'Thousand', 'Million', 'Billion', 'Trillion'];
                var dg = ['Zero', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine'];
                var tn = ['Ten', 'Eleven', 'Twelve', 'Thirteen', 'Fourteen', 'Fifteen', 'Sixteen', 'Seventeen', 'Eighteen', 'Nineteen'];
                var tw = ['Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];
                s = s.toString();
                s = s.replace(/[\, ]/g, '');
                if (s != parseFloat(s))
                    return 'not a number';
                var x = s.indexOf('.');
                if (x == -1)
                    x = s.length;
                if (x > 15)
                    return 'too big';
                var n = s.split('');
                var str = '';
                var sk = 0;
                for (var i = 0; i < x; i++) {
                    if ((x - i) % 3 == 2) {
                        if (n[i] == '1') {
                            str += tn[Number(n[i + 1])] + ' ';
                            i++;
                            sk = 1;
                        }
                        else if (n[i] != 0) {
                            str += tw[n[i] - 2] + ' ';
                            sk = 1;
                        }
                    }
                    else if (n[i] != 0) {
                        str += dg[n[i]] + ' ';
                        if ((x - i) % 3 == 0)
                            str += 'hundred ';
                        sk = 1;
                    }
                    if ((x - i) % 3 == 1) {
                        if (sk)
                            str += th[(x - i - 1) / 3] + ' ';
                        sk = 0;
                    }
                }
                if (x != s.length) {
                    var y = s.length;
                    str += 'point ';
                    for (var i1 = x + 1; i1 < y; i1++)
                        str += dg[n[i1]] + ' ';
                }
                return str.replace(/\s+/g, ' ');
            };
            TransferVoucherDialog.prototype.getToolbarButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getToolbarButtons.call(this);
                buttons.push({
                    title: "print", cssClass: "print-preview-button",
                    onClick: function (x) {
                        if (_this.entityId != undefined) {
                            //var b = (new VoucherPreviewDialog());
                            //var _url = Q.resolveUrl("~/Reports/VoucherPreview?id=" + this.entityId);
                            //b._url = _url;
                            //b.dialogOpen();
                            if (_this.entity.LinkedWithAutoJV && _this.entity.LinkedWithAutoJV != null) {
                                var _url = "~/Reports/VoucherPreview/IndexCombineVoucher?id=" + _this.entityId + "&isCombineVoucher=" + true;
                            }
                            else {
                                var _url = "~/Reports/VoucherPreview?id=" + _this.entityId;
                            }
                            Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                        }
                        else {
                            Q.alert("Id not found.");
                        }
                    }
                });
                return buttons;
            };
            TransferVoucherDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], TransferVoucherDialog);
            return TransferVoucherDialog;
        }(VistaGL.EntityDialogBase));
        Transaction.TransferVoucherDialog = TransferVoucherDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var TransferVoucherGrid = (function (_super) {
            __extends(TransferVoucherGrid, _super);
            function TransferVoucherGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.setTitle("Contra/Transfer Voucher");
                return _this;
            }
            TransferVoucherGrid.prototype.getColumnsKey = function () { return 'Transaction.AccVoucherInformation'; };
            TransferVoucherGrid.prototype.getDialogType = function () { return Transaction.TransferVoucherDialog; };
            TransferVoucherGrid.prototype.getIdProperty = function () { return Transaction.AccVoucherInformationRow.idProperty; };
            TransferVoucherGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherInformationRow.localTextPrefix; };
            TransferVoucherGrid.prototype.getService = function () { return Transaction.AccVoucherInformationService.baseUrl; };
            TransferVoucherGrid.prototype.getAddButtonCaption = function () {
                return "New Contra/Transfer Voucher";
            };
            TransferVoucherGrid.prototype.onViewSubmit = function () {
                if (!_super.prototype.onViewSubmit.call(this)) {
                    return false;
                }
                var request = this.view.params;
                request.Criteria = Serenity.Criteria.and(request.Criteria, [['VoucherTypeId'], '=', 4]);
                return true;
            };
            TransferVoucherGrid.prototype.getColumns = function () {
                var columns = _super.prototype.getColumns.call(this);
                columns = columns.filter(function (x) { return x.field != "TransactionMode" /* TransactionMode */; });
                columns = columns.filter(function (x) { return x.field != "LinkedWithDebitVoucher" /* LinkedWithDebitVoucher */; });
                // It is using to change backcolor of approved voucher.
                Q.first(columns, function (x) { return x.field == "approveStatus" /* approveStatus */; }).cssClass += " col-Approve-Status";
                return columns;
            };
            TransferVoucherGrid.prototype.getItemCssClass = function (item, index) {
                var klass = "";
                if (item.approveStatus == VistaGL.ApprovalStatus.Approved) {
                    klass += " approved-Voucher";
                }
                return Q.trimToNull(klass);
            };
            TransferVoucherGrid.prototype.getViewOptions = function () {
                var opt = _super.prototype.getViewOptions.call(this);
                opt.rowsPerPage = 20;
                return opt;
            };
            TransferVoucherGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], TransferVoucherGrid);
            return TransferVoucherGrid;
        }(VistaGL.EntityGridBase));
        Transaction.TransferVoucherGrid = TransferVoucherGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var VoucherApprovalDialog = (function (_super) {
            __extends(VoucherApprovalDialog, _super);
            function VoucherApprovalDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Transaction.VoucherApprovalForm(_this.idPrefix);
                _this.items_CurrencyConversionRate = VistaGL.Configurations.AccCurrencyConversionRateRow.getLookup().items;
                _this.AccChequeRegister = Q.getLookup('Transaction.AccChequeRegister_Lookup').items; // AccChequeRegisterRow.getLookup().items;
                _this.AccTransactionTypeAssign = Transaction.AccTransactionTypeAssignRow.getLookup().items;
                _this._VoucherConfiguration = Transaction.AccVoucherConfigurationRow.getLookup().items;
                _this.nextId = 1;
                _this.isFristTime = true;
                _this._IsCostCenterAllocate = 0;
                _this._IsBillRef = 0;
                $('.ui-dialog-titlebar-maximize').click();
                _this.byId('ApplicationInformationHistory').closest('.field').hide().end().appendTo(_this.byId('TabNotes'));
                return _this;
            }
            VoucherApprovalDialog.prototype.getFormKey = function () { return Transaction.VoucherApprovalForm.formKey; };
            VoucherApprovalDialog.prototype.getIdProperty = function () { return Transaction.AccVoucherInformationRow.idProperty; };
            VoucherApprovalDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherInformationRow.localTextPrefix; };
            VoucherApprovalDialog.prototype.getNameProperty = function () { return Transaction.AccVoucherInformationRow.nameProperty; };
            VoucherApprovalDialog.prototype.getService = function () { return Transaction.VoucherApprovalService.baseUrl; };
            VoucherApprovalDialog.prototype.onDialogOpen = function () {
                var _this = this;
                _super.prototype.onDialogOpen.call(this);
                q.initDetailEditor(this, this.form.VoucherDetails);
                this.form.VoucherDetails.parentDialog = this;
                this.items_ChartofAccounts = Q.getLookup('Configurations.AccChartofAccounts_Lookup').items;
                $('.VoucherDetails .grid-toolbar').hide();
                if (!this.isNew()) {
                    var dAmount = 0;
                    var cAmount = 0;
                    for (var _i = 0, _a = this.form.VoucherDetails.value; _i < _a.length; _i++) {
                        var item = _a[_i];
                        if (item.CreditAmount == undefined || item.CreditAmount == null) { }
                        else if (item.CreditAmount.toString() != "NaN") {
                            cAmount += item.CreditAmount;
                        }
                        if (item.DebitAmount == undefined || item.DebitAmount == null) { }
                        else if (item.DebitAmount.toString() != "NaN") {
                            dAmount += item.DebitAmount;
                        }
                    }
                    this.form.DAmount.value = dAmount;
                    this.form.CAmount.value = cAmount;
                    this.form.Amount.value = this.entity.Amount;
                    this.form.AmountInWords.value = this.entity.AmountInWords;
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.TransactionMode.element), true);
                    Serenity.EditorUtils.setReadonly(this.element.find(this.form.TransactionTypeEntityId.element), true);
                    $('.AutoJVVoucherNo').hide();
                    if (this.entity.LinkedWithAutoJV) {
                        Transaction.AccVoucherInformationService.List({ Criteria: [['Id'], '=', this.entity.LinkedVoucherIdForAutoJV] }, function (r) {
                            $('.AutoJVVoucherNo').show();
                            var linkedVNo = $('.AutoJVVoucherNo')[0];
                            linkedVNo.innerHTML = '<div style="padding-top: 3px; color: blue;">' +
                                '<i><span>Linked Journal Voucher No:&nbsp;&nbsp;</span><u><a href= "JournalVoucher#edit/Id" data-item-type="Transaction.JournalVoucher" data-item-id="Id" class="LinkedJVNo">' + r.Entities[0].VoucherNo + '</a></u></i>' +
                                '</div>';
                            $('.LinkedJVNo').attr({
                                'href': 'JournalVoucher#edit/' + _this.entity.LinkedVoucherIdForAutoJV.toString(),
                                'data-item-id': _this.entity.LinkedVoucherIdForAutoJV.toString()
                            });
                        });
                    }
                    else {
                        Transaction.AccVoucherInformationService.List({ Criteria: [['LinkedVoucherIdForAutoJV'], '=', this.entity.Id] }, function (r) {
                            if (r.Entities[0] != undefined) {
                                $('.LinkedPaymentVoucherNo').show();
                                var linkedVNo = $('.LinkedPaymentVoucherNo')[0];
                                linkedVNo.innerHTML = '<div style="padding-top: 3px; color: blue;">' +
                                    '<i><span>Linked Payment Voucher No:&nbsp;&nbsp;</span><u><a href= "Payment#edit/Id" data-item-type="Transaction.PaymentVoucher" data-item-id="Id" class="LinkedPVNo">' +
                                    r.Entities[0].VoucherNo +
                                    '</a></u></i>' +
                                    '</div>';
                                $('.LinkedPVNo').attr({
                                    'href': 'Payment#edit/' + r.Entities[0].Id.toString(),
                                    'data-item-id': r.Entities[0].Id.toString()
                                });
                            }
                        });
                    }
                }
                Transaction.VoucherApprovalService.GetAmountByApprover({ Id: this.entity.Id }, function (r) {
                    var items = r.Entities;
                    for (var _i = 0, items_11 = items; _i < items_11.length; _i++) {
                        var item = items_11[_i];
                        if (item.StepTypeName == "Recommendation") {
                            if (item.MaxAmount >= _this.entity.Amount) {
                                //$('.ApproverId').hide();
                            }
                            else {
                                $('.postingSendTo').hide();
                                _this.toolbar.findButton('approve-button').hide();
                            }
                        }
                    }
                });
                Transaction.VoucherApprovalService.GetPostingSendTo({ Id: this.entity.Id }, function (r) {
                    //
                    var items = r.Entities;
                    _this.form.postingSendTo.clearItems();
                    //
                    var userInfo = VistaGL.Authorization.userDefinition;
                    var fundcontrolAprover = VistaGL.Configurations.AccFundControlZoneWiseApproverRow.getLookup().items.filter(function (x) { return x.ZoneInfoId == userInfo.ZoneID && x.FundControlId == userInfo.FundControlInformationId; });
                    if (fundcontrolAprover.length > 0) {
                        for (var _i = 0, items_12 = items; _i < items_12.length; _i++) {
                            var item = items_12[_i];
                            // var str = items[i];
                            _this.form.postingSendTo.addItem({ id: item.Id.toString(), text: item.FullName, source: null, disabled: false });
                        }
                        _this.form.postingSendTo.value = fundcontrolAprover[0].PostingById.toString();
                        // default approver
                        _this.form.ApproverId.value = fundcontrolAprover[0].ApproverId.toString();
                    }
                    else {
                        for (var _a = 0, items_13 = items; _a < items_13.length; _a++) {
                            var item = items_13[_a];
                            // var str = items[i];
                            _this.form.postingSendTo.addItem({ id: item.Id.toString(), text: item.FullName, source: null, disabled: false });
                            if (item.ApproverTypeName == "Main") {
                                _this.form.postingSendTo.value = item.Id.toString();
                            }
                        }
                    }
                });
                Transaction.VoucherApprovalService.GetRegretList({ Id: this.entity.Id }, function (r) {
                    //
                    var items = r.Entities;
                    _this.form.RegretSendTo.clearItems();
                    for (var _i = 0, items_14 = items; _i < items_14.length; _i++) {
                        var item = items_14[_i];
                        // var str = items[i];
                        _this.form.RegretSendTo.addItem({ id: item.Id.toString(), text: item.FullName, source: null, disabled: false });
                        if (item.ApproverTypeName == "Main") {
                            _this.form.RegretSendTo.value = item.Id.toString();
                        }
                    }
                });
                // title change Voucher type wise
                if (this.form.VoucherTypeId.value == "1") {
                    this.set_dialogTitle("Payment Voucher");
                }
                else if (this.form.VoucherTypeId.value == "2") {
                    this.set_dialogTitle("Receipt Voucher");
                }
                else if (this.form.VoucherTypeId.value == "3") {
                    this.set_dialogTitle("Journal/Adjustment Voucher ");
                }
                Transaction.VoucherApprovalService.GetNextApprover({ Id: this.entity.Id }, function (r) {
                    var items = r.Entities;
                    _this.form.ApproverId.clearItems();
                    for (var _i = 0, items_15 = items; _i < items_15.length; _i++) {
                        var item = items_15[_i];
                        // var str = items[i];
                        _this.form.ApproverId.addItem({ id: item.Id.toString(), text: item.FullName, source: null, disabled: false });
                    }
                });
            };
            VoucherApprovalDialog.prototype.validateBeforeSave = function () {
                var result = _super.prototype.validateBeforeSave.call(this);
                if (this.form.VoucherTypeId.value == "1" && this.form.PaytoOrReciveFrom.value == "") {
                    Q.alert("Enter Pay To Please!");
                    result = false;
                }
                if (result) {
                    if (this.form.CAmount.value - this.form.DAmount.value != 0) {
                        Q.alert("Debit Amount and Credit Amount not match.");
                        result = false;
                    }
                }
                return result;
            };
            VoucherApprovalDialog.prototype.afterLoadEntity = function () {
                _super.prototype.afterLoadEntity.call(this);
            };
            VoucherApprovalDialog.prototype.getToolbarButtons = function () {
                var _this = this;
                var buttons = []; //super.getToolbarButtons();
                //buttons.shift();
                //buttons.shift();
                buttons.push({
                    title: "Recommend", cssClass: "send-button",
                    onClick: function (x) {
                        var message = "Are you sure you want to Recommend?";
                        Q.confirm(message, function () {
                            if (_this.form.ApproverId.value == "") {
                                Q.alert("Select Approver Please!");
                                return;
                            }
                            _this.form.approveStatus.value = VistaGL.ApprovalStatus.Recommend.toString();
                            _this.form.ApprovalAction.value = VistaGL.ApprovalStatus.Recommend.toString();
                            _this.form.EmpId.value = +_this.form.ApproverId.value;
                            //  this.form.PostingDate.value = this.form.VoucherDate.value;
                            //    this.form.PostedBy.value = Authorization.userDefinition.EmpId.toString();
                            // this.form.PostToLedger.value = 1;
                            _this.save(function (p) { Q.notifySuccess("success"); _this.dialogClose(); });
                        });
                    }
                });
                buttons.push({
                    title: "Approve", cssClass: "approve-button",
                    onClick: function (x) {
                        var message = "Are you sure you want to Approve?";
                        Q.confirm(message, function () {
                            if (_this.form.postingSendTo.value == "") {
                                Q.alert("Select Send To Please!");
                                return;
                            }
                            _this.form.approveStatus.value = VistaGL.ApprovalStatus.Approved.toString();
                            _this.form.ApprovalAction.value = VistaGL.ApprovalStatus.Approved.toString();
                            //  this.form.PostingDate.value = this.form.VoucherDate.value;
                            //    this.form.PostedBy.value = Authorization.userDefinition.EmpId.toString();
                            // this.form.PostToLedger.value = 1;
                            _this.save(function (p) { Q.notifySuccess("success"); _this.dialogClose(); });
                        });
                    }
                });
                buttons.push({
                    title: "Cancel", cssClass: "reject",
                    onClick: function (x) {
                        var message = 'Are you sure you want to Cancel?';
                        Q.confirm(message, function () {
                            if (_this.form.ApprovalComments.value == "") {
                                Q.notifyWarning("Enter Comments Please!");
                                return;
                            }
                            _this.form.approveStatus.value = VistaGL.ApprovalStatus.Cancel.toString();
                            _this.form.ApprovalAction.value = VistaGL.ApprovalStatus.Cancel.toString();
                            _this.save(function (p) { Q.notifySuccess("Cancel"); _this.dialogClose(); });
                        });
                    }
                });
                buttons.push({
                    title: "Regret", cssClass: "send-button",
                    onClick: function (x) {
                        var message = 'Are you sure you want to Regret?';
                        Q.confirm(message, function () {
                            if (_this.form.RegretSendTo.value == "") {
                                Q.notifyWarning("Select Regret To Please!");
                                return;
                            }
                            if (_this.form.ApprovalComments.value == "") {
                                Q.notifyWarning("Enter Comments Please!");
                                return;
                            }
                            _this.form.approveStatus.value = VistaGL.ApprovalStatus.Regret.toString();
                            _this.form.ApprovalAction.value = VistaGL.ApprovalStatus.Regret.toString();
                            _this.form.EmpId.value = +_this.form.ApproverId.value;
                            _this.save(function (p) { Q.notifySuccess("Regret"); _this.dialogClose(); });
                        });
                    }
                });
                return buttons;
            };
            VoucherApprovalDialog.prototype.toWords = function (s) {
                var th = ['', 'Thousand', 'Million', 'Billion', 'Trillion'];
                var dg = ['Zero', 'One', 'Two', 'Three', 'Four', 'Five', 'Six', 'Seven', 'Eight', 'Nine'];
                var tn = ['Ten', 'Eleven', 'Twelve', 'Thirteen', 'Fourteen', 'Fifteen', 'Sixteen', 'Seventeen', 'Eighteen', 'Nineteen'];
                var tw = ['Twenty', 'Thirty', 'Forty', 'Fifty', 'Sixty', 'Seventy', 'Eighty', 'Ninety'];
                s = s.toString();
                s = s.replace(/[\, ]/g, '');
                if (s != parseFloat(s))
                    return 'not a number';
                var x = s.indexOf('.');
                if (x == -1)
                    x = s.length;
                if (x > 15)
                    return 'too big';
                var n = s.split('');
                var str = '';
                var sk = 0;
                for (var i = 0; i < x; i++) {
                    if ((x - i) % 3 == 2) {
                        if (n[i] == '1') {
                            str += tn[Number(n[i + 1])] + ' ';
                            i++;
                            sk = 1;
                        }
                        else if (n[i] != 0) {
                            str += tw[n[i] - 2] + ' ';
                            sk = 1;
                        }
                    }
                    else if (n[i] != 0) {
                        str += dg[n[i]] + ' ';
                        if ((x - i) % 3 == 0)
                            str += 'hundred ';
                        sk = 1;
                    }
                    if ((x - i) % 3 == 1) {
                        if (sk)
                            str += th[(x - i - 1) / 3] + ' ';
                        sk = 0;
                    }
                }
                if (x != s.length) {
                    var y = s.length;
                    str += 'point ';
                    for (var i1 = x + 1; i1 < y; i1++)
                        str += dg[n[i1]] + ' ';
                }
                return str.replace(/\s+/g, ' ');
            };
            VoucherApprovalDialog = __decorate([
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], VoucherApprovalDialog);
            return VoucherApprovalDialog;
        }(VistaGL.EntityDialogBase));
        Transaction.VoucherApprovalDialog = VoucherApprovalDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var VoucherApprovalGrid = (function (_super) {
            __extends(VoucherApprovalGrid, _super);
            function VoucherApprovalGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.pendingChanges = {};
                _this.setTitle("Voucher Approval");
                return _this;
            }
            VoucherApprovalGrid.prototype.getColumnsKey = function () { return 'Transaction.VoucherApproval'; };
            VoucherApprovalGrid.prototype.getDialogType = function () { return Transaction.VoucherApprovalDialog; };
            VoucherApprovalGrid.prototype.getIdProperty = function () { return Transaction.AccVoucherInformationRow.idProperty; };
            VoucherApprovalGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherInformationRow.localTextPrefix; };
            VoucherApprovalGrid.prototype.getService = function () { return Transaction.VoucherApprovalService.baseUrl; };
            VoucherApprovalGrid.prototype.onViewSubmit = function () {
                if (!_super.prototype.onViewSubmit.call(this)) {
                    return false;
                }
                $('.s-FilterDisplayBar .reset').show();
                $('.s-FilterDisplayBar .current').show();
                var request = this.view.params;
                if (request.EqualityFilter['approveStatus'].toString() == VistaGL.ApprovalStatus.Regret.toString()) {
                    request.Criteria = Serenity.Criteria.and(request.Criteria, [['approveStatus'], '=', VistaGL.ApprovalStatus.Regret.toString()]);
                    $('.s-FilterDisplayBar .current .txt').html('[Approve Status = Regret]');
                }
                else if (request.EqualityFilter['approveStatus'].toString() == VistaGL.ApprovalStatus.Cancel.toString()) {
                    request.Criteria = Serenity.Criteria.and(request.Criteria, [['approveStatus'], '=', VistaGL.ApprovalStatus.Cancel.toString()]);
                    $('.s-FilterDisplayBar .current .txt').html('[Approve Status = Cancel]');
                }
                else {
                    var approvalCriteria = Serenity.Criteria.or([['approveStatus'], '=', VistaGL.ApprovalStatus.Submit.toString()], [['approveStatus'], '=', VistaGL.ApprovalStatus.Recommend.toString()]);
                    request.Criteria = Serenity.Criteria.and(request.Criteria, approvalCriteria);
                    if (request.EqualityFilter['approveStatus'].toString() == "")
                        $('.s-FilterDisplayBar .current .txt')
                            .html('[Approve Status = Submit or Approve Status = Recommend]');
                    else
                        $('.s-FilterDisplayBar .current .txt').html('[Approve Status = ' +
                            VistaGL.ApprovalStatus[request.EqualityFilter['approveStatus']] +
                            ']');
                }
                return true;
            };
            VoucherApprovalGrid.prototype.usePager = function () { return false; };
            VoucherApprovalGrid.prototype.onViewProcessData = function (response) {
                response = _super.prototype.onViewProcessData.call(this, response);
                $('.approve-button').show();
                $('.recommend-button').show();
                if (response.Entities.length == 0) {
                    return response;
                }
                var entity = response.Entities.filter(function (e) { return e.ApprovalAction != ""; })[0];
                if (entity == undefined) {
                    entity = response.Entities[0];
                }
                var approvalActionLookup = $('#ddl11');
                if (approvalActionLookup.length == 0) {
                    $('.buttons-inner').append('');
                    var ddl = $('<select />');
                    ddl.addClass('selectApprover');
                    ddl.attr('id', 'ddl11');
                    ddl.css("width", 250);
                    var currentApproverType_1 = "Recommender";
                    var defaultTextinDDL_1 = '';
                    Transaction.VoucherApprovalService.IsVoucherApprover({}, function (response) {
                        if (response.IsApprover) {
                            currentApproverType_1 = "Approver";
                            defaultTextinDDL_1 = '--- Send To/Forward To ---';
                        }
                        else {
                            defaultTextinDDL_1 = '--- Forward To ---';
                        }
                        if (currentApproverType_1 == "Approver") {
                            $('.approve-button').show();
                            $('.recommend-button').show();
                            $('<option />', { value: '', text: defaultTextinDDL_1 }).appendTo(ddl);
                            Transaction.VoucherApprovalService.GetPostingSendTo({ Id: entity.Id }, function (r) {
                                //
                                var items = r.Entities;
                                for (var _i = 0, items_16 = items; _i < items_16.length; _i++) {
                                    var item = items_16[_i];
                                    //if (item.ApproverTypeName == "Main")
                                    {
                                        $('<option />', { value: item.Id.toString(), text: item.FullName }).appendTo(ddl);
                                    }
                                }
                            });
                            Transaction.VoucherApprovalService.GetNextApprover({ Id: entity.Id }, function (r) {
                                var items = r.Entities;
                                for (var _i = 0, items_17 = items; _i < items_17.length; _i++) {
                                    var item = items_17[_i];
                                    $('<option />', { value: item.Id.toString(), text: item.FullName }).appendTo(ddl);
                                }
                            });
                        }
                        else if (currentApproverType_1 == "Recommender") {
                            //--
                            $('.approve-button').hide();
                            $('<option />', { value: '', text: defaultTextinDDL_1 }).appendTo(ddl);
                            Transaction.VoucherApprovalService.GetNextApprover({ Id: entity.Id }, function (r) {
                                var items = r.Entities;
                                for (var _i = 0, items_18 = items; _i < items_18.length; _i++) {
                                    var item = items_18[_i];
                                    $('<option />', { value: item.Id.toString(), text: item.FullName }).appendTo(ddl);
                                }
                            });
                        }
                        ddl.appendTo('.buttons-inner');
                        $('select.selectApprover').select2();
                        $('select.selectApprover').select2('data', { id: '', text: defaultTextinDDL_1 });
                    });
                }
                return response;
            };
            VoucherApprovalGrid.prototype.createToolbarExtensions = function () {
                _super.prototype.createToolbarExtensions.call(this);
                this.rowSelection = new Serenity.GridRowSelectionMixin(this);
            };
            VoucherApprovalGrid.prototype.getButtons = function () {
                var _this = this;
                var b = _super.prototype.getButtons.call(this);
                b.shift();
                //--
                b.push({
                    title: 'Approve',
                    cssClass: 'approve-button',
                    onClick: function (x) {
                        if ($('.selectApprover').select2("val") == "") {
                            Q.notifyError("Select send to from dropdown please!");
                            return;
                        }
                        var message = "Are you sure you want to approve this voucher?";
                        Q.confirm(message, function () {
                            _this.saveClick(VistaGL.ApprovalStatus.Approved);
                        });
                    },
                    separator: true
                });
                //--
                b.push({
                    title: 'Recommend',
                    cssClass: 'send-button recommend-button',
                    onClick: function (x) {
                        if ($('.selectApprover').select2("val") == "") {
                            Q.notifyError("Select forward to from dropdown please!");
                            return;
                        }
                        var message = "Are you sure you want to recommend this voucher?";
                        Q.confirm(message, function () {
                            _this.saveClick(VistaGL.ApprovalStatus.Recommend);
                        });
                    },
                    separator: true
                });
                ////--
                //b.push({
                //    title: 'Regret',
                //    cssClass: 'regret-button',
                //    onClick: (x) => {
                //        if ((<any>$('.selectApprover')).select2("val") == "") {
                //            Q.notifyError("Select forward to Please!");
                //            return;
                //        }
                //        let message = "Are you sure you want to regret this voucher?";
                //        Q.confirm(message, () => {
                //            this.saveClick(ApprovalStatus.Regret);
                //        });
                //    },
                //    separator: true
                //});
                ////--
                //b.push({
                //    title: 'Cancel',
                //    cssClass: 'reject-button',
                //    onClick: e => {
                //        let message = "Are you sure you want to Cancel/Reject this voucher?";
                //        Q.confirm(message, () => {
                //            this.saveClick(ApprovalStatus.Cancel);
                //        });
                //    },
                //    separator: true
                //});
                return b;
            };
            VoucherApprovalGrid.prototype.getSlickOptions = function () {
                var opt = _super.prototype.getSlickOptions.call(this);
                opt.frozenColumn = 6;
                return opt;
            };
            VoucherApprovalGrid.prototype.getColumns = function () {
                var _this = this;
                var columns = _super.prototype.getColumns.call(this);
                columns.splice(0, 0, Serenity.GridRowSelectionMixin.createSelectColumn(function () { return _this.rowSelection; }));
                columns.splice(1, 0, {
                    field: 'Print Voucher',
                    name: '',
                    format: function (ctx) { return '<a class="inline-action Print-link" title="Print Voucher">' +
                        '<i class="fa fa-print text-blue"></i></a>'; },
                    width: 24,
                    minWidth: 24,
                    maxWidth: 24
                });
                columns.splice(1, 0, {
                    field: 'Edit',
                    name: '',
                    format: function (ctx) { return '<a class="inline-action Edit-link" title="Edit Voucher">' +
                        '<i class="fa fa-edit text-red"></i></a>'; },
                    width: 24,
                    minWidth: 24,
                    maxWidth: 24
                });
                Q.first(columns, function (x) { return x.field == "approveStatus" /* approveStatus */; }).cssClass += " col-Approve-Status";
                return columns;
            };
            VoucherApprovalGrid.prototype.getItemCssClass = function (item, index) {
                var klass = "";
                if (item.LinkedWithDebitVoucher) {
                    klass += " linked-Journal-Voucher";
                }
                return Q.trimToNull(klass);
            };
            VoucherApprovalGrid.prototype.onClick = function (e, row, cell) {
                _super.prototype.onClick.call(this, e, row, cell);
                if (e.isDefaultPrevented()) {
                    return;
                }
                var item = this.itemAt(row);
                var target = $(e.target);
                //-- Print voucher
                if (target.parent().hasClass('Print-link'))
                    target = target.parent();
                if (target.hasClass("Print-link")) {
                    e.preventDefault();
                    if (item.LinkedWithAutoJV && item.LinkedWithAutoJV != null) {
                        var _url = "~/Reports/VoucherPreview/IndexCombineVoucher?id=" + item.Id + "&isCombineVoucher=" + true;
                    }
                    else {
                        var _url = "~/Reports/VoucherPreview?id=" + item.Id;
                    }
                    Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                }
                //-- Edit voucher
                if (target.parent().hasClass('Edit-link'))
                    target = target.parent();
                if (target.hasClass("Edit-link")) {
                    e.preventDefault();
                    if (item.VoucherTypeId == VistaGL.VoucherType.Payment_Voucher) {
                        var _url = "Payment#edit/" + item.Id;
                        Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                    }
                    else if (item.VoucherTypeId == VistaGL.VoucherType.Receipt_Voucher) {
                        var _url = "Receipt#edit/" + item.Id;
                        Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                    }
                    else if (item.VoucherTypeId == VistaGL.VoucherType.Journal_Voucher) {
                        var _url = "JournalVoucher#edit/" + item.Id;
                        Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                    }
                    else if (item.VoucherTypeId == VistaGL.VoucherType.Transfer_Voucher) {
                        var _url = "TransferVoucher#edit/" + item.Id;
                        Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                    }
                }
                //-- Select Single
                if (target.hasClass('select-item')) {
                    if (target.hasClass('checked')) {
                        delete this.pendingChanges[item.Id];
                    }
                    else {
                        var pending = this.pendingChanges[item.Id];
                        if (!pending) {
                            this.pendingChanges[item.Id] = pending = {};
                        }
                    }
                }
            };
            VoucherApprovalGrid.prototype.saveClick = function (approveType) {
                if (Object.keys(this.pendingChanges).length === 0) {
                    var selectedItems = this.rowSelection.getSelectedKeys();
                    if (selectedItems.length > 0) {
                        for (var i = 0; selectedItems.length > i; i++) {
                            var pending = this.pendingChanges[selectedItems[i]];
                            if (!pending) {
                                this.pendingChanges[selectedItems[i]] = pending = {};
                            }
                        }
                    }
                    if (Object.keys(this.pendingChanges).length === 0) {
                        Q.notifyError("No row is selected!");
                        return;
                    }
                }
                // this calls save service for all modified rows, one by one
                // you could write a batch update service
                var keys = Object.keys(this.pendingChanges);
                var current = -1;
                var self = this;
                (function saveNext() {
                    if (++current >= keys.length) {
                        self.refresh();
                        return;
                    }
                    var key = keys[current];
                    var entity = Q.deepClone(self.pendingChanges[key]);
                    entity.Id = key;
                    switch (approveType) {
                        case VistaGL.ApprovalStatus.Approved:
                            //
                            entity.ApprovalAction = VistaGL.ApprovalStatus.Approved.toString();
                            entity.approveStatus = VistaGL.ApprovalStatus.Approved.toString();
                            entity.postingSendTo = $('.selectApprover').select2("val");
                            break;
                        case VistaGL.ApprovalStatus.Recommend:
                            //
                            entity.ApprovalAction = VistaGL.ApprovalStatus.Recommend.toString();
                            entity.approveStatus = VistaGL.ApprovalStatus.Recommend.toString();
                            entity.EmpId = $('.selectApprover').select2("val");
                            break;
                        case VistaGL.ApprovalStatus.Regret:
                            //
                            entity.ApprovalAction = VistaGL.ApprovalStatus.Regret.toString();
                            entity.approveStatus = VistaGL.ApprovalStatus.Regret.toString();
                            entity.EmpId = $('.selectApprover').select2("val");
                            break;
                        case VistaGL.ApprovalStatus.Cancel:
                            //
                            entity.ApprovalAction = VistaGL.ApprovalStatus.Cancel.toString();
                            entity.approveStatus = VistaGL.ApprovalStatus.Cancel.toString();
                            break;
                        default:
                    }
                    entity.ApproverId = $('.selectApprover').select2("val");
                    Q.serviceRequest('Transaction/VoucherApproval/Update', {
                        EntityId: key,
                        Entity: entity
                    }, function (response) {
                        delete self.pendingChanges[key];
                        saveNext();
                    });
                })();
                Q.notifySuccess('Application has been ' + VistaGL.ApprovalStatus[approveType] + ' successfully.');
            };
            VoucherApprovalGrid.prototype.getQuickFilters = function () {
                var filters = _super.prototype.getQuickFilters.call(this);
                // --
                var filterByChequeNo = Q.tryFirst(filters, function (x) { return x.field == "ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */; });
                if (filterByChequeNo != null) {
                    filterByChequeNo.title = "Cheque No..";
                    filterByChequeNo.type = Serenity.StringEditor;
                    filterByChequeNo.handler = function (h) {
                        if (h.active) {
                            h.request.Criteria = Serenity.Criteria.and(h.request.Criteria, [["ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */], 'like', '%' + h.value + '%']);
                        }
                    };
                }
                // --
                var filterByAmount = Q.tryFirst(filters, function (x) { return x.field == "Amount" /* Amount */; });
                if (filterByAmount != null) {
                    filterByAmount.title = "Amount (Exactly)";
                }
                // --
                Q.first(filters, function (x) { return x.field == "LinkedWithDebitVoucher" /* LinkedWithDebitVoucher */; }).init = function (w) {
                    w.value = 'false';
                };
                return filters;
            };
            VoucherApprovalGrid.prototype.getQuickSearchFields = function () {
                var txt = function (s) { return Q.text("Db." + Transaction.AccVoucherInformationRow.localTextPrefix + "." + s).toLowerCase(); };
                return [
                    { name: "", title: "all" },
                    { name: "VoucherNo" /* VoucherNo */, title: txt("VoucherNo" /* VoucherNo */) },
                    { name: "Description" /* Description */, title: txt("Description" /* Description */) },
                    { name: "PaytoOrReciveFrom" /* PaytoOrReciveFrom */, title: txt("PaytoOrReciveFrom" /* PaytoOrReciveFrom */) },
                    { name: "ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */, title: txt("ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */) },
                    { name: "Amount" /* Amount */, title: txt("Amount" /* Amount */) }
                ];
            };
            VoucherApprovalGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], VoucherApprovalGrid);
            return VoucherApprovalGrid;
        }(VistaGL.EntityGridBaseNew));
        Transaction.VoucherApprovalGrid = VoucherApprovalGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherTemplateDialog = (function (_super) {
            __extends(AccVoucherTemplateDialog, _super);
            function AccVoucherTemplateDialog(container) {
                var _this = _super.call(this, container) || this;
                _this.form = new Transaction.AccVoucherTemplateForm(_this.idPrefix);
                $('.ui-dialog-titlebar-maximize').click();
                _this.form.CoaDebitHeadId.changeSelect2(function (e) {
                    // this.isCheckBankHead_Change();
                });
                //calculate SD Amout
                _this.form.IsSd.changeSelect2(function (e) {
                    if (!_this.form.IsSd.value) {
                        _this.form.CoaSdId.value = "";
                        _this.form.SdType.value = "";
                        _this.form.SdRate.value = null;
                    }
                });
                //calculate VAT Amout           
                _this.form.IsVat.changeSelect2(function (e) {
                    if (!_this.form.IsVat.value) {
                        _this.form.CoaVatId.value = "";
                        _this.form.VatType.value = "";
                        _this.form.VatRate.value = null;
                    }
                });
                //calculate TAX Amout         
                _this.form.IsTax.changeSelect2(function (e) {
                    if (!_this.form.IsTax.value) {
                        _this.form.CoaTaxId.value = "";
                        _this.form.TaxType.value = "";
                        _this.form.TaxRate.value = null;
                    }
                });
                return _this;
            }
            AccVoucherTemplateDialog.prototype.getFormKey = function () { return Transaction.AccVoucherTemplateForm.formKey; };
            AccVoucherTemplateDialog.prototype.getIdProperty = function () { return Transaction.AccVoucherTemplateRow.idProperty; };
            AccVoucherTemplateDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherTemplateRow.localTextPrefix; };
            AccVoucherTemplateDialog.prototype.getNameProperty = function () { return Transaction.AccVoucherTemplateRow.nameProperty; };
            AccVoucherTemplateDialog.prototype.getService = function () { return Transaction.AccVoucherTemplateService.baseUrl; };
            AccVoucherTemplateDialog.prototype.onDialogOpen = function () {
                if (this.isEditMode()) {
                    if (!this.form.IsSd.value) {
                        this.form.CoaSdId.value = "";
                        this.form.SdType.value = "";
                        this.form.SdRate.value = null;
                    }
                    if (!this.form.IsVat.value) {
                        this.form.CoaVatId.value = "";
                        this.form.VatType.value = "";
                        this.form.VatRate.value = null;
                    }
                    if (!this.form.IsTax.value) {
                        this.form.CoaTaxId.value = "";
                        this.form.TaxType.value = "";
                        this.form.TaxRate.value = null;
                    }
                }
            };
            AccVoucherTemplateDialog = __decorate([
                Serenity.Decorators.maximizable(),
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherTemplateDialog);
            return AccVoucherTemplateDialog;
        }(Serenity.EntityDialog));
        Transaction.AccVoucherTemplateDialog = AccVoucherTemplateDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherTemplateGrid = (function (_super) {
            __extends(AccVoucherTemplateGrid, _super);
            function AccVoucherTemplateGrid(container) {
                return _super.call(this, container) || this;
            }
            AccVoucherTemplateGrid.prototype.getColumnsKey = function () { return 'Transaction.AccVoucherTemplate'; };
            AccVoucherTemplateGrid.prototype.getDialogType = function () { return Transaction.AccVoucherTemplateDialog; };
            AccVoucherTemplateGrid.prototype.getIdProperty = function () { return Transaction.AccVoucherTemplateRow.idProperty; };
            AccVoucherTemplateGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherTemplateRow.localTextPrefix; };
            AccVoucherTemplateGrid.prototype.getService = function () { return Transaction.AccVoucherTemplateService.baseUrl; };
            AccVoucherTemplateGrid.prototype.getColumns = function () {
                var columns = _super.prototype.getColumns.call(this);
                columns.splice(Q.indexOf(columns, function (x) { return x.name == "Account Head (Credit)"; }) + 1, 0, {
                    field: 'Process',
                    name: 'Process',
                    format: function (ctx) { return '<a class="inline-action Process-row" title="Process">' +
                        '<i class="fa fa-repeat text-green"></i></a>'; },
                    width: 100,
                    minWidth: 100,
                    maxWidth: 100,
                    cssClass: 'text-center'
                });
                return columns;
            };
            AccVoucherTemplateGrid.prototype.onClick = function (e, row, cell) {
                _super.prototype.onClick.call(this, e, row, cell);
                if (e.isDefaultPrevented())
                    return;
                var item = this.itemAt(row);
                var target = $(e.target);
                // if user clicks "i" element, e.g. icon
                if (target.parent().hasClass('inline-action'))
                    target = target.parent();
                if (target.hasClass('inline-action')) {
                    e.preventDefault();
                    if (target.hasClass('Process-row')) {
                        var dlg = new Transaction.AccVoucherTemplateVoucherIssueDialog();
                        this.initDialog(dlg);
                        dlg.loadByIdAndOpenDialog(item.Id);
                        //dlg.loadEntityAndOpenDialog(<AccVoucherTemplateRow>{
                        //    VoucherTypeId: item.VoucherTypeId, 
                        //});
                    }
                }
            };
            AccVoucherTemplateGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], AccVoucherTemplateGrid);
            return AccVoucherTemplateGrid;
        }(VistaGL.EntityGridBase));
        Transaction.AccVoucherTemplateGrid = AccVoucherTemplateGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var AccVoucherTemplateVoucherIssueDialog = (function (_super) {
            __extends(AccVoucherTemplateVoucherIssueDialog, _super);
            function AccVoucherTemplateVoucherIssueDialog() {
                var _this = _super.call(this) || this;
                _this.form = new Transaction.AccVoucherTemplateVoucherIssueForm(_this.idPrefix);
                _this.items_VoucherTemplate = Transaction.AccVoucherTemplateRow.getLookup().items;
                $('.ui-dialog-titlebar-maximize').click();
                _this.form.VoucherTypeId.changeSelect2(function (e) {
                    _this.form.TemplateName.value = "";
                    _this.form.TemplateName.clearItems();
                    _this.hide_VoucherTypeId_TransactionTypeId_Change();
                });
                _this.form.TransactionTypeId.changeSelect2(function (e) {
                    _this.form.TemplateName.value = "";
                    _this.hide_VoucherTypeId_TransactionTypeId_Change();
                    var items = _this.items_VoucherTemplate.filter(function (f) { return f.TransactionTypeId.toString() == _this.form.TransactionTypeId.value; });
                    _this.form.TemplateName.clearItems();
                    for (var _i = 0, items_19 = items; _i < items_19.length; _i++) {
                        var item = items_19[_i];
                        _this.form.TemplateName.addItem({ id: item.TemplateName, text: item.TemplateName, source: null, disabled: false });
                    }
                });
                //
                _this.form.TemplateName.changeSelect2(function (e) {
                    var id = Q.first(Transaction.AccVoucherTemplateRow.getLookup().items, function (x) { return x.TemplateName == _this.form.TemplateName.value; }).Id;
                    if (id != null && id > 0) {
                        Transaction.AccVoucherTemplateService.Retrieve({
                            EntityId: id
                        }, function (response) {
                            _this.setTemplateDetails(response.Entity);
                        });
                    }
                });
                //calculate SD/VAT/TAX Amount
                _this.form.Amount.element.on('change keyup blur', function () {
                    _this.calculate_SDAmount();
                    _this.calculate_VATAmount();
                    _this.calculate_TAXAmount();
                });
                //calculate SD Amount
                _this.form.SdRate.element.on('change keyup blur', function () {
                    _this.calculate_SDAmount();
                });
                //calculate VAT Amount
                _this.form.VatRate.element.on('change keyup blur', function () {
                    _this.calculate_VATAmount();
                });
                //calculate TAX Amount
                _this.form.TaxRate.element.on('change keyup blur', function () {
                    _this.calculate_TAXAmount();
                });
                return _this;
            }
            AccVoucherTemplateVoucherIssueDialog.prototype.getFormKey = function () { return Transaction.AccVoucherTemplateVoucherIssueForm.formKey; };
            AccVoucherTemplateVoucherIssueDialog.prototype.getIdProperty = function () { return Transaction.AccVoucherTemplateRow.idProperty; };
            AccVoucherTemplateVoucherIssueDialog.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherTemplateRow.localTextPrefix; };
            AccVoucherTemplateVoucherIssueDialog.prototype.getNameProperty = function () { return Transaction.AccVoucherTemplateRow.nameProperty; };
            AccVoucherTemplateVoucherIssueDialog.prototype.getService = function () { return Transaction.AccVoucherTemplateService.baseUrl; };
            AccVoucherTemplateVoucherIssueDialog.prototype.getToolbarButtons = function () {
                var _this = this;
                var buttons = _super.prototype.getToolbarButtons.call(this);
                buttons.shift();
                buttons.shift();
                buttons.shift();
                buttons.push({
                    title: "Process", cssClass: "send-button",
                    onClick: function (x) {
                        if (_this.form.IsDebitHeadCheque.value && _this.form.DebitHeadChequeId.value == '') {
                            Q.warning("Please select Cheque No.(Dr.)");
                            return;
                        }
                        if (_this.form.IsCreditHeadCheque.value && _this.form.CreditHeadChequeId.value == '') {
                            Q.warning("Please select Cheque No.(Cr.)");
                            return;
                        }
                        if (_this.form.IsCostCenter.value && _this.form.CostCenterId.value == '') {
                            Q.warning("Please select Sub Ledger.");
                            return;
                        }
                        if (_this.form.IsBillReference.value && _this.form.BillReferenceNo.value == '') {
                            Q.warning("Please enter Bill Reference No.");
                            return;
                        }
                        if (_this.form.Amount.value.toString() == "NaN" || _this.form.Amount.value == 0) {
                            // Q.warning("Credit Amount only Bank or Cash Head.");
                            Q.alert("Amount must be greater than 0;");
                            return;
                        }
                        if (_this.form.VoucherDate.value == '' || _this.form.VoucherDate.value == null) {
                            Q.warning("Please enter Voucher Date.");
                            return;
                        }
                        if (_this.entityId != undefined) {
                            var b = (new Transaction.AccVoucherInformationDialog());
                            var entity_voucher;
                            entity_voucher = {};
                            entity_voucher.VoucherTypeId = +_this.form.VoucherTypeId.value;
                            entity_voucher.TransactionMode = _this.form.TransactionMode.value;
                            entity_voucher.VoucherDate = _this.form.VoucherDate.value;
                            b.loadEntityAndOpenDialog(entity_voucher);
                            b.form.TransactionTypeEntityId.value = _this.form.TransactionTypeId.value;
                            b.setNewVoucherNumber();
                            b.loadAccountHead();
                            b.form.DebitAmount.value = 0;
                            b.form.CreditAmount.value = 0;
                            b.form.AccountHead.value = _this.form.CoaCreditHeadId.value;
                            b.form.CreditAmount.value = _this.form.Amount.value;
                            if (_this.form.IsSd.value && _this.form.SdType.value == "Cr") {
                                b.form.CreditAmount.value = (b.form.CreditAmount.value - _this.form.SdAmount.value);
                            }
                            if (_this.form.IsVat.value && _this.form.VatType.value == "Cr") {
                                b.form.CreditAmount.value = (b.form.CreditAmount.value - _this.form.VatAmount.value);
                            }
                            if (_this.form.IsTax.value && _this.form.TaxType.value == "Cr") {
                                b.form.CreditAmount.value = (b.form.CreditAmount.value - _this.form.TaxAmount.value);
                            }
                            b.loadCheque();
                            b.form.ChequeRegisterId.value = _this.form.CreditHeadChequeId.value;
                            b.setMultiCurrencyCurrency(null, null, false);
                            b.form.ConversionRate.value = 1;
                            b.form.ConversionAmount.value = b.form.ConversionRate.value * b.form.CreditAmount.value;
                            var Check_AccHead = _this.items_ChartofAccounts.filter(function (f) { return f.Id == +_this.form.CoaCreditHeadId.value; });
                            if (Check_AccHead[0].IsCostCenterAllocate == 1) {
                                if (_this.form.CostCenterId.value != "") {
                                    b.form.CostCentreId.value = _this.form.CostCenterId.value;
                                }
                            }
                            b.addtoGrid();
                            b.form.DebitAmount.value = 0;
                            b.form.CreditAmount.value = 0;
                            b.form.AccountHead.value = _this.form.CoaDebitHeadId.value;
                            b.form.DebitAmount.value = _this.form.Amount.value;
                            if (_this.form.IsSd.value && _this.form.SdType.value == "Dr") {
                                b.form.DebitAmount.value = (b.form.DebitAmount.value - _this.form.SdAmount.value);
                            }
                            if (_this.form.IsVat.value && _this.form.VatType.value == "Dr") {
                                b.form.DebitAmount.value = (b.form.DebitAmount.value - _this.form.VatAmount.value);
                            }
                            if (_this.form.IsTax.value && _this.form.TaxType.value == "Dr") {
                                b.form.DebitAmount.value = (b.form.DebitAmount.value - _this.form.TaxAmount.value);
                            }
                            b.loadCheque();
                            b.form.ChequeRegisterId.value = _this.form.DebitHeadChequeId.value;
                            b.setMultiCurrencyCurrency(null, null, false);
                            b.form.ConversionRate.value = 1;
                            b.form.ConversionAmount.value = b.form.ConversionRate.value * b.form.DebitAmount.value;
                            var Check_AccHead2 = _this.items_ChartofAccounts.filter(function (f) { return f.Id == +_this.form.CoaDebitHeadId.value; });
                            if (Check_AccHead2[0].IsCostCenterAllocate == 1) {
                                if (_this.form.CostCenterId.value != "") {
                                    b.form.CostCentreId.value = _this.form.CostCenterId.value;
                                }
                            }
                            b.addtoGrid();
                            //SD
                            if (_this.form.IsSd.value) {
                                b.form.DebitAmount.value = 0;
                                b.form.CreditAmount.value = 0;
                                b.form.AccountHead.value = _this.form.CoaSdId.value;
                                if (_this.form.SdType.value == "Dr") {
                                    b.form.DebitAmount.value = _this.form.SdAmount.value;
                                }
                                else {
                                    b.form.CreditAmount.value = _this.form.SdAmount.value;
                                }
                                b.setMultiCurrencyCurrency(null, null, false);
                                b.form.ConversionRate.value = 1;
                                b.form.ConversionAmount.value = b.form.ConversionRate.value * _this.form.SdAmount.value;
                                var Check_AccHead3 = _this.items_ChartofAccounts.filter(function (f) { return f.Id == +_this.form.CoaSdId.value; });
                                if (Check_AccHead3[0].IsCostCenterAllocate == 1) {
                                    if (_this.form.CostCenterId.value != "") {
                                        b.form.CostCentreId.value = _this.form.CostCenterId.value;
                                    }
                                }
                                b.addtoGrid();
                            }
                            //VAT
                            if (_this.form.IsVat.value) {
                                b.form.DebitAmount.value = 0;
                                b.form.CreditAmount.value = 0;
                                b.form.AccountHead.value = _this.form.CoaVatId.value;
                                if (_this.form.VatType.value == "Dr") {
                                    b.form.DebitAmount.value = _this.form.VatAmount.value;
                                }
                                else {
                                    b.form.CreditAmount.value = _this.form.VatAmount.value;
                                }
                                b.setMultiCurrencyCurrency(null, null, false);
                                b.form.ConversionRate.value = 1;
                                b.form.ConversionAmount.value = b.form.ConversionRate.value * _this.form.VatAmount.value;
                                var Check_AccHead4 = _this.items_ChartofAccounts.filter(function (f) { return f.Id == +_this.form.CoaVatId.value; });
                                if (Check_AccHead4[0].IsCostCenterAllocate == 1) {
                                    if (_this.form.CostCenterId.value != "") {
                                        b.form.CostCentreId.value = _this.form.CostCenterId.value;
                                    }
                                }
                                b.addtoGrid();
                            }
                            //Tax
                            if (_this.form.IsTax.value) {
                                b.form.DebitAmount.value = 0;
                                b.form.CreditAmount.value = 0;
                                b.form.AccountHead.value = _this.form.CoaTaxId.value;
                                if (_this.form.TaxType.value == "Dr") {
                                    b.form.DebitAmount.value = _this.form.TaxAmount.value;
                                }
                                else {
                                    b.form.CreditAmount.value = _this.form.TaxAmount.value;
                                }
                                b.setMultiCurrencyCurrency(null, null, false);
                                b.form.ConversionRate.value = 1;
                                b.form.ConversionAmount.value = b.form.ConversionRate.value * _this.form.TaxAmount.value;
                                var Check_AccHead5 = _this.items_ChartofAccounts.filter(function (f) { return f.Id == +_this.form.CoaTaxId.value; });
                                if (Check_AccHead5[0].IsCostCenterAllocate == 1) {
                                    if (_this.form.CostCenterId.value != "") {
                                        b.form.CostCentreId.value = _this.form.CostCenterId.value;
                                    }
                                }
                                b.addtoGrid();
                            }
                            b.form.Description.value = _this.form.Remarks.value;
                        }
                    }
                });
                return buttons;
            };
            //DebitAmount
            AccVoucherTemplateVoucherIssueDialog.prototype.hide_VoucherTypeId_TransactionTypeId_Change = function () {
                //reset
                this.form.CoaDebitHeadId.value = "";
                // this.form.CoaDebitHeadId.clearItems();
                this.form.CoaCreditHeadId.value = "";
                //this.form.CoaCreditHeadId.clearItems();
                this.form.Remarks.value = "";
                //hide
                this.form.CostCenterId.element.closest(".field").hide();
                this.form.BillReferenceNo.element.closest(".field").hide();
                //SD hide
                this.form.CoaSdId.element.closest(".field").hide();
                this.form.SdType.element.closest(".field").hide();
                this.form.SdRate.element.closest(".field").hide();
                this.form.SdAmount.element.closest(".field").hide();
                //VAT hide
                this.form.CoaVatId.element.closest(".field").hide();
                this.form.VatType.element.closest(".field").hide();
                this.form.VatRate.element.closest(".field").hide();
                this.form.VatAmount.element.closest(".field").hide();
                //TAX hide
                this.form.CoaTaxId.element.closest(".field").hide();
                this.form.TaxType.element.closest(".field").hide();
                this.form.TaxRate.element.closest(".field").hide();
                this.form.TaxAmount.element.closest(".field").hide();
            };
            AccVoucherTemplateVoucherIssueDialog.prototype.isCheckBankHead_Change = function () {
                //console.log(this.form.CoaDebitHeadId.value);
                if (this.form.CoaDebitHeadId.value == "") {
                    //console.log(this.form.CoaDebitHeadId.value);
                }
                else {
                    var selectedItem = VistaGL.Configurations.AccChartofAccountsRow.getLookup().itemById[this.form.CoaDebitHeadId.value];
                    //console.log('change keyup blur');
                }
            };
            //SD amount
            AccVoucherTemplateVoucherIssueDialog.prototype.calculate_SDAmount = function () {
                this.form.SdAmount.value = null;
                if (this.form.Amount.value > 0 && this.form.SdRate.value > 0) {
                    this.form.SdAmount.value = (this.form.Amount.value * this.form.SdRate.value) / 100;
                }
            };
            //VAT amount
            AccVoucherTemplateVoucherIssueDialog.prototype.calculate_VATAmount = function () {
                this.form.VatAmount.value = null;
                if (this.form.Amount.value > 0 && this.form.VatRate.value > 0) {
                    this.form.VatAmount.value = (this.form.Amount.value * this.form.VatRate.value) / 100;
                }
            };
            //TAX amount
            AccVoucherTemplateVoucherIssueDialog.prototype.calculate_TAXAmount = function () {
                this.form.TaxAmount.value = null;
                if (this.form.Amount.value > 0 && this.form.TaxRate.value > 0) {
                    this.form.TaxAmount.value = (this.form.Amount.value * this.form.TaxRate.value) / 100;
                }
            };
            AccVoucherTemplateVoucherIssueDialog.prototype.onDialogOpen = function () {
                var _this = this;
                //  var id = Q.first(Transaction.AccVoucherTemplateRow.getLookup().items, x => x.Id == this.entityId).Id;
                this.dialogTitle = "Voucher Issue Using Template";
                Transaction.AccVoucherTemplateService.Retrieve({
                    EntityId: this.entityId
                }, function (response) {
                    _this.setTemplateDetails(response.Entity);
                });
                this.items_ChartofAccounts = Q.getLookup('Configurations.AccChartofAccounts_Lookup').items;
            };
            AccVoucherTemplateVoucherIssueDialog.prototype.setTemplateDetails = function (details) {
                //load Template by transationtypeId
                var items = this.items_VoucherTemplate.filter(function (f) { return f.TransactionTypeId == details.TransactionTypeId; });
                this.form.TemplateName.clearItems();
                for (var _i = 0, items_20 = items; _i < items_20.length; _i++) {
                    var item = items_20[_i];
                    this.form.TemplateName.addItem({ id: item.TemplateName, text: item.TemplateName, source: null, disabled: false });
                }
                this.form.CoaDebitHeadId.value = details.CoaDebitHeadId.toString();
                this.form.CoaCreditHeadId.value = details.CoaCreditHeadId.toString();
                //Dr. Cheque No.
                if (details.IsDebitHeadCheque) {
                    this.form.IsDebitHeadCheque.element.closest(".field").hide();
                    this.form.DebitHeadChequeId.element.closest(".field").show();
                }
                else {
                    this.form.IsDebitHeadCheque.element.closest(".field").hide();
                    this.form.DebitHeadChequeId.element.closest(".field").hide();
                }
                //Cr. Cheque No.
                if (details.IsCreditHeadCheque) {
                    this.form.IsCreditHeadCheque.element.closest(".field").hide();
                    this.form.CreditHeadChequeId.element.closest(".field").show();
                }
                else {
                    this.form.IsCreditHeadCheque.element.closest(".field").hide();
                    this.form.CreditHeadChequeId.element.closest(".field").hide();
                }
                //bill ref no
                if (details.IsBillReference) {
                    this.form.IsBillReference.element.closest(".field").hide();
                    this.form.BillReferenceNo.element.closest(".field").show();
                }
                else {
                    this.form.IsBillReference.element.closest(".field").hide();
                    this.form.BillReferenceNo.element.closest(".field").hide();
                }
                //hide/show costcenter
                if (details.IsCostCenter) {
                    this.form.IsCostCenter.element.closest(".field").hide();
                    this.form.CostCenterId.element.closest(".field").show();
                }
                else {
                    this.form.IsCostCenter.element.closest(".field").hide();
                    this.form.CostCenterId.element.closest(".field").hide();
                }
                //hide/show security Depoist
                if (details.IsSd) {
                    this.form.IsSd.element.closest(".field").hide();
                    this.form.CoaSdId.element.closest(".field").show();
                    this.form.SdType.element.closest(".field").show();
                    this.form.SdRate.element.closest(".field").show();
                }
                else {
                    this.form.IsSd.element.closest(".field").hide();
                    this.form.CoaSdId.element.closest(".field").hide();
                    this.form.SdType.element.closest(".field").hide();
                    this.form.SdRate.element.closest(".field").hide();
                    this.form.SdAmount.element.closest(".field").hide();
                    $($('.s-Transaction-AccVoucherTemplateVoucherIssueDialog .category')[2]).hide();
                }
                //hide/show vat
                if (details.IsVat) {
                    this.form.IsVat.element.closest(".field").hide();
                    this.form.CoaVatId.element.closest(".field").show();
                    this.form.VatType.element.closest(".field").show();
                    this.form.VatRate.element.closest(".field").show();
                }
                else {
                    this.form.IsVat.element.closest(".field").hide();
                    this.form.CoaVatId.element.closest(".field").hide();
                    this.form.VatType.element.closest(".field").hide();
                    this.form.VatRate.element.closest(".field").hide();
                    this.form.VatAmount.element.closest(".field").hide();
                    $($('.s-Transaction-AccVoucherTemplateVoucherIssueDialog .category')[3]).hide();
                }
                //hide/show TAX
                if (details.IsTax) {
                    this.form.IsTax.element.closest(".field").hide();
                    this.form.CoaTaxId.element.closest(".field").show();
                    this.form.TaxType.element.closest(".field").show();
                    this.form.TaxRate.element.closest(".field").show();
                }
                else {
                    this.form.IsTax.element.closest(".field").hide();
                    this.form.CoaTaxId.element.closest(".field").hide();
                    this.form.TaxType.element.closest(".field").hide();
                    this.form.TaxRate.element.closest(".field").hide();
                    this.form.TaxAmount.element.closest(".field").hide();
                    $($('.s-Transaction-AccVoucherTemplateVoucherIssueDialog .category')[4]).hide();
                }
            };
            AccVoucherTemplateVoucherIssueDialog = __decorate([
                Serenity.Decorators.maximizable(),
                Serenity.Decorators.registerClass(),
                Serenity.Decorators.responsive()
            ], AccVoucherTemplateVoucherIssueDialog);
            return AccVoucherTemplateVoucherIssueDialog;
        }(_Ext.DialogBase));
        Transaction.AccVoucherTemplateVoucherIssueDialog = AccVoucherTemplateVoucherIssueDialog;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
/// <reference path="../../Common/Helpers/BulkServiceAction.ts" />
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var VoucherPostingBulkAction = (function (_super) {
            __extends(VoucherPostingBulkAction, _super);
            function VoucherPostingBulkAction() {
                return _super !== null && _super.apply(this, arguments) || this;
            }
            /**
             * This controls how many service requests will be used in parallel.
             * Determine this number based on how many requests your server
             * might be able to handle, and amount of wait on external resources.
             */
            VoucherPostingBulkAction.prototype.getParallelRequests = function () {
                return 10;
            };
            /**
             * These number of records IDs will be sent to your service in one
             * service call. If your service is designed to handle one record only,
             * set it to 1. But note that, if you have 5000 records, this will
             * result in 5000 service calls / requests.
             */
            VoucherPostingBulkAction.prototype.getBatchSize = function () {
                return 5;
            };
            /**
             * This is where you should call your service.
             * Batch parameter contains the selected order IDs
             * that should be processed in this service call.
             */
            VoucherPostingBulkAction.prototype.executeForBatch = function (batch) {
                var _this = this;
                Transaction.VoucherPostingService.BulkAction({
                    IDs: batch.map(function (x) { return Q.parseInteger(x); })
                }, function (response) { return _this.set_successCount(_this.get_successCount() + batch.length); }, {
                    blockUI: false,
                    onError: function (response) { return _this.set_errorCount(_this.get_errorCount() + batch.length); },
                    onCleanup: function () { return _this.serviceCallCleanup(); }
                });
            };
            return VoucherPostingBulkAction;
        }(VistaGL.Common.BulkServiceAction));
        Transaction.VoucherPostingBulkAction = VoucherPostingBulkAction;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
var VistaGL;
(function (VistaGL) {
    var Transaction;
    (function (Transaction) {
        var VoucherPostingGrid = (function (_super) {
            __extends(VoucherPostingGrid, _super);
            function VoucherPostingGrid(container) {
                var _this = _super.call(this, container) || this;
                _this.setTitle("Voucher Posting");
                return _this;
            }
            VoucherPostingGrid.prototype.getColumnsKey = function () { return 'Transaction.VoucherPosting'; };
            VoucherPostingGrid.prototype.getIdProperty = function () { return Transaction.AccVoucherInformationRow.idProperty; };
            VoucherPostingGrid.prototype.getLocalTextPrefix = function () { return Transaction.AccVoucherInformationRow.localTextPrefix; };
            VoucherPostingGrid.prototype.getService = function () { return Transaction.VoucherPostingService.baseUrl; };
            VoucherPostingGrid.prototype.createToolbarExtensions = function () {
                _super.prototype.createToolbarExtensions.call(this);
                this.rowSelection = new Serenity.GridRowSelectionMixin(this);
            };
            VoucherPostingGrid.prototype.getButtons = function () {
                var _this = this;
                var b = _super.prototype.getButtons.call(this);
                b.shift();
                b.push({
                    title: 'Perform Voucher Posting',
                    cssClass: 'send-button',
                    onClick: function () {
                        if (!_this.onViewSubmit()) {
                            return;
                        }
                        //console.log(this.rowSelection);
                        var action = new Transaction.VoucherPostingBulkAction();
                        action.done = function () { return _this.rowSelection.resetCheckedAndRefresh(); };
                        action.execute(_this.rowSelection.getSelectedKeys());
                    }
                });
                return b;
            };
            VoucherPostingGrid.prototype.getSlickOptions = function () {
                var opt = _super.prototype.getSlickOptions.call(this);
                opt.frozenColumn = 5;
                return opt;
            };
            VoucherPostingGrid.prototype.getColumns = function () {
                var _this = this;
                var columns = _super.prototype.getColumns.call(this);
                columns.splice(0, 0, Serenity.GridRowSelectionMixin.createSelectColumn(function () { return _this.rowSelection; }));
                columns.splice(1, 0, {
                    field: 'Print Voucher',
                    name: '',
                    format: function (ctx) { return '<a class="inline-action Print-link" title="Print Voucher">' +
                        '<i class="fa fa-print text-blue"></i></a>'; },
                    width: 24,
                    minWidth: 24,
                    maxWidth: 24
                });
                //columns.splice(Q.indexOf(columns, x => x.name == "Voucher No"), 0, {
                //    field: 'View',
                //    name: '',
                //    format: ctx => '<a href="javascript:;" class="view-action" title="View">' +
                //        '<i class="fa fa-eye" aria-hidden="true"></i></a>',
                //    width: 24,
                //    minWidth: 24,
                //    maxWidth: 24
                //});
                return columns;
            };
            VoucherPostingGrid.prototype.getItemCssClass = function (item, index) {
                var klass = "";
                if (item.LinkedWithAutoJV) {
                    klass += " backColorForLinkedWithAutoJV";
                }
                return Q.trimToNull(klass);
            };
            VoucherPostingGrid.prototype.getViewOptions = function () {
                var opt = _super.prototype.getViewOptions.call(this);
                opt.rowsPerPage = 2500;
                return opt;
            };
            VoucherPostingGrid.prototype.onViewSubmit = function () {
                if (!_super.prototype.onViewSubmit.call(this)) {
                    return false;
                }
                var request = this.view.params;
                request.Criteria = Serenity.Criteria.and(request.Criteria, [['postToLedger'], '=', 0]);
                return true;
            };
            VoucherPostingGrid.prototype.onClick = function (e, row, cell) {
                _super.prototype.onClick.call(this, e, row, cell);
                if (e.isDefaultPrevented())
                    return;
                var item = this.itemAt(row);
                var target = $(e.target);
                // -- ****
                if (target.parent().hasClass('Print-link'))
                    target = target.parent();
                if (target.hasClass("Print-link")) {
                    e.preventDefault();
                    if (item.LinkedWithAutoJV && item.LinkedWithAutoJV != null) {
                        var _url = "~/Reports/VoucherPreview/IndexCombineVoucher?id=" + item.Id + "&isCombineVoucher=" + true;
                    }
                    else {
                        var _url = "~/Reports/VoucherPreview?id=" + item.Id;
                    }
                    Q.postToUrl({ url: _url, params: {}, target: "_blank" });
                }
                // -- ****//
                // -- ****
                if (target.parent().hasClass('view-action'))
                    target = target.parent();
                if (target.hasClass('view-action')) {
                    var dlg = new Transaction.AccVoucherInformationDialog();
                    this.initDialog(dlg);
                    dlg.loadByIdAndOpenDialog(item.Id);
                    $($('.s-Transaction-AccVoucherInformationDialog .category')[0]).hide();
                }
                // -- ****//
            };
            VoucherPostingGrid.prototype.getQuickFilters = function () {
                var filters = _super.prototype.getQuickFilters.call(this);
                // --
                var filterByChequeNo = Q.tryFirst(filters, function (x) { return x.field == "ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */; });
                if (filterByChequeNo != null) {
                    filterByChequeNo.title = "Cheque No..";
                    filterByChequeNo.type = Serenity.StringEditor;
                    filterByChequeNo.handler = function (h) {
                        if (h.active) {
                            h.request.Criteria = Serenity.Criteria.and(h.request.Criteria, [["ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */], 'like', '%' + h.value + '%']);
                        }
                    };
                }
                // --
                var filterByAmount = Q.tryFirst(filters, function (x) { return x.field == "Amount" /* Amount */; });
                if (filterByAmount != null) {
                    filterByAmount.title = "Amount (Exactly)";
                    //filterByAmount.type = Serenity.StringEditor;
                    //filterByAmount.handler = h => {
                    //    if (h.active) {
                    //        console.log(h.value);
                    //        h.request.Criteria = Serenity.Criteria.and(h.request.Criteria,
                    //            [[fld.Amount], 'like', h.value + '%']);
                    //    }
                    //};
                }
                // --
                return filters;
            };
            VoucherPostingGrid.prototype.getQuickSearchFields = function () {
                var txt = function (s) { return Q.text("Db." + Transaction.AccVoucherInformationRow.localTextPrefix + "." + s).toLowerCase(); };
                return [
                    { name: "", title: "all" },
                    { name: "VoucherNo" /* VoucherNo */, title: txt("VoucherNo" /* VoucherNo */) },
                    { name: "Description" /* Description */, title: txt("Description" /* Description */) },
                    { name: "PaytoOrReciveFrom" /* PaytoOrReciveFrom */, title: txt("PaytoOrReciveFrom" /* PaytoOrReciveFrom */) },
                    { name: "ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */, title: txt("ChequeRegisterChequeNo" /* ChequeRegisterChequeNo */) },
                    { name: "Amount" /* Amount */, title: txt("Amount" /* Amount */) }
                ];
            };
            VoucherPostingGrid = __decorate([
                Serenity.Decorators.registerClass()
            ], VoucherPostingGrid);
            return VoucherPostingGrid;
        }(VistaGL.EntityGridBaseNew));
        Transaction.VoucherPostingGrid = VoucherPostingGrid;
    })(Transaction = VistaGL.Transaction || (VistaGL.Transaction = {}));
})(VistaGL || (VistaGL = {}));
//# sourceMappingURL=VistaGL.Web.js.map